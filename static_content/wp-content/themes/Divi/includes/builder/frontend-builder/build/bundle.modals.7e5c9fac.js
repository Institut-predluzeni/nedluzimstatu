(window.webpackETJsonp=window.webpackETJsonp||[]).push([[6],Array(732).concat([function(e,t,n){
/**
  * postmate - A powerful, simple, promise-based postMessage library
  * @version 1.1.9
  * @link https://github.com/dollarshaveclub/postmate
  * @author Jacob Kelley <jakie8@gmail.com>
  * @license MIT */
e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(){return++d}function n(){var e;h.debug&&(e=console).log.apply(e,arguments)}function r(e){var t=document.createElement("a");return t.href=e,t.origin||t.protocol+"//"+t.hostname}var o=window.navigator.userAgent.indexOf("Edge")>-1;function a(e,t){return(e.origin===t||o)&&"object"===u(e.data)&&"postmate"in e.data&&e.data.type===s&&!!{"handshake-reply":1,call:1,emit:1,reply:1,request:1}[e.data.postmate]}function i(e,t){var n="function"==typeof e[t]?e[t]():e[t];return h.Promise.resolve(n)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="application/x-postmate-v1+json",c=Object.prototype.hasOwnProperty,d=0,f=function(){function r(t){var o=this;e(this,r),this.parent=t.parent,this.frame=t.frame,this.child=t.child,this.childOrigin=t.childOrigin,this.events={},n("Parent: Registering API"),n("Parent: Awaiting messages..."),this.listener=function(e){var t=((e||{}).data||{}).value||{},r=t.data,a=t.name;"emit"===e.data.postmate&&(n("Parent: Received event emission: "+a),a in o.events&&o.events[a].call(o,r))},this.parent.addEventListener("message",this.listener,!1),n("Parent: Awaiting event emissions from Child")}return l(r,[{key:"get",value:function(e){var n=this;return new h.Promise((function(r){var o=t(),a=function e(t){t.data.uid===o&&"reply"===t.data.postmate&&(n.parent.removeEventListener("message",e,!1),r(t.data.value))};n.parent.addEventListener("message",a,!1),n.child.postMessage({postmate:"request",type:s,property:e,uid:o},n.childOrigin)}))}},{key:"call",value:function(e,t){this.child.postMessage({postmate:"call",type:s,property:e,data:t},this.childOrigin)}},{key:"on",value:function(e,t){this.events[e]=t}},{key:"destroy",value:function(){n("Parent: Destroying Postmate instance"),window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}]),r}(),p=function(){function t(r){var o=this;e(this,t),this.model=r.model,this.parent=r.parent,this.parentOrigin=r.parentOrigin,this.child=r.child,n("Child: Registering API"),n("Child: Awaiting messages..."),this.child.addEventListener("message",(function(e){if(a(e,o.parentOrigin)){n("Child: Received request",e.data);var t=e.data,r=t.property,l=t.uid,u=t.data;if("call"===e.data.postmate)return void(r in o.model&&"function"==typeof o.model[r]&&o.model[r].call(o,u));i(o.model,r).then((function(t){return e.source.postMessage({property:r,postmate:"reply",type:s,uid:l,value:t},e.origin)}))}}))}return l(t,[{key:"emit",value:function(e,t){n('Child: Emitting Event "'+e+'"',t),this.parent.postMessage({postmate:"emit",type:s,value:{name:e,data:t}},this.parentOrigin)}}]),t}(),h=function(){function t(n){e(this,t);var r=n.container,o=void 0===r?void 0!==o?o:document.body:r,a=n.model,i=n.url;return this.parent=window,this.frame=document.createElement("iframe"),o.appendChild(this.frame),this.child=this.frame.contentWindow||this.frame.contentDocument.parentWindow,this.model=a||{},this.sendHandshake(i)}return l(t,[{key:"sendHandshake",value:function(e){var o=this,i=r(e),l=0,u=void 0;return new t.Promise((function(t,r){var c=function e(l){return!!a(l,i)&&("handshake-reply"===l.data.postmate?(clearInterval(u),n("Parent: Received handshake reply from Child"),o.parent.removeEventListener("message",e,!1),o.childOrigin=l.origin,n("Parent: Saving Child origin",o.childOrigin),t(new f(o))):(n("Parent: Invalid handshake reply"),r("Failed handshake")))};o.parent.addEventListener("message",c,!1);var d=function(){n("Parent: Sending handshake attempt "+ ++l,{childOrigin:i}),o.child.postMessage({postmate:"handshake",type:s,model:o.model},i),5===l&&clearInterval(u)},p=function(){d(),u=setInterval(d,500)};o.frame.attachEvent?o.frame.attachEvent("onload",p):o.frame.onload=p,n("Parent: Loading frame",{url:e}),o.frame.src=e}))}}]),t}();return h.debug=!1,h.Promise=function(){try{return window?window.Promise:Promise}catch(e){return null}}(),h.Model=function(){function t(n){return e(this,t),this.child=window,this.model=n,this.parent=this.child.parent,this.sendHandshakeReply()}return l(t,[{key:"sendHandshakeReply",value:function(){var e=this;return new h.Promise((function(t,r){var a=function a(i){if(i.data.postmate){if("handshake"===i.data.postmate){n("Child: Received handshake from Parent"),e.child.removeEventListener("message",a,!1),n("Child: Sending handshake reply to Parent"),i.source.postMessage({postmate:"handshake-reply",type:s},i.origin),e.parent!==i.source&&(e.parent=i.source),e.parentOrigin=o?"*":i.origin;var l=i.data.model;if(l){for(var u=Object.keys(l),d=0;d<u.length;d++)c.call(l,u[d])&&(e.model[u[d]]=l[u[d]]);n("Child: Inherited and extended model from Parent")}return n("Child: Saving Parent origin",e.parentOrigin),t(new p(e))}return r("Handshake Reply Failed")}};e.child.addEventListener("message",a,!1)}))}}]),t}(),h}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isJquerySrc=t.getUrlFileName=t.rmArg=t.setArg=t.setArgs=t.getArg=t.getArgs=t.clearArgs=void 0;var r=O(n(374)),o=O(n(189)),a=O(n(757)),i=O(n(446)),l=O(n(445)),u=O(n(395)),s=O(n(452)),c=O(n(961)),d=O(n(968)),f=O(n(978)),p=O(n(979)),h=O(n(401)),m=O(n(969)),g=O(n(970)),v=O(n(960)),y=O(n(971)),b=O(n(40)),_=O(n(9)),w=O(n(10)),k=n(980);function O(e){return e&&e.__esModule?e:{default:e}}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=[],P=(0,o.default)((0,d.default)("&"),(0,c.default)((0,d.default)("=")),f.default),T=(0,o.default)((function(e){return(0,h.default)(e,"/")}),u.default,(0,l.default)("?"),i.default);t.clearArgs=T;var x=(0,o.default)(p.default,(0,g.default)((0,o.default)((0,y.default)(v.default),u.default)),(0,c.default)((0,l.default)("=")),(0,l.default)("&"),s.default,(0,l.default)("?"),i.default);t.getArgs=x;var j=(0,r.default)((function(e,t){return(0,a.default)(e,x(t))}));t.getArg=j;var D=(0,r.default)((function(e,t){return"".concat(T(t),"?").concat(P(S(S({},x(t)),e)))}));t.setArgs=D;var L=(0,r.default)((function(e,t,n){return D(E({},e,t),n)}));t.setArg=L;var R=(0,r.default)((function(e,t){return D((0,m.default)(e,x(t)),T(t))}));t.rmArg=R;var N=function(e){return(0,b.default)(e)?e.split("/").pop().split("?").shift():""};t.getUrlFileName=N;var A=function(e){if(!(0,b.default)(e))return!1;var t=N(e).toLowerCase();return-1!==t.indexOf("jquery")&&((0,v.default)(M)&&(M=["jquery.js","jquery.min.js"],(0,w.default)(k.versions,(function(e){M.push("jquery-".concat(e,".js")),M.push("jquery-".concat(e,".min.js"))}))),(0,_.default)(M,t))};t.isJquerySrc=A;var B={getArgs:x,getArg:j,clearArgs:T,setArgs:D,setArg:L,rmArg:R,getUrlFileName:N,isJquerySrc:A};t.default=B},function(e,t,n){var r=n(56)("isEmpty",n(4),n(127));r.placeholder=n(47),e.exports=r},function(e,t,n){var r=n(56)("map",n(35));r.placeholder=n(47),e.exports=r},,,,,,,function(e,t,n){var r=n(56)("join",n(375));r.placeholder=n(47),e.exports=r},function(e,t,n){var r=n(56)("omit",n(140));r.placeholder=n(47),e.exports=r},function(e,t,n){var r=n(56)("filter",n(74));r.placeholder=n(47),e.exports=r},function(e,t,n){var r=n(56)("negate",n(212),n(127));r.placeholder=n(47),e.exports=r},,,,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(0)),a=l(n(40)),i=["_ref"];function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){var t,n,r,l,h,m=(0,a.default)(e)?e:e.displayName;return n=t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(h,t);var n,r,a,l=p(h);function h(){return c(this,h),l.apply(this,arguments)}return n=h,(r=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var t=this.props,n=t._ref,r=s(t,i);return o.default.createElement(e,u({ref:n},r))}}])&&d(n.prototype,r),a&&d(n,a),h}(o.default.Component),r=t,l="displayName",h="withOneRender(".concat(m,")"),l in r?Object.defineProperty(r,l,{value:h,enumerable:!0,configurable:!0,writable:!0}):r[l]=h,n};t.default=g},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),i=(o=n(6))&&o.__esModule?o:{default:o},l=n(89);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(){var e;s(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(h(e=o.call.apply(o,[this].concat(n))),"getDefaultStyle",(function(){return{size:e.props.scale,opacity:0}})),g(h(e),"getStyle",(function(){return{size:e.props.enabled?(0,l.spring)(1,{stiffness:300,damping:20}):1,opacity:e.props.enabled?(0,l.spring)(1,{stiffness:300,damping:20}):1}})),e}return t=i,(n=[{key:"render",value:function(){var e=this;return a.default.createElement(l.Motion,{defaultStyle:this.getDefaultStyle(),style:this.getStyle()},(function(t){return e.props.children({opacity:t.opacity,transform:"scale(".concat(t.size,")")})}))}}])&&c(t.prototype,n),r&&c(t,r),i}(a.Component);g(v,"propTypes",{enabled:i.default.bool,scale:i.default.number,children:i.default.func.isRequired}),g(v,"defaultProps",{enabled:!0,scale:.5});var y=v;t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!document.documentMode&&!window.StyleMedia&&!r)return new window.File(e,t,n);var o=new Blob(e,n);return o.lastModified=Date.now(),o.name=t,o};var r=navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")},function(e,t,n){var r=n(56)("toPairs",n(449),n(127));r.placeholder=n(47),e.exports=r},function(e,t,n){var r=n(56)("fromPairs",n(260));r.placeholder=n(47),e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.versions=void 0;var r=["1.12.4","1.12.3","1.12.2","1.12.1","1.12.0","1.11.3","1.11.2","1.11.1","1.11.0","1.10.2","1.10.1","1.10.0","1.9.1","1.9.0","1.8.3","1.8.2","1.8.1","1.8.0","1.7.2","1.7.1","1.7.0","1.7.0","1.6.4","1.6.3","1.6.2","1.6.1","1.6.0","1.5.2","1.5.1","1.5.0","1.4.4","1.4.3","1.4.2","1.4.1","1.4.0","1.3.2","1.3.1","1.3.0","1.2.6","1.2.5","1.2.4","1.2.3","1.2.2","1.2.1","1.2.0","1.1.4","1.1.3","1.1.2","1.1.1","1.1.0","1.0.4","1.0.3","1.0.2","1.0.1","1.0.0","2.2.4","2.2.3","2.2.2","2.2.1","2.2.0","2.1.4","2.1.3","2.1.2","2.1.1","2.1.0","2.0.3","2.0.2","2.0.1","2.0.0","3.4.1","3.4.0","3.3.1","3.3.0","3.2.1","3.2.0","3.1.1","3.1.0","3.0.0"];t.versions=r;var o={versions:r};t.default=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=H(n(0)),a=W(n(6)),i=W(n(18)),l=H(n(37)),u=n(89),s=W(n(183)),c=W(n(35)),d=W(n(14)),f=W(n(74)),p=W(n(10)),h=W(n(4)),m=W(n(41)),g=W(n(180)),v=W(n(52)),y=(W(n(121)),W(n(9))),b=W(n(15)),_=W(n(45)),w=W(n(1)),k=(W(n(346)),W(n(168))),O=W(n(1749)),C=W(n(1756)),S=W(n(78)),E=W(n(27)),M=W(n(372)),P=W(n(58)),T=W(n(1757)),x=W(n(1758)),j=W(n(8)),D=W(n(1759)),L=W(n(3));n(1761);var R=W(n(958)),N=W(n(77)),A=W(n(1460)),B=W(n(394)),F=W(n(728)),I=n(373);function W(e){return e&&e.__esModule?e:{default:e}}function V(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(V=function(e){return e?n:t})(e)}function H(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=V(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=ETBuilderBackend.i18n.tooltips,ee=ETBuilderBackend.i18n,te=L.default.isBFB(),ne=L.default.isTB(),re={active:a.default.bool,actionType:a.default.string,active_tab:a.default.string,tooltipTitle:a.default.string,specialtyModal:a.default.bool,preloadingItems:a.default.bool,_closeFunction:a.default.func,modalPosition:a.default.object,classNames:a.default.object,children:a.default.node,modalHeight:a.default.number,modalWidth:a.default.oneOfType([a.default.number,a.default.string]),ignorePosition:a.default.bool,forceFixedPosition:a.default.bool},oe={active:!1,_closeFunction:_.default,classNames:{},ignorePosition:!1,forceFixedPosition:!1,enableContextMenu:!1},ae=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(V,t);var n,r,a,W=$(V);function V(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,V),Q(X(n=W.call(this,t)),"tabClassName",(function(e){var t={"et-fb-settings-options-tab":!0,"et-fb-all-modules":!0,"et-fb-modules-list":!0,"et-fb-settings-options":!0};return t["et-fb-settings-options-tab-"+e]=!0,e===n.state.active_tab&&(t["et-fb-settings-options-tab--active"]=!0),(0,i.default)(t)})),Q(X(n),"_onLibraryDoneLoading",(function(){j.default.setProductTourElementReady("selectLayoutPack"),n.setState({library_loading:!1})})),Q(X(n),"_onClickLibraryBackButton",(function(){n.setState({libraryBackToLayouts:!0})})),Q(X(n),"_onLibraryPageChanged",(function(t){var r={libraryBackToLayouts:!1};(n.state.hasBackButton&&!t||t&&!n.state.hasBackButton)&&(r.hasBackButton=t),n.setState(r),t&&j.default.isProductTourActive()&&(j.default.setProductTourElementReady("loadLayoutItem"),e("body").trigger("et_fb_product_tour_element_clicked"))})),Q(X(n),"onPortabilityProgressBarChange",(function(e,t){n.setState({hasProgressBar:t})})),Q(X(n),"_renderTabs",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=(0,c.default)(t,(function(e){return o.default.createElement("li",{key:e.name,className:n.tabNavClassName(e.className)},o.default.createElement("a",{href:"#",className:e.className,onClick:n.handle_tab_click},(0,w.default)(ee,e.name,e.name)))}));return o.default.createElement("ul",{className:"et-fb-settings-tabs-nav",ref:"settingsTabsNav"},a)})),n.state={active_tab:t.activeTab||"modules_all",library_category:"all",filterByTitle:"",helpModalMoved:!1,library_modules_updated:j.default.getLastRetrievedLayoutType(),selectedItemIndex:0,selectedItemUpdated:!1,currentTourElement:"",move:!1,library_loading:!0,hasBackButton:!1,libraryBackToLayouts:!1,applyTransitionAnimation:!1,appWindowScrollTopOnload:L.default.$appWindow().scrollTop(),hasProgressBar:!1},n.maxItemIndex={modules_all:0,modules_library:0},n.isLibrary=n.isLibrary.bind(X(n)),n._onClose=n._onClose.bind(X(n)),n._preventRightClick=n._preventRightClick.bind(X(n)),n.getModuleType=n.getModuleType.bind(X(n)),n.tabNavClassName=n.tabNavClassName.bind(X(n)),n.setMaxItemIndex=n.setMaxItemIndex.bind(X(n)),n._onModuleItemMouseLeave=n._onModuleItemMouseLeave.bind(X(n)),n._onModuleItemMouseEnter=n._onModuleItemMouseEnter.bind(X(n)),n._onKeyDownEvent=n._onKeyDownEvent.bind(X(n)),n.centerizeSelectedItem=n.centerizeSelectedItem.bind(X(n)),n.isAddingIntoGlobal=n.isAddingIntoGlobal.bind(X(n)),n.insertLayout=n.insertLayout.bind(X(n)),n.getSavedModulesList=n.getSavedModulesList.bind(X(n)),n.handle_tab_click=n.handle_tab_click.bind(X(n)),n.generateAddModuleContent=n.generateAddModuleContent.bind(X(n)),n._onInput=n._onInput.bind(X(n)),n.setModalPosition=n.setModalPosition.bind(X(n)),n._onLibraryLoaded=n._onLibraryLoaded.bind(X(n)),n.getSavedModulesArray=n.getSavedModulesArray.bind(X(n)),n.loadLibraryModules=n.loadLibraryModules.bind(X(n)),n.isPreloadingItems=n.isPreloadingItems.bind(X(n)),n._handleStartMovement=n._handleStartMovement.bind(X(n)),n._handleEndMovement=n._handleEndMovement.bind(X(n)),n._handleMove=n._handleMove.bind(X(n)),n._onProductTourElementChange=n._onProductTourElementChange.bind(X(n)),n.modal=(0,o.createRef)(),n.debouncedSetInputFocus=(0,v.default)(n.setInputFocus,1e3),n}return n=V,(r=[{key:"isLibrary",value:function(){return"load_layout"===this.props.actionType}},{key:"componentDidMount",value:function(){var e=this,t=(0,y.default)(["phone","tablet"],(0,w.default)(this,"props.previewMode")),n=this.isLibrary();this.windowScrolled=!1,this.is_mounted=!0,this.shortThrottleReset=(0,g.default)((function(){return e.is_mounted&&e.setState({helpModalMoved:e.props.helpModalActive,resetModalStyles:(0,s.default)(),modalPositionData:e.setModalPosition()})}),100,{leading:!1}),this.mediumThrottleReset=(0,g.default)((function(){return e.is_mounted&&e.setState({helpModalMoved:e.props.helpModalActive,resetModalStyles:(0,s.default)(),modalPositionData:e.setModalPosition(),applyTransitionAnimation:"fast"})}),100,{leading:!1}),this.longThrottleReset=(0,g.default)((function(){e.is_mounted&&(e.windowScrolled=!0,e.setState({helpModalMoved:e.props.helpModalActive,resetModalStyles:(0,s.default)(),modalPositionData:e.setModalPosition()}))}),1e3,{leading:!1}),j.default.addModuleLibraryLoadedListener(this._onLibraryLoaded),j.default.addProductTourChangeElementListener(this._onProductTourElementChange),j.default.getDroploaderPayloadPortability()&&this.setState({active_tab:"modules_library"});var r=L.default.getEventsTarget(t);this.props.movable&&(r.addEventListener("mousemove",this._handleStartMovement,{capture:!0}),r.addEventListener("mouseup",this._handleEndMovement,{capture:!0})),"custom_content"!==this.props.actionType&&(L.default.getScrollEventTarget().addEventListener("scroll",this.mediumThrottleReset),n?r.addEventListener("resize",this.shortThrottleReset):r.addEventListener("resize",this.longThrottleReset),this.setInputFocus()),this.timer=setTimeout((function(){var t=e.getModalContentHeight();e.setState({modalPositionData:e.setModalPosition(t),autoHeight:t})}),80),"portability"===this.props.actionType&&j.default.addTogglePortabilityProgressBarListener(this.onPortabilityProgressBarChange)}},{key:"componentWillUnmount",value:function(){this.is_mounted=!1,clearTimeout(this.timer),this.shortThrottleReset.cancel(),this.mediumThrottleReset.cancel(),this.longThrottleReset.cancel();var e=this.isLibrary(),t=(0,y.default)(["phone","tablet"],(0,w.default)(this,"props.previewMode"));j.default.removeModuleLibraryLoadedListener(this._onLibraryLoaded),j.default.removeProductTourChangeElementListener(this._onProductTourElementChange);var n=L.default.getEventsTarget(t);"custom_content"!==this.props.actionType&&(L.default.getScrollEventTarget().removeEventListener("scroll",this.mediumThrottleReset),e?n.removeEventListener("resize",this.shortThrottleReset):n.removeEventListener("resize",this.longThrottleReset)),this.props.movable&&(n.removeEventListener("mousemove",this._handleStartMovement),n.removeEventListener("mouseup",this._handleEndMovement)),"portability"===this.props.actionType&&j.default.removeTogglePortabilityProgressBarListener(this.onPortabilityProgressBarChange)}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.active&&this.props.currentTourElement===e.currentTourElement||this.setState({modalPositionData:{}});var t=this.props.modalMoving!==e.modalMoving;"load_layout"===this.props.actionType&&!this.state.helpModalMoved&&this.props.helpModalActive&&t&&this.setState({helpModalMoved:!0,resetModalStyles:(0,s.default)(),modalPositionData:this.setModalPosition()}),this.props.helpModalActive===e.helpModalActive||e.helpModalActive||this.setState({helpModalMoved:!1})}},{key:"componentDidUpdate",value:function(t,n){if("add_module"!==this.props.actionType||j.default.isProductTourActive()||this.loadLibraryModules(),e(l.default.findDOMNode(this)),t.active!==this.props.active||n.active_tab!==this.state.active_tab||t.actionType!==this.props.actionType||t.specialtyModal!==this.props.specialtyModal||!(0,m.default)(t.modalPosition,this.props.modalPosition)||t.preloadingItems!==this.props.preloadingItems){this.props.active?t.actionType!==this.props.actionType&&this.setState({active_tab:"modules_all"}):(this.setState({resetModalStyles:!1,active_tab:"modules_all",filterByTitle:"",library_category:"all",importBackUp:"off",importFile:"",importError:"",applyTransitionAnimation:"no"}),this.windowScrolled=!1),this.debouncedSetInputFocus();var r=e(l.default.findDOMNode(this.refs.settingsTabsNav)),o=r.children().length,a=100/o,i=j.default.getModuleAddAfter();2===o&&r.children().css({maxWidth:"".concat(a,"%")});var u=this.getModalContentHeight(),c=this.setModalPosition(u),d=(0,w.default)(c,"style.position"),f=(0,w.default)(n.modalPositionData,"style.position");this.setState({selectedItemIndex:L.default.hasValue(this.state.filterByTitle)?1:0,modalPositionData:c,autoHeight:u,applyTransitionAnimation:"add_module"===this.props.actionType&&(0,w.default)(i,"autoAddModule")||d!==f?"no":"normal"})}this.state.selectedItemUpdated&&(this.centerizeSelectedItem(),this.setState({selectedItemUpdated:!1}));var p=this.props.helpModalActive!==t.helpModalActive;"load_layout"===this.props.actionType&&p&&this.setState({resetModalStyles:(0,s.default)(),modalPositionData:this.setModalPosition()});var h=this.props.modalMoving!==t.modalMoving;"load_layout"===this.props.actionType&&this.props.helpModalActive&&h&&this.setState({resetModalStyles:(0,s.default)(),modalPositionData:this.setModalPosition()}),"portability"!==t.actionType&&"portability"===this.props.actionType&&j.default.addTogglePortabilityProgressBarListener(this.onPortabilityProgressBarChange),"portability"===t.actionType&&"portability"!==this.props.actionType&&j.default.removeTogglePortabilityProgressBarListener(this.onPortabilityProgressBarChange)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,m.default)(this.state,t)||!(0,m.default)(this.props,e)}},{key:"getModalContentHeight",value:function(){var t=e(l.default.findDOMNode(this)),n="modules_library"===this.state.active_tab&&"add_module"===this.props.actionType&&""===t.find(".et-fb-settings-options .et-fb-settings-options-tab-modules_library ul").text()?300:0,r=".et-fb-settings-options",o=t.find(".et-fb-settings-tabs-nav").length>0?100:60,a=0,i=t.find(".et-fb-save-library-button").length>0?40:0;return t.find(r).length>0&&(!(0,d.default)(this.props.modalWidth)&&this.props.modalWidth&&t.find(r).width(this.props.modalWidth),a=0===n?t.find(r).innerHeight():n,!(0,d.default)(this.props.modalWidth)&&this.props.modalWidth&&t.find(r).width("auto")),te||"portability"!==this.props.actionType||(i=40),a+i+o}},{key:"setInputFocus",value:function(){var e=L.default.$appWindow(this.modal.current),t=(0,w.default)(e.find(".et-fb-settings-options-wrap").offset(),"top",0),n=(0,w.default)(e.find(".et-fb-settings-options-tab--active").offset(),"top",0)-t;if(e.trigger("focus").find('input[type="text"]:visible').first().trigger("focus"),n<0&&e.find(".et-fb-settings-options-tab").length){var r=parseInt(e.find(".et-fb-settings-options").css("paddingTop")),o=Math.abs(n)+r;e.find(".et-fb-settings-options-wrap").scrollTop(o),setTimeout((function(){e.find(".et-fb-settings-options-wrap").scrollTop(o)}),0)}}},{key:"_handleStartMovement",value:function(e){if(!this.state.move)return!1;var t=this.state.modalPositionData,n="absolute"===t.style.position?e.pageX:e.pageX-L.default.$topWindow().scrollLeft(),r="absolute"===t.style.position?e.pageY:e.pageY-L.default.$topWindow().scrollTop();return n-=this.state.reactive.x,r-=this.state.reactive.y,t.style.top=r,t.style.left=n,this.setState({resetModalStyles:(0,s.default)(),modalPositionData:t})}},{key:"_handleMove",value:function(t){if(this.props.movable){var n="absolute"===this.state.modalPositionData.style.position?e((0,l.findDOMNode)(this)).position():e((0,l.findDOMNode)(this)).offset();this.setState({reactive:{x:t.pageX-n.left,y:t.pageY-n.top},move:!this.state.move})}}},{key:"_handleEndMovement",value:function(t){if(this.state.move){var n=e("#et-fb-app").offset(),r=L.default.topViewportWidth(),o=L.default.$topWindow().height(),a=this.state.modalPositionData;if("absolute"!==a.style.position&&(a.style.top+400>o||a.style.top<0)||"absolute"===a.style.position&&a.style.top<0&&Math.abs(a.style.top)>n.top){var i=50;"absolute"===a.style.position&&a.style.top<0&&Math.abs(a.style.top)>n.top&&(i+=a.style.top+(Math.abs(a.style.top)-n.top)),a.style.top=a.style.top<0?i:o-400}if("absolute"!==a.style.position&&a.style.left<0||a.style.left+400>r||"absolute"===a.style.position&&a.style.left<0&&Math.abs(a.style.left)>n.left){var l=50;"absolute"===a.style.position&&a.style.left<0&&Math.abs(a.style.left)>n.left&&(l+=a.style.left+(Math.abs(a.style.left)-n.left)),a.style.left=a.style.left<0?l:r-400}return this.setState({move:!1,modalPositionData:a})}}},{key:"_onProductTourElementChange",value:function(){this.setState({currentTourElement:j.default.getActiveProductTourElement()})}},{key:"_onModuleItemMouseEnter",value:function(e){this.setState({selectedItemIndex:e})}},{key:"_onModuleItemMouseLeave",value:function(){this.setState({selectedItemIndex:0})}},{key:"setMaxItemIndex",value:function(e,t){this.maxItemIndex[t]=e}},{key:"tabNavClassName",value:function(e){var t={};return t["et-fb-settings-options_tab_"+e]=!0,t["et-fb-settings-tabs-nav-item"]=!0,e===this.state.active_tab&&(t["et-fb-settings-tabs-nav-item--active"]=!0),(0,i.default)(t)}},{key:"centerizeSelectedItem",value:function(){var t=e(l.default.findDOMNode(this)),n=t.find(".et-fb-settings-options-wrap"),r=t.find(".et-fb-settings-options-tab:visible .et-fb-selected-item");if(r.length){var o=r.offset(),a=r.parent().offset();n.stop().animate({scrollTop:o.top-a.top})}}},{key:"_onKeyDownEvent",value:function(t){if(!j.default.isProductTourActive()){var n,r,o=this,a=e(l.default.findDOMNode(this)),i=this.state.selectedItemIndex,u=t.keyCode;if(13===u&&(a.find(".et-fb-selected-item:visible").trigger("click"),"change_structure"===this.props.actionType&&E.default.cancelTooltip()),(0,y.default)([38,39,40,37],u))if((0,y.default)([38,40],u)&&t.preventDefault(),"change_structure"===this.props.actionType?(a.find(".et-fb-module-settings"),r=(n=a.find(".et-fb-columns-layout")).find(".et-fb-selected-item")):(a.find(".et-fb-settings-options-wrap"),r=(n=a.find(".et-fb-settings-options-tab:visible")).find(".et-fb-selected-item")),r.length){var s=n.width(),c=r.width(),d=Math.floor(s/c),f=0;switch(u){case 38:f=i-d;break;case 39:f=i+1;break;case 40:f=i+d;break;case 37:f=i-1}f>0&&f<=this.maxItemIndex[this.state.active_tab]&&this.setState({selectedItemIndex:f,selectedItemUpdated:!0})}else this.setState({selectedItemIndex:1,selectedItemUpdated:!0});if(27===u&&E.default.cancelTooltip(),9===u&&!a.closest(".et-fb-modal-settings--library")&&!e(t.target).is("input:focus, button:focus")){var p="modules_all"===this.state.active_tab?"modules_library":"modules_all",h=a.find(".et-fb-columns-layout");if(this.setState({active_tab:p}),h.length&&"change_structure"===this.props.actionType){var m=h.find(".et-fb-column-layout--selected"),g=m;(g=t.shiftKey?m.prev().length?m.prev():h.find("li").last():m.next().length?m.next():h.find("li").first()).trigger("click"),setTimeout((function(){o.setState({selectedItemIndex:g.index()+1})}),0)}return t.preventDefault(),!1}}}},{key:"getModuleType",value:function(){if(this.isLibrary())return"layout";var e=j.default.getModuleAddAfter(),t=e.type;if(e.is_parent)switch(t){case"et_pb_section":t="yes"===e.fullwidth?"et_pb_module":"et_pb_row";break;case"et_pb_column":t=e.is_inner_row?"et_pb_row_inner":"et_pb_module"}return(0,y.default)(["et_pb_section","et_pb_row","et_pb_row_inner"],t)||(t="et_pb_module"),t}},{key:"isAddingIntoGlobal",value:function(){return j.default.getModuleAddAfter().is_global}},{key:"_preventRightClick",value:function(t){this.props.enableContextMenu||e(t.target).is("input:focus")||t.preventDefault()}},{key:"getLibraryCategoriesList",value:function(){var e=ETBuilderBackend.saveModuleLibraryCategories,t={};return t.all=ETBuilderBackend.i18n.saveModuleLibraryAttrs.allCategoriesText,(0,h.default)(e)||(0,p.default)(e,(function(e){t[e.slug]=e.name})),t}},{key:"generateAddModuleContent",value:function(){var e=this,t=(0,f.default)(ETBuilderBackend.modules,{is_parent:"on"}),n=j.default.getModuleAddAfter(),r=n.type,a=this.props.specialtyModal,i=n.is_specialty_placeholder,l="",u={allModulesList:{},mainTabTitle:"",modalTitle:"",moduleType:"",settingsModalClass:[]};if(this.maxItemIndex.modules_all=0,u.mainTabTitle=Z.newModule,u.modalTitle=Z.insertModule,!0===a){var s=0;u.modalTitle=Z.insertColumn,this.maxItemIndex.modules_all=0,l=(0,c.default)([["1_2,1_2","1,0"],["1_2,1_2","0,1"],["1_4,3_4","0,1"],["3_4,1_4","1,0"],["1_4,1_2,1_4","0,1,0"],["1_2,1_4,1_4","1,0,0"],["1_4,1_4,1_2","0,0,1"],["1_3,2_3","0,1"],["2_3,1_3","1,0"]],(function(t,n){var r=t[0].split(","),a={layoutType:t[1],layoutFormat:t[0],columns:r,specialtyColumns:3};return s++,e.maxItemIndex.modules_all++,o.default.createElement(T.default,{label:t[0],title:t[0],key:s,specialtyLayout:a,itemIndex:e.maxItemIndex.modules_all,selectedItemIndex:e.state.selectedItemIndex,onMouseEnter:e._onModuleItemMouseEnter,isProcessingPlaceholder:i})})),u.allModulesList=o.default.createElement("ul",{onMouseLeave:this._onModuleItemMouseLeave},l)}else if("et_pb_section"!==r&&"et_pb_row"!==r&&"et_pb_row_inner"!==r&&!n.is_inner_row||"et_pb_section"===r&&"yes"===n.fullwidth&&n.is_parent)l=(0,c.default)(t,(function(t){if(!(0,y.default)(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"],t.label)){var n=void 0!==t.fullwidth_only&&"on"===t.fullwidth_only,r=j.default.getModuleAddAfter(),a=j.default.getProductTourModuleName(),i=r.fullwidth,l={};if(!("yes"===i&&!n||"no"===i&&n||""!==e.state.filterByTitle&&-1===t.title.toLowerCase().indexOf(e.state.filterByTitle.toLowerCase()))){if((0,I.isPostContentModule)(t.label)){if(ETBuilderBackend.postType!==ETBuilderBackend.themeBuilder.bodyLayoutPostType)return;if((0,k.default)(ETBuilderBackend.themeBuilder.postContentModules,(function(e,t){return e+j.default.getModuleCount(t)}),0)>0)return}return"selectModule"===e.state.currentTourElement&&a===t.label&&(l["et-fb-product-tour-element"]=!0),e.maxItemIndex.modules_all++,o.default.createElement(T.default,{label:t.label,title:t.title,fbSupport:t.vb_support,key:t.label,itemIndex:e.maxItemIndex.modules_all,selectedItemIndex:e.state.selectedItemIndex,icon:(0,w.default)(t,"icon",""),iconSvg:(0,w.default)(t,"icon_svg",""),onMouseEnter:e._onModuleItemMouseEnter,classnames:l})}}})),u.allModulesList=o.default.createElement("ul",{onMouseLeave:this._onModuleItemMouseLeave},l),u.moduleType="module";else if("et_pb_section"!==r||n.is_parent){if(("et_pb_row"===r||"et_pb_row_inner"===r)&&!n.is_parent||n.is_inner_row||"et_pb_section"===r&&n.is_parent){j.default.getLastAddedModuleData();var d={},p="regular",h="et_pb_column"===r?"et_pb_row_inner":r;u.settingsModalClass.et_fb_add_row_modal=!0,d.props={},"et_pb_row_inner"===h&&(p="specialty"),"on"===n.fullwidth&&(p="fullwidth"),d.props.section_parent=p,d.props.specialty_layout=n.specialty_layout,u.modalTitle=Z.insertRow,u.mainTabTitle=Z.newRow,u.allModulesList=o.default.createElement(D.default,z({active:"true",_onClick:this.addRow,row:d,selectedItemIndex:e.state.selectedItemIndex,setMaxItemIndex:e.setMaxItemIndex,currentTourElement:e.state.currentTourElement},this.props))}}else{var m=i?["et_fb_specialty"]:["et_fb_regular","et_fb_specialty","et_fb_fullwidth"],g={et_fb_regular:Z.regular,et_fb_fullwidth:Z.fullwidth,et_fb_specialty:Z.specialty};this.maxItemIndex.modules_all=0,u.modalTitle=Z.insertSection,u.mainTabTitle=Z.newSection,u.settingsModalClass.et_fb_add_section_modal=!0,l=(0,c.default)(m,(function(t){var n={};return e.maxItemIndex.modules_all++,"selectSectionType"===e.state.currentTourElement&&"et_fb_regular"===t&&(n["et-fb-product-tour-element"]=!0),o.default.createElement(T.default,{label:t,title:g[t],key:t,itemIndex:e.maxItemIndex.modules_all,selectedItemIndex:e.state.selectedItemIndex,onMouseEnter:e._onModuleItemMouseEnter,classnames:n})})),u.allModulesList=o.default.createElement("ul",{onMouseLeave:this._onModuleItemMouseLeave},l)}return u}},{key:"handle_tab_click",value:function(e){e.preventDefault(),this.isLibrary()&&this.state.library_loading||this.setState({active_tab:e.target.className,libraryBackToLayouts:!0})}},{key:"getSavedModulesList",value:function(){var e=this.getModuleType(),t=this.getSavedModulesArray(),n="";if(this.maxItemIndex.modules_library=0,!(0,h.default)(t))if("string"==typeof t)n=t;else{var r=this,a="",i=[];if("et_pb_row_inner"===e){var l=j.default.getModuleAddAfter();a=l.saved_specialty_column_type,i=4==("2_3"===a?4:3)?["4_4","1_2,1_2","1_3,1_3,1_3","1_4,1_4,1_4,1_4"]:["4_4","1_2,1_2","1_3,1_3,1_3"]}n=(0,c.default)(t,(function(t,n){if((""===a||(0,y.default)(i,t.row_layout))&&("all"===r.state.library_category||(0,y.default)(t.categories,r.state.library_category))){if(!(0,w.default)(t,"shortcode.0.type"))return!1;var l="global"===t.is_global?t.ID:"",u={};return u.et_fb_global="global"===t.is_global,(""===r.state.filterByTitle||-1!==t.title.toLowerCase().indexOf(r.state.filterByTitle.toLowerCase()))&&(r.maxItemIndex.modules_library++,o.default.createElement(T.default,{label:""!==t.module_type?t.module_type:e,title:t.title,key:n,savedShortcode:t.shortcode,globalID:l,onClickAction:"",itemIndex:r.maxItemIndex.modules_library,selectedItemIndex:r.state.selectedItemIndex,icon:(0,w.default)(t,"icon",""),iconSvg:(0,w.default)(t,"icon_svg",""),onMouseEnter:r._onModuleItemMouseEnter,classnames:u,isAddingIntoGlobal:r.isAddingIntoGlobal()}))}}))}return n}},{key:"insertLayout",value:function(e){var t="on"===this.state.replace_layout;E.default.insertSavedModule(e,!0,t),E.default.cancelTooltip()}},{key:"loadLibraryModules",value:function(){var e=this.getModuleType(),t="et_pb_row_inner"===e?"et_pb_row":e,n="yes"===j.default.getModuleAddAfter().fullwidth&&"et_pb_module"===e?"fullwidth":"regular";!1===j.default.getLibraryModules(t,n)&&E.default.getLibraryModules(t,n)}},{key:"getSavedModulesArray",value:function(){var e=this.getModuleType();"et_pb_row_inner"===e&&(e="et_pb_row");var t="yes"===j.default.getModuleAddAfter().fullwidth&&"et_pb_module"===e?"fullwidth":"regular";return j.default.getLibraryModules(e,t)}},{key:"_onLibraryLoaded",value:function(){var e=this.getModuleType();"et_pb_row_inner"===e&&(e="et_pb_row");var t="yes"===j.default.getModuleAddAfter().fullwidth&&"et_pb_module"===e?"fullwidth":"regular";this.setState({library_modules_updated:t+e,currentTourElement:j.default.getActiveProductTourElement()})}},{key:"setModalPosition",value:function(t){if(this.props.ignorePosition)return{};var n=j.default.getModuleAddAfter(),r=n.type,o=this.props.specialtyModal,a=this.props.modalPosition,i=!(0,d.default)(a)&&a,l=e(a.element).closest(".et-fb-skeleton"),u=te?L.default.$topWindow("#et_pb_layout"):"",s=te?u.offset().top:0,c=te?u.offset().left:0,f=(0,w.default)(this,"props.previewMode"),p=!(0,d.default)(a)&&e((0,w.default)(a,"element","")),h=L.default.getAdminBarHeight(),m={},g=!1,v=!1;i&&!1!==a.element&&"rightClickMenu"!==a.element&&(0===(g=p&&p.length>0?p:L.default.$topWindow(".et-fb-page-settings-bar .et-fb-button--toggle-portability")).length&&(g=L.default.$topWindow(".et-fb-page-settings-bar .et-fb-button--toggle-add")),v=g.hasClass("et-fb-page-settings--tools"),(g.hasClass("et-fb-button-group")||v)&&(g.context?g=L.default.$topWindow(g.context):(0,w.default)(a,"element.prevObject")&&(g=L.default.$topWindow((0,w.default)(a,"element.prevObject"))))),!te&&!ne&&g&&g.length>0&&!L.default.isElementInViewport(g)&&g[0].scrollIntoView({block:"center"});var b=g&&g.closest(".et-fb-page-settings-bar").length>0,_=g?g.innerHeight()/2:0,k=g?g.innerWidth()/2:0,O=L.default.topViewportWidth(),C=L.default.topViewportHeight(),S=g?g.offset():a,P=te||(0,y.default)(["zoom","tablet","phone"],f)?L.default.$topWindow().scrollTop():L.default.$appWindow().scrollTop(),T="rightClickMenu"===a.element;if("save_to_library"===this.props.actionType&&T&&(S.top=this.props.rightClickPosition.top,"zoom"===f&&(S.top=S.top/2),"app"===L.default.getWindowScrollLocation(f)&&(S.left=this.props.rightClickPosition.left)),te&&(P-=s,P-=parseFloat(L.default.$topWindow("#et-bfb-app-frame").css("marginTop"))),m.class={},O<=502&&this.isLibrary())return m.style={top:0,left:0,right:!1,width:O,height:C,position:"fixed"},m;if(0===S.top&&0===S.left&&(S.top=a.top,S.left=a.left),!te&&L.default.isResponsiveView(j.default.getPreviewMode())){var x=L.default.$topWindow("#et-fb-app-frame"),D=L.default.getIntegerValue(x.css("paddingTop"));S.top=S.top+D}var R=O<493?O-20:400,N=t||this.state.autoHeight,A=te?-1*L.default.$topWindow("#adminmenuwrap").innerWidth():(0,y.default)(["tablet","phone"],f)?-1*L.default.$topWindow("#et-fb-app-frame").innerWidth()/2:0,B=(0,d.default)(this.props.modalHeight)||""===this.props.modalHeight?274:this.props.modalHeight,F=B,I=(0,d.default)(this.props.modalWidth)||""===this.props.modalWidth?R:this.props.modalWidth,W="zoom"!==f||b||"rightClickMenu"===a.element?S.left:S.left/2,V=!1,H=0;(W=W-I/2+k)>0?W=S.left+I/2+k>O?O-I-k-30:W:(V=Math.abs(A)<=Math.abs(W),H=Math.abs(W)-Math.abs(A),W=V?A:W),"et_pb_section"!==r||n.is_parent||o?"et_pb_row_inner"===r||n.is_inner_row?B=188:"modules_library"!==this.state.active_tab&&"portability"!==this.props.actionType&&("et_pb_row"===r||"et_pb_section"===r&&n.is_parent&&!o&&"yes"!==n.fullwidth)?B=284:"et_pb_section"===r&&o?B=320:"add_module"===this.props.actionType&&(B=385):B=198,v&&(B=290),"change_structure"===this.props.actionType&&p&&p.length>0&&p.closest(".et_pb_row_inner").length>0&&(B=148),"clear_layout"===this.props.actionType&&(B=200),F=(0,d.default)(N)||""===N?B:Math.max(B,Math.min(936,N));var G=P;!T||"save_to_library"===this.props.actionType||te||(0,y.default)(["zoom","tablet","phone"],f)||(G=0),ne&&(G+=L.default.viewportScrollTop());var U=G+C,z=G+C/2,q=(!te||!b)&&S.top>=z,K=q?S.top-G:U-S.top,$=M.default.tooltipModal.top,Y=M.default.tooltipModal.bottom,X=q?$:Y;if(S.top,te&&b&&(0,y.default)(["save_to_library","portability"],this.props.actionType)&&(K=C+P),F+X>K&&(F=Math.max(B,K-X)),b){var J=g.closest(".et-fb-page-settings-bar"),Q=J.hasClass("et-fb-page-settings-bar--vertical"),Z=J.hasClass("et-fb-page-settings-bar--corner"),ee=Z&&J.hasClass("et-fb-page-settings-bar--right-corner"),re=Z&&J.hasClass("et-fb-page-settings-bar--left-corner"),oe=J.hasClass("et-fb-page-settings-bar--right"),ae=Z&&J.hasClass("et-fb-page-settings-bar--top-corner"),ie=J.position().top,le=te?J.offset().top+parseInt(J.height())+13:J.outerHeight(!0)+L.default.getAdminBarHeight(),ue=95,se=re?ue:W<(Q?80:10)?Q?80:10:Q?W-70:W,ce=this.isLibrary();if(oe&&(se-=L.default.maybeGetScrollbarWidth(f)),("modules_library"===this.state.active_tab||(0,y.default)(["save_to_library","portability","load_layout"],this.props.actionType))&&O<493&&(I=O<493?O-100-30:400),ce){var de=Q||te?30:parseInt(J.height()),fe=te||!Q&&!Z?50:ue,pe=te?0:60-h;ne&&(pe=-8),F=C-h-de-pe,I=Math.min(O-2*fe,1179),te&&(ue=0),Q||Z||te?(le=ae?le:h+pe,(W=(O-I)/2)<15&&(W=15)):W=(O-I-L.default.getScrollbarWidth())/2}if((Q||Z||this.props.helpModalActive&&!this.state.helpModalMoved||te)&&(m.class["et-fb-tooltip--no-arrow"]=!0),L.default.getAdminBarHeight()===ie||te)m.class={"et-fb-modal-settings--inversed":!te||!ce,"et-fb-tooltip--no-arrow":Q||Z||this.props.helpModalActive&&!this.state.helpModalMoved||te&&ce,"et-fb-tooltip--vertical-center":Q},ce&&!te&&(F-=25,ne&&!Q&&(F-=24));else{var he=te?0:$;if((le=ie-F)<he){var me=he-le;le+=me,F=Math.max(B,F-me)}te||"save_to_library"!==this.props.actionType&&"clear_layout"!==this.props.actionType||(m.class["et-fb-modal-settings--blue-bottom"]=!0)}"load_layout"===this.props.actionType&&this.props.helpModalActive&&"library"===this.props.helpModalTrigger&&!this.state.helpModalMoved&&(L.default.topWindow().innerWidth<1639&&L.default.topWindow().innerWidth>960?I-=this.props.helpModal.width:window.innerWidth>960&&(W-=this.props.helpModal.width/2));var ge=ce?W:!ee&&se;return m.style={top:le,left:ge,right:!!ee&&ue,width:I,height:F,position:te&&!ce?"absolute":"fixed"},m}var ve=(te?L.default.$topWindow("#et-bfb-app-frame"):L.default.$topWindow("#et-fb-app-frame")).offset(),ye=ve.top;if(l.length>0){"save_to_library"===this.props.actionType&&l.hasClass("et-fb-skeleton--row");l.offset().left}"app"===L.default.getWindowScrollLocation(f)&&0===P&&0===ye&&S.top>C&&setTimeout((function(){E.default.cancelTooltip()}),300),ye=te||(0,y.default)(["zoom","tablet","phone"],f)||T&&"save_to_library"!==this.props.actionType||this.props.renderInsideApp?ye:ye-P;var be="zoom"===f&&"rightClickMenu"!==a.element?S.top/2:S.top;be=be-F+(ne?0:ye),this.props.forceFixedPosition||(W+=T?c:ve.left),W+I>O&&(W=O-I);var _e=0>W&&(this.props.forceFixedPosition||Math.abs(W)>ve.left)?10:W;if(_e=30>_e?30:_e,m.style={top:be,left:_e,width:I,height:F,position:this.props.forceFixedPosition?"fixed":"absolute"},this.props.forceFixedPosition&&"custom_content"===this.props.actionType)return(m.style.top<0||m.style.top+F>C)&&(m.style.top=m.style.top<0?50:C-F-100),(m.style.left<0||m.style.left+I>O)&&(m.style.left=m.style.left<0?50:O-I-100),m;"save_to_library"===this.props.actionType&&(m.class["et-fb-modal-settings--blue-bottom"]=!0);var we="app"===L.default.getWindowScrollLocation(f),ke=T&&we?L.default.$appWindow().scrollTop()-this.state.appWindowScrollTopOnload:0;if(m.style.top=m.style.top-ke,!q){var Oe=F+_+15;m.style.top=m.style.top+Oe,!te&&m.style.height+X+_+15>K&&(m.style.height=m.style.height-_-15),m.class={"et-fb-modal-settings--inversed":!0},"save_to_library"===this.props.actionType&&(m.class["et-fb-modal-settings--blue-bottom"]=!1)}var Ce=q&&te?F:F+X;if(!this.windowScrolled&&F===B&&Ce>K){var Se=Ce-K,Ee="desktop"!==f||te?L.default.$topWindow().scrollTop():L.default.$appWindow().scrollTop(),Me=q?Ee-Se:Ee+Se;("desktop"!==f||te?L.default.$topWindow("html, body"):L.default.$appWindow("html, body")).animate({scrollTop:Me},500,"swing")}if(V){var Pe=L.default.$topWindow("head"),Te="et-fb-modal-edge-style",xe=200-H-30,je="".concat(ETBuilderBackend.css.prefix," .et-fb-modal-add-module-container.et-fb-modal-settings--left-side:after {left: ").concat(xe,"px;}");Pe.remove("#"+Te),Pe.append('<style id="'.concat(Te,'">').concat(je,"</style>")),m.class["et-fb-modal-settings--left-side"]=!0}return this.windowScrolled=!0,m}},{key:"addRow",value:function(e,t){t=(0,d.default)(t)?"et_pb_row":t,E.default.insertNewModule(t,e)}},{key:"_onClearLayout",value:function(e){e.preventDefault(),j.default.abIsMode("off")&&(E.default.performLayoutClearing(),E.default.cancelTooltip())}},{key:"_onClose",value:function(){_.default!==this.props._closeFunction?this.props._closeFunction():E.default.cancelTooltip()}},{key:"_onInput",value:function(e,t){var n=Q({},e,t);"filterByTitle"===e&&L.default.hasValue(this.state.filterByTitle)&&(n.selectedItemIndex=1,n.selectedItemUpdated=!0),this.setState(n)}},{key:"isPreloadingItems",value:function(e){return!!this.props.preloadingItems&&j.default.isPreloadingItem(e)}},{key:"render",value:function(){var e,t=this;if(!this.props.active)return!1;var n=j.default.getAppPreference("builder_animation"),r=(0,b.default)((Q(e={"et-fb-settings":!0,"et-fb-tooltip-modal":!0},"et-fb-tooltip-modal--".concat(this.props.actionType),!0),Q(e,"et-fb-modal-settings--container",!0),Q(e,"et-fb-modal-settings--".concat(this.state.active_tab),!0),Q(e,"et-fb-modal-add-module-container",!0),Q(e,"et-fb-moving",this.state.move),Q(e,"et-fb-movable-modal",this.props.movable),Q(e,"et-fb-tooltip-modal-animated","normal"===this.state.applyTransitionAnimation),Q(e,"et-fb-tooltip-modal-animated-fast","fast"===this.state.applyTransitionAnimation),e),this.props.classNames),a=!(0,d.default)(this.state.modalPositionData),s=a&&!(0,h.default)(this.state.modalPositionData)?this.state.modalPositionData:this.setModalPosition(),c=s.style,f="",p="";(0,d.default)(s.class)||(0,b.default)(r,s.class);var m="";switch(this.props.actionType){case"add_module":var g=this.generateAddModuleContent(),v=g.allModulesList,y=g.mainTabTitle,_=j.default.isProductTourActive()?j.default.getActiveProductTourElement():"",k={maxHeight:(0,w.default)(c,"height",100)-100},E=j.default.getModuleAddAfter().is_specialty_placeholder;"selectSectionType"===_&&(k.overflow="visible"),f=g.modalTitle,(0,b.default)(r,g.settingsModalClass);var M="module"===g.moduleType?o.default.createElement("div",{className:"et-fb-modules-filters et-fb-module-single-filter"},o.default.createElement(F.default,{type:"text",value:this.state.filterByTitle,name:"filterByTitle",_onChange:this._onInput,onKeyDown:this._onKeyDownEvent,additional_attrs:{placeholder:Z.search}})):"",T=j.default.isAllowedAction("add_library")&&j.default.isAllowedAction("divi_library")&&!E?o.default.createElement("li",{className:this.tabNavClassName("modules_library")},o.default.createElement("a",{href:"#",className:"modules_library",onClick:this.handle_tab_click},Z.addFromLibrary)):"",I=j.default.isAllowedAction("add_library")&&j.default.isAllowedAction("divi_library")?o.default.createElement("div",{className:this.tabClassName("modules_library")},o.default.createElement("div",{className:"et-fb-modules-filters"},o.default.createElement(A.default,{options:this.getLibraryCategoriesList(),value:this.state.library_category,name:"library_category",_onChange:this._onInput}),o.default.createElement(F.default,{type:"text",value:this.state.filterByTitle,name:"filterByTitle",_onChange:this._onInput,additional_attrs:{placeholder:Z.search}})),o.default.createElement("ul",{onMouseLeave:this._onModuleItemMouseLeave},this.getSavedModulesList()),o.default.createElement(B.default,{isLoading:this.isPreloadingItems("module")},o.default.createElement(R.default,{videoListId:"et_pb_save_to_library",trigger:"tooltip"}))):"";m=o.default.createElement("div",{className:"et-fb-main-settings et-fb-main-settings--add_new_module"},o.default.createElement("ul",{className:"et-fb-settings-tabs-nav",ref:"settingsTabsNav"},o.default.createElement("li",{className:this.tabNavClassName("modules_all")},o.default.createElement("a",{href:"#",className:"modules_all",onClick:this.handle_tab_click},y)),T),o.default.createElement("div",{className:"et-fb-settings-options-wrap",style:k},o.default.createElement("div",{className:"et-fb-settings-options"},o.default.createElement("div",{className:this.tabClassName("modules_all")},M,v),I)));break;case"load_layout":var W="et-fb-modal-settings--library";if(r[W]=!0,this.state.hasBackButton){r["".concat(W,"__layout")]=!0;var V={position:(0,u.spring)(-12,{stiffness:300,damping:20}),opacity:(0,u.spring)(1,{stiffness:300,damping:20})};f=o.default.createElement(u.Motion,{defaultStyle:{position:-40,opacity:0},style:V},(function(e){return o.default.createElement("div",null,o.default.createElement(N.default,{className:"et-fb-settings-button--back",buttonName:S.default.LIBRARY_MODAL_BACK_BUTTON,_onClick:t._onClickLibraryBackButton,primary:!0,style:{opacity:e.opacity,transform:"translateX( ".concat(e.position,"% )")}},o.default.createElement(P.default,{size:"14",icon:"back",color:"#FFFFFF"})),Z.layoutDetails)}))}else f=Z.loadLayout;m=o.default.createElement(O.default,{isLoading:this.state.library_loading,_renderTabs:this._renderTabs,doneLoading:this._onLibraryDoneLoading,pageChanged:this._onLibraryPageChanged,backToLayouts:this.state.libraryBackToLayouts,tabClassName:this.tabClassName,active_tab:this.state.active_tab,layoutFilters:this.props.layoutFilters,type:"layout",isProductTour:j.default.isProductTourActive(),productTourElement:this.state.currentTourElement,modalMoving:this.props.modalMoving,width:c.width,height:c.height});break;case"save_to_library":r.et_fb_save_module_modal=!0,f=Z.addToLibrary,m=o.default.createElement(x.default,{maxHeight:(0,w.default)(c,"height",70)-70});break;case"change_structure":var H=j.default.getStructurallyChangedRow();f=Z.changeRow,m=o.default.createElement("div",{className:"et-fb-settings-options-wrap",style:{maxHeight:(0,w.default)(c,"height",100)-60}},o.default.createElement("div",{className:"et-fb-settings-options"},o.default.createElement(D.default,{row:H,selectedItemIndex:this.state.selectedItemIndex,setMaxItemIndex:this.setMaxItemIndex})));break;case"clear_layout":f=Z.clearLayout,m=o.default.createElement("div",{className:"et_fb_save_module_modal et_fb_clear_layout"},o.default.createElement("div",{className:"et-fb-settings-options"},Z.clearLayoutText),o.default.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:this._onClearLayout},Z.yes));break;case"portability":f=Z.portability,m=o.default.createElement(C.default,{_renderTabs:this._renderTabs,preloadingItems:this.props.preloadingItems,tabClassName:this.tabClassName,active_tab:this.state.active_tab,maxHeight:(0,w.default)(c,"height",140)-140,hasProgressBar:this.state.hasProgressBar}),L.default.isBFB()||(r["et-fb-modal-settings--blue-bottom"]=!this.state.hasProgressBar&&!this.props.preloadingItems);break;case"custom_content":f=this.props.tooltipTitle,p=(0,d.default)(this.props.buttons)?"":this.props.buttons,m=o.default.createElement("div",{className:"et-fb-main-settings et-fb-settings-options"},this.props.children)}var G=a?1:0,z="custom_content"!==this.props.actionType?"et-fb-tooltip-helper-container":"et-fb-tooltip-helper-container-custom",q=(0,w.default)(c,"position",""),K=o.default.createElement(o.Fragment,null,o.default.createElement(u.Motion,{key:q,defaultStyle:{size:.8},style:{size:n?(0,u.spring)(1,{stiffness:300,damping:20}):1}},(function(e){return o.default.createElement("div",{key:"modal",id:"et-fb-settings-column",ref:t.modal,className:(0,i.default)(r),onContextMenu:t._preventRightClick,onKeyDown:t._onKeyDownEvent,tabIndex:"0",style:U(U({},c),{},{opacity:G,transform:"scale( ".concat(e.size," )")})},o.default.createElement("div",{className:z},o.default.createElement("div",{className:"et-fb-module-settings"},o.default.createElement("h3",{className:"et-fb-settings-heading",onMouseDown:t._handleMove},f,o.default.createElement(N.default,{className:"et-fb-settings-button--close",buttonName:S.default.MODAL_SETTINGS_BUTTON_CLOSE,_onClick:t._onClose,primary:!0},o.default.createElement(P.default,{size:"14",icon:"close",color:"#FFFFFF"}))),m,p)))})),this.isLibrary()&&L.default.isBFB()&&o.default.createElement("div",{className:"et-core-modal-overlay et-core-active et-core-modal-overlay--library"}));return this.props.renderInsideApp?K:l.default.createPortal(K,L.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app"))[0])}}])&&q(n.prototype,r),a&&q(n,a),V}(o.default.Component);ae.propTypes=re,ae.defaultProps=oe;var ie=ae;t.default=ie}).call(this,n(5))},function(e,t,n){"use strict";(function(e,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=Fe(n(0)),i=Ae(n(6)),l=n(37),u=n(89),s=Ae(n(18)),c=Ae(n(79)),d=Ae(n(35)),f=Ae(n(168)),p=Ae(n(141)),h=Ae(n(49)),m=Ae(n(10)),g=Ae(n(4)),v=Ae(n(41)),y=Ae(n(122)),b=Ae(n(166)),_=Ae(n(9)),w=Ae(n(14)),k=Ae(n(190)),O=Ae(n(2)),C=Ae(n(13)),S=Ae(n(40)),E=Ae(n(91)),M=Ae(n(80)),P=Ae(n(1)),T=Ae(n(15)),x=Ae(n(17)),j=Ae(n(148)),D=Ae(n(184)),L=Ae(n(147)),R=Ae(n(94)),N=Ae(n(126)),A=Ae(n(52)),B=Ae(n(140)),F=Ae(n(371)),I=Ae(n(342)),W=Ae(n(113)),V=Ae(n(95)),H=Ae(n(453)),G=Ae(n(454)),U=(Ae(n(341)),Ae(n(159))),z=Ae(n(400)),q=Ae(n(255)),K=Ae(n(181)),$=Ae(n(169)),Y=Ae(n(845)),X=n(846),J=Ae(n(3)),Q=Ae(n(22)),Z=n(345),ee=Ae(n(21)),te=Ae(n(48)),ne=Ae(n(78)),re=Ae(n(372)),oe=Ae(n(27)),ae=Ae(n(8)),ie=Ae(n(29)),le=Ae(n(958)),ue=Ae(n(956)),se=Ae(n(58)),ce=Ae(n(989)),de=Ae(n(77)),fe=Fe(n(957)),pe=Fe(n(756)),he=Ae(n(1481)),me=Ae(n(1521)),ge=Ae(n(1456)),ve=Ae(n(1710)),ye=Ae(n(370)),be=Ae(n(1505)),_e=Ae(n(376)),we=n(82),ke=Ae(n(451)),Oe=Ae(n(1466)),Ce=n(75),Se=Ae(n(965)),Ee=n(373),Me=n(729),Pe=Ae(n(118)),Te=Ae(n(851)),xe=Ae(n(762)),je=Ae(n(849)),De=n(535),Le=Ae(n(541)),Re=n(852),Ne=Ae(n(1712));function Ae(e){return e&&e.__esModule?e:{default:e}}function Be(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Be=function(e){return e?n:t})(e)}function Fe(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=Be(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function We(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||He(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||He(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xe(e);if(t){var o=Xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?Ye(e):t}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t,n){return t&&Ze(e.prototype,t),n&&Ze(e,n),e}var tt=e(".et_fb_preview_container"),nt=(0,A.default)((function(){tt.removeClass("et_fb_preview_container__disable_animations")}),1500),rt=ie.default.getBackgroundFieldsNames(),ot=function(e){var t=Q.default.getFieldBaseName(e).split("_");return"padding"===t[0]&&(0,y.default)(parseInt(t[1]))&&2===t.length},at=function(e){return ot(e)?Q.default.getFieldBaseName(e).split("_")[1]:NaN},it=function(e){return["padding_top_".concat(e),"padding_right_".concat(e),"padding_bottom_".concat(e),"padding_left_".concat(e),"padding_top_bottom_link_".concat(e),"padding_left_right_link_".concat(e)]},lt=function(){function e(){Qe(this,e),this.reset()}return et(e,[{key:"reset",value:function(){this.type="",this.data={},this.elementsType="",this.elementsData={}}},{key:"has",value:function(e,t){return e===this.type&&(0,h.default)(this.data,t)}},{key:"get",value:function(e,t){return e===this.type?(0,P.default)(this.data,t):void 0}},{key:"set",value:function(e,t,n){return e!==this.type&&(this.data={},this.type=e),(0,R.default)(this.data,t,n),!1}},{key:"hasElements",value:function(e,t){return e===this.elementsType&&(0,h.default)(this.elementsData,t)}},{key:"getElements",value:function(e,t){return e===this.elementsType&&(0,P.default)(this.elementsData,t)}},{key:"setElements",value:function(e,t,n){return e!==this.elementsType&&(this.elementsData={},this.elementsType=e),(0,R.default)(this.elementsData,t,n),!1}}]),e}(),ut={isVisible:i.default.oneOfType([i.default.array,i.default.bool,i.default.object]),module:i.default.oneOfType([i.default.array,i.default.object,i.default.bool]),onModalChange:i.default.func,additionalClasses:i.default.object,ignorePosition:i.default.bool,isGlobalPresetsMode:i.default.bool,nonInteractiveMode:i.default.bool,disablePopupAnimation:i.default.bool},st=ie.default.shouldInheritParentDefaults,ct=ie.default.inheritParentDefaults,dt=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(o,t);var n=Ke(o);function o(e){var t;Qe(this,o),Je(Ye(t=n.call(this,e)),"_onComponentFieldDefinitionsChange",(function(e,n){t.cache.reset(),e===(0,P.default)(Ye(t),"props.module.type")?t.setState({generalFields:n}):t.forceUpdate()})),Je(Ye(t),"_updateComponentDefinitions",(function(){t.cache.reset();var e=t.props.isGlobalPresetsMode,n=t.getComponentAdvancedFields(t._getModule(),e),r=t.getComponentFields(t._getModule(),e),o=t.getComponentCSSFields(t._getModule(),e);t.setState({advancedFields:n,generalFields:r,cssFields:o})})),Je(Ye(t),"_onModulePresetChange",(function(){t._updateComponentDefinitions()})),Je(Ye(t),"_isDescriptionVisible",(function(e){return t.state.activeDescription===e})),Je(Ye(t),"optionsWithContext",(0,U.default)((function(){return function e(t){return(0,f.default)(t,(function(t,n,r){switch(n.type){case"composite":return(0,f.default)((0,P.default)(n,"composite_structure",{}),(function(t,n){return ze(ze({},t),e((0,P.default)(n,"controls",{})))}),t);default:return n.context?ze(ze({},t),{},Je({},r,n.context)):t}}),{})}(ze(ze(ze({},(0,P.default)(t.state,"advancedFields",{})),(0,P.default)(t.state,"cssFields",{})),(0,P.default)(t.state,"generalFields",{})))}))),Je(Ye(t),"optionContext",(function(e){return(0,P.default)(t.optionsWithContext(),e)})),Je(Ye(t),"_isHoveredGroup",(function(e){var n=(0,z.default)(t.state.hoveredGroup).filter(J.default.hasValue).map(Q.default.getFieldBaseName),r=Q.default.getFieldBaseName(e);return!!(0,_.default)(n,r)||!!n.map(t.optionContext).find((function(e){return Q.default.getFieldBaseName(e)===r}))})),Je(Ye(t),"_onChangeCacheReset",(function(){return t.cache.reset()})),Je(Ye(t),"_onMouseEnterGroup",(function(e){t.hoverStarted=(new Date).getTime(),J.default.appWindow().clearTimeout(J.default.appWindow().ETBuilderFormGroupMouseEnterTimeout),J.default.appWindow().clearTimeout(t.mouseLeaveTimeout),J.default.appWindow().ETBuilderFormGroupMouseEnterTimeout=setTimeout((function(){t.setState({hoveredGroup:e.fieldName})}),200);var n={optionId:e.fieldName,optionLabel:e.fieldLabel,optionFamily:e.fieldType,toggleId:e.toggleId,toggleGroupId:e.toggleGroupId,mode:t.props.activeTabMode,optionContextMenu:e.fieldContextMenu,tabSlug:(0,P.default)(e,"tabSlug",e.toggleGroupId)},r=_e.default.getHelper("option").preparePayload({props:n},t.props.module);t._setHoveredElement("option",e.fieldName,r)})),Je(Ye(t),"_onMouseLeaveGroup",(function(e){if(J.default.appWindow().clearTimeout(J.default.appWindow().ETBuilderFormGroupMouseEnterTimeout),J.default.appWindow().clearTimeout(t.mouseLeaveTimeout),t.state.hoveredGroup===e.fieldName){var n=(new Date).getTime()-t.hoverStarted>600?300:10;t.mouseLeaveTimeout=setTimeout((function(){return t.setState({hoveredGroup:null})}),n)}t._setHoveredElement(!1)})),Je(Ye(t),"_onToggleRightMenu",(function(e){t.props.onToggleRightMenu(e)})),Je(Ye(t),"_onMouseEnterTitle",(function(){var e=t.props.module;if((0,P.default)(e,"props.is_module_child")){var n=_e.default.getHelper("child_item").preparePayload(e),r=(0,P.default)(e,"props.type","");t._setHoveredElement("child_item",r,n)}else oe.default.setHoveredModuleElement(e,{fromModalTitle:!0})})),Je(Ye(t),"_onMouseLeaveTitle",(function(){oe.default.setHoveredElement(!1)})),Je(Ye(t),"_onClickHelp",(function(e){e=Q.default.getFieldBaseName(e);var n=t.state.activeDescription===e?null:e;t.setState({activeDescription:n})})),Je(Ye(t),"_onSwitchTab",(function(e,n,r){var o=t.state.toggleTabs,a=[e,n];(0,P.default)(o,a)!==r&&t.setState({toggleTabs:(0,R.default)(ze({},o),a,r)})})),Je(Ye(t),"_setHoveredElement",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};oe.default.setHoveredElement(e,t,n)})),Je(Ye(t),"isOptionHovered",(function(e){var t=ae.default.getMouseHoveredElement().elementId===e;return!t||"admin_label"!==e&&"background"!==e?t:"option"===ae.default.getMouseHoveredElement().type})),Je(Ye(t),"_onTabSelect",(function(e){t.setState({tabSelectedIndex:e})})),Je(Ye(t),"_onGlobalPresetsStateChange",(function(){var e=ae.default.getGlobalPresetsState().submitDialog;t.setState({isGlobalPresetsSubmitDialogVisible:e.isVisible})})),Je(Ye(t),"_onBackToParent",(function(){var e=t.props.isGlobalPresetsMode?ne.default.BUTTON_GLOBAL_PRESETS_BACK_TO_PARENT:ne.default.MODULE_ITEM_BACK_TO_PARENT;oe.default.buttonClick({props:{buttonName:e}},t._getModule())})),Je(Ye(t),"_setHoveredElementWrapper",(function(e,n){var r=_e.default.getHelper("modal_tab");if(e){var o=(0,c.default)(t._getTabs(),(function(e){return e.slug===n}));if(!o)return;var a=t._getNonEmptyToggles(t.props.module.props.type,n+".toggles",n),i=t._getOptionsFields(n),l=r.preparePayload(n,o.title,a,i,t.props.module);t._setHoveredElement(e,n,l)}else t._setHoveredElement(!1)})),t.displayName="ETBuilderSettingsModal",t.cache=new lt;var r=e.module,a=e.isGlobalPresetsMode;if(t.module_type=(0,De.maybeConvertModuleType)(r),t.state=(0,T.default)({activeDescription:null,activeHover:null,activeHoverField:null,hoveredGroup:null,openedToggle:"main_content",openedGeneralGroup:"main_content",openedDesignGroup:"",openedCSSGroup:"",advancedFields:t.module_type&&t.getComponentAdvancedFields(r,a),generalFields:t.module_type&&t.getComponentFields(r,a),cssFields:t.module_type&&t.getComponentCSSFields(r,a),filterOptions:e.filterOptions||"",filterSelected:e.filterSelected,filterNotice:!1,toggleTabs:{},isGlobalPresetsSubmitDialogVisible:!1,tabSelectedIndex:e.tabSelectedIndex||0,isModalRest:!1},t.getCustomTabsFields(t.module_type)),t.setting_resolver=t.getSettingResolver(),t.updatedAttrs={},!(0,P.default)(Ye(t),"props.module.props.is_official_module")){var i=t.maybeGetFirstOpenedToggle();i&&(t.state.openedToggle=i,t.state.openedGeneralGroup=i)}return t._hasColumnsFields=t._hasColumnsFields.bind(Ye(t)),t._onChange=t._onChange.bind(Ye(t)),t._onChangeDynamic=t._onChangeDynamic.bind(Ye(t)),t._resetOption=t._resetOption.bind(Ye(t)),t._isResetActive=t._isResetActive.bind(Ye(t)),t._onClickHelp=t._onClickHelp.bind(Ye(t)),t._onClickHover=t._onClickHover.bind(Ye(t)),t._onClickResponsive=t._onClickResponsive.bind(Ye(t)),t._onClickSticky=t._onClickSticky.bind(Ye(t)),t._onClickReset=t._onClickReset.bind(Ye(t)),t._onMouseEnterGroup=t._onMouseEnterGroup.bind(Ye(t)),t._onMouseLeaveGroup=t._onMouseLeaveGroup.bind(Ye(t)),t._onToggleRightMenu=t._onToggleRightMenu.bind(Ye(t)),t._onClickToggle=t._onClickToggle.bind(Ye(t)),t._handleFormSubmission=t._handleFormSubmission.bind(Ye(t)),t._unsyncGlobalSetting=t._unsyncGlobalSetting.bind(Ye(t)),t._unsyncGlobalContent=t._unsyncGlobalContent.bind(Ye(t)),t._onFilterInput=t._onFilterInput.bind(Ye(t)),t._onFilterSelect=t._onFilterSelect.bind(Ye(t)),t._onFilterChanged=t._onFilterChanged.bind(Ye(t)),t._onGoToOption=t._onGoToOption.bind(Ye(t)),t._isOptionMatchesFilter=t._isOptionMatchesFilter.bind(Ye(t)),t._handleShortcuts=t._handleShortcuts.bind(Ye(t)),t._onComponentAdvancedFieldDefinitionChange=t._onComponentAdvancedFieldDefinitionChange.bind(Ye(t)),t._onComponentFieldDefinitionChange=t._onComponentFieldDefinitionChange.bind(Ye(t)),t._onComponentCSSFieldDefinitionChange=t._onComponentCSSFieldDefinitionChange.bind(Ye(t)),t._onComponentDefinitionsChange=t._onComponentDefinitionsChange.bind(Ye(t)),t._onModalRest=t._onModalRest.bind(Ye(t)),t._getOptionsFields=t._getOptionsFields.bind(Ye(t)),t.getTabsCount=t.getTabsCount.bind(Ye(t)),t.maybeGetFirstOpenedToggle=t.maybeGetFirstOpenedToggle.bind(Ye(t)),t._onQuickAccessSwitchTab=t._onQuickAccessSwitchTab.bind(Ye(t)),t._onQuickAccessActive=t._onQuickAccessActive.bind(Ye(t)),t._setHoveredToggleElement=t._setHoveredToggleElement.bind(Ye(t)),t._setHoveredSubToggleElement=t._setHoveredSubToggleElement.bind(Ye(t)),t.productTourOptionToggle=!1,t.builder_display_modal_settings=ae.default.getAppPreference("builder_display_modal_settings"),t.mouseLeaveTimeout=0,t.hoverStarted=0,t.isModalRestTimeout=null,t}return et(o,[{key:"getComponentFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=n||(0,De.maybeConvertModuleType)(e),o=n?"general_fields__".concat(n):r;if(this.cache.has(r,o))return this.cache.get(r,o);var a=ae.default.filterUserFields(ie.default.getComponentFields(n?{props:{type:n}}:e,t));return this.cache.set(r,o,a),a}},{key:"getComponentAdvancedFields",value:function(e,t){var n=(0,De.maybeConvertModuleType)(e);if(this.cache.has(n,"advanced_fields"))return this.cache.get(n,"advanced_fields");var r=ae.default.filterUserFields(ie.default.getComponentAdvancedFields(e,t));return this.cache.set(n,"advanced_fields",r),r}},{key:"getComponentCSSFields",value:function(e,t){var n=(0,De.maybeConvertModuleType)(e);if(this.cache.has(n,"css_fields"))return this.cache.get(n,"css_fields");var r=ae.default.filterUserFields(ie.default.getComponentCSSFields(e,t));return this.cache.set(n,"css_fields",r),r}},{key:"getComponentCustomTabFields",value:function(e,t){if(this.cache.has(e,"custom_tab-".concat(t)))return this.cache.get(e,"custom_tab-".concat(t));var n=ae.default.filterUserFields(ie.default.getComponentCustomTabFields(e,t));return this.cache.set(e,"custom_tab-".concat(t),n),n}},{key:"getModuleCustomTabs",value:function(e){if(this.cache.has(e,"module_custom_tabs"))return this.cache.get(e,"module_custom_tabs");var t=ie.default.getComponentCustomTabs(e);return this.cache.set(e,"module_custom_tabs",t),t}},{key:"UNSAFE_componentWillMount",value:function(){this.cache.reset(),ie.default.addComponentAdvancedFieldDefinitionChangeListener(this._onComponentAdvancedFieldDefinitionChange),ie.default.addComponentFieldDefinitionChangeListener(this._onComponentFieldDefinitionChange),ie.default.addComponentFieldDefinitionsChangeListener(this._onComponentFieldDefinitionsChange),ie.default.addComponentCSSFieldDefinitionChangeListener(this._onComponentCSSFieldDefinitionChange),ae.default.addGoToOptionListener(this._onGoToOption),ae.default.addQuickAccessSwitchTabListener(this._onQuickAccessSwitchTab),ae.default.addQuickAccessActiveListener(this._onQuickAccessActive),ae.default.addOptionsFilterChangeListener(this._onFilterChanged),this._onChangeCacheReset=(0,A.default)(this._onChangeCacheReset,400,{leading:!0,trailing:!1})}},{key:"componentDidMount",value:function(){this.props.moduleRenderMode!==this.props.activeTabMode&&oe.default.setModuleSettingMode(this.props.moduleRenderMode,!1),J.default.topWindow().document.addEventListener("keydown",this._handleShortcuts),this.setState({tabsCount:this.getTabsCount()}),ae.default.addGlobalPresetsStateChangeListener(this._onGlobalPresetsStateChange),ae.default.addModulePresetChangeListener(this._onModulePresetChange),ie.default.addComponentDefinitionsChangeListener(this._onComponentDefinitionsChange)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props;if((0,P.default)(n,"module.props.address","")!==(0,P.default)(e,"module.props.address","")){var r=(0,P.default)(e,"module.props.is_module_child"),o=this.maybeGetFirstOpenedToggle(r);o&&this.setState({openedToggle:o})}this.props.module!==e.module&&(this.setting_resolver=this.getSettingResolver(),this.setState({tabsCount:this.getTabsCount()})),this.props.isGlobalPresetsMode!==e.isGlobalPresetsMode&&(this.setting_resolver=this.getSettingResolver()),n.isVisible&&!e.isVisible&&(this.setState({filterOptions:"",openedToggle:"main_content",filterSelected:void 0,filterNotice:!1}),this.productTourOptionToggle=!1),this.maybeShowFilterNotice()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(0,g.default)(e.optionsFilter)||this.cache.reset();var t=(0,P.default)(e,"module.props.type");if(e.module&&this.props.module.type!==t&&!(0,v.default)(this.props,e)){this.props.isGlobalPresetsMode!==e.isGlobalPresetsMode&&this.cache.reset();var n=this.getComponentAdvancedFields(e.module,e.isGlobalPresetsMode),r=this.getComponentFields(e.module,e.isGlobalPresetsMode),o=this.getComponentCSSFields(e.module,e.isGlobalPresetsMode),a=(0,De.maybeConvertModuleType)(e.module),i=this.getCustomTabsFields(a);this.module_type=a,this.setState(ze({advancedFields:n,generalFields:r,cssFields:o},i))}}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!(0,v.default)((0,P.default)(this,"props.isVisible"),(0,P.default)(e,"isVisible"))){var t=ae.default.getAppPreference("builder_display_modal_settings"),n=(0,P.default)(e,"module.props.type");if(t&&!(0,w.default)(n)){var r=(0,j.default)(ie.default.getComponentFieldsByFieldTypes(e.module,["custom_margin","custom_padding","range"]));oe.default.setListenerQuotaForGroup("settings-modal",r)}}}},{key:"componentWillUnmount",value:function(){J.default.appWindow().clearTimeout(J.default.appWindow().ETBuilderFormGroupMouseEnterTimeout),J.default.appWindow().clearTimeout(this.mouseLeaveTimeout),nt.flush(),ie.default.removeComponentAdvancedFieldDefinitionChangedListener(this._onComponentAdvancedFieldDefinitionChange),ie.default.removeComponentFieldDefinitionChangedListener(this._onComponentFieldDefinitionChange),ie.default.removeComponentFieldDefinitionsChangedListener(this._onComponentFieldDefinitionsChange),ie.default.removeComponentCSSFieldDefinitionChangedListener(this._onComponentCSSFieldDefinitionChange),ie.default.removeComponentDefinitionsChangeListener(this._onComponentDefinitionsChange),ae.default.removeQuickAccessSwitchTabListener(this._onQuickAccessSwitchTab),ae.default.removeQuickAccessActiveListener(this._onQuickAccessActive),ae.default.removeOptionsFilterChangeListener(this._onFilterChanged),J.default.topWindow().document.removeEventListener("keydown",this._handleShortcuts),clearTimeout(this.focusTimer),clearTimeout(this.filterNoticeTimer),clearTimeout(this.filterTimer),clearTimeout(this.goToOptionTimer),clearTimeout(this.quickAccessScrollUp),clearTimeout(this.quickAccessOpenToggle),clearTimeout(this.isModalRestTimeout),ae.default.removeGoToOptionListener(this._onGoToOption),ae.default.removeGlobalPresetsStateChangeListener(this._onGlobalPresetsStateChange),ae.default.removeModulePresetChangeListener(this._onModulePresetChange)}},{key:"maybeGetFirstOpenedToggle",value:function(e){var t=this.props.module,n=(0,P.default)(t,"props.type"),r=this._getNonEmptyToggles(n,"general.toggles","general"),o=(0,P.default)(r,"toggles"),a=(0,P.default)(o,this.state.openedToggle);if(e){var i=(0,P.default)(t,"props.module_items_config",{}),l=(0,P.default)(i,"toggle_slug");if(l)return l;if(!a)return"main_content"}if(a)return!1;if(!o)return!1;var u=(0,d.default)(o,(function(e,t){var n=(0,C.default)(e)?e:{title:e,priority:10};return n.name=t,n})),s=(0,I.default)(u,"priority","asc");return(0,P.default)((0,W.default)(s),"name","main_content")}},{key:"_updateSettingResolverGlobalPresetsAttrs",value:function(e,t){this.props.isGlobalPresetsMode&&(0,R.default)(this.setting_resolver,"source_object.props.attrs.".concat(e),t)}},{key:"_handleShortcuts",value:function(e){var t=this,n=e.metaKey,r=e.altKey,o=e.ctrlKey,a=27===e.keyCode,i=e.shiftKey,u=32===e.keyCode,s=J.default.$topWindow((0,l.findDOMNode)(this)).find(".et-fb-options-filter input"),c=s.length>0&&s.is(":focus");if(c&&i&&u)e.preventDefault();else{if(a&&this._isFilterActive())return e.preventDefault(),this.filterTimer=setTimeout((function(){t.setState({filterOptions:"",filterSelected:void 0,filterNotice:!1})}),300),!1;!c||n||r||o||27===e.keyCode||e.stopPropagation(),a&&this.props.isGlobalPresetsMode&&(oe.default.saveModulePresetSettings(this._getModule()),e.stopPropagation())}}},{key:"_onComponentAdvancedFieldDefinitionChange",value:function(e,t,n){if(!this.props.isGlobalPresetsMode){var r=(0,T.default)({},this.state.advancedFields);(0,R.default)(r,[e,t],n),this.cache.reset(),this.setState({advancedFields:r})}}},{key:"_onComponentFieldDefinitionChange",value:function(e,t,n){var r=(0,T.default)({},this.state.generalFields);(0,R.default)(r,[e,t],n),this.cache.reset(),this.setState({generalFields:r})}},{key:"_onComponentCSSFieldDefinitionChange",value:function(e,t,n){var r=(0,T.default)({},this.state.cssFields);(0,R.default)(r,[e,t],n),this.setState({cssFields:r})}},{key:"_onComponentDefinitionsChange",value:function(e){e===(0,P.default)(this._getModule(),"props.type")&&this._updateComponentDefinitions()}},{key:"_onModalRest",value:function(){var e=this;this.isModalRestTimeout=setTimeout((function(){e.setState({isModalRest:!0})}),1)}},{key:"getSettingResolver",value:function(){var e=this,t=new Y.default(this._getModule(),{},"props.attrs.");if(this.props.isGlobalPresetsMode){var n=J.default.flattenFields(ze(ze(ze({},this.getComponentFields(this._getModule())),this.getComponentAdvancedFields(this._getModule())),this.getComponentFields(this._getModule()))),r={};(0,m.default)(n,(function(t){t.show_if&&(0,m.default)((0,x.default)(t.show_if),(function(t){r[t]=(0,P.default)(e.props,"module.props.attrs.".concat(t))})),t.show_if_not&&(0,m.default)((0,x.default)(t.show_if_not),(function(t){r[t]=(0,P.default)(e.props,"module.props.attrs.".concat(t))}))})),t.source_object={props:{attrs:(0,T.default)({},r,this.getModuleAttrs())}}}return t}},{key:"getCustomTabsList",value:function(){var e=this.props.module,t=this.getModuleCustomTabs(e.props.type);return!(0,g.default)(t)&&t}},{key:"getCustomTabsFields",value:function(e){var t=this,n=this.getCustomTabsList();if(!n)return!1;var r={};return(0,m.default)(n,(function(n,o){var a="".concat(o,"Fields");r[a]=t.getComponentCustomTabFields(e,o)})),r}},{key:"_getModule",value:function(){return this.props.module}},{key:"getBulk",value:function(){var e=this._getModule(),t=(0,P.default)(e,"props.address");return(0,g.default)(e)?{}:ae.default.isMultiItemSelected(t)?ae.default.getMultiSelectItemsData():Je({},t,e)}},{key:"getModuleAttrs",value:function(){var e=this._getModule(),t=(0,P.default)(e,"props.type"),n=(0,P.default)(e,"props.address"),r=ae.default.isMultiItemSelected(n);return this.props.isGlobalPresetsMode?ie.default.getComponentGlobalPresets(e):r?ke.default.generateSelectedAttrs(t,(0,P.default)(e,"props.attrs",{}),this.updatedAttrs):(0,P.default)(e,"props.attrs",{})}},{key:"_isVisible",value:function(e,t){var n=this;if(this.props.isGlobalPresetsMode){var r=(0,q.default)(["animation"],(function(t){return!(0,M.default)(e.name,t)})),o=(0,q.default)(["text_shadow"],(function(t){return-1===e.name.indexOf(t)}));if(r&&o)return!0}var a=this.getModuleAttrs(),i=ie.default.getComponentDefaults(this.module_type),l=[];return(0,m.default)(e.depends_on,(function(r){var o=r,u=Se.default.isHoverMode()&&Se.default.isHoverEnabled(r,a),s=Se.default.isResponsiveMode()&&Se.default.isResponsiveEnabled(r,a);(u||s)&&(r=Se.default.getNameByMode(r,a));var c=(0,P.default)(t[r],"type","");if((0,P.default)(t[r],"depends_on",!1)&&!n._isVisible(t[r],t))return!1;var d=(0,P.default)(a,r,(0,P.default)(i,r,""));if((u||s)&&(0,w.default)(d)&&(d=(0,P.default)(i,o,(0,P.default)(t[o],"shortcode_default"))),"upload"!==c&&"text"!==c||""===d||(d="on"),(0,w.default)(e.depends_show_if)||d!==e.depends_show_if||l.push(r),!(0,w.default)(e.depends_show_if_not)){var f=e.depends_show_if_not;if((0,h.default)(e,"depends_on_responsive")&&(0,_.default)(e.depends_on_responsive,r)){var p=(0,P.default)(a,"".concat(r),""),m=(0,P.default)(a,"".concat(r,"_tablet"),""),g=(0,P.default)(a,"".concat(r,"_phone"),"");J.default.getResponsiveStatus((0,P.default)(a,"".concat(r,"_last_edited")))?(0,_.default)(f,p)&&(0,_.default)(f,m)&&(0,_.default)(f,g)||l.push(r):(0,_.default)(f,p)||l.push(r)}else{((0,O.default)(f)?!(0,_.default)(f,d):d!==f)&&l.push(r)}}})),!(0,g.default)(l)}},{key:"_isModuleItemSettings",value:function(){return!(0,w.default)(this.props.module.isModuleItem)}},{key:"_isModalExpanded",value:function(){var e=(0,Me.getModalPreferredSnapSettings)(),t=e.snap,n=e.snapLocation,r=(0,Me.getModalPreferredDimensions)().width,o=(0,_.default)(["top","bottom"],n),a=J.default.topWindow().innerWidth<re.default.responsive.phone;return(t&&o&&J.default.topWindow().innerWidth>1200||r>1200)&&!a}},{key:"_isToggleOpened",value:function(e,t){var n="general"===t,r="design"===t,o="css"===t,a=this._isModalExpanded();if(t&&a){if(n)return this.state.openedGeneralGroup===e;if(r)return this.state.openedDesignGroup===e;if(o)return this.state.openedCSSGroup===e}return this.state.openedToggle===e}},{key:"_isMultiSelectMode",value:function(){var e=(0,P.default)(this._getModule(),"props.address");return ae.default.isMultiItemSelected(e)}},{key:"_hasColumnsFields",value:function(){var e=this.props.module.props.type,t=this.getModuleAttrs(),n=J.default.isOn(t.specialty)&&"et_pb_section"===e;return(0,_.default)(["et_pb_row","et_pb_row_inner"],e)||n}},{key:"_hasModuleItem",value:function(){return!(0,E.default)(this.props.module.props.child_slug)&&!(0,w.default)(this.props.module.props.child_slug)}},{key:"_emitSettingsChange",value:function(e,t,n,r,o,a){"sticky_position"===t&&(te.default.clearEnabledStickyPositionAddress(),te.default.isStickyMode()&&(oe.default.setModuleSettingMode("desktop"),oe.default.setModuleSettingMode("sticky"))),this.props.isGlobalPresetsMode?oe.default.updateModulePresetSetting(e,t,n,o,a):oe.default.moduleSettingsChange(e,t,n,r,o,a)}},{key:"_onChange",value:function(e,t,n,o,a){var i=this;this._onChangeCacheReset(),this._updateSettingResolverGlobalPresetsAttrs(e,t),this.updatedAttrs[e]=t;var l=(0,P.default)(this.props.module,"props.address"),u=ae.default.isMultiItemSelected(l);if("raw_content"!==e){var s=e.split("_"),c="padding_mobile"!==e&&"padding"===s[0]&&2===s.length;if(o)!(0,w.default)(this.props.module)&&this.props.module&&(u?oe.default.multiSelectContentChange(this.props.module,t):oe.default.moduleContentChange(this.props.module,t));else{(0,w.default)(this.props.module)||(0,w.default)(this.props.module.props)||"et_pb_social_media_follow_network"!==this.props.module.props.type||"social_network"!==e||(u?oe.default.multiSelectContentChange(this.props.module,t):oe.default.moduleContentChange(this.props.module,t));var f=(0,_.default)(["custom_css_before","custom_css_main_element","custom_css_after"],e)?e.replace("custom_css_",""):e,p=this._getModule(),g=this.getModuleAttrs(),v=(0,P.default)(p,"props.type"),y=(0,P.default)(g,"".concat(e)),b=ae.default.getHoverMode(),k=this._getAllOptionsFields()[f],O=(0,w.default)(k)||(0,w.default)(k.depends_on)?e:k.depends_on[0],C=!(0,w.default)(k)&&!!k.hover&&(Q.default.isEnabled(e,g)||Q.default.isEnabled(O,g)),E=!0===b&&!0===C?Q.default.hoverSuffix():"",T=!1;if((0,M.default)(v,"et_pb_signup")){var x=ETBuilderBackend.emailPredefinedCustomFields,j=(0,P.default)(p,"parentModule.props.attrs"),D=this.getComponentFields({props:{type:"et_pb_signup"}}),L=(0,P.default)(D,"provider.default"),R=(0,P.default)(g,"provider",(0,P.default)(j,"provider",L)),N=Ve((0,P.default)(g,"".concat(R,"_list"),(0,P.default)(j,"".concat(R,"_list"),"")).split("|"),2),A=N[0],B=N[1];if("et_pb_signup"===v){var F=(0,h.default)(x,[R,A,B]);("provider"===e&&t!==y||F&&"".concat(R,"_list")===e&&t!==y)&&(T=!0)}else if("et_pb_signup_custom_field"===v&&(0,M.default)(e,"predefined_field_")&&t!==y){u?oe.default.multiSelectSettingsChange(r,"predefined_field",t):this._emitSettingsChange(p,"predefined_field",t);var I=[R,A];(0,h.default)(x,[R,A,"custom_fields"])?I.push("custom_fields"):I.push(B),I.push(t);var W=(0,P.default)(x,I);if(W){if(W.field_id!==g.field_id&&(u?oe.default.multiSelectSettingsChange(r,"field_id",W.field_id.toString()):this._emitSettingsChange(p,"field_id",W.field_id.toString())),W.name!==g.field_title&&(u?oe.default.multiSelectSettingsChange(r,"field_title",W.name):this._emitSettingsChange(p,"field_title",W.name)),!(0,w.default)(W.hidden)||"on"===(0,P.default)(g,"hidden")){var V=W.hidden?"on":"off";V!==g.hidden&&(u?oe.default.multiSelectSettingsChange(r,"hidden",V):this._emitSettingsChange(p,"hidden",V))}if("any"!==W.type&&W.type!==g.field_type&&(u?oe.default.multiSelectSettingsChange(r,"field_type",W.type):this._emitSettingsChange(p,"field_type",W.type),W.options)){var H=(0,d.default)(W.options,(function(e,t){return{checked:0,value:e,id:t}}));u?oe.default.multiSelectSettingsChange(r,"".concat(W.type,"_options"),JSON.stringify(H)):this._emitSettingsChange(p,"".concat(W.type,"_options"),JSON.stringify(H))}}}}if(c){var G=s[1],U=["padding_top_".concat(G).concat(E),"padding_right_".concat(G).concat(E),"padding_bottom_".concat(G).concat(E),"padding_left_".concat(G).concat(E),"padding_top_bottom_link_".concat(G).concat(E),"padding_left_right_link_".concat(G).concat(E)],z=(0,S.default)(t)?t.split("|"):["","","","","",""];(0,m.default)(U,(function(e,t){var r=(0,w.default)(z[t])?"":z[t];r!==g[e]&&(u?oe.default.multiSelectSettingsChange(i.props.module,e,r,null,n):i._emitSettingsChange(p,e,r,null,n))}))}else 0===e.indexOf("custom_css")&&(tt.addClass("et_fb_preview_container__disable_animations"),nt()),u?oe.default.multiSelectSettingsChange(this.props.module,"".concat(e).concat(E),t,null,n,a):this._emitSettingsChange(p,"".concat(e).concat(E),t,null,n,a),T&&oe.default.deleteModuleChildren((0,P.default)(p,"props.address"))}}else u?oe.default.multiSelectContentChange(this.props.module,t):oe.default.moduleContentChange(this.props.module,t)}},{key:"_isFilterActive",value:function(){return J.default.hasValue(this.state.filterOptions)||J.default.hasValue(this.state.filterSelected)}},{key:"_onChangeDynamic",value:function(e,t,n,r,o){"et_pb_counter"===this.props.module.props.type&&"content"===Se.default.getBaseName(e)&&this._onChange(e,"",n,!0),this._onChange(e,t,n,r,o)}},{key:"_resetOption",value:function(e){if(!(0,w.default)(e)&&""!==e){var t=this._getModule();this._emitSettingsChange(t,e,"")}}},{key:"_onClickHover",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this._getModule();if(r){var o=n&&(0,O.default)(n)?[e].concat(We(n)):[e],a=Se.default.getHoverEnabledToggleValue(e,this.getModuleAttrs(),this.props.activeTabMode),i=ae.default.isMultiItemSelected((0,P.default)(r,"props.address"));(0,m.default)(o,(function(e){var n=Se.default.getHoverEnabledName(e);i?oe.default.multiSelectSettingsChange(r,n,a):t._emitSettingsChange(r,n,a)})),0===a.indexOf("on")||Se.default.isAnyHoverEnabled(this.getModuleAttrs())||(i?oe.default.multiSelectSettingsChange(r,"hover_enabled",0):oe.default.moduleSettingsChange(r,"hover_enabled",0),Se.default.isHoverMode()&&oe.default.setModuleSettingMode("desktop",!0))}}},{key:"_onClickSticky",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this._getModule();if(r){var o=n&&(0,O.default)(n)?[e].concat(We(n)):[e],a=Se.default.getStickyEnabledToggleValue(e,this.getModuleAttrs(),this.props.activeTabMode),i=ae.default.isMultiItemSelected((0,P.default)(r,"props.address"));(0,m.default)(o,(function(e){var n=Se.default.getStickyEnabledName(e);i?oe.default.multiSelectSettingsChange(r,n,a):t._emitSettingsChange(r,n,a)})),0===a.indexOf("on")||Se.default.isAnyStickyEnabled(this.getModuleAttrs())||(i?oe.default.multiSelectSettingsChange(r,"sticky_enabled",0):oe.default.moduleSettingsChange(r,"sticky_enabled",0),Se.default.isStickyMode()&&oe.default.setModuleSettingMode("desktop",!0))}}},{key:"_onClickResponsive",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this._getModule();if(r){var o=n&&(0,O.default)(n)?[e].concat(We(n)):[e],a=Se.default.getResponsiveEnabledToggleValue(e,this.getModuleAttrs(),this.props.activeTabMode),i=ae.default.isMultiItemSelected((0,P.default)(r,"props.address"));(0,m.default)(o,(function(e){var n=Se.default.getResponsiveEnabledName(e);i?oe.default.multiSelectSettingsChange(r,n,a):t._emitSettingsChange(r,n,a)})),0!==a.indexOf("on")&&Se.default.isResponsiveMode()&&!Se.default.isAnyResponsiveEnabled(this.getModuleAttrs())&&oe.default.setModuleSettingMode("desktop",!0)}}},{key:"_onClickReset",value:function(e){var t=this,n=(0,P.default)(e,"props.name",!1);if(n){var r=this._getAllOptionsFields()[e.props.name],o=r&&r.type;if("select_box_shadow"!==o&&"presets_shadow"!==o){var a=this._getModule();if(a){var i=this.getModuleAttrs(),l=(0,P.default)(a,"props.address"),u=ae.default.isMultiItemSelected(l),s=(0,P.default)(e,"props.backgroundFields",!1);if(s)(0,m.default)((0,x.default)(s),(function(e){var n=Se.default.getNameByMode(e,i);u?oe.default.multiSelectSettingsChange(a,n,void 0,!1,void 0,!0):t._emitSettingsChange(a,n,void 0,!1,void 0,!0)}));else if(ot(n)){var c=it(at(n));u?c.map((function(e){return oe.default.multiSelectSettingsChange(a,Q.default.getCompositeFieldOnHover(e,n,i),void 0,!1,void 0,!0)})):c.map((function(e){return oe.default.moduleSettingsChange(a,Q.default.getCompositeFieldOnHover(e,n,i),void 0,!1,void 0,!0)}))}else{var d=Se.default.getNameByMode(n,i);if("content"===d){var f=J.default.get((0,P.default)(e,"props.default_on_front"),J.default.get((0,P.default)(e,"props.defaultValue"),(0,P.default)((0,P.default)(this._getAllOptionsFields(),n,{}),"default","")));u?oe.default.multiSelectContentChange(a,f):oe.default.moduleContentChange(a,f)}else u?oe.default.multiSelectSettingsChange(a,d,void 0,!1,void 0,!0):this._emitSettingsChange(a,d,void 0,!1,void 0,!0)}}}else{var p=Le.default.getResetAction();oe.default.rightClickMenuAction(p,"",{simulateRightClick:!0})}}}},{key:"_isResetActive",value:function(e){var t=this,n=(0,P.default)(e,"name",!1),r=this._getModule(),o=this.getModuleAttrs(),a=this.props.activeTabMode;if(!n||!(0,C.default)(r))return!1;var i=function(e){var t="desktop"!==a?J.default.get((0,P.default)(e,"default"),(0,P.default)(e,"default_".concat(a))):(0,P.default)(e,"default");return(0,O.default)(t)?(0,P.default)((0,P.default)(t,1,{}),(0,P.default)(o,(0,P.default)(t,0))):t},l=function(e){return"content"===e?(0,P.default)(r,"props.content"):(0,P.default)(o,e)},u=(0,P.default)(e,"backgroundFields",!1)||(0,P.default)(e,"background_fields",!1);if(u){var s=(0,x.default)(u).filter((function(e){return!!(0,K.default)("_use_color_gradient",e)||(-1!==e.indexOf("_enable_")||"use_background_color_gradient"===e)}));return(0,V.default)(u,(function(e,t){var n=Se.default.getBaseName(t,o);if((0,_.default)(s,n))return!1;var r=Se.default.getNameByMode(n,o),u=l(r);if((0,w.default)(u))return!1;var c=i(e);return!("desktop"===a&&""===u&&!J.default.hasValue(c))&&c!==u}))}if(ot(n)){var c=at(n);return it(c).map((function(e){return(0,P.default)(t.state.advancedFields,"".concat(e,".default"),"")})).join("|")!==it(c).map((function(e){return(0,P.default)(o,"".concat(Q.default.getCompositeFieldOnHover(e,n,o)))})).join("|")}var d=l(Se.default.getNameByMode(n,o));if((0,w.default)(d))return!1;var f=i(e);return!("desktop"===a&&""===d&&!J.default.hasValue(f))&&f!==d}},{key:"_onClickToggle",value:function(e,t,n,r){if(!ae.default.getAppPreference("builder_display_modal_settings")){var o=this._isModalExpanded(),a=o?re.default.topbar.mobile:10,i="general"===n,u="design"===n,s="css"===n;if(this._isToggleOpened(e,n)&&(0,w.default)(r)){if(i)return this.setState({openedGeneralGroup:"",openedToggle:""});if(u)return this._setHoveredToggleElement(e,!1,!0),this.setState({openedDesignGroup:"",openedToggle:""});if(s)return this.setState({openedCSSGroup:"",openedToggle:""})}if(!this._isToggleOpened(e)||(this.setState({openedToggle:""}),!(0,w.default)(r))){var c="design"===n?"advanced":n,d=".et-fb-tabs__panel--".concat(c," .et-fb-form__toggle[data-name='").concat(e,"']"),f=J.default.$topWindow(d).prevAll(".et-fb-form__toggle").length+1,p=1===f?0:61*f-a,h=".et-fb-tabs__panel--".concat(c," .et-fb-settings-module-items-wrap");"general"===c&&J.default.$topWindow(h).length&&(1===f&&(p+=J.default.$topWindow(".et-fb-options-filter-input-wrap").height()),p+=J.default.$topWindow(h).outerHeight()+30),o?J.default.$topWindow((0,l.findDOMNode)(this)).find(".et-fb-tabs__panel--".concat(c)).animate({scrollTop:p},300):J.default.$topWindow((0,l.findDOMNode)(this)).find(".et-fb-tabs__panel--active").animate({scrollTop:p},300),this.setState({openedToggle:e,openedGeneralGroup:"general"===n?e:this.state.openedGeneralGroup,openedDesignGroup:"design"===n?e:this.state.openedDesignGroup,openedCSSGroup:"css"===n?e:this.state.openedCSSGroup}),u&&this._setHoveredToggleElement(e,!0,!0)}}}},{key:"_onQuickAccessSwitchTab",value:function(){var e=ae.default.getActiveQuickAccess().clickedToggle.toggleGroupId,t="design"===e?"advanced":e,n=(0,$.default)(this._getTabs(),(function(e){return e.slug===t}));-1!==n&&this.setState({tabSelectedIndex:n})}},{key:"_onQuickAccessActive",value:function(){var e=this,t=ae.default.getActiveQuickAccess().clickedToggle,n=t.toggleId,r=t.toggleGroupId,o=t.toggleSubIdName,a=this._isModalExpanded(),i=ae.default.getAppPreference("builder_display_modal_settings"),u=a||i?re.default.topbar.mobile:10,s="design"===r?"advanced":r,c=".et-fb-tabs__panel--".concat(s," .et-fb-form__toggle[data-name='").concat(n,"']");if(i)return clearTimeout(this.quickAccessScrollUp),void(this.quickAccessScrollUp=setTimeout((function(){var t=J.default.$topWindow((0,l.findDOMNode)(e)).find(".et-fb-tabs__panel--".concat(s)),n=J.default.$topWindow(c);if(0!==n.length){var r=n[0].offsetTop;t.animate({scrollTop:r},300)}}),0));var d=J.default.$topWindow(c).prevAll(".et-fb-form__toggle").length+1,f=1===d?0:61*d-u;a?(J.default.$topWindow((0,l.findDOMNode)(this)).find(".et-fb-tabs__panel--".concat(s)).animate({scrollTop:f},300),this.setState({openedToggle:n,openedGeneralGroup:"general"===r?n:this.state.openedGeneralGroup,openedDesignGroup:"design"===r?n:this.state.openedDesignGroup,openedCSSGroup:"css"===r?n:this.state.openedCSSGroup,toggleTabs:(0,R.default)(ze({},this.state.toggleTabs),[r,n],o),filterOptions:"",filterSelected:void 0,filterNotice:!1})):(clearTimeout(this.quickAccessScrollUp),this.quickAccessScrollUp=setTimeout((function(){J.default.$topWindow((0,l.findDOMNode)(e)).find(".et-fb-tabs__panel--active").animate({scrollTop:f},300)}),0),clearTimeout(this.quickAccessOpenToggle),this.quickAccessOpenToggle=setTimeout((function(){e.setState({openedToggle:n,openedGeneralGroup:"general"===r?n:e.state.openedGeneralGroup,openedDesignGroup:"design"===r?n:e.state.openedDesignGroup,openedCSSGroup:"css"===r?n:e.state.openedCSSGroup,toggleTabs:(0,R.default)(ze({},e.state.toggleTabs),[r,n],o),filterOptions:"",filterSelected:void 0,filterNotice:!1})}),300))}},{key:"_setHoveredToggleElement",value:function(e,t,n){var r=this.props.module,o=(0,P.default)(r,"props.type"),a=(0,P.default)(r,"props.address");if(!(0,w.default)(we.quickAccessModuleToggleId[o])){var i=we.quickAccessModuleToggleId[o];if(!(0,w.default)(i[e])){var l={moduleAddress:a,toggleId:e,elementAddress:a,elementOrder:10,elementKey:null,elementOuter:null,toggleSubId:0,isChild:!(0,w.default)(r.isModuleItem),src:"settings",isOpened:t,hovered:n,isSubOpened:!1,subHovered:!1};oe.default.quickAccessHighlight(l)}}}},{key:"_setHoveredSubToggleElement",value:function(e,t,n,r){var o=this.props.module,a=(0,P.default)(o,"props.address");if(!(0,w.default)(we.quickAccessIdTextModule[e])){var i=we.quickAccessIdTextModule[e],l=(0,G.default)(i);if(!(0,w.default)(l[t])){var u={moduleAddress:a,toggleId:e,elementAddress:a,elementOrder:10,elementKey:null,elementOuter:null,toggleSubId:t,isChild:!(0,w.default)(o.isModuleItem),src:"settings",isOpened:!0,hovered:!1,isSubOpened:n,subHovered:r};oe.default.quickAccessHighlight(u)}}}},{key:"_unsyncGlobalContent",value:function(){this._unsyncGlobalSetting("et_pb_content_field",!0)}},{key:"_unsyncGlobalSetting",value:function(e,t){oe.default.unsyncGlobalSetting(e,this.props.module,t)}},{key:"_handleFormSubmission",value:function(t){if(t.preventDefault(),((0,w.default)((0,P.default)(this,"props.module.props.loading"))||!this.props.module.props.loading)&&!e((0,l.findDOMNode)(this)).find(":focus").hasClass("wp-color-picker")){var n=this,r=this.props.module;(0,m.default)(this.state.generalFields,(function(e){"text"===e.type&&((0,w.default)(e.name)||-1===e.name.indexOf("url")&&-1===e.name.indexOf("alt")&&-1===e.name.indexOf("link")&&n._onChange(e.name,J.default.decodeHtmlEntities(r.props.attrs[e.name])))})),oe.default.closeSettings(this._isModuleItemSettings())}}},{key:"_handleFieldConditionalDefaults",value:function(e,t,n){if((0,O.default)(e.default)&&"filter"===(0,P.default)(e,"default.0")){var r=(0,P.default)(e,"default.1").split("_").join(".");return ze(ze({},e),{},{default:(0,Z.applyFilters)(r,e)})}return(0,O.default)(e.default)&&!(0,g.default)(e.default)?ze(ze({},e),{},{conditionalDefaults:e.default,default:n&&!(0,g.default)((0,P.default)(t,e.name))?(0,P.default)(t,e.name):J.default.getConditionalDefault(e.default,t,!1,n)}):ze({},e)}},{key:"isGlobalModuleOpened",value:function(e){if(this.props.isGlobalPresetsMode)return!1;var t=this._getModule(),n=(0,_.default)(["et_pb_section","et_pb_row","et_pb_row_inner"],(0,P.default)(t,"props.type",""))?(0,P.default)(t,"props.type",""):"et_pb_module";if(ae.default.isLibraryPostType()&&"global"===ETBuilderBackend.layoutScope){if(e){var r="et_pb_".concat(ETBuilderBackend.layoutType);return!(0,P.default)(t,"isModuleItem")&&r===n}return!0}var o=this.getModuleAttrs(),a=(0,P.default)(o,"global_parent",""),i=(0,P.default)(o,"global_module",""),l=(0,P.default)(t,"props.address").split(".");if(!e&&l.length>1){var u=!1,s=J.default.getModuleAddressSequence(l);return(0,m.default)(s,(function(e){var t=(0,c.default)(ae.default.getSectionsFlattened(),{address:e});if(""!==(0,P.default)(t,"attrs.global_module",""))return u=!0,!1})),u}return!e&&""!==a&&"et_pb_section"!==n||(""!==i||!(0,w.default)(t.props.libraryModuleScope)&&"global"===t.props.libraryModuleScope)}},{key:"getGlobalTabClass",value:function(){if(this.isGlobalModuleOpened())return"et-fb-tabs__item__global"}},{key:"getGlobalModalClass",value:function(e){var t=(0,w.default)(e)?"":e;if(this.isGlobalModuleOpened())return"".concat(t,"__global")}},{key:"isGlobalOptionSynced",value:function(e){if(!this.isGlobalModuleOpened())return!0;var t=(0,P.default)(this.props.module,"props.unsyncedGlobalSettings",[]);return!(0,_.default)(t,e)}},{key:"isSelectiveSyncAvailable",value:function(e){return!(0,P.default)(e,"hide_sync",!1)&&(this.isGlobalModuleOpened(!0)&&!(0,_.default)(["et_pb_section","et_pb_row","et_pb_row_inner"],this.props.module.props.type))}},{key:"_onFilterInput",value:function(e){oe.default.setOptionsFilter({filterOptions:e,filterSelected:this.state.filterSelected}),this.setState({filterOptions:e,filterNotice:!1})}},{key:"_onFilterSelect",value:function(e){oe.default.setOptionsFilter({filterOptions:this.state.filterOptions,filterSelected:e}),this.setState({filterSelected:e,filterNotice:!1})}},{key:"_onFilterChanged",value:function(e){this.setState({filterSelected:e,filterNotice:!1})}},{key:"_onGoToOption",value:function(t){var n=this;if(!(0,g.default)(t)){(0,M.default)(t.elementId,"transform_")&&(t.elementId="transform_styles");var r=this.props.module,o=[{slug:"general",toggleGroupId:"general"},{slug:"advanced",toggleGroupId:"design"},{slug:"css",toggleGroupId:"css"}],a=this.getCustomTabsList();a&&(0,m.default)(a,(function(e,t){o.push({slug:t,toggleGroupId:t})}));var i={};(0,m.default)(o,(function(e,o){var a=n._getNonEmptyToggles(r.props.type,"".concat(e.slug,".toggles"),e.slug).toggles;if("option"===(0,P.default)(t,"type")){var l=n._getOptionsFields(e.slug);if((0,m.default)(l,(function(n,r){var a=(0,w.default)(n.name)?r:n.name;((0,O.default)(t.elementId)&&(0,_.default)(t.elementId,a)||(0,S.default)(t.elementId)&&t.elementId===a)&&(i={tabSlug:e.slug,toggleGroupId:e.toggleGroupId,keyCompare:a,fieldData:n,tabSelectedIndex:o})})),!(0,g.default)(i)){var u=0;(0,m.default)(a,(function(e,t){u++,t===i.fieldData.toggle_slug&&(i.toggleId=t,i.toggleOrder=u)}))}}else if(e.toggleGroupId===(0,P.default)(t,"payload.toggleGroupId")){i={tabSlug:e.slug,toggleGroupId:e.toggleGroupId,tabSelectedIndex:o};var s=0;(0,m.default)(a,(function(e,n){s++,n===(0,P.default)(t,"payload.toggleId")&&(i.toggleId=n,i.toggleOrder=s)}))}})),(0,g.default)(i)||(0,w.default)(i.toggleId)||(0,w.default)(i.toggleOrder)?this.setState({filterOptions:"",filterSelected:void 0,filterNotice:!1}):(this.setState({tabSelectedIndex:i.tabSelectedIndex,filterOptions:"",filterSelected:void 0,filterNotice:!1}),clearTimeout(this.goToOptionTimer),this.goToOptionTimer=setTimeout((function(){e((0,l.findDOMNode)(n)).find(".et-fb-tabs__item").each((function(t,n){t===i.tabSelectedIndex&&e(n).trigger("click")})),n._onClickToggle(i.toggleId,i.toggleOrder,i.toggleGroupId,!0)}),100))}}},{key:"_getNonEmptyToggles",value:function(e,t,n){var r="css.toggles"===t?"custom_css.toggles":t,o="".concat(r,"_").concat(n,"_toggles"),a=(0,P.default)(this.props,"module.props.address"),i=ae.default.isMultiItemSelected(a),l=ae.default.getMultiSelectElementsType();if(this.cache.has(e,o)&&!i)return this.cache.get(e,o);var u={};if(i){if(this.cache.hasElements(l,o))return this.cache.getElements(l,o);u=ke.default.generateSelectedToggles(r)}var s=(0,g.default)(u)?(0,T.default)({unclassified:{title:"",priority:10}},(0,P.default)(ie.default.getOptionsToggles(e),r,{})):u,c=this._getOptionsFields(n),d=this.getBackgroundFieldsNames(),f={},p={};(0,m.default)(c,(function(e){var t=e.toggle_slug,n=e.name,r=e.depends_on,o=e.show_if,a=e.show_if_not,i=e.type;(0,_.default)(["skip","computed"],i)||(0,w.default)(n)||(t=(0,w.default)(t)?"unclassified":t,(0,R.default)(f,t,!0),r||o||a||(0,_.default)(d,n)||(0,R.default)(p,t,!0))}));var v={toggles:(0,N.default)(s,(function(e,t){return(0,h.default)(f,t)})),safe:p};return i?this.cache.setElements(l,o,v):this.cache.set(e,o,v),v}},{key:"_isFieldValueModified",value:function(e,t,n,r){var o=this,a=!1,i=(0,w.default)(e.name)?void 0:t[e.name],l=e.default;if((0,w.default)(i)&&"content"===e.name&&!(0,w.default)(this.props.module.props.content)&&(i=(0,P.default)(this,"props.module.props.content")),!(0,w.default)(e.default_from)){var u=e.default_from.split(".").pop();!u||(0,w.default)(r[u])||(0,w.default)(r[u].default)||(l=r[u].default)}if(!(0,w.default)(e.name)&&((0,K.default)(e.name,"_tablet")||(0,K.default)(e.name,"_phone"))){var s=ee.default.getFieldBaseName(e.name),c=e.name.replace(s,"");if((0,h.default)(r,s)){var d=r[s];(0,h.default)(d,"default".concat(c))&&(l=d["default".concat(c)])}}switch(!(0,g.default)(i)&&(0,S.default)(i)&&(i=i.toLowerCase()),!(0,g.default)(l)&&(0,S.default)(l)&&(l=l.toLowerCase()),e.type){case"font":a=!(0,g.default)(i)&&"||||||||"!==i&&i!==l;break;case"custom_padding":case"custom_margin":a=!(0,g.default)(i)&&i!==l;break;case"border-radius":a=!(0,g.default)(i)&&"||||"!==i&&"on||||"!==i&&i!==l;break;case"multiple_checkboxes":a=!((0,g.default)(i)||(0,S.default)(i)&&-1===i.indexOf("on"))&&i!==l;break;case"tiny_mce":a=!((0,g.default)(i)||(0,S.default)(i)&&!i.replace(/(?:<br ?\/?>|\n)/g,"").length)&&i!==l;break;case"range":var f=e.default_unit;if(!(0,w.default)(e.default_from)){var p=e.default_from.split(".").pop();(0,w.default)(r[p])||(0,w.default)(r[p].default_unit)||(f=r[p].default_unit)}(0,O.default)(l)&&(l=l[1][t[l[0]]]),f&&(i&&-1===i.indexOf(f)&&(i="".concat(i).concat(f)),l&&-1===l.indexOf(f)&&(l="".concat(l).concat(f))),a=!(0,g.default)(i)&&i!==l;break;case"color-alpha":a=!(0,g.default)(i)&&l!==i;break;case"yes_no_button":a=!(0,g.default)(i)&&"off"!==i&&l!==i;break;case"select":a=!(!J.default.hasValue(i)||(0,C.default)(e.options)&&!(0,g.default)(e.options)&&Object.keys(e.options)[0]===i)&&l!==i;break;case"composite":(0,w.default)(e.composite_structure)||(0,m.default)(e.composite_structure,(function(e){(0,w.default)(e.controls)||(0,m.default)(e.controls,(function(i,l){var u=ze(ze({},i),{},{name:l}),s=ze(ze({},r),e.controls);!o._isFieldDependencyExcluded(u,s)&&o._isFieldValueModified(u,t,n,s)&&(a=!0)}))}));break;case"background":if(!(a=(!(0,S.default)(i)||!(0,g.default)(i))&&l!==i)&&!(0,g.default)(e.backgroundFields)){var v=e.name.split("_").slice(-1).pop();v&&(0,m.default)(["background_color_%s","use_background_color_gradient_%s","bg_img_%s","background_video_mp4_%s","background_video_webm_%s"],(function(e){var n=e.replace("%s",v);(0,g.default)(t[n])||"off"===t[n]||(a=!0)}))}break;default:a=!(!(0,y.default)(i)&&!(0,H.default)(i)&&(0,g.default)(i))&&l!==i}if(!a&&this._isOptionMatchesStylesResponsive(e,t)){var b=ze(ze({},e),{},{name:"".concat(e.name,"_tablet"),default:(0,h.default)(e,"default_tablet")?e.default_tablet:l,mobile_options:void 0});if(this._isFieldValueModified(b,t,n,r)&&(a=!0),!a){var _=ze(ze({},e),{},{name:"".concat(e.name,"_phone"),default:(0,h.default)(e,"default_phone")?e.default_tablet:b.default,mobile_options:void 0});this._isFieldValueModified(_,t,n,r)&&(a=!0)}}return a}},{key:"_isOptionMatchesStylesModified",value:function(e,t,n,r){var o=this;if("general"===n&&!(0,w.default)(e.toggle_slug)&&"background"!==e.toggle_slug)return!1;if(!(0,_.default)(["general","advanced","css"],n)&&(0,_.default)(["text","textarea","tiny_mce","date_picker"],e.type))return!1;var a=this._isFieldValueModified(e,t,n,r);return a||"background_color"!==e.name||(0,m.default)(rt,(function(e){(0,w.default)(r[e])||o._isFieldValueModified(r[e],t,n,r)&&(a=!0)})),a}},{key:"_isOptionMatchesStylesResponsive",value:function(e,t){if((0,w.default)(e.mobile_options))return!1;var n=t["".concat(e.name,"_last_edited")],r=(0,w.default)(n)?["off","desktop"]:n.split("|");return!(0,w.default)(r[0])&&"on"===r[0]}},{key:"_isOptionMatchesStylesHover",value:function(e,t){var n="background_color"===e.name?"background":e.name;return Q.default.isEnabled(n,t)}},{key:"_isOptionMatchesStylesSticky",value:function(e,t){var n="background_color"===e.name?"background":e.name;return te.default.isEnabled(n,t)}},{key:"_isOptionMatchesActiveContent",value:function(e,t,n,r){return!("general"===n&&!(0,w.default)(e.toggle_slug)&&"background"===e.toggle_slug)&&(!(0,_.default)(["advanced","css"],n)&&(!(!(0,_.default)(["general","advanced","css"],n)&&!(0,_.default)(["text","textarea","tiny_mce","date_picker"],e.type))&&this._isFieldValueModified(e,t,n,r)))}},{key:"_isFieldDependencyExcluded",value:function(e,t){return!(0,w.default)(e.depends_on)&&!this._isVisible(e,t)||!((0,w.default)(e.show_if)&&(0,w.default)(e.show_if_not)||(0,X.canShowField)(e,this.setting_resolver))}},{key:"_getFilteredFields",value:function(e){var t=this,n=this._getOptionsFields(e),r=this.state.filterOptions,o=this.state.filterSelected;if(!this._isFilterActive())return n;var a=this.props.module.props.type,i="".concat(e,"_filter");if(this.cache.has(a,i)){var l=this.cache.get(a,i);if(l.search===r&&l.filterSelected===o)return l.filtered}var u=this.getModuleAttrs(),s=(0,P.default)(this,"props.module.props.content"),c={};(0,m.default)(n,(function(e){var t=e.type,n=e.name,r=e.is_fb_content;if("codemirror"===t||n&&0===n.indexOf("custom_css_")){var o=r?s:u[n];o&&(c[n]=o)}}));var d=(0,N.default)(n,(function(e){var n=e.type,r=e.label,o=e.description,a=e.name;return"composite"===n||t._isOptionMatchesFilter(r,o,c[a])}));return J.default.hasValue(o)?(d=this._isOptionMatchesFilterSelected(d,e),this.cache.set(a,i,{search:r,filterSelected:o,filtered:d}),d):(this.cache.set(a,i,{search:r,filterSelected:o,filtered:d}),d)}},{key:"_getFilteredToggleFields",value:function(e,t,n){var r=this.state.filterOptions,o=this.state.filterSelected;if(!this._isFilterActive())return t;var a=this.props.module.props.type,i="".concat(n,"_").concat(e,"_filter_toggle");if(this.cache.has(a,i)){var l=this.cache.get(a,i);if(l.search===r&&l.filterSelected===o)return l.filtered}return this._isOptionMatchesFilter(e)&&(t=this._getOptionsFields(n)),J.default.hasValue(o)?(t=this._isOptionMatchesFilterSelected(t,n),this.cache.set(a,i,{search:r,filterSelected:o,filtered:t}),t):(this.cache.set(a,i,{search:r,filterSelected:o,filtered:t}),t)}},{key:"_isOptionMatchesFilterSelected",value:function(e,t){var n=this,r=this._getOptionsFields(t),o=this.getModuleAttrs();return(0,N.default)(e,(function(e){if(n._isFieldDependencyExcluded(e,r))return!1;switch(n.state.filterSelected){case"styles_modified":return n._isOptionMatchesStylesModified(e,o,t,r);case"styles_responsive":return n._isOptionMatchesStylesResponsive(e,o);case"styles_hover":return n._isOptionMatchesStylesHover(e,o);case"styles_sticky":return n._isOptionMatchesStylesSticky(e,o);case"active_content":return n._isOptionMatchesActiveContent(e,o,t,r);default:return!1}}))}},{key:"_isOptionMatchesFilter",value:function(){for(var e=this.state.filterOptions.toLowerCase(),t=!1,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(0,m.default)(r,(function(n){return(0,w.default)(n)||-1===n.toLowerCase().indexOf(e)||(t=!0),!t})),t}},{key:"_getOptionsFields",value:function(e){var t=this,n=this._getModule(),r=n.props.type,o=this.getModuleAttrs(),a=this.props.isGlobalPresetsMode,i=ae.default.isMultiItemSelected(n.props.address);if(this.cache.has(r,e)&&!i)return this.cache.get(r,e);var l=this,u=(0,T.default)({},this.state["".concat(e,"Fields")]),s=ae.default.getMultiSelectElementsName(),c=ae.default.getMultiSelectElementsType();if(i){if(this.cache.hasElements(c,e))return this.cache.getElements(c,e);var f={};(0,m.default)(s,(function(n){var r={},a={props:{type:n,attrs:o}};"general"===e?r=t.getComponentFields(a):"advanced"===e?r=t.getComponentAdvancedFields(a):"css"===e&&(r=t.getComponentCSSFields(a)),f=ke.default.generateSelectedFieldsItem(f,r)})),u=(0,g.default)(f)?u:f}if(J.default.isOn(o.specialty)&&"et_pb_section"===r&&!a&&function(){for(var r=(0,h.default)(n.props,"children")&&!(0,g.default)(n.props.children)?n.props.children:n.props.content,o=r.length,a=function(n){var a=ae.default.getColumnSettingFields(e),i={},s={};(0,m.default)(a,(function(e,t){var a=t.replace("%s",n),c={label:(0,P.default)(e,"label","").replace("%s",1!==o?n:""),name:a,sub_toggle:(0,P.default)(e,"sub_toggle","").replace("%s",n),isColumnField:!0,columnIndex:n-1,columnType:r[n-1].type};(0,w.default)(e.affects)||(0,g.default)(e.affects)||(c.affects=(0,d.default)(e.affects,(function(e){return e.replace("%s",n)}))),(0,O.default)(e.presets)&&(c.presets=e.presets.map((function(e){return ze(ze({},e),{},{fields:e.fields||{}})})).map((function(e){return ze(ze({},e),{},{fields:(0,x.default)(e.fields).map((function(t){return Je({},t.replace("%s",n),e.fields[t])}))})})).map((function(e){return ze(ze({},e),{},{fields:e.fields.reduce((function(e,t){return ze(ze({},e),t)}),{})})}))),(0,w.default)(e.depends_on)||(0,g.default)(e.depends_on)||(c.depends_on=(0,d.default)(e.depends_on,(function(e){return e.replace("%s",n)})));var f=(0,T.default)(J.default.intentionallyClone(e),c);"background_color_%s"===t&&(i=J.default.intentionallyClone(f)),(0,_.default)(l.getColumnBackgroundFieldsNames(),t)?s[a]=f:u[a]=f})),"general"!==e||(0,g.default)(a)||(i.label=ETBuilderBackend.i18n.modules.column.backgroundColor.replace("%s",n),i.type="background",i.backgroundFields=s,i.isColumnBackground=!0,i.columnIndex=n,i._onChange=t._onChange,i.onMouseEnterGroup=t._onMouseEnterGroup,i.onMouseLeaveGroup=t._onMouseLeaveGroup,i.isDescriptionVisible=t._isDescriptionVisible,i.isHoveredGroup=t._isHoveredGroup,i.onClickHelp=t._onClickHelp,i.isResetActive=l._isResetActive,i.onClickReset=l._onClickReset,u["background_color_".concat(n)]=i)},i=1;i<=o;i++)a(i)}(),"css"===e){var p=["before","main_element","after"];(0,m.default)(u,(function(e,t){var n=J.default.intentionallyClone(e),r=!0;(0,m.default)(["module_id","module_class"],(function(e){(0,M.default)(t,e)&&(r=!1)})),r&&(0,w.default)(e.selector)&&(n.selector=""),(0,w.default)(e.isColumnField)&&((0,_.default)(["module_id","module_class"],t)||!(0,w.default)(e.type)?n.name=t:n.name=!(0,w.default)(e.selector)||(0,w.default)(e.name)||(0,_.default)(p,t)?"custom_css_".concat(t):t),u[t]=n}))}return i?this.cache.setElements(c,e,u):this.cache.set(r,e,u),u}},{key:"_getAllOptionsFields",value:function(){var e=this.props.module.props.type;if(this.cache.has(e,"all"))return this.cache.get(e,"all");var t=this._getOptionsFields("general"),n=this._getOptionsFields("advanced"),r=this._getOptionsFields("css"),o=this.getCustomTabsFields(e),a=(0,D.default)({},t,n,r);return o&&(0,m.default)(o,(function(e){a=(0,D.default)(a,e)})),this.cache.set(e,"all",a),a}},{key:"getBackgroundEnableFieldsNames",value:function(){return ie.default.getBackgroundEnableFieldsNames()}},{key:"getBackgroundFieldsNames",value:function(){return ie.default.getBackgroundFieldsNames()}},{key:"getColumnBackgroundFieldsNames",value:function(){return(0,x.default)(ETBuilderBackend.columnSettingFields.general)}},{key:"getModuleFields",value:function(){return ze(ze({},this.state.generalFields),this.state.advancedFields)}},{key:"isGlobalRow",value:function(){var e=(0,P.default)(this,"module_type","");return!!(0,_.default)(["et_pb_row","et_pb_row_inner"],e)&&(""!==(0,P.default)(this,"props.module.props.attrs.global_module","")||ae.default.isEditingLibraryItem("row"))}},{key:"_renderModuleItems",value:function(){var e=this;if(this._isFilterActive())return!1;var t=(0,_.default)(["2_3,1_3","1_3,2_3"],(0,P.default)(this,"props.module.props.specialty_layout",""))||"2_3"===(0,P.default)(this,"props.module.props.content.[0].attrs.saved_specialty_column_type","")?4:3,n=(0,P.default)(this,"module_type",""),r=(0,P.default)(this,"props.module.props.content.length",0),o=this.isGlobalRow(),i="et_pb_row"===n&&6===r||"et_pb_row_inner"===n&&t===r,l=(0,_.default)(["et_pb_row","et_pb_row_inner"],n)&&1===r,s="";this._hasModuleItem()&&(0,O.default)(this.props.module.props.content)&&!(0,g.default)(this.props.module.props.content)&&(s=a.default.createElement(me.default,{module:this.props.module,_v:this.props.module.props._v,setHoveredElement:this._setHoveredElement,disableDuplicate:i||o,disableDelete:l||o,onToggleRightMenu:this._onToggleRightMenu,isGlobalPresetsMode:this.props.isGlobalPresetsMode}));var c="";if(this._hasModuleItem()){var d=!1;if(this.isSelectiveSyncAvailable()){var f=this.isGlobalOptionSynced("et_pb_content_field")?"#97D000":"#EF5555";d=a.default.createElement("div",{className:"et-fb-form__global-sync",onClick:this._unsyncGlobalContent},a.default.createElement(se.default,{icon:"sync",color:f}))}var p=!!ae.default.getModuleItemDragEndWaiting()&&a.default.createElement("div",{className:"et-fb-settings-module-items--waiting"}),h=ETBuilderBackend.i18n,m=(0,P.default)(h,"modules.".concat(this.props.module.props.type,".addNew"))||h.controls.moduleItem.addNew,v=i||o||this.props.isGlobalPresetsMode?null:a.default.createElement("span",{className:"et-fb-item-button-wrap--add"},a.default.createElement(u.Motion,{defaultStyle:{size:.5,opacity:0},style:{size:this.props.options.animate?(0,u.spring)(1,{stiffness:300,damping:20}):1,opacity:this.props.options.animate?(0,u.spring)(1,{stiffness:300,damping:20}):1}},(function(t){return a.default.createElement(ce.default,{buttonName:ne.default.MODULE_ITEM_ADD,editingModule:e,style:{opacity:t.opacity,transform:"scale( ".concat(t.size," )")},title:m})})));c=this._isModuleItemSettings()?"":a.default.createElement("div",{className:"et-fb-settings-module-items-wrap"},s,d,v,p)}return c}},{key:"renderToggleFields",value:function(e,t){return!!ae.default.isProductTourActive()||(!!this.builder_display_modal_settings||(!!this._isFilterActive()||this._isToggleOpened(e,t)))}},{key:"_isValidProductTourToggle",value:function(e,t){return!("et_pb_row"===(0,P.default)(this.props,"module.props.type")&&!(0,g.default)(t.background)&&"background"!==e)}},{key:"_maybeRenderHelpButton",value:function(e){var t=this.props.module,n=e||t.props.type;if((0,w.default)(ETBuilderBackend.i18n.videos[n]))return!1;if(this.state.filterNotice)return!1;var r=this.props.address,o=ae.default.isMultiItemSelected(r),i=1===ae.default.getMultiSelectElementsName().length;return o&&!i&&(n="et_pb_default"),a.default.createElement(le.default,{videoListId:n})}},{key:"_renderTabOptionsPanel",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=["general","advanced","css"],i="advanced"===e?"design":e,l=(0,_.default)(o,e)?"".concat(e,"_settings"):e;if(l="css"===e?"custom_css_settings":l,!ae.default.isAllowedAction(l))return!1;var u=this,f=u.props,O=f.module,E=f.activeTabMode,M=ae.default.isMultiItemSelected(O.props.address),D=[],N=(0,_.default)(["et_pb_column","et_pb_column_inner"],O.props.type),A=!(!O.isModuleItem||(0,w.default)(O.parentModule.props.type)||N)&&O.parentModule.props.type,B=this._getAllOptionsFields(),F=this._getFilteredFields(e),I=this.getModuleFields(),W=(0,x.default)(I),V=W.reduce((function(e,t){return e||!!t.match(/background_color(_[0-9])?$/)}),!1),H=this._getNonEmptyToggles(O.props.type,"".concat(e,".toggles"),e),G=H.safe,U=H.toggles;this.setting_resolver.property_definitions=B,"et_pb_signup_custom_field"===(0,P.default)(O,"props.child_slug")&&(this.setting_resolver.child_property_definitions=this.getComponentFields(O,!1,"et_pb_signup_custom_field")),"et_pb_signup_custom_field"===(0,P.default)(O,"props.type")&&(this.setting_resolver.property_definitions.parentModule=this.getComponentFields({props:{type:"et_pb_signup"}}));var z=0,q=e!==t,K="general"===e&&!M&&this._renderModuleItems(),$=(0,P.default)(O,"props.module_items_config",{}),Y=(0,P.default)($,"toggle_slug"),Z=(0,P.default)($,"location"),ne=(0,g.default)($)||(0,X.canShowField)($,this.setting_resolver),re=["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column"],oe="";if((0,_.default)(re,O.props.type))oe=(0,c.default)(ETBuilderBackend.structureModules,{slug:O.props.type}).name;else{var ie=(0,c.default)(ETBuilderBackend.modules,{label:O.props.type});(0,w.default)(ie)||(0,w.default)(ie.title)||(oe=ie.title)}var le=ae.default.getActiveQuickAccess(),ue=le.clickedToggle,se=ue.toggleId,ce=ue.toggleSubId,de=(0,Me.getModalPreferredDimensions)(),me=de.width,we=(0,P.default)(this.state.toggleTabs,i,{}),Pe=(0,P.default)(this,"props.module.props.type"),Te=(0,_.default)(["et_pb_row","et_pb_row_inner"],Pe)&&!this.props.isGlobalPresetsMode,xe=(0,P.default)(this._getModule(),"props.is_official_module"),je=((0,P.default)(this._getModule(),"props.address",""),this.getModuleAttrs()),De=this._isFilterActive(),Le=this.props.isGlobalPresetsMode?"settings-modal-back":"settings-modal-front";return a.default.createElement(fe.ETBuilderTabPanel,{key:"et-fb-tabs__panel--".concat(i),className:"et-fb-tabs__panel--".concat(e),slug:e,isModuleItemSettings:this._isModuleItemSettings(),displayFilter:r,filterValue:this.state.filterOptions,_onFilterInput:this._onFilterInput,tabsCount:this.state.tabsCount,filterItems:this._getFilterItems(),filterGroups:{show_only:ETBuilderBackend.i18n.modals.show_only},filterSelected:this.state.filterSelected,filterNotice:this.state.filterNotice,_onFilterSelect:this._onFilterSelect,filterName:Le},a.default.createElement(pe.default,{onSubmit:this._handleFormSubmission},a.default.createElement("input",{type:"submit",className:"et-fb-hide"}),ne&&(0,w.default)(Y)&&!Te&&K,(0,d.default)(U,(function(t,r){if(xe||!n.props.isGlobalPresetsMode||"general"!==e||"background"===r){z++;var o=(0,C.default)(t)?t.title:t,l=(0,C.default)(t)?t.sub_toggles:{},c=!(0,g.default)(l)&&(0,P.default)(t,"tabbed_subtoggles",!1),f=n._getFilteredToggleFields(o,F,e),N=(0,h.default)(G,r)&&"unclassified"!==r,W=(0,P.default)(t,"always_open",!1),H=!N||n.renderToggleFields(r,i)||W,$=n._isToggleOpened(r,i)||!q&&n._isValidProductTourToggle(r,U)||n.productTourOptionToggle===r||W,re=(0,j.default)(U)===z;J.default.hasValue(o)||"unclassified"!==r||(o=oe);var ie=se===r?ce:0,le=!!l&&(0,x.default)(l)[0],ue={};return a.default.createElement(pe.ETBuilderFormToggle,{fields:f,key:r,title:o,nonDefaultOptions:ue,toggleId:r,toggleGroupId:i,toggleSubId:ie,_onClickToggle:n._onClickToggle,_onSwitchTab:n._onSwitchTab,setHoveredToggleElement:n._setHoveredToggleElement,setHoveredSubToggleElement:n._setHoveredSubToggleElement,isToggleOpened:$,toggleOrder:z,isLastToggle:re,isFilterActive:De,isGroupActive:!n.builder_display_modal_settings,showEmpty:N,subToggles:l,tabbedSubtoggles:c,setHoveredElement:function(e,t){if(e){var r=t.props.toggleId,o=_e.default.getHelper(e);if(o){var a=o.preparePayload(t,n.props.module);n._setHoveredElement(e,r,a)}}},alwaysVisible:W,onToggleRightMenu:n._onToggleRightMenu},ne&&r===Y&&"top"===Z&&K,!!H&&(0,d.default)(f,(function(t,o){var l=t,d=(0,P.default)(l,"toggle_slug","unclassified"),f=(0,w.default)(l.type)&&"css"===e?"codemirror":l.type;if(d!==r||(0,w.default)(f))return!1;if(!(0,w.default)(l.specialty_only)&&"yes"===l.specialty_only&&((0,w.default)(je.specialty)||"on"!==je.specialty))return!1;"sortable_list"===(l="composite"===t.type?J.default.intentionallyCloneDeep(t):J.default.intentionallyClone(t)).type&&(l.useAddNewButton=!0);var C="et_pb_counter"===n.props.module.props.type&&"content"===l.name,x=(0,s.default)("et-fb-settings-options","et-fb-option--".concat(f.replace("_","-"))),N="",F="",W="",H=je.content||(M?ke.default.generateSelectedContent(O.props.content,n.updatedAttrs):O.props.content);H=H||"";var G,z={},$={},Z=A?"".concat(o,"_child"):o,re="",ie=(0,P.default)(l,"default","");if("categories"===f&&(l.categories_list={},l.taxonomy_name=(0,w.default)(l.taxonomy_name)?"category":l.taxonomy_name),"select_sidebar"===f&&(l.sidebars_list={}),"text"===f&&(0,_.default)(["et_pb_signup","et_pb_contact_form"],O.props.type)&&(0,_.default)(l.option_class,"--last-field")&&(f="text_api_key"),"background_color"===l.name)l.backgroundFields={},l.onMouseEnterGroup=u._onMouseEnterGroup,l.onMouseLeaveGroup=u._onMouseLeaveGroup,l.isDescriptionVisible=u._isDescriptionVisible,l.isHoveredGroup=u._isHoveredGroup,l.onClickHelp=u._onClickHelp,(0,m.default)(rt,(function(e){var t=(0,P.default)(I,e,!1);t&&(l.backgroundFields[e]=ze({},t),l.backgroundFields[e]._unsyncGlobalSetting=u._unsyncGlobalSetting,l.backgroundFields[e].isGlobalOptionSynced=u.isGlobalOptionSynced(e),l.backgroundFields[e].isSelectiveSyncAvailable=u.isSelectiveSyncAvailable(),l.backgroundFields[e].isGlobalOptionSynced=u.isGlobalOptionSynced(e))})),l.isResetActive=u._isResetActive,l.onClickReset=u._onClickReset,(0,j.default)(l.backgroundFields)>1&&(l.name="background",l.label=ETBuilderBackend.i18n.modules.background.label,l.type="background",f="background",l._onChange=u._onChange,l._unsyncGlobalSetting=u._unsyncGlobalSetting,l.description=ETBuilderBackend.i18n.modules.background.description,(0,w.default)(l.is_toggleable)&&delete l.depends_on,delete l.additional_code,delete l.depends_show_if);else if(V&&(0,_.default)(rt,Q.default.getFieldBaseName((0,P.default)(l,"name",""))))return!1;("background-field"===l.type&&(l.onMouseEnterGroup=u._onMouseEnterGroup,l.onMouseLeaveGroup=u._onMouseLeaveGroup,l.isDescriptionVisible=u._isDescriptionVisible,l.isHoveredGroup=u._isHoveredGroup,l.onClickHelp=u._onClickHelp,l.background_fields=(0,p.default)(l.background_fields,(function(e,t){var n=Ie({},e);return n._unsyncGlobalSetting=u._unsyncGlobalSetting,n.isGlobalOptionSynced=u.isGlobalOptionSynced(t),n.isSelectiveSyncAvailable=u.isSelectiveSyncAvailable(),n.isGlobalOptionSynced=u.isGlobalOptionSynced(t),n})),l.isResetActive=u._isResetActive,l.onClickReset=u._onClickReset),A&&st(l))&&(l=ct(l,O,"general"===e?"":e,!n.props.isGlobalPresetsMode));var se=n._getModule(),ce=!1!==(0,P.default)(l,"depends_on[0]",!1)&&(0,P.default)(l,"depends_on[0]",!1),de=l.name||"",fe=l.name||"",ve="tabs"===(0,P.default)(l,"hover",!1),_e=!1!==(0,P.default)(l,"hover",!1)||void 0,Me=Q.default.isHoverMode(),Pe=Me&&ve&&Q.default.isEnabled(l.name,je);Me&&Q.default.doesSupport(l)&&(Q.default.isEnabled(l.name,je)||Q.default.isEnabled(ce,je))&&(de=Q.default.getHoverField(l.name||""),fe=Q.default.getFieldBaseName(de));var xe=te.default.isStickyMode(),Le=te.default.doesSupport(l)&&te.default.hasStickyOptions((0,P.default)(se,"props",{})),Ne=xe&&Le&&(te.default.isEnabled(l.name,je)||te.default.isEnabled(ce,je));if(Ne&&(de=te.default.getStickyField(l.name||""),fe=te.default.getFieldBaseName(de)),"custom_padding"===f&&n._hasColumnsFields()&&"custom_padding"!==fe){var Ae="";Me?Ae=Q.default.hoverSuffix():xe&&(Ae=te.default.stickySuffix());var Be=l.name.replace("padding_",""),Fe=J.default.hasValue(je["padding_".concat(Be,"_last_edited")])?je["padding_".concat(Be,"_last_edited")].split("|"):[],We=((0,P.default)(je,"padding_top_".concat(Be).concat(Ae),"")||"").trim(),Ve=((0,P.default)(je,"padding_right_".concat(Be).concat(Ae),"")||"").trim(),He=((0,P.default)(je,"padding_bottom_".concat(Be).concat(Ae),"")||"").trim(),Ge=((0,P.default)(je,"padding_left_".concat(Be).concat(Ae),"")||"").trim(),Ue=((0,P.default)(je,"padding_top_bottom_link_".concat(Be).concat(Ae),"")||"").trim(),qe=((0,P.default)(je,"padding_left_right_link_".concat(Be).concat(Ae),"")||"").trim(),Ke="".concat(We,"|").concat(Ve,"|").concat(He,"|").concat(Ge,"|").concat(Ue,"|").concat(qe),$e=n.state.advancedFields,Ye=(0,P.default)($e,"padding_top_".concat(Be).concat(Ae,".default"),"").trim(),Xe=(0,P.default)($e,"padding_right_".concat(Be).concat(Ae,".default"),"").trim(),Je=(0,P.default)($e,"padding_bottom_".concat(Be).concat(Ae,".default"),"").trim(),Qe=(0,P.default)($e,"padding_left_".concat(Be).concat(Ae,".default"),"").trim(),Ze=(0,P.default)($e,"padding_top_bottom_link_".concat(Be).concat(Ae,".default"),"").trim(),et=(0,P.default)($e,"padding_left_right_link_".concat(Be).concat(Ae,".default"),"").trim(),tt="".concat(Ye,"|").concat(Xe,"|").concat(Je,"|").concat(Qe,"|").concat(Ze,"|").concat(et);if(l.default=tt,N={desktop:Ke,tablet:(0,P.default)(je,"padding_".concat(Be,"_tablet"),""),phone:(0,P.default)(je,"padding_".concat(Be,"_phone"),""),isResponsive:!(0,w.default)(Fe[0])&&"on"===Fe[0],activeTab:(0,w.default)(Fe[1])?"desktop":Fe[1]},Me||xe){var nt=(0,P.default)(je,"padding_top_".concat(Be),"").trim(),ot=(0,P.default)(je,"padding_right_".concat(Be),"").trim(),at=(0,P.default)(je,"padding_bottom_".concat(Be),"").trim(),it=(0,P.default)(je,"padding_left_".concat(Be),"").trim();F="".concat(nt,"|").concat(ot,"|").concat(at,"|").concat(it)}re=Ke}else if((0,_.default)(["custom_margin","custom_padding"],f)&&l.mobile_options){l=n._handleFieldConditionalDefaults(l,je,l.name!==de);var lt=je["".concat(l.name,"_last_edited")],ut=(0,w.default)(lt)?["off","desktop"]:lt.split("|"),dt=(0,P.default)(u,"props.module.props.is_module_child",!1)&&((0,h.default)(l,"default_tablet")||(0,h.default)(l,"default_phone")),ft=(0,P.default)(je,de,""),pt=(0,P.default)(je,l.name,""),ht=(0,P.default)(je,"".concat(l.name,"_tablet"),""),mt=(0,P.default)(je,"".concat(l.name,"_phone"),"");if(W=ae.default.getPreviewMode(),!dt&&(0,P.default)(l,"default_value_depends",!1)){var gt=l.default_value_depends,vt=l.default_values_mapping;z.getDefaultFrom=(0,P.default)(je,gt,!1),pt=J.default.hasValue(je[l.name])&&l.default!==je[l.name]?je[l.name]:(0,P.default)(vt,z.getDefaultFrom,l.default),ft=J.default.hasValue(je[de])&&l.default!==je[de]?je[de]:pt}ht&&!(0,h.default)(l,"default_phone")&&(l.default_phone=ht),ht||!(0,h.default)(l,"default_tablet")||(0,h.default)(l,"default_phone")||(l.default_phone=l.default_tablet),ft&&!(0,h.default)(l,"default_tablet")&&(l.default_tablet=ft),ft&&!(0,h.default)(l,"default_phone")&&(l.default_phone=ft),F=pt,N={desktop:ft,tablet:ht,phone:mt,isResponsive:ee.default.isResponsiveEnabled(je,l.name),activeTab:ut[1]},re=ft||(0,P.default)(l,"default","")}else if(l.mobile_options){l=n._handleFieldConditionalDefaults(l,je,l.name!==de),W=ae.default.getPreviewMode();var yt=ee.default.isResponsiveEnabled(je,l.name),bt=(0,_.default)(["tablet","phone"],E)&&yt,_t=bt?"_".concat(E):"",wt=C&&!Q.default.isHoverMode()&&te.default.isStickyMode()?H:(0,P.default)(je,de,""),kt=C&&!Q.default.isHoverMode()&&te.default.isStickyMode()?H:(0,P.default)(je,de,""),Ot=(0,P.default)(je,"".concat(l.name,"_tablet"),"");(0,P.default)(je,"".concat(l.name,"_phone"),"");if(!((0,P.default)(u,"props.module.props.is_module_child",!1)&&((0,h.default)(l,"default_tablet")||(0,h.default)(l,"default_phone")))&&(0,P.default)(l,"default_value_depends",!1)){var Ct=(0,P.default)(l,"default_value_depends",""),St=(0,P.default)(l,"default_values_mapping",{});z.getDefaultFrom=(0,P.default)(O.props.attrs,Ct,!1),kt=J.default.hasValue(kt)&&l.default!==kt?kt:(0,P.default)(St,z.getDefaultFrom,l.default),wt=J.default.hasValue(wt)&&l.default!==wt?wt:kt}Ot&&!(0,h.default)(l,"default_phone")&&(l.default_phone=Ot),Ot||!(0,h.default)(l,"default_tablet")||(0,h.default)(l,"default_phone")||(l.default_phone=l.default_tablet),wt&&!(0,h.default)(l,"default_tablet")&&(l.default_tablet=wt),wt&&!(0,h.default)(l,"default_phone")&&(l.default_phone=wt),N=bt?(0,P.default)(je,"".concat(l.name).concat(_t),""):wt,F=kt,re=wt||(0,P.default)(l,"default",""),bt&&($.default=(0,P.default)(l,"default".concat(_t),(0,P.default)(l,"default","")),l.default=$.default,$.name="".concat(l.name).concat(_t),$.baseName=l.name,"yes_no_button"===f?($.defaultValue=$.default,l.defaultValue=$.defaultValue):"background-field"===f&&delete $.name),l.dynamic_content&&(0,y.default)(N)&&(N="".concat(N))}else if(C)N=(0,w.default)(je.content)?O.props.content:je.content;else if("composite"!==f){l=n._handleFieldConditionalDefaults(l,je,l.name!==de);var Et=(0,P.default)(l,"default","");if((0,P.default)(l,"default_from",!1)){var Mt=l.default_from;Et=(0,P.default)(je,Mt,Et)}F=(0,P.default)(je,l.name,Et),N=(0,P.default)(je,de,Pe||Ne?F:Et),(0,y.default)(N)&&(N="".concat(N)),(0,y.default)(F)&&(F="".concat(F)),N||(N=""),F||(F=""),re=J.default.hasValue(N)?N:(0,P.default)(l,"default","")}if("font"===f&&(re=(0,w.default)(re)||(0,g.default)((0,L.default)(re.split("|")))?"":re,ie=(0,w.default)(ie)?"":ie),"select_with_option_groups"===f&&!(0,_.default)(["provider","spam"],(0,P.default)(l,"toggle_slug",""))&&J.default.hasValue(N)&&-1!==N.indexOf("|")&&(N=(0,S.default)(N)?N.split("|")[1]:N),"select_with_option_groups"===f&&J.default.hasValue(F)&&-1!==F.indexOf("|")&&(F=(0,S.default)(F)?F.split("|")[1]:F),(0,w.default)(l.depends_default)&&(0,w.default)(l.depends_show_if)&&(0,w.default)(l.depends_show_if_not)||(x=(0,s.default)("et-fb-option--depends-on",x)),"select_with_option_groups"===f&&l.groups&&(x=(0,s.default)("et-fb-option--select-with-option-groups",x)),"text"===f&&(G=(0,s.default)("et-fb-settings-option-input--block",G)),"color-alpha"===f&&"et_pb_section"===(0,P.default)(O,"props.type")&&"background_color"===(0,P.default)(l,"name")&&(l.default=ae.default.getPageSetting("et_pb_section_background_color")||ae.default.getPageSettingField("et_pb_section_background_color").default),"admin_label"===o&&(l.default=oe,l.defaultIfEmpty=!0),(0,w.default)(l.readonly_if)&&(0,w.default)(l.readonly_if_not)||!(0,X.isReadOnlyField)(l,n.setting_resolver)||(l.readonly=!0,l.useAddNewButton=!1),(0,w.default)(f)||!ge.default.getControl(f))return!1;if("warning"===f&&l.display_if!==l.value)return!1;if(!(0,w.default)(l.depends_on)&&(0,w.default)(l.show_if_not)&&(0,w.default)(l.show_if)&&!n._isVisible(l,B))return D.push(l.name),!1;if(!((0,w.default)(l.show_if)&&(0,w.default)(l.show_if_not)||(0,X.canShowField)(l,n.setting_resolver)))return D.push(l.name),!1;if(!(0,w.default)(l.depends_on)&&(0,v.default)(l.depends_on,(0,b.default)(l.depends_on,D)))return!1;if("position"===f){var Pt=(0,P.default)(n.state.cssFields,"positioning.default","none"),Tt=(0,Re.positionByDevice)(je,Pt,n.props.activeTabMode);if("none"===Tt||"position_origin_".concat(Tt.substr(0,1))!==l.name)return!1}if((0,_.default)(["vertical_offset","horizontal_offset"],l.name)){var xt=(0,P.default)(n.state.cssFields,"positioning.default","none"),jt=(0,Re.positionByDevice)(je,xt,n.props.activeTabMode);if("none"===jt)return!1;var Dt=(0,Re.originByDevice)(je,jt,n.props.activeTabMode);if("center"===Dt[1]&&"center"===Dt[0]||"vertical_offset"===l.name&&"center"===Dt[0]||"horizontal_offset"===l.name&&"center"===Dt[1])return!1}if("composite"===f)return be.default.createControl(l,{uniqueKey:Z,module:u,moduleAttrs:je,_onChange:u._onChange.bind(u),onClickHelp:u._onClickHelp,activeHover:Q.default.isEnabled(fe,je),activeSticky:te.default.isEnabled(fe,je),onClickHover:u._onClickHover,onClickReset:u._onClickReset,onClickResponsive:u._onClickResponsive,onClickSticky:u._onClickSticky,hasHoverOptions:_e,hasStickyOptions:Le,isDescriptionVisible:u._isDescriptionVisible,isHoveredGroup:u._isHoveredGroup,onMouseEnterGroup:u._onMouseEnterGroup,onMouseLeaveGroup:u._onMouseLeaveGroup,isSelectiveSyncAvailable:u.isSelectiveSyncAvailable.bind(u),isGlobalOptionSynced:u.isGlobalOptionSynced.bind(u),_unsyncGlobalSetting:u._unsyncGlobalSetting.bind(u),isResetActive:u._isResetActive,setting_resolver:u.setting_resolver,animate:u.props.options.animate,rightClickOpened:u.props.rightClickOpened,toggleGroupId:i,isSettingsModal:!0,isResponsiveEnabled:ee.default.isResponsiveEnabled(je,l.name),_isOptionMatchesFilter:u._isOptionMatchesFilter,toggleId:r,onToggleRightMenu:u._onToggleRightMenu,activeTabMode:E,isGlobalPresetsMode:u.props.isGlobalPresetsMode,isItemSelected:M,optionSubToggle:l.sub_toggle});var Lt=!(0,w.default)(l.description)&&""!==l.description,Rt=(0,_.default)(["content","raw_content"],o)||!(0,w.default)(l.is_fb_content)&&l.is_fb_content,Nt=Rt?"et_pb_content_field":l.name,At=(0,w.default)(l.priority)?10:l.priority,Bt=!!(0,w.default)(l.vb_support)||l.vb_support?"":a.default.createElement("span",{className:"et-fb-no-vb-support-warning"},ETBuilderBackend.i18n.modals.moduleSettings.noSupport),Ft=ie===re,It=l,Wt=It.sub_toggle,Vt=It.toggle_slug;if(De||!Wt||!c||Wt===(0,P.default)(we,Vt,le)){var Ht=Lt?l.description:"",Gt={},Ut=l.label,zt="",qt=(0,w.default)(l.additional_button_type)?"":a.default.createElement(he.default,{type:l.additional_button_type,name:l.name,attrs:l.additional_button_attrs,module:O,_onChange:n._onChange});if("css"===e){var Kt=!(0,w.default)(l.isColumnField)&&l.isColumnField,$t=Kt?l.columnType:O.props.type,Yt=Kt?l.columnIndex:O.props.shortcode_index,Xt=".".concat((0,Ee.getModuleOrderClass)($t,Yt,O.props.theme_builder_suffix)),Jt=!(0,w.default)(l.selector)&&!Lt&&l.selector;if(!1!==Jt){if(-1!==Jt.indexOf("%%order_class%%"))Jt=Jt.replace(/%%order_class%%/g,Xt);else Jt=Xt+(!(0,w.default)(l.no_space_before_selector)&&l.no_space_before_selector?"":" ")+Jt;Lt=!0,Ht="".concat(ETBuilderBackend.i18n.controls.cssSelector," ").concat(Jt)}"custom_css"===l.toggle_slug&&n._isFilterActive()&&(Ut="".concat(l.label," ").concat(ETBuilderBackend.i18n.controls.cssText))}var Qt=Se.default.getNameByMode(l.name,n.getModuleAttrs());if(Rt&&Qt!==l.name&&(H=N),Se.default.isHoverEnabled(l.name,n.getModuleAttrs())&&Se.default.isHoverMode()&&($.name=Qt,l.default=l["default".concat(Q.default.hoverSuffix())]?l["default".concat(Q.default.hoverSuffix())]:Se.default.getDesktopValue(l.name,n.getModuleAttrs(),l.default),"yes_no_button"===f&&(l.defaultValue=l.default)),Se.default.isStickyEnabled(l.name,n.getModuleAttrs())&&Se.default.isStickyMode()){$.name=Qt;var Zt=Se.default.getDesktopValue(l.name,n.getModuleAttrs(),l.default);!J.default.hasValue(Zt)&&J.default.hasValue(l.default)&&(Zt=l.default),l.default=l["default".concat(te.default.stickySuffix())]?l["default".concat(te.default.stickySuffix())]:Zt,"yes_no_button"===f&&(l.defaultValue=l.default)}if("general"===e&&"background"!==l.toggle_slug&&!Se.default.isDesktopMode()){var en=Se.default.getBaseName(l.name),tn=Se.default.getNameByMode(l.name,je);if(en&&tn&&en!==tn&&!(0,h.default)(je,tn)){var nn=null;nn="content"===en?Se.default.getContentByMode((0,T.default)({},je,{content:(0,P.default)(n,"props.module.props.content")})):"raw_content"===en?Se.default.getRawContentByMode((0,T.default)({},je,{content:(0,P.default)(n,"props.module.props.content")})):Se.default.getValueByMode(en,je),(0,k.default)(nn)||nn===N||(N=nn,H=nn,l.default=nn)}(0,m.default)(["value","default","default_on_front","default_tablet","default_phone","defaultValue"],(function(e){var t="value"===e?N:(0,P.default)(l,e);if(t&&(0,Ce.isDynamicContent)(t)){var n=(0,Ce.getDynamicContent)(t);if(!(0,g.default)(n)&&(0,h.default)(n,"content")&&(0,h.default)(n,"settings")){var r=ae.default.getPostContentFieldValue("dynamic",n.content,n.settings,en);!r&&Se.default.isPhoneMode()&&(r=ae.default.getPostContentFieldValue("dynamic",n.content,n.settings,Se.default.getTabletName(en))),(0,k.default)(r)||("value"===e&&(N=r,l.default=r,$.default=r),(0,h.default)(l,e)&&(l[e]=r),(0,h.default)($,e)&&($[e]=r))}}}))}"upload"===f&&!1===(0,P.default)(l,"data_type",!1)&&($.showDeleteButton=!0,$.showResetButton=!0);var rn=l.default_on_front||l.defaultValue||l.default,on=Q.default.isEnabled(fe,je),an=te.default.isEnabled(fe,je),ln=(0,w.default)(l.linked_responsive)?[]:l.linked_responsive,un=(0,P.default)(l,"context_menu",!0);Gt.activeHover=on,Gt.isHoverTab=Me,Gt.activeSticky=an,Gt.isStickyTab=xe;var sn=(0,w.default)(l.label)||""===l.label?"":a.default.createElement(pe.ETBuilderFormLabel,{name:de,backgroundFields:l.backgroundFields||l.background_fields,defaultValue:rn,activeHelp:u._isDescriptionVisible(fe),activeHover:on,activeSticky:an,hoveredGroup:u._isHoveredGroup(fe),key:"".concat(e,"-form-label-").concat(l.name),onClickHelp:!!Lt&&u._onClickHelp,onClickHover:!!ve&&u._onClickHover,onClickSticky:u._onClickSticky,onClickResponsive:u._onClickResponsive,onClickReset:u._onClickReset,isResetActive:u._isResetActive(l),hasResponsiveOptions:l.mobile_options,hasHoverOptions:_e,hasStickyOptions:Le,onToggleRightMenu:!!un&&u._onToggleRightMenu,isResponsiveEnabled:ee.default.isResponsiveEnabled(je,l.name),linkedResponsive:ln},Ut),cn=Lt?a.default.createElement(pe.ETBuilderFormDescription,{active:u._isDescriptionVisible(l.name),key:"".concat(e,"-form-description-").concat(l.name)},Ht):"",dn=l.mobile_options&&ee.default.isResponsiveEnabled(je,l.name)||ve&&Q.default.isEnabled(fe,je)||te.default.isEnabled(fe,je)?a.default.createElement(ye.default,null,a.default.createElement(pe.ETBuilderFormSettingModeTabs,{module:n._getModule(),moduleAttrs:je,fieldName:fe,activeTabMode:E,isGlobalPresetsMode:n.props.isGlobalPresetsMode,isResponsiveEnabled:ee.default.isResponsiveEnabled(je,fe),isHoverEnabled:Q.default.isEnabled(fe,je),isStickyEnabled:Le&&te.default.isEnabled(fe,je),isItemSelected:M})):"";if(q||l.isColumnBackground||!n._isValidProductTourToggle(r,U)||(zt="et-fb-product-tour-element","text"===f?zt+=" et-fb-product-tour-element-text":"background"===f&&(zt+=" et-fb-product-tour-element-background"),n.productTourOptionToggle=r,q=!0),"codemirror"===f&&(Gt.search=n.state.filterOptions),"font"===f&&(Gt.formLabel=sn,Gt.formDescription=cn),(0,P.default)(l,"attributes.data-old-option-ref",!1)){var fn=l.attributes["data-old-option-ref"];z.oldOptionValue=(0,P.default)(je,fn,!1)}var pn={slug:l.type,type:"field"},hn=(0,T.default)({processedKey:Z,value:N,className:G,module:u,moduleAttrs:je,content:H,resetValue:!1,previewMode:W,_onChange:n._onChange,_resetOption:n._resetOption,visible:!0,additionalAttrs:z,filterSelected:n.state.filterSelected,animate:n.props.options.animate,rightClickOpened:n.props.rightClickOpened,isSettingsModal:!0,isResponsive:ee.default.isResponsiveEnabled(je,l.name),fieldDefinition:t,matching:pn,activeTabMode:E,isItemSelected:M,onToggleRightMenu:n._onToggleRightMenu},Gt,l,$),mn=(0,P.default)(l,"data_type",!1),gn=f+(mn?"_".concat(mn):""),vn=(0,a.createElement)(ge.default.getControl(f),hn),yn={fieldName:l.name,fieldLabel:Ut,fieldType:gn,toggleId:r,toggleGroupId:i,fieldContextMenu:un,tabSlug:(0,P.default)(l,"tab_slug",i)};return a.default.createElement(pe.ETBuilderFormGroup,{name:l.name,key:"".concat(e,"-form-group-").concat(Z),onMouseEnterGroup:function(){n._onMouseEnterGroup(yn)},onMouseLeaveGroup:function(){n._onMouseLeaveGroup(yn)},hovered:n.isOptionHovered(l.name),isSelectiveSyncAvailable:n.isSelectiveSyncAvailable(l),isGlobalOptionSynced:n.isGlobalOptionSynced(Nt),_unsyncGlobalSetting:n._unsyncGlobalSetting,optionSubToggle:l.sub_toggle,globalName:Nt,className:zt,priority:At,isDefaultValue:Ft},!(0,_.default)(["font"],f)&&sn,dn,!(0,_.default)(["font"],f)&&cn,a.default.createElement("div",{className:x,key:"et-fb-option-".concat(e,"_").concat(Z)},a.default.createElement("div",{className:"et-fb-option-container",key:"et-fb-option-container-".concat(Z)},a.default.createElement(ye.default,{componentName:l.name},l.dynamic_content?a.default.createElement(Oe.default,{type:l.dynamic_content,fieldName:Qt,fieldType:f,isContentField:!C&&Qt===l.name&&Rt,value:Rt&&Qt===l.name?H:N,dynamicAttributes:(0,Ce.getEnabledDynamicAttributes)(je),onChange:function(){C&&n._onChange(l.name,"",f,!0),n._onChange.apply(n,arguments)},onReset:n._resetOption,modalWidth:me},vn):vn),qt,Bt)),ne&&(0,w.default)(Y)&&Te&&"column_structure"===l.name&&K)}(0,R.default)(ue,Wt,(0,P.default)(ue,Wt)||!Ft)})),ne&&r===Y&&"bottom"===Z&&K)}})),a.default.createElement("div",{className:"et-fb-modal__tab-footer"},this._isFilterActive()||this.renderSupportNotice((0,P.default)(this,"props.module.props.vb_support","off")),this._maybeRenderHelpButton(A),this._isFilterActive()||a.default.createElement(ve.default,{moduleTitle:this._getModuleTitle(),moduleType:O.props.type}))))}},{key:"_getTabs",value:function(){var e=this,t=[];ae.default.isAllowedAction("general_settings")&&this.hasOptionTab("general",!0)&&t.push({slug:"general",title:ETBuilderBackend.i18n.controls.tabs.general,custom:!1}),ae.default.isAllowedAction("advanced_settings")&&!(0,g.default)(this.state.advancedFields)&&t.push({slug:"advanced",title:ETBuilderBackend.i18n.controls.tabs.design,custom:!1}),ae.default.isAllowedAction("custom_css_settings")&&!(0,g.default)(this.state.cssFields)&&t.push({slug:"css",title:ETBuilderBackend.i18n.controls.tabs.css,custom:!1});var n=this.getCustomTabsList();return(0,g.default)(n)||(0,m.default)(n,(function(n,r){ae.default.isAllowedAction(r)&&e.hasOptionTab(r)&&t.push({slug:r,title:n.name||r,custom:!0})})),t}},{key:"getTabsCount",value:function(){return this._getTabs().length}},{key:"hasOptionTab",value:function(e,t){var n=t?this._getOptionsFields(e):this._getFilteredFields(e),r=!(0,g.default)((0,B.default)(n,["toggles_".concat(e,"_toggles"),"_builder_version"])),o=!1;return"general"===e&&(o=this._hasModuleItem()),r||o}},{key:"renderSupportNotice",value:function(e){if(J.default.isOn(e))return"";var t=(0,_.default)(["off","partial"],e)?e:"off";return a.default.createElement("div",{className:"et-fb-modal__support-notice",dangerouslySetInnerHTML:{__html:(0,F.default)((0,P.default)(ETBuilderBackend,["i18n","vbSupport","modalSupportNotices",t],""))}})}},{key:"_getModuleTitle",value:function(){var e=this.props.module;return(0,je.default)(e)}},{key:"_getFilterItems",value:function(){var e=this._getModule();return te.default.hasStickyOptions((0,P.default)(e,"props",{}))?ETBuilderBackend.searchFilterItems:(0,p.default)(ETBuilderBackend.searchFilterItems,(function(e){return(0,B.default)(e,"styles_sticky")}))}},{key:"maybeShowFilterNotice",value:function(){var t=e((0,l.findDOMNode)(this)).find(".et-fb-tabs__panel--filter-active"),n=!(0,g.default)(this.state.filterOptions)||!(0,g.default)(this.state.filterSelected);t.length&&t.each((function(t,r){J.default.hasValue(e(r).find(".et-fb-form__group:not(:empty)").text())&&(n=!1)})),n!==this.state.filterNotice&&this.setState({filterNotice:n})}},{key:"_renderGlobalPresetsCloseBadge",value:function(){if(!this.props.isGlobalPresetsMode||this.state.isGlobalPresetsSubmitDialogVisible)return!1;var e=(0,s.default)({"et-fb-modal__badge__button":!0,"et-fb-modal__badge__button--back-to-settings":!0});return a.default.createElement(de.default,{buttonName:ne.default.BUTTON_SAVE_MODULE_PRESET_SETTINGS,tooltip:ETBuilderBackend.i18n.tooltip.modal.globalPresets.exit,disableClick:this.props.nonInteractiveMode,className:e,editingModule:this._getModule()},a.default.createElement(se.default,{icon:"global-presets-return",color:Pe.default.success,size:"14"}))}},{key:"_getModalMinWidth",value:function(){return this.isGlobalModuleOpened()?430:400}},{key:"_renderModalOverlay",value:function(){if(this.props.nonInteractiveMode)return a.default.createElement("div",{className:"et-fb-modal__overlay"});var e=ae.default.getGlobalPresetsState().submitDialog,t=e.confirmationAction,n=e.actionPayload,r=e.type;if(!this.state.isGlobalPresetsSubmitDialogVisible||r!==xe.default.CONFIRMATION_DIALOG_TYPE_DEFAULT)return!1;var o=this._getModule();return a.default.createElement("div",{className:"et-fb-modal__overlay"},a.default.createElement("div",{className:"et-fb-modal__overlay__header"}),a.default.createElement("div",{className:"et-fb-modal__overlay__content"},a.default.createElement(Te.default,{animate:this.props.options.animate,onConfirm:function(){return oe.default.confirmGlobalPresetDialog(t,o,n)},dangerouslySetInnerHTML:{__html:e.confirmationText}})))}},{key:"_renderButtons",value:function(){var e=this.props.module,t=(0,Me.getModalPreferredSnapSettings)(),n=t.snap,r=t.snapLocation,o=ae.default.getGlobalPresetsState().history.isLoading,i=o?"loading":"check",l="wireframe"===ae.default.getPreviewMode(),u="saveModule"===this.props.currentTourElement?e:{},s=(0,P.default)(this.props,"module.props.loading",!1)&&!l,c={"et-fb-product-tour-element":"saveModule"===this.props.currentTourElement},d={"et-fb-product-tour-element":"saveModule"===this.props.currentTourElement||"saveRow"===this.props.currentTourElement};return this.props.isGlobalPresetsMode?[a.default.createElement(de.default,{block:!0,danger:!0,buttonName:ne.default.BUTTON_GLOBAL_PRESETS_CLOSE,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel,disableClick:this.props.nonInteractiveMode,additionalAttrs:{skipReset:n&&r}},a.default.createElement(se.default,{icon:"exit",color:"#FFFFFF"})),a.default.createElement(de.default,{block:!0,primary:!0,alt:!0,buttonName:ne.default.BUTTON_GLOBAL_PRESETS_SUBHISTORY_UNDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.undo,disableClick:this.props.nonInteractiveMode},a.default.createElement(se.default,{icon:"undo",color:"#FFFFFF"})),a.default.createElement(de.default,{block:!0,info:!0,buttonName:ne.default.BUTTON_GLOBAL_PRESETS_SUBHISTORY_REDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.redo,disableClick:this.props.nonInteractiveMode},a.default.createElement(se.default,{icon:"redo",color:"#FFFFFF"})),a.default.createElement(de.default,{block:!0,success:!0,buttonName:ne.default.BUTTON_SAVE_MODULE_PRESET_SETTINGS,tooltip:ETBuilderBackend.i18n.tooltip.modal.save,disabled:o,disableClick:this.props.nonInteractiveMode||o,additionalAttrs:{skipReset:n&&r},editingModule:e},a.default.createElement(se.default,{icon:i,color:"#FFFFFF"}))]:[a.default.createElement(de.default,{block:!0,danger:!0,buttonName:ne.default.MODAL_SETTINGS_BUTTON_CLOSE,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel,disableClick:s,className:c,editingModule:u,additionalAttrs:{skipReset:n&&r}},a.default.createElement(se.default,{icon:"exit",color:"#FFFFFF"})),a.default.createElement(de.default,{block:!0,primary:!0,alt:!0,buttonName:ne.default.MODAL_SETTINGS_BUTTON_UNDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.undo,disableClick:s},a.default.createElement(se.default,{icon:"undo",color:"#FFFFFF"})),a.default.createElement(de.default,{block:!0,info:!0,buttonName:ne.default.MODAL_SETTINGS_BUTTON_REDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.redo,disableClick:s},a.default.createElement(se.default,{icon:"redo",color:"#FFFFFF"})),a.default.createElement(de.default,{block:!0,success:!0,buttonName:this._isModuleItemSettings()?ne.default.MODULE_ITEM_BACK_TO_PARENT:ne.default.MODAL_SETTINGS_BUTTON_SAVE,tooltip:ETBuilderBackend.i18n.tooltip.modal.save,disableClick:s,className:d,editingModule:u,additionalAttrs:{skipReset:n&&r}},a.default.createElement(se.default,{icon:"check",color:"#FFFFFF"}))]}},{key:"_renderHeaderDropdown",value:function(){return this._isMultiSelectMode()?null:a.default.createElement(Ne.default,{module:this.props.module,onMouseEnter:this._onMouseEnterTitle,onMouseLeave:this._onMouseLeaveTitle})}},{key:"_renderTabNavs",value:function(){var e=this,t=this._getTabs();return!(0,g.default)(t)&&t.map((function(t){var n=e.getGlobalTabClass();return a.default.createElement(fe.ETBuilderTabItem,{key:t.slug,className:n,panelId:t.slug,setHoveredElement:e._setHoveredElementWrapper},t.title)}))}},{key:"_renderTabPanels",value:function(){var e=this,t=this._getTabs();if((0,g.default)(t))return!1;var n=(0,c.default)(t,(function(e){return"general"===e.slug})),r=this.props,o=r.currentTourElement,a=r.module,i=ae.default.getProductTourModuleName(),l="configureModule"===o&&i===a.props.type||"editRow"===o&&"et_pb_row"===a.props.type,u=l?"general":"";l&&!n&&(u=hasDesignTab&&advancedTabOutput?"advanced":"css");this._isModalExpanded();var s=this._isFilterActive();return t.map((function(t,n){var r=s?0===n:e.state.tabSelectedIndex===n;return t.custom?e._renderTabOptionsPanel(t.slug,void 0,r):e._renderTabOptionsPanel(t.slug,u,r)}))}},{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.module;if(!t)return!1;if((0,w.default)(n.props))return!1;var r=this.state.isModalRest,o=this._isFilterActive(),i=!r&&!o,l=this._getModuleTitle(),u=(0,Me.getModalPreferredSnapSettings)().snapLocation,c=(0,s.default)({"et-fb-modal__module-settings":!0,"et-fb-modal__filter-active":o,"et-fb-modal__selective-sync":this.isSelectiveSyncAvailable(),"et-fb-modal__global-presets-mode":this.props.isGlobalPresetsMode,"et-fb-modal--with-header-dropdown":!this._isMultiSelectMode()},this.getGlobalModalClass("et-fb-modal")),d=this.props.ignorePosition?{x:0,y:0}:(0,Me.getModalPreferredCoordinates)(),f=(0,Me.getModalPreferredFullscreen)(),p=(0,Me.getModalPreferredDimensions)().width,h=this.props.isGlobalPresetsMode?"settings-modal-back":"settings-modal-front",m=this.props.isGlobalPresetsMode?ETBuilderBackend.i18n.modals.globalPresets.title.replace("%s",l):ETBuilderBackend.i18n.modals.moduleSettings.title.replace("%s",l),g=this.props.isGlobalPresetsMode&&this._renderGlobalPresetsCloseBadge(),v=this._renderModalOverlay(),y=ae.default.isViewGlobalPresetsAllowed()&&!ae.default.isProductTourActive();return a.default.createElement(ue.default,Ie({key:h,className:c,disableEscShortcut:o,footerButtons:this._renderButtons(),fullscreen:f,globalUpdate:!0,isModuleItemSettings:this._isModuleItemSettings(),label:m,headerContent:this._renderHeaderDropdown(),passthroughClicksFor:["et-fb-modal__module-settings__header-dropdown__overflow-container","et-core-popup__wrapper"],badge:y&&g,modalMinimalWidth:this._getModalMinWidth(),measurement:(0,Me.getModalPreferredDimensions)(),animate:this.props.options.animate,disablePopupAnimation:this.props.disablePopupAnimation,onModalChange:this.props.onModalChange,ignorePosition:this.props.ignorePosition,snapLocation:u,tabsCount:this.state.tabsCount,onMouseEnterTitle:this._onMouseEnterTitle,onMouseLeaveTitle:this._onMouseLeaveTitle,overlay:v,onBackToParent:this._onBackToParent,_setHoveredElement:this._onMouseEnterTitle},this.props,{position:d,onRest:this._onModalRest}),a.default.createElement(fe.default,{selectedIndex:this.state.tabSelectedIndex,module:this.props.module,onSelect:this._onTabSelect,renderOnSelectedOnce:i},a.default.createElement(fe.ETBuilderTabList,{className:this.getGlobalModalClass("et-fb-tabs__list"),modalWidth:p,snapLocation:u,fullscreen:f,showScroll:!o},this._renderTabNavs()),this._renderTabPanels()))}}]),o}(a.Component);dt.propTypes=ut,dt.defaultProps={additionalClasses:{},ignorePosition:!1,isGlobalPresetsMode:!1,nonInteractiveMode:!1,disablePopupAnimation:!1};var ft=dt;t.default=ft}).call(this,n(5),n(129)(e))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=j(n(0)),a=T(n(9)),i=T(n(447)),l=T(n(15)),u=T(n(1)),s=T(n(149)),c=T(n(14)),d=T(n(180)),f=T(n(49)),p=T(n(377));n(1517);var h=T(n(3)),m=T(n(27)),g=T(n(78)),v=T(n(372)),y=T(n(77)),b=T(n(254)),_=j(n(756)),w=n(957),k=T(n(58)),O=T(n(956)),C=T(n(1460)),S=T(n(1458)),E=T(n(8)),M=T(n(29)),P=["builderAnimation","builderDisplayModalSettings","builderEnableDummyContent","builderEventMode","builderViewMode","builderHideDisabledModules","builderModalPreference","builderPageCreationFlow","historyIntervals","toolbarButtons"];function T(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=h.default.isLimitedMode(),V=h.default.topWindow(),H=ETBuilderBackend.i18n.app.modal,G=h.default.condition("is_bfb"),U=h.default.condition("is_rtl")&&!h.default.condition("is_no_rtl"),z=G?30:10;function q(e,t){return t[e]?"#5C6978":"#BEC9D6"}function K(e,t){if(t)switch(e){case"hover":return 0;case"click":return 1;case"grid":return 2;default:return 0}else switch(parseInt(e)){case 0:return"hover";case 1:return"click";case 2:return"grid";default:return"hover"}}function $(){return h.default.condition("is_bfb")?"wireframe":"desktop"}function Y(e,t){if(t)switch(parseInt(e)){case 1:return 0;case 10:return 1;case 20:return 2;case 30:return 3;case 40:return 4;default:return 0}else switch(parseInt(e)){case 0:return 1;case 1:return 10;case 2:return 20;case 3:return 30;case 4:return 40;default:return 1}}function X(e,t){if(t)switch(e){case"default":return 0;case"minimum":return 1;case"fullscreen":return 2;case"left":return 3;case"right":return 4;case"bottom":return 5;case"top":return 6;default:return 0}else switch(parseInt(e)){case 0:return"default";case 1:return"minimum";case 2:return"fullscreen";case 3:return"left";case 4:return"right";case 5:return"bottom";case 6:return"top";default:return"default"}}function J(e,t){var n=M.default.getPageCreationOptions();if(t)return(0,f.default)(n,"".concat(e,".setting.value_index"))?parseInt((0,u.default)(n,"".concat(e,".setting.value_index"))):0;var r=(0,p.default)(n,(function(t){return(0,f.default)(t,"setting.value_index")&&parseInt((0,u.default)(t,"setting.value_index"))===parseInt(e)}));return r||"default"}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(p,e);var t,n,r,f=A(p);function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(e=f.call(this)).displayName="ETBuilderAppModal";return e.state={height:635,width:V.innerWidth<520?V.innerWidth-v.default.pageSettingsBar-30:400},e._getPosition=e._getPosition.bind(F(e)),e._handleAnimationChange=e._handleAnimationChange.bind(F(e)),e._handleAllModalSettings=e._handleAllModalSettings.bind(F(e)),e._handleDummyContent=e._handleDummyContent.bind(F(e)),e._handleDisabledModules=e._handleDisabledModules.bind(F(e)),e._handleShortcuts=e._handleShortcuts.bind(F(e)),e._handleResize=e._handleResize.bind(F(e)),e._handleScroll=e._handleScroll.bind(F(e)),e}return t=p,(n=[{key:"UNSAFE_componentWillMount",value:function(){this._handleResize(),G&&(this.throttleScroll=(0,d.default)(this._handleScroll,100),V.addEventListener("scroll",this.throttleScroll),h.default.$topWindow().on("et-preview-animation-complete",this._handleResize)),V.addEventListener("resize",this._handleResize)}},{key:"componentDidMount",value:function(){h.default.topDocument().addEventListener("keydown",this._handleShortcuts),E.default.addPreviewModeUpdateListener(this._handleResize)}},{key:"componentWillUnmount",value:function(){h.default.topDocument().removeEventListener("keydown",this._handleShortcuts),E.default.removePreviewModeUpdateListener(this._handleResize),G&&(V.removeEventListener("scroll",this.throttleScroll),h.default.$topWindow().off("et-preview-animation-complete",this._handleResize)),V.removeEventListener("resize",this._handleResize)}},{key:"_getModalOptions",value:function(){return G?(0,s.default)(H.modal_default_select,[0,1,2,4]):W?H.modal_default_select.slice(0,-3):H.modal_default_select}},{key:"_getPosition",value:function(e){var t=this.props.pageSettingsBarLocation,n=(0,a.default)(["top-left","top-right"],t),r="top"===t,o="right"===t,i="left"===t,l=(0,a.default)(["top-right","bottom-right"],t),s=v.default.responsive.phone>V.innerWidth,c=s?0:v.default.pageSettingsBar,d=s?0:30,f=!!G&&h.default.$topWindow("#et_pb_layout");if("top"===e){if(G&&f){var p=h.default.$topWindow().scrollTop();return(0,u.default)(f.offset(),"top",0)+f.find("h2.hndle").outerHeight()+z-p}return i||o?v.default.topbar.desktop+d:r||n?c+v.default.topbar.desktop:"auto"}return"bottom"===e?G||r||n||i||o?"auto":c:"right"===e?G?U?"auto;":h.default.$topWindow().width()-((0,u.default)(f.offset(),"left",0)+f.width())+10:l||o?c:i?"auto":!(!h.default.condition("is_rtl")||h.default.condition("is_no_rtl"))&&d:"left"===e?G?U?(0,u.default)(f.offset(),"left",0)+10:"auto":i?c:l||o?"auto":n?c:!(!r&&h.default.condition("is_rtl")&&!h.default.condition("is_no_rtl"))&&d:void 0}},{key:"_handleScroll",value:function(){this._handleResize()}},{key:"_handleShortcuts",value:function(e){27===e.keyCode&&m.default.buttonClick({props:{buttonName:g.default.MODAL_APP_BUTTON_CLOSE}})}},{key:"_handleResize",value:function(){var e=G?h.default.$topWindow("#et_pb_layout").offset().top:0,t=G?h.default.$topWindow().scrollTop():0,n=G?96:146;V.innerHeight<940+n+(e-t)+30?V.innerHeight<200?this.setState({height:100}):this.setState({height:V.innerHeight-n-30-e+t}):this.setState({height:940})}},{key:"_handleAnimationChange",value:function(){var e=this.props.builderAnimation;m.default.preferencesChange({builder_animation:!e})}},{key:"_handleDisabledModules",value:function(){var e=this.props.builderHideDisabledModules;m.default.preferencesChange({hide_disabled_modules:!e})}},{key:"_handleAllModalSettings",value:function(){var e=this.props.builderDisplayModalSettings;m.default.preferencesChange({builder_display_modal_settings:!e})}},{key:"_handleDummyContent",value:function(){var e=this.props.builderEnableDummyContent;m.default.preferencesChange({builder_enable_dummy_content:!e})}},{key:"_handleEventModeChange",value:function(e,t){m.default.preferencesChange({event_mode:K(t)})}},{key:"_handleViewModeChange",value:function(e,t){var n=(0,c.default)(t)?$():t;m.default.preferencesChange({view_mode:n})}},{key:"_handleHistoryChange",value:function(e,t){m.default.preferencesChange({history_intervals:Y(t)})}},{key:"_handlePageCreationFlowChange",value:function(e,t){m.default.preferencesChange({page_creation_flow:J(t)})}},{key:"_handleModalChange",value:function(e,t){m.default.preferencesChange({modal_preference:X(t)})}},{key:"_handleReset",value:function(e,t,n){return e!==t&&o.default.createElement(y.default,{__onClick:n},o.default.createElement(k.default,{icon:"reset"}))}},{key:"_getViewModesList",value:function(){var e=h.default.condition("is_bfb"),t=H.view_mode_select;if(e){var n=t.wireframe;(0,i.default)(t.wireframe),t=(0,l.default)({wireframe:n},t)}return t}},{key:"render",value:function(){var e=this.props,t=e.builderAnimation,n=e.builderDisplayModalSettings,r=e.builderEnableDummyContent,i=e.builderEventMode,l=e.builderViewMode,s=e.builderHideDisabledModules,c=e.builderModalPreference,d=e.builderPageCreationFlow,f=e.historyIntervals,p=e.toolbarButtons,m=L(e,P),v=this.state,M=v.height,T=v.width,x=E.default.getAppPreferences();return o.default.createElement(O.default,D({className:"et-fb-modal--app",forceUpdate:!0,headerButtons:[o.default.createElement(y.default,{buttonName:g.default.MODAL_APP_BUTTON_CLOSE,inverse:!0,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel},o.default.createElement(k.default,{icon:"exit",color:"#FFFFFF"}))],label:H.title,measurement:{height:M,width:T},animate:this.props.options.animate,style:{top:this._getPosition("top"),bottom:this._getPosition("bottom"),left:this._getPosition("left"),right:this._getPosition("right")}},m),o.default.createElement(w.ETBuilderTabPanel,{selected:!0},o.default.createElement("div",{className:"et-fb-form"},o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.toolbar),o.default.createElement(b.default,null,o.default.createElement(y.default,{additionalAttrs:{toolbarButton:"wireframe"},buttonName:g.default.TOGGLE_TOOLBAR_BUTTON,stopPropagation:!0,style:{background:"#F2F6F9"}},o.default.createElement(k.default,{color:q("wireframe",p),icon:"wireframe"})),o.default.createElement(y.default,{additionalAttrs:{toolbarButton:"zoom"},buttonName:g.default.TOGGLE_TOOLBAR_BUTTON,stopPropagation:!0,style:{background:"#F2F6F9"}},o.default.createElement(k.default,{color:q("zoom",p),icon:"zoom-in"})),o.default.createElement(y.default,{additionalAttrs:{toolbarButton:"desktop"},buttonName:g.default.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},o.default.createElement(k.default,{color:q("desktop",p),icon:"desktop"})),o.default.createElement(y.default,{additionalAttrs:{toolbarButton:"tablet"},buttonName:g.default.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},o.default.createElement(k.default,{color:q("tablet",p),icon:"tablet"})),o.default.createElement(y.default,{additionalAttrs:{toolbarButton:"phone"},buttonName:g.default.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},o.default.createElement(k.default,{color:q("phone",p),icon:"phone"}))),o.default.createElement(b.default,{style:h.default.condition("is_rtl")&&!h.default.condition("is_no_rtl")?{marginRight:3}:{marginLeft:3}},o.default.createElement(y.default,{additionalAttrs:{toolbarButton:"hover"},buttonName:g.default.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},o.default.createElement(k.default,{color:q("hover",p),icon:"hover"})),o.default.createElement(y.default,{additionalAttrs:{toolbarButton:"click"},buttonName:g.default.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},o.default.createElement(k.default,{color:q("click",p),icon:"click"})),o.default.createElement(y.default,{additionalAttrs:{toolbarButton:"grid"},buttonName:g.default.TOGGLE_TOOLBAR_BUTTON,style:{background:"#F2F6F9"}},o.default.createElement(k.default,{color:q("grid",p),icon:"grid"})))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.view_mode),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(C.default,{name:"builder_view_mode",value:l,options:this._getViewModesList(),_onChange:this._handleViewModeChange}),l!==$()&&""!==l&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handleViewModeChange,small:!0},o.default.createElement(k.default,{icon:"reset"}))))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.interaction_mode),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(C.default,{name:"view_mode",value:K(i,!0),options:H.interaction_mode_select,_onChange:this._handleEventModeChange}),!(0,a.default)(["","hover","default"],i)&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handleEventModeChange,small:!0},o.default.createElement(k.default,{icon:"reset"}))))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.history),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(C.default,{name:"history",value:Y(f,!0),options:H.history_intervals_select,_onChange:this._handleHistoryChange}),1!==f&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handleHistoryChange,small:!0},o.default.createElement(k.default,{icon:"reset"}))))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.modal_position),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(C.default,{name:"modal_position",value:X(c,!0),options:this._getModalOptions(),_onChange:this._handleModalChange}),"default"!==c&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handleModalChange,small:!0},o.default.createElement(k.default,{icon:"reset"}))))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.page_creation_flow),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(C.default,{name:"page_creation",value:J(d,!0),options:H.page_creation_flow_select,_onChange:this._handlePageCreationFlowChange}),"default"!==d&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handlePageCreationFlowChange,small:!0},o.default.createElement(k.default,{icon:"reset"}))))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.animation),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(S.default,{onClick:this._handleAnimationChange,options:{on:H.builder_animation_toggle.on,off:H.builder_animation_toggle.off},value:t?"on":"off"}),t!==(0,u.default)(x,"builder_animation.default")&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handleAnimationChange,small:!0},o.default.createElement(k.default,{icon:"reset"}))))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.disabled_modules),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(S.default,{onClick:this._handleDisabledModules,options:{on:H.hide_disabled_module_toggle.on,off:H.hide_disabled_module_toggle.off},value:s?"off":"on"}),s!==(0,u.default)(x,"hide_disabled_modules.default")&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handleDisabledModules,small:!0},o.default.createElement(k.default,{icon:"reset"}))))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.group_settings),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(S.default,{onClick:this._handleAllModalSettings,options:{on:H.display_modal_settings.on,off:H.display_modal_settings.off},value:n?"off":"on"}),n!==(0,u.default)(x,"builder_display_modal_settings.default")&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handleAllModalSettings,small:!0},o.default.createElement(k.default,{icon:"reset"}))))),o.default.createElement(_.ETBuilderFormGroup,null,o.default.createElement(_.ETBuilderFormLabel,null,H.labels.dummy_content),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(S.default,{onClick:this._handleDummyContent,options:{on:H.enable_dummy_content.on,off:H.enable_dummy_content.off},value:r?"on":"off"}),r!==(0,u.default)(x,"builder_enable_dummy_content.default")&&o.default.createElement(y.default,{className:"et-fb-button--reset",__onClick:this._handleDummyContent,small:!0},o.default.createElement(k.default,{icon:"reset"}))))))))}}])&&R(t.prototype,n),r&&R(t,r),p}(o.Component);Q.propTypes={},Q.defaultProps={toolbarButtons:{}};var Z=Q;t.default=Z},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=G(n(0)),a=n(37),i=G(n(18)),l=G(n(6)),u=G(n(14)),s=G(n(10)),c=G(n(4)),d=G(n(9)),f=G(n(41)),p=G(n(166)),h=G(n(35)),m=G(n(49)),g=G(n(94)),v=G(n(340)),y=G(n(15)),b=G(n(123)),_=G(n(126)),w=G(n(13)),k=G(n(148)),O=G(n(1)),C=G(n(12)),S=G(n(140)),E=G(n(29)),M=G(n(78)),P=G(n(372)),T=G(n(27)),x=G(n(77)),j=G(n(958)),D=G(n(58)),L=G(n(956)),R=G(n(8)),N=H(n(957)),A=H(n(756)),B=G(n(3)),F=G(n(1456)),I=n(729);n(1504);var W=["onModalChange"];function V(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(V=function(e){return e?n:t})(e)}function H(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=V(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function G(e){return e&&e.__esModule?e:{default:e}}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z,ee={isVisible:l.default.bool,onModalChange:l.default.func},te=ETBuilderBackend.themeBuilder.isLayout?(0,S.default)(E.default.pageSettings,["et_pb_post_settings_excerpt","et_pb_post_settings_image","et_pb_content_area_background_color"]):E.default.pageSettings,ne=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(E,t);var n,r,l,S=$(E);function E(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),Q(X(t=S.call(this,e)),"isOptionHovered",(function(e){return t.state.hoveredGroup===e})),Q(X(t),"_onClickReset",(function(e){var n=e.props;return t._onChange(n.name,"")})),t.displayName="ETBuilderSettingsPage",t.fields=te,t.state={activeDescription:null,hoveredGroup:null,openedToggle:e.openedToggle||"main_content",openedContentGroup:"",openedDesignGroup:"",openedAdvancedGroup:"",filterOptions:"",filterSelected:void 0},t.tabs=(0,y.default)({},ETBuilderBackend.i18n.modals.pageSettings.tabs),t.toggles=(0,y.default)({},ETBuilderBackend.i18n.modals.pageSettings.toggles),t._handleFormSubmission=t._handleFormSubmission.bind(X(t)),t._onChange=t._onChange.bind(X(t)),t._renderPageSettingsPanel=t._renderPageSettingsPanel.bind(X(t)),t._renderTab=t._renderTab.bind(X(t)),t.isVisible=t.isVisible.bind(X(t)),t._isDescriptionVisible=t._isDescriptionVisible.bind(X(t)),t._isHoveredGroup=t._isHoveredGroup.bind(X(t)),t._onClickHelp=t._onClickHelp.bind(X(t)),t._onMouseEnterGroup=t._onMouseEnterGroup.bind(X(t)),t._onMouseLeaveGroup=t._onMouseLeaveGroup.bind(X(t)),t._onFilterInput=t._onFilterInput.bind(X(t)),t._onFilterSelect=t._onFilterSelect.bind(X(t)),t._isOptionMatchesFilter=t._isOptionMatchesFilter.bind(X(t)),t._onClickToggle=t._onClickToggle.bind(X(t)),t._handleShortcuts=t._handleShortcuts.bind(X(t)),t.builder_display_modal_settings=R.default.getAppPreference("builder_display_modal_settings"),t}return n=E,(r=[{key:"componentDidMount",value:function(){B.default.topDocument().addEventListener("keydown",this._handleShortcuts),R.default.getDroploaderPayloadCss()&&this.setState({filterOptions:"".concat(ETBuilderBackend.i18n.modules.customCss.label)})}},{key:"componentDidUpdate",value:function(e,t){this.props.isVisible&&!e.isVisible&&this.setState({filterOptions:"",openedToggle:"main_content",filterSelected:void 0,filterNotice:!1}),this.maybeShowFilterNotice()}},{key:"componentWillUnmount",value:function(){clearTimeout(Z),B.default.topDocument().removeEventListener("keydown",this._handleShortcuts)}},{key:"_handleShortcuts",value:function(e){var t=this;if(27===e.keyCode){if(e.preventDefault(),B.default.hasValue(this.state.filterOptions)||B.default.hasValue(this.state.filterSelected))return void setTimeout((function(){t.setState({filterOptions:"",filterSelected:void 0})}),100);T.default.pageSettingsClose()}}},{key:"isVisible",value:function(e,t){var n=[];return(0,s.default)(e.depends_on,(function(r){if((0,m.default)(t,r)){var o=(0,u.default)(R.default.getPageSetting(r))?"":R.default.getPageSetting(r);(0,u.default)(e.depends_show_if)||o!==e.depends_show_if||n.push(r)}})),!(0,c.default)(n)}},{key:"_isDescriptionVisible",value:function(e){return this.state.activeDescription===e}},{key:"_isHoveredGroup",value:function(e){return this.state.hoveredGroup===e}},{key:"_isToggleOpened",value:function(e,t){var n="content"===t,r="design"===t,o="advanced"===t,a=(0,I.getModalPreferredSnapSettings)(),i=a.snap,l=a.snapLocation,u=(0,I.getModalPreferredDimensions)().width,s=(0,d.default)(["top","bottom"],l),c=B.default.topWindow().innerWidth<P.default.responsive.phone,f=(i&&s&&B.default.topWindow().innerWidth>1200||u>1200)&&!c;if(t&&f){if(n)return this.state.openedContentGroup===e;if(r)return this.state.openedDesignGroup===e;if(o)return this.state.openedAdvancedGroup===e}return this.state.openedToggle===e}},{key:"_onMouseEnterGroup",value:function(e){this.setState({hoveredGroup:e})}},{key:"_onMouseLeaveGroup",value:function(e){this.state.hoveredGroup===e&&this.setState({hoveredGroup:null})}},{key:"_onClickHelp",value:function(e){var t=this.state.activeDescription===e?null:e;this.setState({activeDescription:t})}},{key:"_onClickToggle",value:function(t,n,r){var o=(0,I.getModalPreferredSnapSettings)(),i=o.snap,l=o.snapLocation,u=(0,I.getModalPreferredDimensions)().width,s=(0,d.default)(["top","bottom"],l),c=B.default.topWindow().innerWidth<P.default.responsive.phone,f=(i&&s&&B.default.topWindow().innerWidth>1200||u>1200)&&!c,p="content"===r,h="design"===r,m="advanced"===r;if(this._isToggleOpened(t,r)&&f){if(p)return this.setState({openedContentGroup:"",openedToggle:""});if(h)return this.setState({openedDesignGroup:"",openedToggle:""});if(m)return this.setState({openedAdvancedGroup:"",openedToggle:""})}if(this._isToggleOpened(t))this.setState({openedToggle:""});else{var g=1===n?0:61*n-10;f?e((0,a.findDOMNode)(this)).find(".et-fb-tabs__panel--".concat(r)).animate({scrollTop:g},300):e((0,a.findDOMNode)(this)).find(".et-fb-tabs__panel--active").animate({scrollTop:g},300),this.setState({openedToggle:t,openedContentGroup:"content"===r?t:this.state.openedContentGroup,openedDesignGroup:"design"===r?t:this.state.openedDesignGroup,openedAdvancedGroup:"advanced"===r?t:this.state.openedAdvancedGroup})}}},{key:"_onFilterInput",value:function(e){this.setState({filterOptions:e,filterNotice:!1})}},{key:"_onFilterSelect",value:function(e){this.setState({filterSelected:e,filterNotice:!1})}},{key:"_isOptionMatchesFilter",value:function(e,t,n){var r=this.state.filterOptions,o=[e.label,e.description,t,n],a=this.state.filterSelected;if(""===r&&(0,c.default)(a))return!0;var i=!1;if(r&&(0,s.default)(o,(function(e){(0,u.default)(e)||-1===e.toLowerCase().indexOf(r.toLowerCase())||(i=!0)})),"styles_modified"===a){if("content"===e.tab_slug&&"background"!==e.toggle_slug)return!1;var l=this._isOptionDefaultValue(e);i=r?i&&!l:!l}return i}},{key:"_isOptionDefaultValue",value:function(e){var t=!0,n=e.default,r=R.default.getPageSetting(e.id);if(!(0,u.default)(e.depends_on)&&!this.isVisible(e,this.fields))return!0;if((0,u.default)(e.readonly)&&"readonly"===e.readonly)return!0;switch(e.type){case"yes_no_button":t=!(!(0,c.default)(n)||"off"!==r)||n===r;break;default:t=!(!(0,c.default)(n)||!(0,c.default)(r))||n===r}return t}},{key:"renderToggleFields",value:function(e,t){return!!this.builder_display_modal_settings||!(""===this.state.filterOptions&&!B.default.hasValue(this.state.filterSelected))||this._isToggleOpened(e,t)}},{key:"_getTogglesForTab",value:function(e){var t={};return(0,s.default)(this.fields,(function(n){var r=n.tab_slug,o=n.toggle_slug,a=n.hide_on_fb,i=n.type;r!==e||a||"hidden"===i||(0,g.default)(t,o,!0)})),(0,_.default)(this.toggles,(function(e,n){return(0,m.default)(t,n)||"unclassified"===n}))}},{key:"_renderTab",value:function(e){var t=this,n=[],r=0,a=this._getTogglesForTab(e);return(0,h.default)(a,(function(l,s){r++;var c=(0,w.default)(l)?l.title:l,d=(0,w.default)(l)?l.sub_toggles:{};return o.default.createElement(A.ETBuilderFormToggle,{key:s,title:c,toggleId:s,toggleGroupId:e,_onClickToggle:t._onClickToggle,isToggleOpened:t._isToggleOpened(s,e),toggleOrder:r,isLastToggle:(0,k.default)(a)===r,isFilterActive:""!==t.state.filterOptions||B.default.hasValue(t.state.filterSelected),subToggles:d},!!t.renderToggleFields(s,e)&&(0,h.default)((0,b.default)((0,v.default)(t.fields),["index"]),(function(r,a){var l,d=r;if(a=r.id,r.name&&r.name.indexOf("custom_css")>=0&&(l=R.default.getPageSetting(r.id)),!t._isOptionMatchesFilter(r,c,l))return!1;if(r.tab_slug!==e)return"";if(r.toggle_slug!==s)return!1;if(r.hide_on_fb)return"";if((0,u.default)(r.name)&&(r.name=r.id),"categories"===r.type&&(r.categories_list={},r.taxonomy_name=(0,u.default)(r.taxonomy_name)?"category":r.taxonomy_name),"select_sidebar"===r.type&&(r.sidebars_list={}),(0,u.default)(r.type)||!F.default.getControl(r.type))return!1;var h={isPageSetting:!0};if("codemirror"===r.type&&(h.search=t.state.filterOptions),!(0,u.default)(r.depends_on_post_type)&&-1===r.depends_on_post_type.indexOf(ETBuilderBackend.postType))return n.push(r.name),!1;if(!(0,u.default)(r.depends_on)&&!t.isVisible(r,t.fields))return n.push(r.name),!1;if(!(0,u.default)(r.depends_on)&&(0,f.default)(r.depends_on,(0,p.default)(r.depends_on,n)))return!1;var m={};m["".concat("et-fb-settings-options")]=!0,m["et-fb-option--".concat(r.type.replace("_","-"))]=!0,(0,u.default)(r.depends_show_if)||(m[" et-fb-settings-option--depends-on"]=!0),"categories"!==r.type||(0,u.default)(r.taxonomy_name)||""===r.taxonomy_name||(m["et-fb-option--".concat(r.taxonomy_name)]=!0);var g="",v="",b=!(0,u.default)(r.description)&&""!==r.description,_=(0,C.default)(function(e){return B.default.get((0,O.default)(e,"default_on_front"),B.default.get((0,O.default)(e,"defaultValue"),B.default.get((0,O.default)(e,"default"),"")))}(r)),w=(0,C.default)(R.default.getPageSetting(r.id)),k=_===w?"":w;(0,u.default)(r.label)||""===r.label||(g=o.default.createElement(A.ETBuilderFormLabel,{name:r.name,activeHelp:t._isDescriptionVisible(r.name),hoveredGroup:t._isHoveredGroup(r.name),isResetActive:B.default.get(k,_)!==_,onClickReset:t._onClickReset,key:"et-fb-settings-option-label-".concat(a),onClickHelp:!!b&&t._onClickHelp},r.label)),b&&(v=o.default.createElement(A.ETBuilderFormDescription,{active:t._isDescriptionVisible(r.name),key:"et-fb-settings-option-description-".concat(a)},r.description));var S={slug:r.type,type:"field"},E=R.default.getPageSettings();return o.default.createElement(A.ETBuilderFormGroup,{name:r.name,key:"et-fb-settings-option-form-group-".concat(a),onMouseEnterGroup:t._onMouseEnterGroup,onMouseLeaveGroup:t._onMouseLeaveGroup,hovered:t.isOptionHovered(r.name)},g,v,o.default.createElement("div",{className:(0,i.default)(m),key:"et-fb-settings-option-".concat(a)},o.default.createElement("div",{className:"et-fb-settings-option-container",key:"et-fb-settings-option-container-".concat(a)},o.default.createElement(F.default.getControl(r.type),(0,y.default)({key:r.id,value:k,name:r.id,content:k,_onChange:t._onChange,animate:t.props.options.animate,defaultValue:_,fieldDefinition:d,matching:S,attrs:E},h,r)))))})))}))}},{key:"_handleFormSubmission",value:function(e){e.preventDefault(),T.default.pageSettingsClose()}},{key:"maybeShowFilterNotice",value:function(){var t=this;this.state.filterNotice||(0,c.default)(this.state.filterOptions)&&(0,c.default)(this.state.filterSelected)||(clearTimeout(Z),Z=setTimeout((function(){e((0,a.findDOMNode)(t)).find(".et-fb-form__group").length||(e((0,a.findDOMNode)(t)).find(".et-fb-options-filter input").trigger("blur"),t.setState({filterNotice:!0}))}),300))}},{key:"_renderPageSettingsPanel",value:function(e){var t={},n=["styles_modified"];return(0,s.default)(ETBuilderBackend.searchFilterItems,(function(e,r){(0,u.default)(t[r])&&(t[r]={}),(0,s.default)(e,(function(e,o){n.includes(o)&&(t[r][o]=e)}))})),o.default.createElement(N.ETBuilderTabPanel,{className:"et-fb-tabs__panel--".concat(e),key:"et-fb-tabs__panel--".concat(e),displayFilter:!0,filterValue:this.state.filterOptions,filterSelected:this.state.filterSelected,filterItems:t,filterGroups:{show_only:ETBuilderBackend.i18n.modals.show_only},filterNotice:this.state.filterNotice,_onFilterInput:this._onFilterInput,_onFilterSelect:this._onFilterSelect},o.default.createElement(A.default,{onSubmit:this._handleFormSubmission},o.default.createElement("input",{type:"submit",className:"et-fb-hide"}),this._renderTab(e),!(this.state.filterNotice||(this.state.filterOptions||this.state.filterSelected)&&(0,d.default)(["content","design"],e))&&o.default.createElement(j.default,{id:"et_pb_default"})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onModalChange,r=z(t,W),a=ETBuilderBackend.i18n.modals.pageSettings.tabs,l=[o.default.createElement(x.default,{block:!0,danger:!0,buttonName:M.default.PAGE_SETTINGS_CLOSE,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel},o.default.createElement(D.default,{icon:"exit",color:"#FFFFFF"})),o.default.createElement(x.default,{block:!0,primary:!0,alt:!0,buttonName:M.default.PAGE_SETTINGS_BUTTON_UNDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.undo},o.default.createElement(D.default,{icon:"undo",color:"#FFFFFF"})),o.default.createElement(x.default,{block:!0,info:!0,buttonName:M.default.PAGE_SETTINGS_BUTTON_REDO,tooltip:ETBuilderBackend.i18n.tooltip.modal.redo},o.default.createElement(D.default,{icon:"redo",color:"#FFFFFF"})),o.default.createElement(x.default,{block:!0,success:!0,buttonName:M.default.PAGE_SETTINGS_EDIT,tooltip:ETBuilderBackend.i18n.tooltip.modal.save},o.default.createElement(D.default,{icon:"check",color:"#FFFFFF"}))],u=(0,i.default)({"et-fb-modal__module-settings":!0,"et-fb-modal__filter-active":""!==this.state.filterOptions||B.default.hasValue(this.state.filterSelected),"et-fb-modal__page-settings":!0}),s=(0,I.getModalPreferredSnapSettings)().snapLocation,c=this.props.activeTab||0;return o.default.createElement(L.default,U({className:u,footerButtons:l,fullscreen:(0,I.getModalPreferredFullscreen)(),globalUpdate:!0,label:ETBuilderBackend.i18n.modals.pageSettings.title,measurement:(0,I.getModalPreferredDimensions)(),animate:this.props.options.animate,onModalChange:n,position:(0,I.getModalPreferredCoordinates)(),snapLocation:s},r),o.default.createElement(N.default,{selectedIndex:c},o.default.createElement(N.ETBuilderTabList,null,(0,h.default)(a,(function(e,t){return o.default.createElement(N.ETBuilderTabItem,{key:"et-fb-modal--builder-settings-".concat(t)},e)}))),(0,h.default)(a,(function(t,n){return e._renderPageSettingsPanel(n)}))))}},{key:"_onChange",value:function(e,t){"et_pb_enable_ab_testing"===e&&B.default.isOff(t)&&R.default.abIsMode("on")?T.default.abDisable():T.default.pageSettingsChange(e,t)}}])&&q(n.prototype,r),l&&q(n,l),E}(o.default.Component);ne.propTypes=ee;var re=ne;t.default=re}).call(this,n(5))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=T(n(0)),a=M(n(18)),i=n(136),l=n(42),u=M(n(77)),s=M(n(1466)),c=n(75),d=M(n(58)),f=M(n(1456)),p=M(n(370)),h=M(n(956)),m=T(n(957)),g=n(756),v=M(n(27)),y=M(n(8)),b=M(n(29)),_=M(n(972)),w=n(3),k=M(n(731)),O=n(22),C=n(48),S=n(729),E=M(n(965));function M(e){return e&&e.__esModule?e:{default:e}}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1736);var W=new _.default,V=new i.AllHtmlEntities,H=ETBuilderBackend.i18n.fonts,G=null,U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(_,e);var t,n,r,i=N(_);function _(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),I(B(t=i.call(this,e)),"isOptionHovered",(function(e){return t.state.hoveredGroup===e})),t.displayName="ETBuilderFindReplaceModal";var n=t._getSelectedFieldValue();return t.state={find:n,replace:n,within:"this_page",throughout:"this_page",all:"off",buttonState:!1,colorPaletteMode:"saved"},t._setFindReplacei18n(),t.tabSlug="find-replace",t.isDynamic=(0,c.isDynamicContent)(n),t.moduleSettingMode=y.default.getModuleSettingMode(),t._onKeyDown=t._onKeyDown.bind(B(t)),t._onClose=t._onClose.bind(B(t)),t._onMouseEnterGroup=t._onMouseEnterGroup.bind(B(t)),t._onMouseLeaveGroup=t._onMouseLeaveGroup.bind(B(t)),t._onClickHelp=t._onClickHelp.bind(B(t)),t._onChangeMap=t._onChangeMap.bind(B(t)),t._onChangeField=t._onChangeField.bind(B(t)),t._onChangeFieldWithin=t._onChangeFieldWithin.bind(B(t)),t._onChangeFieldThroughout=t._onChangeFieldThroughout.bind(B(t)),t._onFindReplace=t._onFindReplace.bind(B(t)),t._resetOption=t._resetOption.bind(B(t)),t}return t=_,(n=[{key:"componentDidMount",value:function(){var e=this;W.reset(),(0,w.appWindow)().addEventListener("keydown",this._onKeyDown),(0,w.topWindow)().addEventListener("keydown",this._onKeyDown),y.default.addColorPaletteChangeListener((function(t){e.setState({colorPaletteMode:t})}))}},{key:"componentWillUnmount",value:function(){W.reset(),(0,w.appWindow)().removeEventListener("keydown",this._onKeyDown),(0,w.topWindow)().removeEventListener("keydown",this._onKeyDown)}},{key:"_setFindReplacei18n",value:function(){G="replace_global_color"===this.props.element.intent?ETBuilderBackend.i18n.replaceGlobalColor.modal:ETBuilderBackend.i18n.findReplace.modal}},{key:"_getEditedModule",value:function(e,t){var n=(0,l.get)(this.props,"module");return(0,l.isUndefined)(e)?n:(0,l.get)(n,e,t)}},{key:"_getEditedModuleType",value:function(){return this._getEditedModule("props.type")}},{key:"_getModuleStructure",value:function(e){switch(e||this._getEditedModuleType()){case"et_pb_section":return"section";case"et_pb_row":case"et_pb_row_inner":return"row";case"et_pb_column":case"et_pb_column_inner":return"column";default:return"module"}}},{key:"_getModuleTitle",value:function(e){var t=e||this._getEditedModuleType();return W.has("getModuleTitle",t)?W.get("getModuleTitle",t):W.set(y.default.getModuleTitle(t),"getModuleTitle",t)}},{key:"_getSourceModuleAddressScope",value:function(e){var t=this,n=y.default.getSectionsFlattened(),r=this._getEditedModule("props",{}),o=(0,l.get)(r,"address",""),a=(0,w.getModuleAddressSequence)(o),i=e.replace("this_","");return(0,l.find)(n,(function(e){if(!(0,l.includes)(a,e.address))return!1;var n="et_pb_column"===e.type,r="et_pb_specialty_section"===e.parent_slug,o=(0,l.some)((0,l.get)(e,"content",[]),(function(e){return"et_pb_row_inner"===e.type}));return!(n&&r&&o)&&t._getModuleStructure(e.type)===i}))}},{key:"_getTargetModules",value:function(){var e=this,t=y.default.getSectionsFlattened(),n=this._getEditedModule("props",{}),r=(0,l.get)(n,"type","");return function(){switch(e.state.within){case"this_module":return[n];case"this_page":return t;case"this_section":case"this_row":case"this_column":var o=(0,l.get)(e._getSourceModuleAddressScope(e.state.within),"address");return t.filter((function(e){return(0,l.includes)((0,w.getModuleAddressSequence)(e.address),o)}));default:var a=(0,l.get)(e._getSourceModuleAddressScope(e.state.throughout),"address"),i="this_page"===e.state.throughout,u="all_same_type"===e.state.within;return t.filter((function(t){var n=(0,l.includes)((0,w.getModuleAddressSequence)(t.address),a);return!(!i&&!n)&&(u?r===t.type:"module"===e._getModuleStructure(t.type))}))}}().filter((function(e){return!(0,w.isModuleLocked)(e,t)}))}},{key:"_getModuleFields",value:function(e){var t=e?{props:e}:this._getEditedModule(),n=t.props.type;if(W.has("getModuleFields",n))return W.get("getModuleFields",n);var r=y.default.getModuleFields(t),o=(0,l.get)(this._getEditedModule("props"),"attrs"),a={};return(0,l.forEach)(r,(function(e,t){var n=(0,O.getHoverField)(t),r=(0,C.getStickyField)(t);(0,l.has)(o,n)&&(0,l.set)(a,n,e),(0,l.has)(o,r)&&(0,l.set)(a,r,e)})),W.set((0,l.assign)({},r,a),"getModuleFields",n)}},{key:"_getHoveredElement",value:function(e){var t=(0,l.isUndefined)(e)?"element":"element.".concat(e);return(0,l.get)(this.props,t)}},{key:"_getHoveredElementId",value:function(){return this._getHoveredElement("elementId")}},{key:"_getHoveredElementSubId",value:function(){return this._getHoveredElement("subElementId")}},{key:"_getSelectedField",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._getHoveredElement("payload.toggleId"),n=this._getEditedModule(),r=this._getHoveredElement("payload.toggleGroupId"),o=this._getHoveredElement("elementId");e||(r="css"===r?"custom_css":r);var a=(0,l.find)(y.default.getModuleFields(n),{name:o,tab_slug:r,toggle_slug:t}),i=(0,l.assign)({},{name:o,type:this._getHoveredElement("payload.option_family"),label:this._getHoveredElement("payload.optionTitle"),subField:this._getHoveredElement("subElementId")},a);if("categories"===i.type&&(i=(0,l.assign)({},i,{categories_list:{},taxonomy_name:(0,l.isUndefined)(i.taxonomy_name)?"category":i.taxonomy_name})),"conditional_logic"===i.type&&(i=(0,l.assign)({},i,{hideAddButton:!0,hideDeleteButton:!0})),"select"===i.type&&(0,l.isUndefined)(i.default)&&!(0,l.isEmpty)(i.options)){var u=(0,l.isArray)(i.options)?[]:{};(0,l.forEach)(i.options,(function(e,t){(0,l.isObject)(e)||(0,l.isArray)(e)?(0,l.forEach)(e,(function(e,t){u[t]=e})):u[t]=e})),u&&(i=(0,l.assign)({},i,{default:(0,l.isArray)(u)?u[0]:(0,l.head)((0,l.keys)(u))}))}return"center_map"===i.type&&(i=(0,l.assign)({},i,{disableAction:!0,hideUpdateButton:!0})),i}},{key:"_getSelectedFieldType",value:function(){return(0,l.get)(this._getSelectedField(),"type","text")}},{key:"_getSelectedFieldLabel",value:function(){var e=this._getSelectedField(),t=(0,l.get)(e,"label","");if("font"===e.type){var n=(0,l.get)(this._getSelectedField(),"group_label",""),r=this._getHoveredElementSubId(),o=(this._getSelectedFieldValue()||"||||||||").split("|"),a={family:(0,l.get)(o,0,""),weight:(0,l.get)(o,1,""),italic:(0,l.get)(o,2,""),uppercase:(0,l.get)(o,3,""),underline:(0,l.get)(o,4,""),capitalize:(0,l.get)(o,5,""),strikethrough:(0,l.get)(o,6,""),line_style:(0,l.get)(o,7,""),line_color:(0,l.get)(o,8,"")},i=(0,w.isOn)((0,l.get)(a,"underline"));switch(r){case"weight":t=H.fontWeight;break;case"style":t=H.fontStyle;break;case"line_color":var u=i?H.underline:H.strikethrough,s=H.color;t="".concat(u," ").concat(s);break;case"line_style":var c=i?H.underline:H.strikethrough,d=H.style;t="".concat(c," ").concat(d);break;default:t=(0,l.get)(H,r,"")}return(0,l.isUndefined)(n)?t:"".concat(n," ").concat(t)}return t}},{key:"_getSelectedFieldValue",value:function(){var e=(0,l.get)(this._getSelectedField(!0),"name");return"desktop"!==this.moduleSettingMode&&(e=E.default.getNameByMode(e,this._getEditedModule("props.attrs"))),this._getFieldValue(e)}},{key:"_getFieldValue",value:function(e,t,n){var r=(0,l.isUndefined)(e)?(0,l.get)(this._getSelectedField(),"name"):e,o=(0,l.isUndefined)(t)?this._getSelectedField():t,a=(0,l.isUndefined)(n)?this._getEditedModule("props"):n,i=a.attrs||{};if(!((0,l.isEmpty)(o)||(0,l.isUndefined)(r)||(0,l.isUndefined)(o.type))){var u;if(("content"===r||(0,l.get)(o,"is_fb_content",!1))&&(u=(0,l.get)(a,"content")),"custom_padding"===o.type&&"custom_padding"!==r&&this._isModuleHasColumn(a)){var s=r.replace("padding_",""),c=(0,w.hasValue)(i["padding_".concat(s,"_last_edited")])?i["padding_".concat(s,"_last_edited")].split("|"):[],d=((0,l.get)(i,"padding_top_".concat(s),"")||"").trim(),f=((0,l.get)(i,"padding_right_".concat(s),"")||"").trim(),p=((0,l.get)(i,"padding_bottom_".concat(s),"")||"").trim(),h=((0,l.get)(i,"padding_left_".concat(s),"")||"").trim(),m=((0,l.get)(i,"padding_top_bottom_link_".concat(s),"")||"").trim(),g=((0,l.get)(i,"padding_left_right_link_".concat(s),"")||"").trim(),v="".concat(d,"|").concat(f,"|").concat(p,"|").concat(h,"|").concat(m,"|").concat(g);switch((0,l.isUndefined)(c[1])?"desktop":c[1]){case"phone":u=(0,l.get)(i,"padding_".concat(s,"_phone"),"");break;case"tablet":u=(0,l.get)(i,"padding_".concat(s,"_tablet"),"");break;default:u=v}}if("center_map"===o.type)switch(a.type){case"et_pb_map_pin":u=JSON.stringify((0,l.pick)(i,["pin_address","pin_address_lat","pin_address_lng","zoom_level"]));break;default:u=JSON.stringify((0,l.pick)(i,["address_lat","address_lng","zoom_level"]))}return(0,l.isUndefined)(u)&&(u=(0,l.get)(i,r,(0,l.get)(o,"default"))),u}}},{key:"_getWithinOptions",value:function(){var e=this,t=this._getModuleStructure(),n={};return(0,l.forEach)(ETBuilderBackend.findReplace.within,(function(r,o){switch(o){case"locations":var a=(0,l.keys)(r).filter((function(t){return"this_page"===t||e._getSourceModuleAddressScope(t)}));(0,l.isEmpty)(a)||(n[o]=(0,l.pick)(r,a));break;default:var i=["this_module","all_same_type"];"module"===t&&i.push(["all_modules"]),(0,l.isEmpty)(i)||(n[o]=(0,l.mapValues)((0,l.pick)(r,i),(function(t){return t.replace("%s",e._getModuleTitle())})))}})),n}},{key:"_getThroughoutOptions",value:function(){var e=this,t=this._getModuleStructure(),n=(0,l.get)(ETBuilderBackend,"findReplace.throughout",{}),r=(0,l.keys)(n).filter((function(n){return"this_".concat(t)!==n&&("this_page"===n||e._getSourceModuleAddressScope(n))}));return(0,l.pick)(n,r)}},{key:"_isReplaceValueValid",value:function(e,t){var n=e||this.state.replace,r=t||this._getSelectedField();if(!(0,l.get)(r,"required",!1)&&!(0,w.hasValue)(n))return!0;switch((0,l.get)(r,"type")){case"color":case"color-alpha":case"background-field":return k.default.isColorValid(n.toLowerCase());case"range":var o=/^-?\d*\.?\d+$/,a=(0,l.get)(r,"default_unit",(0,l.get)(r,"fixed_unit",!1)),i=a?o.test(n.replace(a,"")):o.test(n);if(i&&(0,l.get)(r,"fixed_range",!1)){var u=r.range_settings||{min:0,max:100,step:1},s=(0,l.get)(r,"fixed_unit",(0,l.get)(r,"default_unit",!1)),c=s?parseFloat(n.replace(s,"")):parseFloat(n);i=c>=(0,l.get)(u,"min",0)&&c<=(0,l.get)(u,"max",100)}return i;case"font":return 9===(0,l.toString)(n).split("|").length;case"center_map":return(0,w.isJson)(n);default:return!0}}},{key:"_isFieldTypeMatch",value:function(e){var t=!1,n=e.type||"custom_css"!==e.toggle_slug?e.type:"codemirror";switch(n){case"upload":var r=(0,l.get)(e,"data_type","image"),o=(0,l.get)(this._getSelectedField(),"data_type","image");(t=n===this._getSelectedFieldType()&&r===o)&&"video"===o&&(t=(0,l.get)(e,"field_template",!0)===(0,l.get)(this._getSelectedField(),"field_template",!1));break;case"background-field":t=(0,l.includes)(["color","color-alpha","background-field"],this._getSelectedFieldType());break;default:t=n===this._getSelectedFieldType()}return t}},{key:"_isFieldNameMatch",value:function(e,t,n){if((0,w.isOn)(this.state.all))return!0;if(n&&(0,l.includes)(this._getHoveredElement("payload.option"),n))return!0;var r={moduleType:this._getEditedModuleType(),field:this._getSelectedField(),value:this._getSelectedFieldValue()},o={moduleType:t.type,field:e,value:this._getFieldValue((0,l.get)(e,"name"),e,t)};return y.default.getModuleFieldsMapping(r,o)}},{key:"_isButtonEnabled",value:function(){return!((0,l.toString)(this.state.find)===(0,l.toString)(this.state.replace)||(0,l.isEmpty)(this.state.within)||this._isThroughoutEnabled()&&(0,l.isEmpty)(this.state.throughout)||!this._isReplaceValueValid())}},{key:"_isThroughoutEnabled",value:function(){return(0,l.includes)(["all_modules","all_same_type"],this.state.within)}},{key:"_isDescriptionVisible",value:function(e){return this.state.activeDescription===e}},{key:"_isModuleHasColumn",value:function(e){var t=e||this._getModuleEdited("props"),n=(0,l.includes)(["et_pb_row","et_pb_row_inner"],t.type),r=(0,w.isOn)((0,l.get)(t,"attrs.specialty")&&"et_pb_section"===(0,l.get)(t,"type"));return n||r}},{key:"_onKeyDown",value:function(e){27===e.keyCode&&this._onClose()}},{key:"_onClose",value:function(){v.default.findReplaceModalClose(this._getEditedModule(),this._getHoveredElement())}},{key:"_onMouseEnterGroup",value:function(e){this.setState({hoveredGroup:e})}},{key:"_onMouseLeaveGroup",value:function(){this.setState({hoveredGroup:!1})}},{key:"_onClickHelp",value:function(e){this.setState({activeDescription:this.state.activeDescription!==e&&e})}},{key:"_onChangeMap",value:function(e,t){try{this.setState({replace:JSON.stringify((0,l.set)(JSON.parse(this.state.replace),e,t))})}catch(n){this.setState(I({},e,t))}}},{key:"_onChangeField",value:function(e,t){e!==(0,l.get)(this._getSelectedField(),"name")?this.setState(I({},e,t)):this.setState({replace:t})}},{key:"_onChangeFieldWithin",value:function(e){this.setState({within:e})}},{key:"_onChangeFieldThroughout",value:function(e){this.setState({throughout:e})}},{key:"_onFindReplace",value:function(){var e=this;this.setState({buttonState:"loading"});var t=(0,l.toString)(this.state.replace),n=(0,l.toString)(this.state.find),r=!(0,w.hasValue)(n),o="font"===this._getHoveredElement("payload.option_family"),a=o&&this._getHoveredElement("subElementId"),i=a&&(0,w.getFontFieldIndexes)(a),u=this._getEditedModule("props.address"),s=this._getHoveredElement("payload.option");new Promise((function(d){setTimeout((function(){var f=e._getTargetModules();return(0,l.isEmpty)(f)?d(!1):((0,l.forEach)(f,(function(d){var f=e._getModuleFields(d),p={};(0,l.forEach)(d.attrs,(function(e,t){p[t]=e})),(0,l.forEach)(s,(function(e){(0,l.has)(p,e)||(p[e]="")}));var h=(0,l.pickBy)(p,(function(e){if(e===n)return!0;if(o&&a){var t=e?e.split("|"):"||||||||".split("|"),l=n?n.split("|"):"||||||||".split("|");if(9===t.length&&t.length===l.length&&t[i]===l[i])return!0}return!(!r||(0,w.hasValue)(e))}));if(!(0,l.isEmpty)(h)){var m={};if((0,l.forEach)(h,(function(r,o){var a=E.default.getBaseName(o),i=(0,l.get)(f,a);if(!i&&(0,l.startsWith)(a,"custom_css_")&&(i=(0,l.get)(f,(0,l.replace)(a,"custom_css_",""))),i&&("skip"===i.type&&a.match(/_\d+$/)&&(i=(0,l.get)(f,a.replace(/_\d+$/,""),i)),i&&e._isFieldNameMatch(i,d,o)&&e._isFieldTypeMatch(i)&&e._isReplaceValueValid(t,i)))switch(i.type){case"font":var u=e._getFindReplaceFont(n,r,t);u&&(m[o]=u);break;case"select_box_shadow":var s=(0,l.find)(i.presets,(function(e){return e.value===t}));s&&((0,l.forEach)(s.fields,(function(e,t){m[t]=e})),m[o]=t);break;case"center_map":(0,l.forEach)(JSON.parse(t),(function(e,t){m[t]=e}));break;default:m[o]=t}})),!(0,l.isEmpty)(m)){var g={};if((0,l.forEach)(m,(function(t,n){(0,c.isDynamicContent)(t)&&!(0,c.isDynamicContentSupported)((0,l.get)(d,"type"),n)||(g[n]={value:t,isContent:(0,l.includes)(["content","raw_content"],n)&&"et_pb_counter"!==(0,l.get)(d,"type")},n.includes("color")&&e._findReplaceColorValue(d,n))})),!(0,l.isEmpty)(g)){var y=d.address,b=y===u;v.default.findReplaceModuleUpdate(y,g,b)}}}})),d(!0))}),0)})).then((function(){e._onClose()}))}},{key:"_getFindReplaceData",value:function(e,t,n){var r=this,o=(0,l.toString)(this.state.find),a=(0,l.toString)(this.state.replace),i={};if(!this._isFieldTypeMatch(t))return!1;if(!this._isFieldNameMatch(t,n))return!1;if(!this._isReplaceValueValid(a,t))return!1;var u=[e];if(t.mobile_options&&E.default.isResponsiveEnabled(e,n)&&(u.push("".concat(e,"_tablet")),u.push("".concat(e,"_phone"))),"tabs"===t.hover&&E.default.isHoverEnabled(e,n)&&u.push("".concat(e,"__hover")),t.sticky&&E.default.isStickyEnabled(e,n)&&u.push("".concat(e,"__sticky")),(0,l.forEach)(u,(function(u){var s=u,c=(0,l.get)(t,"tab_slug",""),d=(0,l.get)(t,"toggle_slug","");"custom_css"===c&&"classes"!==d&&(0,l.startsWith)(s,"custom_css_")&&(s=(0,l.replace)(s,"custom_css_",""));var f=(0,l.toString)(r._getFieldValue(s,t,n));switch((0,l.get)(t,"type")){case"skip":case"hidden":break;case"font":var p=r._getFindReplaceFont(o,f,a);p&&(0,l.set)(i,s,p);break;case"center_map":o.toLowerCase()===f.toLowerCase()&&(0,l.forEach)(JSON.parse(a),(function(e,t){(0,l.set)(i,t,e)}));break;default:if(f.toLowerCase()===o.toLowerCase()&&(0,l.set)(i,s,a),0===s.indexOf("padding_")&&r._isModuleHasColumn(n.props)&&e!==s){var h=s.replace("padding_",""),m=a.split("|");e==="padding_top_".concat(h)?(0,l.set)(i,e,(0,l.get)(m,0,"")):e==="padding_right_".concat(h)?(0,l.set)(i,e,(0,l.get)(m,1,"")):e==="padding_bottom_".concat(h)?(0,l.set)(i,e,(0,l.get)(m,2,"")):e==="padding_left_".concat(h)?(0,l.set)(i,e,(0,l.get)(m,3,"")):e==="padding_top_bottom_link_".concat(h)?(0,l.set)(i,e,(0,l.get)(m,4,"")):e==="padding_left_right_link_".concat(h)&&(0,l.set)(i,e,(0,l.get)(m,5,""))}}})),!(0,l.isEmpty)(i)&&(0,l.get)(t,"presets",!1)){var s=t.presets.filter((function(e){return(0,l.get)(e,"value")===a}));(0,l.forEach)(s,(function(e){var t=(0,l.get)(e,"fields",!1);t&&(0,l.forEach)(t,(function(e,t){(0,l.set)(i,t,e)}))}))}return i}},{key:"_getFindReplaceFont",value:function(e,t,n){var r=(0,l.toString)(e).split("|");9!==r.length&&(r="||||||||".split("|"));var o=(0,l.toString)(t).split("|");9!==o.length&&(o="||||||||".split("|"));var a=(0,l.toString)(n).split("|");9!==a.length&&(a="||||||||".split("|"));var i=(0,w.getFontFieldIndexes)(this._getHoveredElementSubId());return!(0,l.some)(i,(function(e){return(0,l.get)(r,e,"")!==(0,l.get)(o,e,"")}))&&((0,l.forEach)(i,(function(e){o[e]=(0,l.get)(a,e,"")})),o.join("|"))}},{key:"_resetOption",value:function(){this.setState({replace:""})}},{key:"_renderSubHeader",value:function(){if("replace_global_color"===this.props.element.intent)return o.default.createElement("p",{className:"et-fb-modal__find-replace__header-desc"},G.description)}},{key:"_getColorFindReplaceConfig",value:function(e){return e.findReplaceModalFind?{hideColorManagerLinks:!0,hideHarmoniousPalette:!0,hideCurrentColorWrapper:!0,hideColorResetButton:!0,showCustomInput:!0}:e.findReplaceModalReplace?{hasColorManager:!0,showPickerPalettes:!1,hidePickerOnPaletteSelect:!0,hidePaletteOnPickerActive:!1}:void 0}},{key:"_getReplaceGloablColorConfig",value:function(e){var t=this.props.element,n=t.color,r=t.colorId;return e.findReplaceModalFind?{hideColorManagerLinks:!0,hideHarmoniousPalette:!0,hideCurrentColorWrapper:!0,hideColorResetButton:!0,showCustomInput:!0,colorPaletteMode:"global",colorId:r,value:n}:e.findReplaceModalReplace?{hideColorManagerLinks:!0,colorPaletteMode:"global",colorId:r,color:n}:void 0}},{key:"_findReplaceColorValue",value:function(e,t){var n=this.props.element,r=null;"replace_global_color"===n.intent&&(r=n.colorId),v.default.maybeUpdateGlobalColorsInfo(e,t,r)}},{key:"_renderField",value:function(e,t,n){var r=this._getEditedModule(),i=r.isModuleItem&&!(0,l.isUndefined)(r.parentModule.props.type)&&r.parentModule.props.type?"".concat(e.name,"_child"):e.name;e.findReplaceModalFind?i="".concat(i,"__find"):e.findReplaceModalReplace?i="".concat(i,"__replace"):e.findReplaceModalWithin?i="".concat(i,"__within"):e.findReplaceModalThroughout?i="".concat(i,"__throughout"):e.findReplaceModalReplaceAll&&(i="".concat(i,"__all"));var u,c={slug:e.type,type:"field"},d=(0,l.assign)({},e,{resetValue:!1,mobile_options:!1,disableReset:!0,uniqueKey:i,processedKey:i,fieldDefinition:e,matching:c});if("transform"===d.type){var h=(0,l.get)(b.default.getComponentAdvancedFields(this.props.module),"transform_styles.composite_structure"),m="".concat(d.name).replace("transform_",""),v=(0,l.get)(h,"".concat(m,".controls.transform_").concat(m));d.default_unit=v.default_unit,d.transform_type="".concat(d.name).replace("transform_",""),(0,w.hasValue)(d.default)||(d.default=v.default),(0,w.hasValue)(d.value)||(d.value=v.default)}(e.findReplaceModalFind||e.findReplaceModalReplace)&&((0,l.includes)(["color","color-alpha"],d.type)&&(u="replace_global_color"===this.props.element.intent?this._getReplaceGloablColorConfig(e):this._getColorFindReplaceConfig(e),d=(0,l.assign)({},d,D(D({},u),{},{moduleAttrs:(0,l.get)(r,"props.attrs")}))),"font"===d.type&&(d=(0,l.assign)({},d,{subFieldLabel:!1,subField:this._getHoveredElementSubId()?this._getHoveredElementSubId():"font"})),"select_with_option_groups"===d.type&&(d=(0,l.assign)({},d,{value:(0,l.get)((0,l.toString)(d.value).split("|"),1,"none"),hideAddButton:!0,hideRemoveButton:!0,hideFetchButton:!0})),"multiple_checkboxes"===d.type&&(d=(0,l.assign)({},d,{shortcut_index:i})));var y=(0,l.get)(d,"type","text"),_=y.replace("_","-"),k=(0,a.default)(I({"et-fb-form__group--find-replace":!0,"et-fb-form__group--find-replace__find":e.findReplaceModalFind,"et-fb-form__group--find-replace__replace":e.findReplaceModalReplace,"et-fb-form__group--find-replace__within":e.findReplaceModalWithin,"et-fb-form__group--find-replace__throughout":e.findReplaceModalThroughout,"et-fb-form__group--find-replace__all":e.findReplaceModalReplaceAll,"et-fb-settings-option-select--column-structure":"column-structure"===y},"et-fb-form__group--".concat(_),!0)),O=(0,a.default)(I({"et-fb-settings-options":!0,"et-fb-option--depends-on":!(0,l.isUndefined)(e.depends_default)||!(0,l.isUndefined)(e.depends_show_if)||!(0,l.isUndefined)(e.depends_show_if_not),"et-fb-option--select-with-option-groups":"select_with_option_groups"===y&&e.groups},"et-fb-option--".concat(_),!0)),C=(0,a.default)(I({"et-fb-option-container":!0},"et-fb-option-container--".concat(_),!0)),S=(0,o.createElement)(f.default.getControl(y),d);return o.default.createElement(g.ETBuilderFormGroup,{className:k,name:i,key:"".concat(this.tabSlug,"-form-group-").concat(i),hovered:this.isOptionHovered(d.name),onMouseEnterGroup:this._onMouseEnterGroup,onMouseLeaveGroup:this._onMouseLeaveGroup},o.default.createElement(g.ETBuilderFormLabel,{name:i,hoveredGroup:this.state.hoveredGroup===i,activeHelp:this.state.activeDescription===i,onClickHelp:this._onClickHelp},t),o.default.createElement(g.ETBuilderFormDescription,{active:this.state.activeDescription===i},n),o.default.createElement("div",{className:O},o.default.createElement("div",{className:C},o.default.createElement(p.default,{componentName:i},(this.isDynamic||d.findReplaceModalReplace)&&(0,l.includes)(s.default.supportedFieldTypes,y)?o.default.createElement(s.default,{type:d.dynamic_content||y,fieldName:d.name,fieldType:y,value:d.value,dynamicAttributes:[d.name],showSettingsButton:!d.readonly,showDisableButton:!d.readonly,onChange:d._onChange,onReset:this._resetOption},S):S))))}},{key:"_renderFieldFind",value:function(){var e,t=(0,l.assign)({},this._getSelectedField(),{module:this,type:this._getSelectedFieldType(),value:this.state.find,findReplaceModalFind:!0,readonly:!0,_onChange:l.noop}),n=this.state.find;"text"===t.type||(0,l.isUndefined)(n)||(0,l.set)(t,"default",n),"codemirror"===t.type&&(0,l.get)(t,"is_fb_content")&&(0,l.set)(t,"content",n),e="replace_global_color"===this.props.element.intent?G.find.label:G.find.label.replace("%s",this._getSelectedFieldLabel());var r=G.find.description;return this._renderField(t,e,r)}},{key:"_renderFieldWithin",value:function(){if("replace_global_color"!==this.props.element.intent&&"global"!==this.state.colorPaletteMode){var e={name:"within",type:"select",value:this.state.within,options:this._getWithinOptions(),optionGroups:ETBuilderBackend.findReplace.groups,groupSeparator:!1,findReplaceModalWithin:!0,__onChange:this._onChangeFieldWithin},t=G.within.label,n=G.within.description;return this._renderField(e,t,n)}}},{key:"_renderFieldThroughout",value:function(){if(!this._isThroughoutEnabled())return!1;var e={name:"throughout",type:"select",value:this.state.throughout,options:this._getThroughoutOptions(),findReplaceModalThroughout:!0,__onChange:this._onChangeFieldThroughout},t=G.throughout.label,n=G.throughout.description;return this._renderField(e,t,n)}},{key:"_renderFieldReplace",value:function(){var e=this,t=(0,l.assign)({},this._getSelectedField(),{module:this,type:this._getSelectedFieldType(),default:(0,c.isDynamicContent)(this.state.find)?"":this.state.find,value:(0,l.isUndefined)(this.state.replace)?"":this.state.replace,findReplaceModalReplace:!0,_onChange:l.noop}),n=(0,l.get)(t,"readonly_if",!1);n&&(0,l.forEach)(n,(function(n,r){(0,l.includes)(n,e._getEditedModule(r.replace(":",".props.attrs.")))&&(0,l.set)(t,"readonly",!0)}));var r=(0,l.get)(t,"readonly_if_not",!1);if(r&&(0,l.forEach)(r,(function(n,r){(0,l.includes)(n,e._getEditedModule(r.replace(":",".props.attrs.")))||(0,l.set)(t,"readonly",!0)})),!(0,l.get)(t,"readonly",!1))switch(t.type){case"center_map":(0,l.set)(t,"_onChange",this._onChangeMap),(0,l.set)(t,"hideUpdateButton",this._onChangeMap),(0,w.isJson)(this.state.replace)&&(0,l.forEach)(JSON.parse(this.state.replace),(function(e,n){(0,l.set)(t,n,(0,l.includes)(["zoom_level"],n)?parseInt(e,10):e)}));break;default:(0,l.set)(t,"_onChange",this._onChangeField)}"codemirror"===t.type&&(0,l.get)(t,"is_fb_content")&&(0,l.set)(t,"content",this.state.replace);var o=G.replaceWith.label,a=G.replaceWith.description;return this._renderField(t,o,a)}},{key:"_renderFieldReplaceAll",value:function(){var e=this;if("replace_global_color"!==this.props.element.intent&&"global"!==this.state.colorPaletteMode){var t=(0,l.mapValues)(ETBuilderBackend.findReplace.all,(function(t){return t.replace("%s",e._getSelectedFieldLabel())})),n={name:"all",type:"multiple_checkboxes",value:this.state.all,options:t,findReplaceModalReplaceAll:!0,_onChange:this._onChangeField},r=G.replaceAll.label.replace("%s",this._getSelectedFieldLabel()),o=G.replaceAll.description;return this._renderField(n,r,o)}this.setState({all:"on"})}},{key:"render",value:function(){var e=this.state.buttonState?o.default.createElement(d.default,{icon:this.state.buttonState,color:"#FFFFFF"}):G.tooltip,t=[o.default.createElement(u.default,{block:!0,info:!0,ink:!1,disable:!1!==this.state.buttonState,tooltip:G.tooltip,__onClick:this.state.buttonState?l.noop:this._onFindReplace},e)],n=(0,S.getModalPreferredSnapSettings)().snapLocation,r=D(D({},this.props),{},{measurement:(0,S.getModalPreferredDimensions)(),disableFullscreenButton:!0,disableSnapButton:!0,disableResizeButton:!0}),i=(0,a.default)({"et-fb-modal__module-settings":!0,"et-fb-modal__find-replace":!0});return o.default.createElement(h.default,x({className:i,footerButtons:t,fullscreen:(0,S.getModalPreferredFullscreen)(),label:V.decode(G.title),position:(0,S.getModalPreferredCoordinates)(),snapLocation:n,_closeFunction:this.state.buttonState?l.noop:this._onClose,globalUpdate:!0},r),o.default.createElement(p.default,null,o.default.createElement(m.default,{selectedIndex:0},o.default.createElement(m.ETBuilderTabPanel,{className:"et-fb-tabs__panel--".concat(this.tabSlug),slug:this.tabSlug,selected:!0},o.default.createElement("div",{className:"et-fb-form"},this._renderSubHeader(),this._renderFieldFind(),this._renderFieldWithin(),this._renderFieldThroughout(),this._renderFieldReplace(),this._renderFieldReplaceAll())))))}}])&&L(t.prototype,n),r&&L(t,r),_}(o.default.PureComponent);t.default=U},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=Z(n(0)),a=J(n(18)),i=n(136),l=J(n(15)),u=J(n(79)),s=J(n(10)),c=J(n(1)),d=J(n(49)),f=J(n(113)),p=J(n(9)),h=J(n(2)),m=J(n(13)),g=J(n(4)),v=J(n(14)),y=J(n(17)),b=J(n(141)),_=J(n(140)),w=J(n(45)),k=J(n(149)),O=J(n(126)),C=J(n(341)),S=J(n(12)),E=J(n(94)),M=J(n(80)),P=J(n(510)),T=J(n(40)),x=J(n(185)),j=J(n(95)),D=J(n(41)),L=J(n(77)),R=J(n(58)),N=J(n(1456)),A=J(n(370)),B=J(n(956)),F=Z(n(957)),I=n(756),W=J(n(27)),V=J(n(8)),H=J(n(29)),G=J(n(972)),U=n(3),z=J(n(22)),q=J(n(48)),K=J(n(1466)),$=n(75),Y=n(729),X=n(733);function J(e){return e&&e.__esModule?e:{default:e}}function Q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Q=function(e){return e?n:t})(e)}function Z(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=Q(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?se(e):t}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1737);var fe=new G.default,pe=new i.AllHtmlEntities,he=ETBuilderBackend.i18n.modals.extend_styles,me=ETBuilderBackend.i18n.fonts,ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(G,e);var t,n,r,i=le(G);function G(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,G),de(se(t=i.call(this,e)),"isOptionHovered",(function(e){return t.state.hoveredGroup===e})),de(se(t),"getModuleFields",(function(e){var t=e.props.type;if(fe.has("getModuleFields",t))return fe.get("getModuleFields",t);var n=V.default.getModuleFields(e),r=(0,k.default)(n,(0,y.default)(n).filter((function(e){return!(0,M.default)(e,"_")&&!(0,p.default)(["advanced_common","advanced_defaults"],e)})));return fe.set(r,"getModuleFields",t)})),de(se(t),"getModuleStructure",(function(e){if(fe.has("getModuleStructure",e))return fe.get("getModuleStructure",e);switch(e){case"et_pb_section":return fe.set("section","getModuleStructure",e);case"et_pb_row":case"et_pb_row_inner":return fe.set("row","getModuleStructure",e);case"et_pb_column":case"et_pb_column_inner":return fe.set("column","getModuleStructure",e);default:return fe.set("module","getModuleStructure",e)}})),t.displayName="ETBuilderExtendStylesModal",t.defaultStates={to:t.getTargetElement(),throughout:"page"},t.state=(0,l.default)({buttonState:!1},t.defaultStates),t.slug="extend-styles",t.onClose=t.onClose.bind(se(t)),t.onKeyDown=t.onKeyDown.bind(se(t)),t.onMouseEnterGroup=t.onMouseEnterGroup.bind(se(t)),t.onMouseLeaveGroup=t.onMouseLeaveGroup.bind(se(t)),t.onClickHelp=t.onClickHelp.bind(se(t)),t.onChangeField=t.onChangeField.bind(se(t)),t.onExtendStyles=t.onExtendStyles.bind(se(t)),t}return t=G,(n=[{key:"componentDidMount",value:function(){fe.reset(),(0,U.appWindow)().addEventListener("keydown",this.onKeyDown),(0,U.topWindow)().addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){fe.reset(),(0,U.appWindow)().removeEventListener("keydown",this.onKeyDown),(0,U.topWindow)().removeEventListener("keydown",this.onKeyDown)}},{key:"onClose",value:function(){var e=(0,c.default)(this.props,"source"),t=(0,c.default)(this.props,"element"),n=(0,c.default)(this.props,"module");W.default.extendStylesModalClose(e,t,n)}},{key:"onKeyDown",value:function(e){27===e.keyCode&&this.onClose()}},{key:"componentDidUpdate",value:function(e){var t=this;(0,j.default)(["module","element","source"],(function(n){return!(0,D.default)(e[n],t.props[n])}))&&this.setState({buttonState:!1,to:this.getTargetElement(),throughout:"page"})}},{key:"onMouseEnterGroup",value:function(e){this.setState({hoveredGroup:e})}},{key:"onMouseLeaveGroup",value:function(){this.setState({hoveredGroup:!1})}},{key:"onClickHelp",value:function(e){this.setState({activeDescription:this.state.activeDescription!==e&&e})}},{key:"onChangeField",value:function(e,t){(0,c.default)(this.state,e)!==t&&(0,d.default)(this.defaultStates,e)&&this.setState(de({},e,t))}},{key:"getTargetElement",value:function(){return this.isTargetElementModule()?"module":this.getSelectedModuleType()}},{key:"isTargetElementModule",value:function(){return this.getSelectedModule("props.is_module_child",!1)&&(0,c.default)(this.props,"element")}},{key:"onExtendStyles",value:function(){var e=this;this.setState({buttonState:"loading"}),new Promise((function(t){setTimeout((function(){var n=e.getExtendSourceFields();if((0,g.default)(n))return t(!1);var r=e.getExtendTargetModules();if((0,g.default)(r))return t(!1);var o=e.getExtendTargetModulesFields(n,r);return(0,g.default)(o)?t(!1):((0,s.default)(o,(function(e){var t=e.targetModule,n=e.extendStylesData;W.default.extendStylesModalUpdate(t.address,n)})),t(!0))}),0)})).then((function(){e.onClose()}))}},{key:"getExtendSourceFields",value:function(){var e=this,t=this.getSelectedModule(),n=this.getSelectedModuleType(),r=this.getModuleFields(t),o=[];switch(this.getSelectedSource()){case"module":var a=(0,y.default)(r);o=[].concat(re(a),re((0,X.getCompositeFieldAttrs)(n,a)));break;case"options_group":var i=this.getSelectedElement("payload.fields");o=[].concat(re(i),re((0,X.getCompositeFieldAttrs)(n,i)));break;default:var l=this.getSelectedElement("payload.option");(0,T.default)(l)&&(l=[l]),o=[].concat(re(l),re((0,X.getCompositeFieldAttrs)(n,l)))}var u=this.getSelectedElement("payload.toggleId"),s=this.getSelectedElement("payload.toggleGroupId"),c=o.map((function(t){return e.convertCustomCSSFieldName(t,s,u)})),d=(0,O.default)(r,(function(t,n){var r=(0,U.getProcessedTabSlug)(t.tab_slug),o=e.convertCustomCSSFieldName(n,t.tab_slug,t.toggle_slug);return("general"!==r||"background"===t.toggle_slug)&&("css"!==r||"classes"!==t.toggle_slug)&&(0,p.default)(c,o)}));return!(0,g.default)(d)&&(d=ne(ne(ne({},d),z.default.getHoverFieldsDefinition(d)),q.default.getStickyFieldsDefinition(d)))}},{key:"convertCustomCSSFieldName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"css"===t&&"custom_css"===n&&(0,M.default)(e,"custom_css_")?(0,x.default)(e,"custom_css_",""):e}},{key:"prependCustomCSSFieldName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"css"!==t||"custom_css"!==n||(0,M.default)(e,"custom_css_")?e:"custom_css_".concat(e)}},{key:"getExtendTargetModules",value:function(){var e=this,t=V.default.getSectionsFlattened(),n=this.getSelectedModule("props.address"),r=(0,U.getModuleAddressSequence)(n),o=(0,u.default)(t,(function(t){return e.getModuleStructure(t.type)===e.state.throughout&&(0,p.default)(r,t.address)}));return t.filter((function(t){var n=(0,c.default)(t,"type",""),r=n.replace("_inner","");return"module"===e.state.to?e.getModuleStructure(r)===e.state.to:e.getModuleStructure(e.state.to)===e.getModuleStructure(r)&&("et_pb_column"!==n||"et_pb_specialty_section"!==(0,c.default)(t,"parent_slug")||!(0,u.default)((0,c.default)(t,"content",[]),(function(e){return"et_pb_row_inner"===e.type})))&&(r===e.state.to||t.is_module_child&&r===(0,c.default)(H.default.getModuleChildSlugs(),e.state.to))})).filter((function(t){return"page"===e.state.throughout||(0,p.default)((0,U.getModuleAddressSequence)(t.address),(0,c.default)(o,"address"))})).filter((function(e){return!(0,U.isModuleLocked)(e,t)})).filter((function(n){return!(e.getSelectedModule("props.is_module_child",!1)&&!(0,g.default)(n.child_slug)&&!(0,g.default)((0,u.default)(t,{parent_address:n.address}))||!(0,g.default)(e.getSelectedModule("props.child_slug",""))&&n.is_module_child&&!(0,g.default)((0,u.default)(t,{address:n.parent_address})))})).filter((function(e){return e.address!==n}))}},{key:"getExtendTargetModulesFields",value:function(e,t){var n=this,r=this.getSelectedModule("props"),o=this.getSelectedModuleType(),a=JSON.parse((0,c.default)(r,"attrs.global_colors_info","{}")),i={},f=[];return(0,s.default)(t,(function(t){var p={},h=(0,c.default)(t,"type","");if(h===o)(0,s.default)(e,(function(e){if((0,d.default)(e,"name")){var o=n.prependCustomCSSFieldName(e.name,e.tab_slug,e.toggle_slug);p[o]=n.getExtendStylesValue(e,r,e,t);var l=n.getGlobalColorsData(o,p,a);(0,v.default)(l)||(i=l)}}));else{var m=n.getModuleFields({props:t});m=ne(ne(ne({},m),z.default.getHoverFieldsDefinition(m)),q.default.getStickyFieldsDefinition(m)),(0,s.default)(e,(function(e){var s={};if((0,d.default)(e,"name")){var f=n.convertCustomCSSFieldName(e.name,e.tab_slug,e.toggle_slug);if(fe.has("targetField",f,o,h))s=fe.get("targetField",f,o,h);else{if((0,d.default)(m,f))s=(0,c.default)(m,f);else{var y={moduleType:o,field:e};s=(0,u.default)(m,(function(e){var t=(0,l.default)({},{moduleType:h,field:e});return V.default.getModuleFieldsMapping(y,t)}))}fe.set(s,"targetField",e.name,o,h)}}if(!(0,g.default)(s)&&(0,d.default)(s,"name")){var b=n.prependCustomCSSFieldName(e.name,e.tab_slug,e.toggle_slug);p[b]=n.getExtendStylesValue(e,r,s,t);var _=n.getGlobalColorsData(b,p,a);(0,v.default)(_)||(i=_)}}))}(0,g.default)(p)||(p.global_colors_info=i,f.push((0,l.default)({},{targetModule:t,extendStylesData:p})))})),f}},{key:"getExtendStylesValue",value:function(e,t,n,r){var o=this.prependCustomCSSFieldName(e.name,e.tab_slug,e.toggle_slug),a=(0,c.default)(t,"attrs.".concat(o));if("font"!==(0,c.default)(e,"type")||"option"!==this.getSelectedSource())return a;var i=a.split("|"),l=(0,c.default)(n,"name"),u=(0,c.default)(r,"attrs.".concat(l),"||||||||").split("|"),d=(0,U.getFontFieldIndexes)(this.getSelectedField("subField","font"));return(0,s.default)(d,(function(e){u[e]=i[e]})),u.join("|")}},{key:"getSelectedSource",value:function(){return(0,c.default)(this.props,"source")}},{key:"getSelectedElement",value:function(e,t){var n=(0,c.default)(this.props,"element"),r=(0,c.default)(n,"payload.toggleGroupId",""),o=(0,c.default)(n,"payload.toggleId","");if("css"===r&&"custom_css"!==o){var a=(0,M.default)(n.elementId,"custom_css_")?(0,x.default)(n.elementId,"custom_css_",""):n.elementId;n.elementId=a}return(0,v.default)(e)?n:(0,c.default)(n,e,t)}},{key:"getSelectedModule",value:function(e,t){var n=(0,c.default)(this.props,"module");return(0,v.default)(e)?n:(0,c.default)(n,e,t)}},{key:"getSelectedModuleType",value:function(){return this.getSelectedModule("props.type")}},{key:"getSelectedModuleTitle",value:function(){var e=this.getSelectedModuleType();return fe.has("getSelectedModuleTitle",e)?fe.get("getSelectedModuleTitle",e):fe.set(V.default.getModuleTitle(e),"getSelectedModuleTitle",e)}},{key:"getSelectedModuleTitlePlural",value:function(){var e=this.getSelectedModuleType();return fe.has("getSelectedModuleTitlePlural",e)?fe.get("getSelectedModuleTitlePlural",e):fe.set(V.default.getModuleTitlePlural(e),"getSelectedModuleTitlePlural",e)}},{key:"getSelectedModuleStructure",value:function(){var e=this.getSelectedModuleType();return fe.has("getSelectedModuleStructure",e)?fe.get("getSelectedModuleStructure",e):fe.set(this.getModuleStructure(e),"getSelectedModuleStructure",e)}},{key:"getSelectedField",value:function(e,t){var n=this.getSelectedElement("elementId"),r=(0,U.getProcessedTabSlug)(this.getSelectedElement("payload.tabSlug")),o=this.getSelectedElement("payload.toggleId"),a=this.getSelectedModule(),i=(0,u.default)(this.getModuleFields(a),{name:n,tab_slug:r,toggle_slug:o}),s=(0,l.default)({},{name:n,type:this.getSelectedElement("payload.option_family"),label:this.getSelectedElement("payload.optionTitle"),subField:this.getSelectedElement("subElementId")},i);if(s.default_on_child&&(0,h.default)(s.default)&&2===s.default.length){var d=this.getSelectedModule("props.attrs.".concat(s.default[0]));s.default=d?(0,c.default)(s.default[1],d,""):""}return(0,v.default)(e)?s:(0,c.default)(s,e,t)}},{key:"getSelectedFieldValue",value:function(){return this.getFieldValue((0,c.default)(this.getSelectedField(),"name"),this.getSelectedField(),this.getSelectedModule("props"))}},{key:"getFieldValue",value:function(e,t,n){var r,o=n||this.getSelectedModule("props"),a=o.attrs||{};if(("content"===e||(0,c.default)(t,"is_fb_content",!1))&&(r=(0,c.default)(o,"content")),"custom_padding"===t.type&&"custom_padding"!==e){var i=(0,p.default)(["et_pb_row","et_pb_row_inner"],o.type),l=(0,U.isOn)((0,c.default)(o,"attrs.specialty")&&"et_pb_section"===(0,c.default)(o,"type"));if(i||l){var u=e.replace("padding_",""),s=(0,U.hasValue)(a["padding_".concat(u,"_last_edited")])?a["padding_".concat(u,"_last_edited")].split("|"):[],d=((0,c.default)(a,"padding_top_".concat(u),"")||"").trim(),f=((0,c.default)(a,"padding_right_".concat(u),"")||"").trim(),h=((0,c.default)(a,"padding_bottom_".concat(u),"")||"").trim(),m=((0,c.default)(a,"padding_left_".concat(u),"")||"").trim(),g=((0,c.default)(a,"padding_top_bottom_link_".concat(u),"")||"").trim(),y=((0,c.default)(a,"padding_left_right_link_".concat(u),"")||"").trim(),b="".concat(d,"|").concat(f,"|").concat(h,"|").concat(m,"|").concat(g,"|").concat(y);switch((0,v.default)(s[1])?"desktop":s[1]){case"phone":r=(0,c.default)(a,"padding_".concat(u,"_phone"),"");break;case"tablet":r=(0,c.default)(a,"padding_".concat(u,"_tablet"),"");break;default:r=b}}}if("center_map"===t.type)switch(o.type){case"et_pb_map_pin":r=JSON.stringify((0,k.default)(a,["pin_address","pin_address_lat","pin_address_lng","zoom_level"]));break;default:r=JSON.stringify((0,k.default)(a,["address_lat","address_lng","zoom_level"]))}if("select_with_option_groups"===t.type&&(r=(0,c.default)((0,S.default)((0,c.default)(a,e,(0,c.default)(t,"default"))).split("|"),1,"none")),(0,c.default)(t,"mobile_options",!1)){var _=(0,c.default)(a,"".concat(e,"_last_edited"),"off|desktop").split("|");(0,U.isOn)((0,c.default)(_,0,"off"))&&"desktop"!==(0,c.default)(_,1,"desktop")&&(r=(0,c.default)(a,"".concat(e,"_").concat((0,c.default)(_,1))))}return(0,v.default)(r)&&(r=(0,c.default)(a,e,(0,c.default)(t,"default"))),r}},{key:"getGlobalColorsData",value:function(e,t,n){if(e.includes("_color")&&!(0,v.default)(t[e])){var r={};return(0,s.default)(n,(function(t,n){t.includes(e)&&(r[n]=(0,c.default)(r,n,[]),r[n].push(e))})),r}}},{key:"renderField",value:function(e,t,n){var r,i=this.getSelectedModule(),u=i.isModuleItem&&!(0,v.default)(i.parentModule.props.type)&&i.parentModule.props.type?"".concat(e.name,"_child"):e.name,s={slug:e.type,type:"field"},d=(0,l.default)({},e,{resetValue:!1,mobile_options:!1,disableReset:!0,uniqueKey:u,processedKey:u,animate:(0,c.default)(this.props,"options.animate",!1),fieldDefinition:e,matching:s}),f=(0,c.default)(d,"type","text"),h=f.replace("_","-"),m=(0,$.isDynamicContent)(d.value),y=(0,g.default)(n),b=(0,a.default)((de(r={},"et-fb-form__group--".concat(this.slug),!0),de(r,"et-fb-form__group--".concat(h),!0),de(r,"et-fb-form__group--readonly",d.readonly),r)),_=(0,a.default)(de({"et-fb-settings-options":!0,"et-fb-option--depends-on":!(0,v.default)(e.depends_default)||!(0,v.default)(e.depends_show_if)||!(0,v.default)(e.depends_show_if_not),"et-fb-option--select-with-option-groups":"select_with_option_groups"===f&&e.groups},"et-fb-option--".concat(h),!0)),k=(0,a.default)(de({"et-fb-option-container":!0},"et-fb-option-container--".concat(h),!0)),O=(0,o.createElement)(N.default.getControl(f),d);return o.default.createElement(I.ETBuilderFormGroup,{className:b,name:u,key:"".concat(this.slug,"-form-group-").concat(u),onMouseEnterGroup:y?w.default:this.onMouseEnterGroup,onMouseLeaveGroup:y?w.default:this.onMouseLeaveGroup,hovered:this.isOptionHovered(d.name)},o.default.createElement(I.ETBuilderFormLabel,{name:u,hoveredGroup:this.state.hoveredGroup===u,activeHelp:this.state.activeDescription===u,onClickHelp:this._onClickHelp},t),o.default.createElement(I.ETBuilderFormDescription,{active:this.state.activeDescription===u},n),o.default.createElement("div",{className:_},o.default.createElement("div",{className:k},o.default.createElement(A.default,{componentName:u},m&&(0,p.default)(K.default.supportedFieldTypes,f)?o.default.createElement(K.default,{type:d.dynamic_content||f,fieldName:d.name,fieldType:f,value:d.value,dynamicAttributes:[d.name],previewMode:"background",showSettingsButton:!1,showDisableButton:!1,onChange:d._onChange},O):O))))}},{key:"renderFieldSource",value:function(){var e=this;if("module"===this.getSelectedSource()){var t=this.getSelectedModuleTitle(),n=this.getSelectedModuleTitlePlural(),r=(0,U.sprintf)(he.labels.extend_module,t,n);return o.default.createElement(I.ETBuilderFormGroup,null,o.default.createElement(I.ETBuilderFormLabel,null,pe.decode(r)))}if("options_group"===this.getSelectedSource()){var a=this.getSelectedElement("payload.toggleTitle"),i=he.labels.extend_options_group.replace(/%s/g,a);return o.default.createElement(I.ETBuilderFormGroup,null,o.default.createElement(I.ETBuilderFormLabel,null,pe.decode(i)))}var u=this.getSelectedModule(),d=this.getSelectedElement("payload.option"),b=this.getSelectedField(),_=(0,p.default)(["composite"],(0,c.default)(b,"type"));if(!(0,g.default)(b)&&!_){var k=(0,l.default)({},b,{value:this.getSelectedFieldValue()}),O=this.getSelectedElement("payload.optionTitle"),C=function t(n){(0,E.default)(n,"module",e),(0,E.default)(n,"readonly",!0),(0,E.default)(n,"visible",!0),(0,E.default)(n,"_onChange",w.default);var r=(0,c.default)(n,"type");if("transform"===r&&(n.transform_type="".concat(n.name).replace("transform_","")),(0,M.default)(r,"background-")){(0,E.default)(n,"type","background"),(0,E.default)(n,"activeTab",r.replace("background-","")),(0,E.default)(n,"isDescriptionVisible",(function(){return!1})),(0,E.default)(n,"isHoveredGroup",(function(){return!1})),(0,E.default)(n,"onMouseEnterGroup",w.default),(0,E.default)(n,"onMouseLeaveGroup",w.default);var o={};(0,s.default)(e.getModuleFields(u),(function(e){(0,p.default)(d,e.name)&&(o[e.name]=(0,l.default)({},t(e)))})),(0,E.default)(n,"backgroundFields",o)}if("font"===r){var a=(0,c.default)(n,"group_label",""),i=(0,c.default)(n,"value","||||||||").split("|"),b={font:(0,c.default)(i,0,""),weight:(0,c.default)(i,1,""),italic:(0,c.default)(i,2,""),uppercase:(0,c.default)(i,3,""),underline:(0,c.default)(i,4,""),capitalize:(0,c.default)(i,5,""),strikethrough:(0,c.default)(i,6,""),line_style:(0,c.default)(i,7,""),line_color:(0,c.default)(i,8,"")},_=(0,U.isOn)((0,c.default)(b,"underline"));switch(n.subField){case"weight":(0,E.default)(n,"label",me.fontWeight);break;case"style":(0,E.default)(n,"label",me.fontStyle);break;case"line_color":var k=_?me.underline:me.strikethrough,O=me.color;(0,E.default)(n,"label","".concat(k," ").concat(O));break;case"line_style":var C=_?me.underline:me.strikethrough,S=me.style;(0,E.default)(n,"label","".concat(C," ").concat(S));break;default:(0,E.default)(n,"label",(0,c.default)(me,n.subField,""))}(0,g.default)(a)||(0,E.default)(n,"label","".concat(a," ").concat(n.label)),(0,E.default)(n,"subFieldLabel",!1)}if((0,M.default)(r,"color")&&((0,E.default)(n,"hideColorManagerLinks",!0),(0,E.default)(n,"hideHarmoniousPalette",!0),(0,E.default)(n,"hideCurrentColorWrapper",!0),(0,E.default)(n,"hideColorResetButton",!0),(0,E.default)(n,"showCustomInput",!0),(0,E.default)(n,"hasPreview",!1)),"select_with_option_groups"===r&&((0,E.default)(n,"hideAddButton",!0),(0,E.default)(n,"hideRemoveButton",!0),(0,E.default)(n,"hideFetchButton",!0)),"center_map"===r&&((0,E.default)(n,"disableAction",!0),(0,E.default)(n,"hideUpdateButton",!0)),"conditional_logic"===r&&((0,E.default)(n,"hideAddButton",!0),(0,E.default)(n,"hideDeleteButton",!0)),"categories"===r&&((0,E.default)(n,"categories_list",{}),(0,g.default)(n.taxonomy_name)&&(0,E.default)(n,"taxonomy_name","category")),"select"===r&&(0,v.default)(n.default)&&!(0,g.default)(n.options)){var P=(0,h.default)(n.options)?[]:{};(0,s.default)(n.options,(function(e,t){(0,m.default)(e)||(0,h.default)(e)?(0,s.default)(e,(function(e,t){P[t]=e})):P[t]=e})),(0,g.default)(P)||(0,E.default)(n,"default",(0,h.default)(P)?(0,f.default)(P):(0,f.default)((0,y.default)(P)))}return n}(k),S=pe.decode(he.labels.extend_option.replace(/%s/g,(0,c.default)(C,"label",O)));return this.renderField(C,S)}var P=this.getSelectedElement("payload.optionTitle"),T=he.labels.extend_option.replace(/%s/g,P);return o.default.createElement(I.ETBuilderFormGroup,null,o.default.createElement(I.ETBuilderFormLabel,null,pe.decode(T)))}},{key:"renderFieldTo",value:function(){if("module"===this.getSelectedSource())return!1;var e,t,n,r=(e=this.getSelectedModuleStructure(),t=(0,b.default)((0,O.default)((0,l.default)({},V.default.getModules()),(function(e){return e.is_official_module&&((0,U.isOn)(e.is_parent)||(0,p.default)(["et_pb_column","et_pb_column_inner"],e.label))})),(function(e,t){var n=V.default.getModuleTitlePlural(t);return he.labels.all.replace("%s",(0,g.default)(n)?e.title:n)})),n=(0,b.default)((0,l.default)({},he.options.to),(function(e,n){return"containers"===n?(0,k.default)(t,["et_pb_section","et_pb_row","et_pb_column","et_pb_column_inner"]):(0,l.default)({},e,(0,_.default)(t,["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"]))})),(0,O.default)(n,(function(t,n){return("module"!==e||"containers"!==n)&&t})));return this.renderField({options:r,type:"select",name:"to",default:this.state.to,value:this.state.to,optionGroups:he.groups.to,searchable:!0,_onChange:this.onChangeField},he.labels.to)}},{key:"renderFieldThroughout",value:function(){var e=he.options.throughout,t=(0,y.default)(e),n=this.getSelectedModule("props.parent_slug"),r=this.getSelectedModuleType(),o=this.getModuleStructure(r),a=this.getModuleStructure(this.state.to),i="module"===o?t:(0,P.default)(t,t.indexOf(o)),l=("module"===a?t:(0,C.default)(t,t.indexOf(a))).filter((function(e){return"module"===o?"et_pb_section"===n||-1!==n.indexOf("fullwidth")?!(0,p.default)(["row","column"],e):"et_pb_specialty_column"!==n||!(0,p.default)(["row"],e):!(0,p.default)(i,e)||e===o})),u={options:(0,k.default)(e,l),type:"select",name:"throughout",default:this.state.throughout,value:this.state.throughout,_onChange:this.onChangeField};return this.renderField(u,he.labels.throughout)}},{key:"render",value:function(){var e,t,n=this.state.buttonState?o.default.createElement(R.default,{icon:this.state.buttonState,color:"#FFFFFF"}):he.button,r=[o.default.createElement(L.default,{block:!0,info:!0,ink:!1,tooltip:he.button,disable:!1!==this.state.buttonState,__onClick:this.state.buttonState?w.default:this.onExtendStyles},n)],i=(0,Y.getModalPreferredSnapSettings)().snapLocation,l=ne(ne({},this.props),{},{measurement:(0,Y.getModalPreferredDimensions)(),disableFullscreenButton:!0,disableSnapButton:!0,disableResizeButton:!0}),u=(0,a.default)((de(e={"et-fb-modal__module-settings":!0},"et-fb-modal__".concat(this.slug),!0),de(e,"et-fb-modal__".concat(this.slug,"--").concat(this.getSelectedSource()),!0),e)),s=(0,a.default)((de(t={"et-fb-tabs__panel":!0},"et-fb-tabs__panel--".concat(this.slug),!0),de(t,"et-fb-tabs__panel--".concat(this.slug,"--").concat(this.getSelectedSource()),!0),t)),c=(0,a.default)(de({"et-fb-form":!0},"et-fb-form--".concat(this.getSelectedSource()),!0));return o.default.createElement(B.default,ee({className:u,footerButtons:r,fullscreen:(0,Y.getModalPreferredFullscreen)(),label:pe.decode(he.title),position:(0,Y.getModalPreferredCoordinates)(),snapLocation:i,_closeFunction:this.state.buttonState?w.default:this.onClose,globalUpdate:!0},l),o.default.createElement(A.default,null,o.default.createElement(F.default,{selectedIndex:0},o.default.createElement(F.ETBuilderTabPanel,{className:s,slug:this.slug,selected:!0},o.default.createElement("div",{className:c},o.default.createElement("div",{className:"et-fb-form--inner"},this.renderFieldSource(),this.renderFieldTo(),this.renderFieldThroughout()))))))}}])&&ae(t.prototype,n),r&&ae(t,r),G}(o.default.PureComponent);t.default=ge},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=W(n(0)),a=F(n(6)),i=F(n(18)),l=F(n(15)),u=F(n(52)),s=F(n(10)),c=F(n(1)),d=F(n(49)),f=F(n(4)),p=F(n(41)),h=F(n(14)),m=F(n(35)),g=F(n(149)),v=F(n(118)),y=F(n(27)),b=F(n(77)),_=F(n(254)),w=F(n(78)),k=F(n(728)),O=F(n(844)),C=F(n(347)),S=F(n(370)),E=F(n(58)),M=F(n(1738)),P=F(n(1739)),T=F(n(847)),x=F(n(956)),j=F(n(8)),D=W(n(957)),L=F(n(730)),R=W(n(3)),N=F(n(1514)),A=n(120),B=n(758);function F(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function W(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1741);var J=(0,c.default)(ETBuilderBackend,"i18n.modals.layersView"),Q=["currentTourElement","editEnabled","multiSelectLastSelection"],Z=["filterDropdownActive","filterNotice"],ee={parent:"> .et-fb-layers-view",connectWith:!1,child:".et_pb_section",childSlug:"section",handle:"> .et_fb_move_module_handler",update:function(t,n){var r=e(this),o=ETBuilderBackend.i18n.sortable;j.default.abIsMode("on")||j.default.isAllowedAction("ab_testing")||(alert(o.has_no_ab_permission),r.sortable("cancel"),n.sender&&e(n.sender).sortable("cancel"),y.default.cancelDraggingModule())},root:!0,placeholderHeight:"4px",wireframeMode:!1,layersView:!0},te=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(I,t);var n,r,a,F=q(I);function I(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I),X($(t=F.call(this,e)),"renderBreakpoint",15),X($(t),"renderCounter",0),X($(t),"filterInput",(0,u.default)((function(e,n){t.isComponentMounted&&t.setState({filterValue:n},(function(){setTimeout((function(){y.default.setLayersViewFilterSearch(t.state.filterSelected,n)}),0)}))}),300));return t.containerRef=o.default.createRef(),t.slug="layers-view",t.searchFilters=t.getSearchFilters(),t.state={index:null,filterDropdownActive:!1,filterSelected:void 0,filterValue:""},t.defaultModalHeight=444,t.defaultModalWidth=300,t.isComponentMounted=!1,t.scrollTimeout=100,setTimeout((function(){return y.default.setLayersViewContextMenuCallback(e.contextMenuCallback)}),0),t.forceUpdateLayers=t.forceUpdateLayers.bind($(t)),t.filterSelect=t.filterSelect.bind($(t)),t.filterDropdownToggle=t.filterDropdownToggle.bind($(t)),t.filterReset=t.filterReset.bind($(t)),t.filterResetAll=t.filterResetAll.bind($(t)),t.maybeCloseDropdown=t.maybeCloseDropdown.bind($(t)),t.maybeShowFilterNotice=t.maybeShowFilterNotice.bind($(t)),t.maybeRenderFilterNotice=t.maybeRenderFilterNotice.bind($(t)),t.setSearchFocus=t.setSearchFocus.bind($(t)),t.activeLayerChange=t.activeLayerChange.bind($(t)),t.sectionsContentChange=t.sectionsContentChange.bind($(t)),t.renderLayers=t.renderLayers.bind($(t)),t.renderToggleAll=t.renderToggleAll.bind($(t)),t.handleShortcuts=t.handleShortcuts.bind($(t)),t.handleToggleAll=t.handleToggleAll.bind($(t)),t.updateModalState=t.updateModalState.bind($(t)),t}return n=I,(r=[{key:"componentDidMount",value:function(){if(this.isComponentMounted=!0,this.debouncedSectionsContentChangee=(0,u.default)(this.sectionsContentChange,100),j.default.addSectionsContentChangeListener(this.debouncedSectionsContentChangee),T.default.addActiveLayerChangeListener(this.activeLayerChange),T.default.addLayerDataChangeListener(this.forceUpdateLayers),!j.default.isProductTourActive()){var t=e(this.containerRef.current);setTimeout((function(){(0,L.default)(t,ee)}),150)}var n=T.default.getActiveLayer();(0,A.isOn)((0,c.default)(n,"props.scrollToLayerOnModal"))&&setTimeout((function(){return(0,B.scrollToLayerOnModal)(n)}),this.scrollTimeout),n||this.setSearchFocus(),j.default.getActiveModule()?(R.default.appWindow().removeEventListener("keydown",this.handleShortcuts),R.default.topWindow().removeEventListener("keydown",this.handleShortcuts)):(R.default.appWindow().addEventListener("keydown",this.handleShortcuts),R.default.topWindow().addEventListener("keydown",this.handleShortcuts,{useCapture:!0})),R.default.topDocument().addEventListener("keydown",this.handleShortcuts),R.default.topWindow().addEventListener("mousedown",this.maybeCloseDropdown)}},{key:"shouldComponentUpdate",value:function(e,t){var n=(0,g.default)(e,Q),r=(0,g.default)(this.props,Q),o=(0,g.default)(t,Z),a=(0,g.default)(this.state,Z);return!(0,p.default)(n,r)||!(0,p.default)(o,a)}},{key:"componentDidUpdate",value:function(t,n){var r=this.props.editEnabled,o=T.default.getActiveLayer(),a=T.default.isFilterActive();if(!j.default.isProductTourActive()){var i=e(this.containerRef.current);setTimeout((function(){(0,L.default)(i,(0,l.default)(ee,{force:!0,disabled:a}))}),150)}var u=!(a||(0,p.default)(n.filterValue,this.state.filterValue)&&(0,p.default)(n.filterSelected,this.state.filterSelected));!o&&u&&this.setSearchFocus();var s=j.default.isSettingsModalOpen("settings_modal"),d=!(0,f.default)(r)&&!(0,p.default)(t.editEnabled,r),h=(0,c.default)(r,"props.address")!==(0,c.default)(o,"props.address");s&&d&&h&&(setTimeout((function(){return y.default.setActiveLayer(r)}),0),setTimeout((function(){return(0,B.scrollToLayerOnModal)(r)}),this.scrollTimeout)),this.maybeShowFilterNotice(),(0,p.default)(t.multiSelectLastSelection,this.props.multiSelectLastSelection)||this.debouncedSectionsContentChangee()}},{key:"componentWillUnmount",value:function(){this.isComponentMounted=!1,j.default.removeSectionsContentChangeListener(this.debouncedSectionsContentChangee),T.default.removeActiveLayerChangeListener(this.activeLayerChange),T.default.removeLayerDataChangeListener(this.forceUpdateLayers),R.default.appWindow().removeEventListener("keydown",this.handleShortcuts),R.default.topDocument().removeEventListener("keydown",this.handleShortcuts),R.default.topWindow().removeEventListener("keydown",this.handleShortcuts),R.default.topWindow().removeEventListener("mousedown",this.maybeCloseDropdown),setTimeout((function(){return y.default.clearLayerData()}),0)}},{key:"getSearchFilters",value:function(){var e=ETBuilderBackend.i18n.modals.layersView.searchFilterItems,t={};return(0,s.default)(e,(function(e,n){(0,h.default)(t[n])&&(t[n]={}),(0,s.default)(e,(function(e,r){t[n][r]=e}))})),(0,s.default)(ETBuilderBackend.modules,(function(e){var n=(0,R.getComponentType)({type:(0,c.default)(e,"label")});if((0,A.isOn)(e.is_parent)&&(0,A.isOn)(e.vb_support)&&(0,d.default)(e,"title")&&(0,d.default)(e,"label")&&"module"===n){var r=e.label.replace("et_pb_","");t.show_only[r.replace(/_/g,"-")]=e.plural?e.plural:e.title}})),t}},{key:"setSearchFocus",value:function(){var e=this;setTimeout((function(){var t=R.default.$topWindow(".et-fb-modal__".concat(e.slug)).find(".et-fb-options-filter input");t.length&&t.trigger("focus")}),100)}},{key:"sectionsContentChange",value:function(){this.isComponentMounted&&(y.default.resetLayerData(),T.default.isFilterActive()&&y.default.setLayersViewFilterSearch(this.state.filterSelected,this.state.filterValue),this.forceUpdate())}},{key:"activeLayerChange",value:function(e,t){if(this.isComponentMounted){var n=T.default.isFilterActive(),r=!(0,f.default)(e)&&(0,A.isOn)((0,c.default)(e,"props.scrollToLayerOnModal"));n&&r&&!(0,p.default)(t,e)&&this.filterResetAll(),r&&setTimeout((function(){return(0,B.scrollToLayerOnModal)(e)}),this.scrollTimeout)}}},{key:"forceUpdateLayers",value:function(){this.isComponentMounted&&this.forceUpdate()}},{key:"filterSelect",value:function(e){var t=this;this.setState({filterDropdownActive:!1,filterSelected:e},(function(){setTimeout((function(){y.default.setLayersViewFilterSearch(e,t.state.filterValue)}),0)}))}},{key:"filterDropdownToggle",value:function(){this.setState({filterDropdownActive:!this.state.filterDropdownActive})}},{key:"filterReset",value:function(){this.setState({filterDropdownActive:!1,filterSelected:void 0}),y.default.setLayersViewFilterSearch(void 0,this.state.filterValue)}},{key:"filterResetAll",value:function(){this.setState({filterDropdownActive:!1,filterSelected:void 0,filterValue:""}),y.default.setLayersViewFilterSearch(void 0,"")}},{key:"maybeCloseDropdown",value:function(t){this.state.filterDropdownActive&&e(t.target).closest(".et-fb-options-filter-dropdown-wrap, .et-fb-options-filter-button-group").length<1&&this.filterDropdownToggle()}},{key:"maybeShowFilterNotice",value:function(){var e=T.default.isFilterActive();T.default.isEmptyFilterResults()||(e=!1),e!==this.state.filterNotice&&this.setState({filterNotice:e})}},{key:"maybeRenderFilterNotice",value:function(){if(!this.state.filterNotice||this.state.filterDropdownActive)return!1;var e=J.filterNoticeClickable,t=J.filterNotice.split(e);return 2===t.length?o.default.createElement("div",{className:"et-fb-options-filter-notice"},o.default.createElement("span",null,t[0]),o.default.createElement(b.default,{className:"et-fb-filter-notice-button",ink:!1,onMouseDown:this.filterResetAll,onMouseUp:this.filterResetAll},e),o.default.createElement("span",null,t[1])):o.default.createElement("div",{className:"et-fb-options-filter-notice"},o.default.createElement(b.default,{className:"et-fb-filter-notice-button",ink:!1,onMouseDown:this.filterResetAll,onMouseUp:this.filterResetAll},J.filterNotice))}},{key:"handleShortcuts",value:function(e){var t=e.metaKey,n=e.altKey,r=e.ctrlKey,o=27===e.keyCode,a=e.shiftKey,i=32===e.keyCode,l=T.default.isFilterActive(),u=R.default.$topWindow(".et-fb-modal__".concat(this.slug)).find(".et-fb-options-filter input"),s=u.length>0&&u.is(":focus");return s&&a&&i?(e.preventDefault(),!1):o&&s&&l?(e.stopImmediatePropagation(),this.filterResetAll(),!1):(!s||t||n||r||o||e.stopPropagation(),o&&l&&!j.default.isSettingsModalOpen("settings_modal")?(e.stopImmediatePropagation(),this.filterResetAll(),!1):void 0)}},{key:"handleToggleAll",value:function(){var e=!T.default.isAllExpanded(),t=R.default.$topWindow(".et-fb-layers-view--toggle-all"),n=R.default.$topWindow(".et-fb-layers-view");y.default.toggleAllLayers(e),t.toggleClass("et-fb-layers-view--toggle-all-expanded",e),n.find(".et_pb_section").toggleClass("et-fb-layers-view--expanded",e),n.find(".et_pb_section").find(".et-fb-layers-view--layer:not(.et_pb_row_inner)").toggleClass("et-fb-layers-view--hidden",!e)}},{key:"updateModalState",value:function(e){y.default.updateLayersViewModalState({measurement:{height:e.height,width:e.width},position:{x:e.x,y:e.y}})}},{key:"renderToggleAll",value:function(){var e=T.default.isFilterActive(),t=j.default.isEditingLibraryItem("section"),n=j.default.isEditingLibraryItem("row"),r=j.default.isEditingLibraryItem("module");if(e||t||n||r)return!1;var a=(0,i.default)({"et-fb-button-group":!0,"et-fb-layers-view--toggle-all":!0,"et-fb-layers-view--toggle-all-expanded":T.default.isAllExpanded()}),l=R.default.condition("is_rtl")&&!R.default.condition("is_no_rtl")?"caret-left":"caret-right",u={margin:"-5px -4px",opacity:.5};return o.default.createElement("div",{className:a},o.default.createElement(N.default,{singleClick:this.handleToggleAll},o.default.createElement("button",{className:"et-fb-button"},o.default.createElement(E.default,{color:v.default.inactiveGrey,icon:"caret-down",size:"14",style:u}),o.default.createElement(E.default,{color:v.default.inactiveGrey,icon:l,size:"14",style:u}),o.default.createElement("div",{className:"et-fb-layers-view--toggle-all-label"},J.toggleAll))))}},{key:"renderChildLayers",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(0,B.hasChildLayers)(e)?e.content:[];if((0,f.default)(a)&&((0,R.is)("section",e)||(0,R.is)("column",e))){var i=T.default.getLayerProps(e.address);if((0,c.default)(e.attrs,"_deleted")||(0,f.default)(i))return null;var l=i.isLayerVisible&&i.isLayerExpanded||i.isLayerVisible&&i.isColumnSpecialty;return l?o.default.createElement(M.default,G({key:"lv-layer-add-button-".concat(i.address)},i)):null}return a.map((function(a,i){var l=T.default.getLayerProps(a.address);if((0,c.default)(e.attrs,"_deleted")||(0,f.default)(l))return null;var u=(0,B.isLayerGlobal)(H(H({},e),{},{globalParent:n})),s=(0,B.isLayerLocked)(H(H({},e),{},{lockedParent:r})),d=t.renderCounter>t.renderBreakpoint;return t.renderCounter++,o.default.createElement(P.default,G({key:"lv-layer-".concat(l.address),index:i,globalParent:u,lockedParent:s,isDelayRender:d},l),t.renderChildLayers(a,u,s))}))}},{key:"renderABTestingStyle",value:function(){if(!j.default.abIsMode("selecting"))return null;var e=[],t=j.default.abGetMode().replace("_","-"),n=[".et-fb-modal__layers-view .et-fb-editable-element",".et-fb-modal__layers-view .et_pb_section > .et_fb_move_module_handler > .et-fb-layers-view--content",".et-fb-modal__layers-view .et_pb_row > .et_fb_move_module_handler > .et-fb-layers-view--content",".et-fb-modal__layers-view .et_pb_module > .et_fb_move_module_handler > .et-fb-layers-view--content"];return e.push([{selector:n.join(", "),declaration:"cursor: url(".concat(ETBuilderBackend.images_uri,"/cursor-").concat(t,".png), default !important;")}]),e.push([{selector:(0,m.default)(n,(function(e){return".ie ".concat(e,", .edge ").concat(e)})).join(", "),declaration:"cursor: url(".concat(ETBuilderBackend.images_uri,"/cursor-").concat(t,".cur), default !important;")}]),e.push([{selector:(0,m.default)(n,(function(e){return".chrome ".concat(e,", .gecko ").concat(e)})).join(", "),declaration:"cursor: url(".concat(ETBuilderBackend.images_uri,"/cursor-").concat(t,".png) 16 16, default !important; /* Chrome/Firefox cursor hotspot fix, Ignored by IE */;")}]),e.push([{selector:[".et-fb-modal__layers-view .et-fb-editable-element",".et-fb-modal__layers-view .et-fb-layers-view--actions-group",".et-fb-modal__layers-view .et-fb-layers-view--add",".et-fb-modal__layers-view .et_pb_column > .et_fb_move_module_handler > .et-fb-layers-view--content"].join(", "),declaration:"pointer-events: none;"}]),o.default.createElement(C.default,{key:"css-lv-ab-testing",additional_css:e,module_class:"body"})}},{key:"renderLayers",value:function(){var e=this,t=T.default.isFilterActive();if(t&&T.default.isEmptyFilterResults())return null;this.renderCounter=0;var n=j.default.getSections(),r=(0,i.default)({"et-fb-layers-view":!0,"et-fb-layers-view--results":t});return o.default.createElement("div",{id:"et-fb-layers-view-container",ref:this.containerRef},o.default.createElement("div",{className:r},n.map((function(t,n){var r=T.default.getLayerProps(t.address);if((0,c.default)(t.attrs,"_deleted")||(0,f.default)(r))return null;var a=e.renderCounter>e.renderBreakpoint;return e.renderCounter++,o.default.createElement(P.default,G({key:"lv-layer-".concat(r.address),index:n,globalParent:!1,lockedParent:!1,isDelayRender:a},r),e.renderChildLayers(t,!1,!1))}))))}},{key:"render",value:function(){var e,t=this.state,n=t.filterValue,r=t.filterSelected,a=t.filterDropdownActive,u=t.filterNotice,s=T.default.isFilterActive(),p=this.searchFilters,h=(0,d.default)(p.show_only,r)?p.show_only[r]:r,m=(0,f.default)(r)?o.default.createElement(_.default,{className:"et-fb-options-filter-button-group"},o.default.createElement(b.default,{_onClick:this.filterDropdownToggle},o.default.createElement(E.default,{icon:"add",color:s?v.default.white:v.default.shuttleGrey,size:"14"})),o.default.createElement(b.default,{_onClick:this.filterDropdownToggle},ETBuilderBackend.i18n.modals.filter)):o.default.createElement(_.default,{className:"et-fb-options-filter-button-group"},o.default.createElement(b.default,{_onClick:this.filterDropdownToggle},h),o.default.createElement(b.default,{_onClick:this.filterReset},o.default.createElement(E.default,{icon:"exit",color:s?v.default.white:v.default.shuttleGrey,size:"10"}))),g=!!a&&o.default.createElement("div",{className:"et-fb-options-filter-dropdown-wrap"},o.default.createElement(O.default,{value:r,name:"layers-filter",options:p,optionGroups:{show_only:ETBuilderBackend.i18n.modals.show_only},_onClick:this.filterDropdownToggle,__onChange:this.filterSelect,activeOnLoad:!0,focusOnSearchOnLoad:!0,searchable:!0})),y=o.default.createElement("div",{className:(0,i.default)({"et-fb-options-filter":!0,"et-fb-options-filter--has-dropdown":!(0,f.default)(p)})},o.default.createElement("div",{className:"et-fb-options-filter-input-wrap"},o.default.createElement(k.default,{type:"text",value:n,name:"filterValue",_onChange:this.filterInput,additional_attrs:{placeholder:J.searchLayers,"data-shortcuts-allowed":""}})),!(0,f.default)(p)&&o.default.createElement("div",{className:"et-fb-options-filter-button-wrap"},m),g,this.maybeRenderFilterNotice()),C=(0,i.default)((X(e={"et-fb-modal__module-settings":!0},"et-fb-modal__".concat(this.slug),!0),X(e,"et-fb-modal__filter-active",!0),X(e,"et-fb-modal__filter-none",!s),e)),M=(0,i.default)({"et-fb-tabs__panel--filter-active":!0,"et-fb-tabs__panel--filter-none":!s,"et-fb-tabs__panel--filter-dropdown":!(0,f.default)(p),"et-fb-tabs__panel--filter-selected":!(0,f.default)(r),"et-fb-tabs__panel--filter-notice":u}),P=T.default.getModalState(),j=(0,l.default)({},this.props,{adjustHeightOffset:!0,className:C,forceUpdateSpecificModal:!0,headerButtons:[o.default.createElement(b.default,{key:"modal-close-button",buttonName:w.default.LAYERS_VIEW_MODAL_CLOSE,tooltip:ETBuilderBackend.i18n.tooltip.modal.close,primary:!0},o.default.createElement(E.default,{icon:"close",color:"#FFFFFF"}))],label:J.title,measurement:{height:(0,c.default)(P,"measurement.height",this.defaultModalHeight),width:(0,c.default)(P,"measurement.width",this.defaultModalWidth)},modalMinimalWidth:300,position:{x:(0,c.default)(P,"position.x",this.props.position.x),y:(0,c.default)(P,"position.y",this.props.position.y)},updateSpecificModal:this.updateModalState});return o.default.createElement(x.default,j,o.default.createElement(S.default,null,o.default.createElement(D.default,{selectedIndex:0},o.default.createElement(D.ETBuilderTabList,null,o.default.createElement(D.ETBuilderTabItem,null,J.title)),o.default.createElement(D.ETBuilderTabPanel,{slug:this.slug,className:M,selected:!0},y,this.renderToggleAll(),this.renderLayers())),this.renderABTestingStyle()))}}])&&U(n.prototype,r),a&&U(n,a),I}(o.Component);X(te,"propTypes",{contextMenuCallback:a.default.func}),X(te,"defaultProps",{});var ne=te;t.default=ne}).call(this,n(5))},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=Y(n(0)),a=n(89),i=K(n(18)),l=K(n(15)),u=K(n(45)),s=K(n(1)),c=K(n(4)),d=K(n(40)),f=K(n(10)),p=K(n(12)),h=K(n(41)),m=K(n(79)),g=K(n(13)),v=K(n(2)),y=K(n(402)),b=K(n(169)),_=K(n(180)),w=K(n(30)),k=K(n(74)),O=K(n(9)),C=K(n(341)),S=K(n(160)),E=K(n(17)),M=K(n(149)),P=K(n(14)),T=K(n(158)),x=K(n(49)),j=K(n(126)),D=K(n(342)),L=K(n(94)),R=K(n(80)),N=(K(n(53)),K(n(77))),A=K(n(58)),B=K(n(394)),F=K(n(1456)),I=n(756),W=K(n(370)),V=K(n(956)),H=Y(n(957)),G=K(n(27)),U=K(n(8)),z=K(n(984)),q=Y(n(3));function K(e){return e&&e.__esModule?e:{default:e}}function $(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return($=function(e){return e?n:t})(e)}function Y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=$(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1742);var le=q.default.topDocument(),ue=q.default.appDocument(),se=function(e,t){var n=t||"quickActions";return(0,s.default)(ETBuilderBackend.i18n,"".concat(n,".").concat(e),e)},ce=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(Y,t);var n,r,K,$=re(Y);function Y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Y),(t=$.call(this,e)).displayName="ETBuilderQuickActionsModal",t.data=q.default.intentionallyClone(z.default.getData()),t.settingKeys=["always_start_with","show_recent_queries","recent_category","recent_queries"],t.defaultSettings=t.getDefaultSettings(),t.state=(0,l.default)({},{reRender:!1,context:"modal",keyword:"",parentSelected:t.parentSelectedDefault(),pointerItem:{},itemHovered:{},inputFocused:!0,placeholder:!1,settingPanelActive:!1,lastUsedCategory:!1,mousePointer:U.default.getMousePointer()},t.defaultSettings),t.slug="quick-actions",t.placeholderId="quick-actions-placeholder",t.isScrollingList=!1,t.modalWidth=600,t.modalHeight=360,t.timeout=100,t.throttledMouseMove=(0,_.default)(t.togglePlaceholder,t.timeout,{leading:!1}),t.searchInputRef=o.default.createRef(),t.setModalWrapRef=t.setModalWrapRef.bind(ae(t)),t.setResultsWrapRef=t.setResultsWrapRef.bind(ae(t)),t.setSettingPanelRef=t.setSettingPanelRef.bind(ae(t)),t.setSearchInputFocus=t.setSearchInputFocus.bind(ae(t)),t.handleSearchInput=t.handleSearchInput.bind(ae(t)),t.handleSearchInputFocus=t.handleSearchInputFocus.bind(ae(t)),t.handleSearchInputBlur=t.handleSearchInputBlur.bind(ae(t)),t.handleMouseDown=t.handleMouseDown.bind(ae(t)),t.handleMouseDownTopDocument=t.handleMouseDownTopDocument.bind(ae(t)),t.handleMouseMove=t.handleMouseMove.bind(ae(t)),t.handleKeyDown=t.handleKeyDown.bind(ae(t)),t.handleItemMouseOver=t.handleItemMouseOver.bind(ae(t)),t.handleItemClick=t.handleItemClick.bind(ae(t)),t.handleDataUpdated=t.handleDataUpdated.bind(ae(t)),t.closeModal=t.closeModal.bind(ae(t)),t.openSettingsPanel=t.openSettingsPanel.bind(ae(t)),t.closeSettingsPanel=t.closeSettingsPanel.bind(ae(t)),t.updateSetting=t.updateSetting.bind(ae(t)),t.resetResultsList=t.resetResultsList.bind(ae(t)),t}return n=Y,(r=[{key:"componentDidMount",value:function(){var e=this;le.addEventListener("keydown",this.handleKeyDown),ue.addEventListener("keydown",this.handleKeyDown),le.addEventListener("mousedown",this.handleMouseDownTopDocument),ue.addEventListener("mousedown",this.handleMouseDown),q.default.$topWindow().on("et_fb_quick_actions_data_updated",this.handleDataUpdated),U.default.addMousePointerListener(this.handleMouseMove),setTimeout((function(){e.setSearchInputFocus()}),200)}},{key:"componentDidUpdate",value:function(){this.isScrollingList=!1}},{key:"componentWillUnmount",value:function(){le.removeEventListener("keydown",this.handleKeyDown),ue.removeEventListener("keydown",this.handleKeyDown),le.removeEventListener("mousedown",this.handleMouseDownTopDocument),ue.removeEventListener("mousedown",this.handleMouseDown),q.default.$topWindow().off("et_fb_quick_actions_data_updated",this.handleDataUpdated),U.default.removeMousePointerListener(this.handleMouseMove),this.removePlaceholder()}},{key:"setModalWrapRef",value:function(e){this.modalWrapRef=e}},{key:"setResultsWrapRef",value:function(e){this.resultsWrapRef=e}},{key:"setSettingPanelRef",value:function(e){this.settingPanelRef=e}},{key:"setSearchInputFocus",value:function(){(0,c.default)(this.searchInputRef)||(0,c.default)(this.searchInputRef.current)||(this.searchInputRef.current.setAttribute("autocomplete","off"),this.searchInputRef.current.focus())}},{key:"getDefaultSettings",value:function(){var e={};return(0,f.default)(this.settingKeys,(function(t){var n=U.default.getAppPreference("quick_actions_".concat(t));switch(t){case"recent_queries":e[t]=(0,c.default)(n)||"false"===(0,p.default)(n)?[]:n.split(",");break;default:e[t]=n}})),e}},{key:"getItem",value:function(e){return(0,g.default)(e)?(0,m.default)(this.data,(function(t){var n={},r={};return(0,f.default)(e,(function(e,o){n[o]=(0,d.default)((0,s.default)(t,o))?(0,s.default)(t,o).toLowerCase():(0,s.default)(t,o),r[o]=(0,d.default)(e)?e.toLocaleLowerCase():e})),(0,h.default)(n,r)})):{}}},{key:"getItemHoveredIndex",value:function(){var e=this,t=(0,c.default)(this.state.itemHovered)?0:(0,b.default)(this.getResults(),(function(t){return(0,h.default)(t,e.state.itemHovered)}));return parseInt(t,10)}},{key:"getRecentItems",value:function(){if("on"!==this.getSetting("show_recent_queries"))return[];if(!(0,c.default)(this.state.keyword))return[];if(!(0,c.default)(this.state.parentSelected))return[];var e=this.getSetting("recent_queries");return(0,c.default)(e)?[]:e.map((function(e,t){return(0,l.default)({},{label:e,key:"recent_query__".concat(t),parent:void 0,depth:1,recentQuery:!0})}))}},{key:"getItems",value:function(){var e=this,t=this.state.keyword,n=this.state.parentSelected;if(!(0,c.default)(t)&&!(0,c.default)(n)){var r=this.data.filter((function(e){return(0,s.default)(n,"key","")===e.parent}));return this.data.filter((function(t){var n=(0,m.default)(r,t)||(0,m.default)(r,{key:t.parent,depth:t.depth-1});return e.isKeywordMatch(t)&&n}))}if((0,c.default)(t)&&!(0,c.default)(n))return this.data.filter((function(e){return(0,s.default)(n,"key","")===e.parent}));if(!(0,c.default)(t)&&(0,c.default)(n)){var o={goto__section:{match:!1,hasChild:!1},goto__row:{match:!1,hasChild:!1},goto__module:{match:!1,hasChild:!1}},a=this.data.filter((function(t){var n=e.isKeywordMatch(t);return n&&((0,x.default)(o,t.key)&&(o[t.key].match=!0),(0,x.default)(o,t.parent)&&(o[t.parent].hasChild=!0)),n||(0,x.default)(o,t.key)})),i=(0,E.default)((0,j.default)(o,(function(e){return!e.match&&!e.hasChild})));return(0,c.default)(i)?a:a.filter((function(e){return!(0,O.default)(i,e.key)}))}return this.data.filter((function(e){return 1===e.depth}))}},{key:"getResults",value:function(){var e=this.getRecentItems(),t=this.getItems();if(!(0,c.default)(this.state.keyword)&&(0,c.default)(this.state.parentSelected)){var n=t.map((function(e){return e.parent||(0,L.default)(e,"priority",-1),e})),r=(0,D.default)(n,["priority"],["asc"]);return(0,T.default)(e,r)}return(0,T.default)(e,t)}},{key:"getMousePosition",value:function(){var t=(0,s.default)(this.state.mousePointer,"pageX",(0,s.default)(this.state.mousePointer,"clientX",0)),n=(0,s.default)(this.state.mousePointer,"pageY",(0,s.default)(this.state.mousePointer,"clientY",0));return{x:t-e(window).scrollLeft(),y:n-e(window).scrollTop()}}},{key:"getSetting",value:function(e,t){return(0,P.default)(e)?(0,M.default)(this.state,(0,E.default)(this.defaultSettings)):(0,s.default)(this.state,e,t)}},{key:"isKeywordMatch",value:function(e){var t=(0,p.default)(this.state.keyword).toLowerCase(),n=(0,s.default)(e,"label",!1);if(n&&-1!==(0,p.default)(n).toLowerCase().indexOf(t))return!0;var r=(0,s.default)(e,"keywordLabel",!1);if(r&&-1!==(0,p.default)(r).toLowerCase().indexOf(t))return!0;var o=(0,s.default)(e,"tagLabel",!1);return!(!o||-1===(0,p.default)(o).toLowerCase().indexOf(t))}},{key:"updateSetting",value:function(e,t){if((0,O.default)(this.settingKeys,e)){var n,r=this.getSetting(e);switch(e){case"recent_queries":n=(0,C.default)((0,S.default)((0,T.default)([t],r)),5);break;default:n=t}(0,h.default)(r,n)||(G.default.quickActionsUpdateSetting(e,n),this.setState(ee({},e,n)))}}},{key:"parentSelectedDefault",value:function(){var e=(0,s.default)(this.defaultSettings,"always_start_with");return"nothing"===e?{}:"recent_category"===e?this.getItem({key:(0,s.default)(this.defaultSettings,"recent_category"),depth:1}):this.getItem({key:e,depth:1})}},{key:"closeModal",value:function(){G.default.quickActionsSetContext(!this.state.context)}},{key:"isPlaceholderDataChanged",value:function(e){var t=this;if((0,h.default)(this.state.placeholder,e))return!1;var n=["targetAddress","isNoChild","isAddBefore"],r=[];return(0,f.default)(n,(function(n){(0,s.default)(t.state.placeholder,n)===(0,s.default)(e,n)&&r.push(n)})),n.length!==r.length}},{key:"getPlaceholderData",value:function(){var t=this,n=(0,s.default)(U.default.getHoveredModule(),"props",{});if((0,c.default)(n))return!1;var r=e('[data-address="'.concat((0,s.default)(n,"address"),'"]')).first();if(!r||1!==r.length)return!1;var o=this.state.pointerItem,a=o.group,i=o.slug,u=o.insert_saved,d=function(e){var t=(0,s.default)(e,"type","");return(0,O.default)(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"],t)?t.replace("et_pb_",""):"module"},f={fullwidth:{section:function(){switch(d(n)){case"section":return{target:r};default:return{target:r.closest(".et_pb_section")}}},module:function(){if(0!==i.indexOf("et_pb_fullwidth_"))return!1;switch(d(n)){case"module":return{target:r};default:if(r.hasClass("et-fb-no-children"))return{target:r,isNoChild:!0};var e=r.find(".et_pb_module.et-first-child.et-last-child").first();return e&&e.length?{target:e}:!(0,c.default)(t.state.placeholder)&&t.state.placeholder}}},specialty:{section:function(){switch(d(n)){case"section":return{target:r};default:return{target:r.closest(".et_pb_section")}}},row:function(){switch(d(n)){case"section":return!(u||!(0,c.default)(n.content))&&{target:r,isNoChild:!0};case"module":case"column_inner":return{target:r.closest(".et_pb_row_inner")};case"column":return!!(0,q.hasValue)((0,s.default)(n,"attrs.specialty_columns",""))&&{target:r,isNoChild:!0};case"row_inner":return{target:r};default:return!(0,c.default)(t.state.placeholder)&&t.state.placeholder}},module:function(){if(0===i.indexOf("et_pb_fullwidth_"))return!1;switch(d(n)){case"module":return{target:r};case"column_inner":return{target:r,isNoChild:!0};case"column":return!(0,q.hasValue)((0,s.default)(n,"attrs.specialty_columns",""))&&{target:r,isNoChild:!0};default:return!(0,c.default)(t.state.placeholder)&&t.state.placeholder}}},regular:{section:function(){switch(d(n)){case"section":return{target:r};default:return{target:r.closest(".et_pb_section")}}},row:function(){switch(d(n)){case"module":case"column":return{target:r.closest(".et_pb_row")};case"row":return{target:r};default:return!!r.hasClass("et-fb-no-children")&&{target:r,isNoChild:!0}}},module:function(){if(0===i.indexOf("et_pb_fullwidth_"))return!1;switch(d(n)){case"module":return{target:r};case"column":return{target:r,isNoChild:!0};default:return!(0,c.default)(t.state.placeholder)&&t.state.placeholder}}}},h=(0,q.getModuleSectionType)(n,U.default.getSectionsFlattened()),m=(0,s.default)(f,"".concat(h,".").concat(a));if(!(0,w.default)(m))return!1;var g=m();if(!g||!g.target||!g.target.length)return!1;var v=g.isNoChild||!1,y=(0,p.default)(g.target.attr("data-address"));if(v)return(0,l.default)({},g,{targetAddress:y,isNoChild:v,isAddBefore:!1});var b=(0,s.default)(g.target.offset(),"top",0),_=g.target.height()/2,k=(0,s.default)(this.state.mousePointer,"pageY",0);return(0,l.default)({},g,{isNoChild:v,targetAddress:y,isAddBefore:k<b+_})}},{key:"togglePlaceholder",value:function(t){var n=this;if("pointer"===this.state.context){if((0,s.default)(t,"target")){var r=e(t.target).closest(".et-fb-column-divider").find(".et_pb_column_dropzone"),o=(0,s.default)(this,"state.pointerItem.slug","");if(r.length>0&&"module"===(0,s.default)(this,"state.pointerItem.group","")&&!(0,R.default)(o,"et_pb_fullwidth_"))return void this.setState({placeholder:{parentRow:r.data("row-address"),columnIndex:r.data("zone-index")}})}var a=this.getPlaceholderData();this.isPlaceholderDataChanged(a)&&e.when(this.removePlaceholder()).then((function(){(0,c.default)(a)?n.setState({placeholder:a}):e.when(n.addPlaceholder(a)).then((function(){var t=e("#".concat(n.placeholderId));n.setState({placeholder:(0,l.default)({},a,{buttonPosition:Z(Z({},t.offset()),{},{element:t})})})}))}))}}},{key:"addPlaceholder",value:function(t){var n,r=t.target||!1,o=t.isNoChild||!1,a=t.isAddBefore||!1;if(r&&r.length){var l=this.state.pointerItem,u=l.group,c=l.slug,d=(0,s.default)(this.props,"previewMode","desktop"),f=(0,i.default)((ee(n={"et-fb-quick-actions-placeholder":!0,"et-fb-quick-actions-placeholder--no-child":o,"et-fb-quick-actions-placeholder--first-child":a},"et-fb-quick-actions-placeholder--".concat(u),!0),ee(n,"et-fb-quick-actions-placeholder--".concat(u,"-fullwidth"),"fullwidth"===c.replace("et_fb_","")),ee(n,"et-fb-quick-actions-placeholder--".concat(u,"-specialty"),"specialty"===c.replace("et_fb_","")),ee(n,"et-fb-quick-actions-placeholder--".concat(u,"-regular"),"regular"===c.replace("et_fb_","")||"section"===c.replace("et_pb_","")),n)),p={opacity:"wireframe"===d?1:0,height:"wireframe"===d?"40px":"0px"},h={opacity:1,height:"20px"},m=e('<div id="'.concat(this.placeholderId,'" class="').concat(f,'"></div>')).css(p);e.when(void(o?r.find(".et-fb-add-wrap").first().append(m):"wireframe"===d?a?r.prepend(m):r.append(m):a?r.before(m):r.after(m))).then((function(){"wireframe"!==d&&m.animate(h,500,"easeOutCubic")}))}}},{key:"removePlaceholder",value:function(){e("#".concat(this.placeholderId)).remove()}},{key:"handleDataUpdated",value:function(){this.data=q.default.intentionallyClone(z.default.getData());var e={reRender:!this.state.reRender};(0,c.default)(this.state.parentSelected)||(e.parentSelected=this.getItem({key:(0,s.default)(this.state,"parentSelected.key"),parent:(0,s.default)(this.state,"parentSelected.parent"),depth:(0,s.default)(this.state,"parentSelected.depth")})),this.setState(e)}},{key:"handleMouseDown",value:function(e){var t=this;if("pointer"===this.state.context&&!(0,c.default)(this.state.placeholder))return this.removePlaceholder(),this.setState({context:!1}),void setTimeout((function(){var e=t.state.placeholder,n=(0,l.default)({},Z({},t.state.pointerItem),{placeholder:e});G.default.quickActionProcess(n)}),200);"modal"===this.state.context&&this.modalWrapRef&&!this.modalWrapRef.contains(e.target)&&this.closeModal()}},{key:"handleMouseDownTopDocument",value:function(t){this.state.settingPanelActive&&this.settingPanelRef&&!this.settingPanelRef.contains(t.target)?this.closeSettingsPanel():"modal"!==this.state.context||e(t.target).closest(".et-fb-modal__quick-actions").length||this.closeModal()}},{key:"handleMouseMove",value:function(e){"pointer"===this.state.context&&(this.setState({mousePointer:e}),this.throttledMouseMove.cancel(),this.throttledMouseMove(e))}},{key:"handleKeyDown",value:function(t){var n=this,r=t.keyCode||t.which,o=27===r,a=8===r,i=38===r,l=40===r,u=13===r,d=this.state,f=d.parentSelected,p=d.keyword,h=d.inputFocused,m=d.context;if(o){if(this.state.settingPanelActive)return void this.closeSettingsPanel();if("pointer"===m)return this.setState({context:"modal",placeholder:!1}),this.removePlaceholder(),void G.default.quickActionsSetContext("modal");this.closeModal()}if(a&&!(0,c.default)(f)&&(0,c.default)(p)&&h){var g=(0,s.default)(f,"depth",1),v=(0,s.default)(f,"parent",""),y=g>1?this.getItem({depth:g-1,key:v}):{};this.setState({keyword:"",parentSelected:y,itemHovered:{}})}if(!this.isScrollingList&&(i||l)){var b=this.getResults();if(!(0,c.default)(b)){var _=function(){var e=b.length-1,t=n.getItemHoveredIndex(),r=!1;if(l)for(;!1===r&&t<=e;){t+=1;var o=(0,s.default)(b,t);(0,c.default)(o)||o.isGroup||(r=t)}if(i)for(;!1===r&&t>=0;){t-=1;var a=(0,s.default)(b,t);(0,c.default)(a)||a.isGroup||(r=t)}return r}();if(!1!==_){var w=(0,s.default)(b,_);if(!(0,c.default)(w)){var k=e(this.resultsWrapRef),O=k.outerHeight(),C=parseInt(k.css("padding-top"),10),S=parseInt(k.css("padding-bottom"),10),E=k.closest(".et-fb-tabs__panel"),M=E.height(),P=E.scrollTop(),T=k.find("li").eq(_),x=T.outerHeight()||0,j=T.offset().top-E.offset().top,D=O>M,L=0===_,R=_===b.length-1,N=function(t){n.isScrollingList=!0,e.when(E.scrollTop(t)).then((function(){n.setState({itemHovered:w})}))};if(l&&D&&j+x>=M){var A=P+j+x-M;R&&(A+=S),N(A)}else if(i&&D&&j-x<=0){var B=P+j;L&&(B-=C),N(B)}else this.setState({itemHovered:w})}}}}if(u){var F=this.getResults();if(!(0,c.default)(F)){var I=(0,s.default)(F,this.getItemHoveredIndex());(0,c.default)(I)||I.isGroup||this.handleItemClick(I)}}}},{key:"handleSearchInput",value:function(e){var t=(0,y.default)(e.target.value),n=this.state.parentSelected,r={};(0,c.default)(n)?r=this.getItem({label:t}):(r=this.getItem({label:t,parent:(0,s.default)(n,"key")}),(0,c.default)(r)&&(r=this.getItem({tabLabel:t,parent:(0,s.default)(n,"key")})));var o=(0,c.default)(r)||(0,c.default)(r.actions)?n:r,a=(0,c.default)(r)||(0,c.default)(r.actions)?t:"";switch(1===(0,s.default)(o,"depth")&&this.updateSetting("recent_category",o.key),(0,s.default)(o,"key")){case"help":G.default.quickActionsLoad("articles")}this.setState({parentSelected:o,keyword:a,itemHovered:{}})}},{key:"handleSearchInputFocus",value:function(){this.state.settingPanelActive||this.state.settingPanelActive||this.setState({inputFocused:!0})}},{key:"handleSearchInputBlur",value:function(){this.state.settingPanelActive||this.state.settingPanelActive||this.setState({inputFocused:!1})}},{key:"handleItemClick",value:function(e){if(!this.state.settingPanelActive&&!this.state.settingPanelActive){if((0,s.default)(e,"recentQuery"))return this.setState({keyword:e.label}),void this.setSearchInputFocus();var t=X((0,s.default)(e,"key","").split("__"),2),n=t[0],r=t[1];switch(n){case"insert_saved":G.default.quickActionsLoad("library",r);break;case"help":G.default.quickActionsLoad("articles");break;case"open":r&&!(0,O.default)(r,"_")&&G.default.quickActionsLoad("posts",r)}if(1===(0,s.default)(e,"depth")&&this.updateSetting("recent_category",e.key),(0,c.default)(this.state.keyword)||this.updateSetting("recent_queries",this.state.keyword),!(0,P.default)(e.actions))return this.setState({parentSelected:e,keyword:"",itemHovered:{}}),void this.setSearchInputFocus();if((0,O.default)(["insert_module","insert_saved"],n)&&"pointer"!==this.state.context){this.setState({context:"pointer",mousePointer:U.default.getMousePointer(),pointerItem:e}),this.togglePlaceholder();var o={pointerItemSlug:(0,s.default)(e,"slug",""),pointerItemGroup:(0,s.default)(e,"group","")};G.default.quickActionsSetContext("pointer",o)}else G.default.quickActionProcess(e)}}},{key:"handleItemMouseOver",value:function(e){this.isScrollingList||this.setState({itemHovered:e})}},{key:"openSettingsPanel",value:function(){this.state.settingPanelActive||this.setState({settingPanelActive:!0})}},{key:"closeSettingsPanel",value:function(){this.setState({settingPanelActive:!1})}},{key:"resetResultsList",value:function(){var e={keyword:""};(0,c.default)(this.state.keyword)&&!(0,c.default)(this.state.parentSelected)&&(e.parentSelected=this.getItem({depth:(0,s.default)(this.state.parentSelected,"depth")-1,key:(0,s.default)(this.state.parentSelected,"parent")})),this.setState(e)}},{key:"renderSettingPanel",value:function(){var e=this;if(!this.state.settingPanelActive)return!1;var t={nothing:se("Nothing"),recent_category:se("Last Used Search Category")},n=(0,k.default)(this.data,(function(e){return 1===e.depth}));(0,f.default)(n,(function(e){t[e.key]=e.label}));var r=[{label:se("Always Start Search With"),fieldData:{name:"always_start_with",type:"select",default:"nothing",options:t,value:this.getSetting("always_start_with"),_onChange:this.updateSetting}},{label:se("Show Recent Queries"),fieldData:{name:"show_recent_queries",type:"yes_no_button",default:"off",options:{on:se("Yes"),off:se("No")},value:this.getSetting("show_recent_queries"),_onChange:this.updateSetting}}].map((function(t){var n=(0,o.createElement)(F.default.getControl(t.fieldData.type),t.fieldData);return o.default.createElement(I.ETBuilderFormGroup,{name:t.fieldData.name,key:"".concat(e.slug,"-form-group-").concat(t.fieldData.name)},o.default.createElement(I.ETBuilderFormLabel,null,t.label),o.default.createElement(W.default,{componentName:t.fieldData.name},n))})),l=(0,i.default)({"et-fb-quick-actions-setting-panel":!0,"et-fb-modal":!0}),u=U.default.getAppPreference("builder_animation");return o.default.createElement(a.Motion,{defaultStyle:{size:.8,opacity:0},style:{size:u?(0,a.spring)(1,{stiffness:300,damping:20}):1,opacity:u?(0,a.spring)(1,{stiffness:300,damping:20}):1}},(function(t){return o.default.createElement("div",{className:"et-fb-quick-actions-setting-panel--wrap",style:{opacity:t.opacity,transform:"scale( ".concat(t.size," )")}},o.default.createElement("div",{className:"et-fb-quick-actions-setting-panel--button-mask"}),o.default.createElement("div",{className:l,ref:e.setSettingPanelRef},r))}))}},{key:"renderSearchInput",value:function(){var e=this.state.parentSelected,t=!(0,c.default)(e)&&o.default.createElement("div",{className:"et-fb-modal__header--selected"},o.default.createElement("span",null,(0,s.default)(e,"tagLabel",(0,s.default)(e,"label"))));return o.default.createElement("div",{className:"et-fb-modal__header--input-wrap"},t,o.default.createElement("div",{className:"et-fb-modal__header--input"},o.default.createElement("input",{type:"hidden",value:"fakeInputValueDisableBrowserAutoSuggestions",style:{display:"none"}}),o.default.createElement("input",{type:"text",id:"keyword",name:"keyword",className:"et-fb-settings-option-input et-fb-settings-option-input--block",placeholder:(0,c.default)(e)?"".concat(se("Search"),"..."):"",value:this.state.keyword,onChange:this.handleSearchInput,onFocus:this.handleSearchInputFocus,onBlur:this.handleSearchInputBlur,ref:this.searchInputRef})),this.renderSettingPanel())}},{key:"renderResultsList",value:function(){var e=this,t=this.state.parentSelected,n=this.state.keyword;if(!(0,c.default)(t)&&(0,c.default)(t.actions)&&t.isLoading)return o.default.createElement(B.default,{useWrapper:!1,isLoading:!0});var r=this.getResults();if((0,c.default)(r))return o.default.createElement("div",{className:(0,i.default)({"et-fb-quick-actions":!0,"et-fb-quick-actions--no-results":!0})},o.default.createElement("p",{onClick:this.resetResultsList,dangerouslySetInnerHTML:{__html:se("No options exist for this search query. <span>Click here</span> to clear your search.")}}));var a=r.filter((function(e){return e.recentQuery})),l=r.map((function(r,l){var u,s=function(t,n){return!e.state.settingPanelActive&&((0,c.default)(e.state.itemHovered)?0===t:(0,h.default)(n,e.state.itemHovered))},d=(0,i.default)(ee({"et-fb-quick-actions--item--label":!0,"et-fb-quick-actions--item--label--hovered":s(l,r)},"et-fb-quick-actions--item--label--depth-".concat(r.depth),!0)),f=(0,i.default)(ee({"et-fb-quick-actions--item--description":!0,"et-fb-quick-actions--item--description--hovered":s(l,r)},"et-fb-quick-actions--item--description--depth-".concat(r.depth),!0)),m=(0,i.default)((ee(u={"et-fb-quick-actions--item":!0},"et-fb-quick-actions--item--depth-".concat(r.depth),!0),ee(u,"et-fb-quick-actions--item--hovered",s(l,r)&&!r.isGroup),ee(u,"et-fb-quick-actions--item--separator",!(0,c.default)(a)&&a.length-1===l),u)),g=o.default.createElement("span",{className:d},function(e){return e.injected||(0,c.default)(n)||(0,c.default)(e.keywordLabel)||!(0,c.default)(t)?e.label:e.keywordLabel}(r)),y=o.default.createElement("span",{className:f},function(e){return!(0,c.default)(e.description)&&(0,v.default)(e.description)?e.description.map((function(e){return o.default.createElement("span",{key:e,"data-content":e,className:"kbd-key key-".concat(e)})})):(0,p.default)(e.description)}(r)),b={key:"".concat(r.depth,"_-_").concat(r.key),className:m,onClick:function(){return e.handleItemClick(r)},onMouseOver:function(){return e.handleItemMouseOver(r)}},_=r.element||"div",w=r.attrs||{};return o.default.createElement("li",b,(0,o.createElement)(_,w,g,y))})),u=(0,i.default)({"et-fb-quick-actions":!0,"et-fb-quick-actions--results":!0});return o.default.createElement("ul",{className:u,ref:this.setResultsWrapRef},l)}},{key:"renderPointer",value:function(){var e;if("pointer"!==this.state.context)return!1;var t=U.default.getHoveredModule();if((0,c.default)(t))return!1;var n=this.state.pointerItem,r=n.group,a=n.slug,l=this.getMousePosition(),d={className:(0,i.default)((e={"et-fb-quick-actions-pointer":!0},ee(e,"et-fb-quick-actions-pointer--".concat(r),!0),ee(e,"et-fb-quick-actions-pointer--".concat(r,"--").concat(a.replace("et_pb_","")),"section"!==r),ee(e,"et-fb-quick-actions-pointer--".concat(r,"--fullwidth"),"fullwidth"===a.replace("et_fb_","")),ee(e,"et-fb-quick-actions-pointer--".concat(r,"--specialty"),"specialty"===a.replace("et_fb_","")),ee(e,"et-fb-quick-actions-pointer--".concat(r,"--regular"),"regular"===a.replace("et_fb_","")||"section"===a.replace("et_pb_","")),e)),tooltip:(0,s.default)(ETBuilderBackend.i18n.tooltip,"".concat(r,".addButton")),round:!0,info:"regular"===a.replace("et_fb_","")||"section"===a.replace("et_pb_",""),primary:"fullwidth"===a.replace("et_fb_",""),warning:"specialty"===a.replace("et_fb_",""),success:"row"===r,inverse:"module"===r,disabled:!0,onClick:u.default,style:{left:(0,s.default)(l,"x",0),top:(0,s.default)(l,"y",0)}};return o.default.createElement("div",{className:"et-fb-quick-actions-wrap--pointer"},o.default.createElement(N.default,d,o.default.createElement(A.default,{size:"14",icon:"add",color:"#FFFFFF"})))}},{key:"renderModal",value:function(){var e;if("modal"!==this.state.context)return!1;var t=(0,i.default)((ee(e={"et-fb-modal__module-settings":!0},"et-fb-modal__".concat(this.slug),!0),ee(e,"et-fb-modal__".concat(this.slug,"__").concat((0,q.getOS)().toLowerCase()),!0),e)),n=(0,i.default)(ee({"et-fb-tabs__panel":!0},"et-fb-tabs__panel--".concat(this.slug),!0)),r=(0,i.default)(ee({"et-fb-form":!0},"et-fb-form--".concat(this.slug),!0)),a=[o.default.createElement(N.default,{tooltip:se("Settings"),ink:!1,_onClick:this.openSettingsPanel},o.default.createElement(A.default,{icon:"setting"})),o.default.createElement(N.default,{tooltip:se("Close"),ink:!1,_onClick:this.closeModal},o.default.createElement(A.default,{icon:"close"}))],u=(0,l.default)({},this.props,{className:t,label:this.renderSearchInput(),measurement:{width:this.modalWidth,height:this.modalHeight},alwaysCentered:!0,headerButtons:a});return o.default.createElement("div",{className:"et-fb-quick-actions-wrap--modal",ref:this.setModalWrapRef},o.default.createElement(V.default,u,o.default.createElement(W.default,null,o.default.createElement(H.default,{selectedIndex:0},o.default.createElement(H.ETBuilderTabPanel,{className:n,slug:this.slug,selected:!0},o.default.createElement("div",{className:r},this.renderResultsList()))))))}},{key:"render",value:function(){return o.default.createElement(o.default.Fragment,null,this.renderPointer(),this.renderModal())}}])&&te(n.prototype,r),K&&te(n,K),Y}(o.default.Component);t.default=ce}).call(this,n(5))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=d(n(37)),i=d(n(6)),l=d(n(18)),u=d(n(8)),s=d(n(999)),c=d(n(3));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1743);var b={active:i.default.bool},_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(d,e);var t,n,r,i=g(d);function d(){return p(this,d),i.apply(this,arguments)}return t=d,(n=[{key:"componentDidMount",value:function(){c.default.$appWindow().trigger("et-core-modal-active")}},{key:"renderDescription",value:function(){var e=u.default.getAlertModalSetting("description");return c.default.hasValue(e)?o.default.createElement("div",{className:"et-core-modal-content",dangerouslySetInnerHTML:{__html:s.default.wpautop(e)}}):""}},{key:"renderButton",value:function(e,t,n){var r=(0,l.default)({"et-core-modal-action":!0},n);return o.default.createElement("a",{href:"#button",className:r,onClick:t},e)}},{key:"render",value:function(){var e=c.default.replaceCodeContentEntities(u.default.getAlertModalSetting("title")),t=u.default.getAlertModalSetting("buttonCancelLabel"),n=t?this.renderButton(t,u.default.getAlertModalSetting("onClickCancelButton"),{"et-core-modal-action-secondary":!0}):"",r=u.default.getAlertModalSetting("buttonProceedLabel"),i=r?this.renderButton(r,u.default.getAlertModalSetting("onClickProceedButton"),{"et-core-modal-action-restore":!0}):"",s=t?o.default.createElement("a",{href:"#close",className:"et-core-modal-close",onClick:u.default.getAlertModalSetting("onClickCancelButton")}):"",d=["et-core-modal-overlay","et-core-active","et-fb-modal-alert"];r&&t&&d.push("et-core-modal-two-buttons");var f=o.default.createElement("div",{className:(0,l.default)(d),onClick:u.default.getAlertModalSetting("onClickCancelButton")},o.default.createElement("div",{className:"et-core-modal"},o.default.createElement("div",{className:"et-fb-modal-overlay-mousetrap"}),o.default.createElement("div",{className:"et-core-modal-header"},o.default.createElement("h3",{className:"et-core-modal-title"},e),s),this.renderDescription(),o.default.createElement("div",{className:"et_pb_prompt_buttons"},n,i)));return a.default.createPortal(f,c.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app"))[0])}}])&&h(t.prototype,n),r&&h(t,r),d}(o.Component);_.propTypes=b,_.defaultProps={active:!1};var w=_;t.default=w},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=b(n(37)),i=b(n(18)),l=b(n(1)),u=b(n(35)),s=b(n(3)),c=b(n(8)),d=b(n(29)),f=b(n(77)),p=n(756),h=b(n(1496)),m=b(n(1459)),g=b(n(27)),v=b(n(394)),y=b(n(118));function b(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1744);var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(_,e);var t,n,r,b=C(_);function _(){var e;w(this,_);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P(E(e=b.call.apply(b,[this].concat(n))),"state",{consent:"",notes:"",status:"initial",requestResponse:{}}),P(E(e),"_onModalChange",(function(){var t=c.default.getErrorReportModalStatus(),n=c.default.getErrorReportRequestResponse();e.setState({status:t,requestResponse:n}),"sending_success"===t&&setTimeout((function(){e._closeModal()}),3e3)})),P(E(e),"_onChange",(function(t,n){e.setState(P({},t,n)),"consent"===t&&setTimeout((function(){return e.forceUpdate()}),0)})),P(E(e),"_onCloseModal",(function(t){var n=s.default.$topWindow(t.target);n.closest(".et-core-modal").length>0&&!n.hasClass("et-core-modal-close")||(t.preventDefault(),t.stopPropagation(),e._closeModal())})),P(E(e),"_closeModal",(function(){s.default.$topWindow(a.default.findDOMNode(e.refs.reportModalOverlay)).addClass("et-core-closing").delay(600).queue((function(){g.default.setErrorReportModalActive(!1,null,null)}))})),P(E(e),"_onSubmitReport",(function(t){g.default.sendErrorReport(c.default.getSections(),c.default.getPageSettings(),e.state.notes)})),P(E(e),"_isSubmissionReady",(function(){return s.default.isOn(e.state.consent)})),e}return t=_,(n=[{key:"componentDidMount",value:function(){this._adjustModalPositionOnMount(),c.default.addErrorReportModalChange(this._onModalChange)}},{key:"componentWillUnmount",value:function(){c.default.removeErrorReportModalChange(this._onModalChange)}},{key:"_getI18n",value:function(e){return d.default.getI18n("errorBoundaries.modal.".concat(e))}},{key:"_getModalInitialHeight",value:function(){var e=s.default.$topWindow(a.default.findDOMNode(this.refs.reportModal));return e.find(".et-core-modal-header").outerHeight()+parseInt(e.find(".et-core-modal-content").css("paddingTop"))+parseInt(e.find(".et-core-modal-content").css("paddingBottom"))+e.find(".et-fb-form__group").outerHeight()}},{key:"_adjustModalPositionOnMount",value:function(){var e=s.default.$topWindow(a.default.findDOMNode(this.refs.reportModal));if(this._getModalInitialHeight()<=parseInt(.6*s.default.$topWindow().innerHeight())){s.default.$topWindow(a.default.findDOMNode(this.refs.reportModalOverlay)).addClass("et-core-modal-disabled-scrollbar");var t=this._getModalInitialHeight();e.css({marginTop:"-".concat(t/2,"px")})}}},{key:"_isStatus",value:function(e){return e===this.state.status}},{key:"_isEtAccountActive",value:function(){var e=d.default.getEtAccount("et_username"),t=d.default.getEtAccount("et_api_key"),n=d.default.getEtAccount("status");return s.default.hasValue(e)&&s.default.hasValue(t)&&"active"===n}},{key:"_renderModalHeader",value:function(){return o.default.createElement("div",{className:"et-core-modal-header"},o.default.createElement("h3",{className:"et-core-modal-title"},this._getI18n("title")),o.default.createElement("a",{href:"#close",className:"et-core-modal-close",onClick:this._onCloseModal,style:{pointerEvents:this._isStatus("sending")?"none":"auto",opacity:this._isStatus("sending")?0:1}}))}},{key:"_renderPreloader",value:function(){return this._isStatus("sending")?o.default.createElement(v.default,{isLoading:!0}):null}},{key:"_renderErrorMessage",value:function(){return this._isStatus("sending_error")?o.default.createElement("div",{className:"et-fb-error-report-notification et-fb-error-report-notification--error"},(0,l.default)(this.state,"requestResponse.message",this._getI18n("errorMessage"))):null}},{key:"_renderDebugInfo",value:function(){var e=(0,u.default)(this._getI18n("debugInfo"),(function(e,t){return o.default.createElement("div",{className:"et-fb-error-report-debug-items",key:"debug-info-".concat(t)},o.default.createElement("p",{className:"et-fb-error-report-debug-items-title"},t),o.default.createElement("ul",{className:"et-fb-error-report-debug-items-list"},(0,u.default)(e,(function(e){return o.default.createElement("li",{key:"debug-info-".concat(t,"-").concat(e)},e.replace(/_/g," "))}))))}));return o.default.createElement("div",{className:"et-fb-error-report-debug-items-wrap"},e)}},{key:"_renderReportForm",value:function(){var e=this._isEtAccountActive()?o.default.createElement(p.ETBuilderFormGroup,null,o.default.createElement(p.ETBuilderFormLabel,null,this._getI18n("consentTitle")),o.default.createElement("p",{className:"et-fb-error-report-consent-description"},this._getI18n("consentDescription")),this._renderDebugInfo(),o.default.createElement(p.ETBuilderFormLabel,null,this._getI18n("consentNotes")),o.default.createElement("p",{className:"et-fb-error-report-consent-description"},this._getI18n("consentNotesDescription")),o.default.createElement(h.default,{name:"notes",_onChange:this._onChange}),o.default.createElement(m.default,{name:"consent",_onChange:this._onChange,options:[s.default.decodeHtmlEntities(this._getI18n("consentLabel"))],value:this.state.consent})):o.default.createElement("div",{className:"et-fb-error-report-notification et-fb-error-report-notification--error"},o.default.createElement("p",null,this._getI18n("noAccountMessage")),o.default.createElement("p",null,this._getI18n("noAccountGuide"))),t={opacity:this._isStatus("sending")?0:1,pointerEvents:this._isStatus("sending")?"none":"auto"};return o.default.createElement("form",null,this._renderPreloader(),o.default.createElement("div",{className:"et-core-modal-content",style:t},this._renderErrorMessage(),e),this._renderModalProceedButton())}},{key:"_renderBugReportSentMessage",value:function(){return o.default.createElement("div",{className:"et-core-modal-content"},o.default.createElement("p",null,this._getI18n("successMessage")),o.default.createElement("p",null,this._getI18n("successAutoclose")))}},{key:"_renderModalProceedButton",value:function(){return this._isEtAccountActive()?o.default.createElement("div",{className:"et_pb_prompt_buttons"},o.default.createElement(f.default,{buttonName:"error-boundaries-report-submit",className:"et-core-modal-action",_onClick:this._onSubmitReport,style:{backgroundColor:y.default.coreModalButtonBlue,pointerEvents:this._isStatus("sending")?"none":"auto",opacity:this._isStatus("sending")?0:1},disabled:!this._isSubmissionReady()},this._getI18n("buttonLabel"))):o.default.createElement("a",{href:d.default.getUrl("themeOptionsUrl"),className:"et-core-modal-action"},this._getI18n("noAccountButtonLabel"))}},{key:"render",value:function(){var e=o.default.createElement("div",{className:(0,i.default)(["et-core-modal-overlay","et-core-active","et-fb-modal-report"]),onClick:this._onCloseModal,ref:"reportModalOverlay"},o.default.createElement("div",{className:"et-core-modal",ref:"reportModal"},o.default.createElement("div",{className:"et-fb-modal-overlay-mousetrap"}),this._renderModalHeader(),this._isStatus("sending_success")?this._renderBugReportSentMessage():this._renderReportForm()));return a.default.createPortal(e,s.default.$topWindow("#et-fb-app")[0])}}])&&k(t.prototype,n),r&&k(t,r),_}(o.Component);t.default=T},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=C(n(0)),a=k(n(6)),i=k(n(10)),l=k(n(2)),u=k(n(40)),s=k(n(14)),c=k(n(340)),d=(k(n(45)),k(n(8))),f=k(n(78)),p=k(n(27)),h=k(n(1745)),m=k(n(77)),g=k(n(58)),v=k(n(956)),y=C(n(957)),b=k(n(370)),_=k(n(3));n(1747);var w=["currentVideo","currentVideoList","helpModalState","onModalChange","videoOverlayStatus"];function k(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=ETBuilderBackend.i18n.help,N={isVisible:a.default.bool,onModalChange:a.default.func,modalMoving:a.default.bool};var A=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(O,t);var n,r,a,k=T(O);function O(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O),L(j(t=k.call(this,e)),"_checkActiveModals",(function(){return t.handleShortcutsTimeout=setTimeout(t._setHandleShortcuts)})),L(j(t),"_setHandleShortcuts",(function(){d.default.getActiveModule()?(_.default.appWindow().removeEventListener("keydown",t._handleShortcuts),_.default.topWindow().removeEventListener("keydown",t._handleShortcuts)):(_.default.appWindow().addEventListener("keydown",t._handleShortcuts),_.default.topWindow().addEventListener("keydown",t._handleShortcuts,{useCapture:!0}))})),t.displayName="ETBuilderHelp",t.isOSX=-1!==navigator.userAgent.indexOf("Mac OS X");var n=.5625*400,r=Object.keys(ETBuilderBackend.i18n.videos[t.props.currentVideoList]).length;return t.state={index:null,height:50*r+116+n,width:400,position:{x:t.props.position.x,y:t.props.position.y}},t._updateSpecificModal=t._updateSpecificModal.bind(j(t)),t._handleMouseEnter=t._handleMouseEnter.bind(j(t)),t._handleMouseLeave=t._handleMouseLeave.bind(j(t)),t._handleShortcuts=t._handleShortcuts.bind(j(t)),t}return n=O,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;setTimeout((function(){return e._updateSpecificModal({width:400,x:e.props.position.x,y:e.props.position.y})}),0)}},{key:"componentDidMount",value:function(){this._setHandleShortcuts(),d.default.addModuleActiveListener(this._checkActiveModals),_.default.topDocument().addEventListener("keydown",this._handleShortcuts)}},{key:"componentWillUnmount",value:function(){_.default.topDocument().removeEventListener("keydown",this._handleShortcuts)}},{key:"shouldComponentUpdate",value:function(e,t){return _.default.shouldComponentUpdate(this,e,t)}},{key:"_getHeaderButtons",value:function(){return[o.default.createElement(m.default,{primary:!0,buttonName:f.default.MODAL_HELP_BUTTON_CLOSE,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel},o.default.createElement(g.default,{icon:"close",color:"#FFFFFF"}))]}},{key:"_updateSpecificModal",value:function(e){p.default.setHelpModal({width:e.width,position:{x:e.x,y:e.y}}),this.setState({width:e.width})}},{key:"_handleMouseEnter",value:function(){this.setState({hover:!0})}},{key:"_handleMouseLeave",value:function(){this.setState({hover:!1})}},{key:"_handleShortcuts",value:function(t){var n=t.keyCode,r=t.metaKey;if((27===n||13===n&&!r)&&!e(":focus").length)return p.default.buttonClick({props:{buttonName:f.default.MODAL_HELP_BUTTON_CLOSE}}),!1}},{key:"renderKdb",value:function(e,t){var n=e;return"super"===n&&(n=this.isOSX?"cmd":"ctrl"),o.default.createElement("kbd",{key:"shortcut-item-kbd-".concat(t),className:"key-".concat(n)},n)}},{key:"renderShortcutSet",value:function(e,t){var n=this,r=[];return(0,i.default)(e,(function(a,l){(0,u.default)(a)?(r.push(n.renderKdb(a,"".concat(t,"-").concat(l))),l<e.length-1&&r.push(o.default.createElement("span",{className:"et-fb-shortcut-separator-combination",key:"shortcut-set-separator-combination".concat(t,"-").concat(l)},"+"))):(0,i.default)(a,(function(e,i){r.push(n.renderKdb(e,"".concat(t,"-").concat(l,"-").concat(i))),i<a.length-1&&r.push(o.default.createElement("span",{className:"et-fb-shortcut-separator-optional",key:"shortcut-set-separator-optional-".concat(t,"-").concat(l,"-").concat(i)},"/"))}))})),r}},{key:"renderShortcutSets",value:function(e,t){var n=this;return(0,l.default)(e)?this.renderShortcutSet(e,t):(0,c.default)(e).map((function(e,r){var a="".concat(t,"-").concat(r);return o.default.createElement("div",{className:"et-fb-shortcut-item-set",key:"shortcut-item-set-".concat(a)},n.renderShortcutSet(e,a))}))}},{key:"renderShortcutList",value:function(){var e=this,t=ETBuilderBackend.i18n.help.shortcuts;return(0,c.default)(t).map((function(t,n){return(0,c.default)(t).map((function(t,r){return(0,s.default)(t.title)?o.default.createElement("div",{className:"et-fb-shortcut-item",key:"shortcut-item-".concat(n,"-").concat(r)},o.default.createElement("div",{className:"et-fb-shortcut-kbd"},e.renderShortcutSets(t.kbd,"".concat(n,"-").concat(r))),o.default.createElement("div",{className:"et-fb-shortcut-desc"},o.default.createElement("p",null,t.desc))):o.default.createElement("h4",{className:"et-fb-shortcut-subtitle",key:"shortcut-item-".concat(n)},t.title)}))}))}},{key:"render",value:function(){var e=this.props,t=e.currentVideo,n=e.currentVideoList,r=e.helpModalState,a=e.onModalChange,i=e.videoOverlayStatus,l=E(e,w),u=this.state,s=u.height,c=u.hover,d=u.position,f=u.width,p=this.props.activeTab||0;return o.default.createElement(v.default,S({className:"et-fb-modal--help",headerButtons:this._getHeaderButtons(),label:R.modal.title,measurement:{height:s,width:400},animate:this.props.options.animate,onModalChange:a,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,updateSpecificModal:this._updateSpecificModal},l),o.default.createElement(y.default,{selectedIndex:p},o.default.createElement(y.ETBuilderTabList,null,o.default.createElement(y.ETBuilderTabItem,null,R.modal.tabs.gettingStarted),o.default.createElement(y.ETBuilderTabItem,null,R.modal.tabs.shortcut)),o.default.createElement(y.ETBuilderTabPanel,null,o.default.createElement("div",{className:"et-fb-form"},o.default.createElement(b.default,null,o.default.createElement(h.default,{currentVideo:t,currentVideoList:n,helpModalState:r,modalHover:c,modalPosition:d,modalWidth:f,videoOverlayStatus:i,modalMoving:this.props.modalMoving,animate:this.props.options.animate})))),o.default.createElement(y.ETBuilderTabPanel,null,o.default.createElement("div",{className:"et-fb-form"},o.default.createElement(b.default,null,this.renderShortcutList())))))}}])&&M(n.prototype,r),a&&M(n,a),O}(o.Component);A.propTypes=N;var B=A;t.default=B}).call(this,n(5))},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=L(n(0)),a=L(n(37)),i=L(n(6)),l=L(n(18)),u=L(n(147)),s=L(n(74)),c=L(n(1)),d=L(n(49)),f=L(n(9)),p=L(n(4)),h=L(n(30)),m=L(n(13)),g=L(n(14)),v=L(n(35)),y=L(n(379)),b=L(n(371)),_=L(n(71)),w=L(n(512)),k=L(n(8)),O=L(n(3)),C=L(n(27)),S=L(n(77)),E=L(n(78)),M=L(n(58)),P=L(n(956)),T=L(n(394)),x=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(957)),j=L(n(118));n(1748);L(n(985)),L(n(1441));function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}function L(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=ETBuilderBackend.i18n,H={animate:i.default.bool},G=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(L,t);var n,r,i,D=B(L);function L(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,L),(t=D.call(this,e)).displayName="ETBuilderABTesting";var n=["clicks","reads","bounces","engagements","conversions","shortcode_conversions"],r=ETBuilderBackend.abTesting.refresh_interval_duration,o=(0,w.default)(n,(0,y.default)(n.length,(function(){return r})));return t.tabList=n,t.subjects=k.default.abGetAllSubjects(),t.hasConversion=k.default.abHasConversion((0,c.default)(k.default.abGetAllGoals(),"type")),t.hasShortcodeConversions=O.default.isOn(k.default.getPageSetting("et_pb_enable_shortcode_tracking")),t.timeFilterList=["day","week","month","all"],t.renderedPieChart={},t.renderedLineChart={},t.onMountInit=!1,t.state={durations:o,tab:"clicks",loading:!1,reportData:R({},r,k.default.abGetReportData(r)),excludedSubjects:{}},t._onABTestingChange=t._onABTestingChange.bind(I(t)),t._onMotionRest=t._onMotionRest.bind(I(t)),t._handleTabSwitch=t._handleTabSwitch.bind(I(t)),t._handleFilterSubjectChange=t._handleFilterSubjectChange.bind(I(t)),t._handleFilterTimeChange=t._handleFilterTimeChange.bind(I(t)),t._onRefreshReport=t._onRefreshReport.bind(I(t)),t._onCloseReport=t._onCloseReport.bind(I(t)),t}return n=L,(r=[{key:"componentDidMount",value:function(){this.unmounted=!1,k.default.abAddChangeListener(this._onABTestingChange)}},{key:"componentDidUpdate",value:function(){this.initUI()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0,k.default.abRemoveChangeListener(this._onABTestingChange)}},{key:"initUI",value:function(){var t=e(a.default.findDOMNode(this)),n=this.getCurrentTab(),r=t.find("#et-fb-ab-testing-report-table-".concat(n));r.tablesorter(),r.trigger("update"),r.find(".headerSortUp").length||r.find(".headerSortDown").length||r.find("thead tr").first().find("th").first().trigger("click");var o=this.getPieChartData(),i=t.find("#et-fb-ab-testing-report-pie-".concat(n));(0,h.default)((0,c.default)(this,["renderedPieChart",n,"destroy"]))&&this.renderedPieChart[n].destroy(),!(0,p.default)(o)&&i.length&&(this.renderedPieChart[n]=new Chart(i.get(0).getContext("2d")).Pie(o,{animationEasing:"easeInCubic",animationSteps:50,tooltipTemplate:"<%if (label){%><%=label%><%}%>"}));var l=this.getLineChartData(),u=t.find("#et-fb-ab-testing-report-chart-".concat(n));(0,h.default)((0,c.default)(this,["renderedLineChart",n,"destroy"]))&&this.renderedLineChart[n].destroy(),(0,d.default)(l,"datasets")&&(0,p.default)(l.datasets)&&(l.datasets=[{}]),(0,g.default)(u.get(0))||(this.renderedLineChart[n]=new Chart(u.get(0).getContext("2d")).Line(l,{scaleFontSize:13,scaleFontColor:"#a1a9b1",scaleLabel:"<%=value%>%",scaleGridLineWidth:2,scaleLineWidth:2,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>%",multiTooltipTemplate:"<%= value %>%",datasetStrokeWidth:4,pointDotStrokeWidth:2,pointDotRadius:7}))}},{key:"_handleTabSwitch",value:function(e){var t=this,n=(0,u.default)((0,v.default)(this.tabList,(function(e){return!("conversions"===e&&!t.hasConversion)&&!("shortcode_conversions"===e&&!t.hasShortcodeConversions)&&e})));(0,d.default)(n,e)&&this.setState({tab:(0,c.default)(n,e)})}},{key:"_handleFilterSubjectChange",value:function(e){e.preventDefault();var t=(0,c.default)(this,"state.excludedSubjects",{}),n=e.target.getAttribute("data-tab-name"),r=e.target.getAttribute("data-subject-id");(0,d.default)(t,[n,r])?delete t[n][r]:(0,m.default)((0,c.default)(t,[n]))?t[n][r]=r:t[n]=R({},r,r),this.setState({excludedSubjects:t})}},{key:"_handleFilterTimeChange",value:function(e){e.preventDefault();var t=(0,c.default)(this,["state","tab"]),n=(0,c.default)(this,["state","durations"]),r=e.target.getAttribute("data-time");n[t]=r,this.setState({durations:n})}},{key:"_onRefreshReport",value:function(){var e=(0,c.default)(this,["state","durations",name]);C.default.abRefreshReport(e)}},{key:"_onCloseReport",value:function(){C.default.abCloseReport()}},{key:"_onABTestingChange",value:function(){var e=this.getCurrentDuration(),t=(0,c.default)(this,"state.reportData");t[e]=k.default.abGetReportData(e),this.unmounted||this.setState({reportData:t})}},{key:"_onMotionRest",value:function(){this.onMountInit||(this.initUI(),this.onMountInit=!0)}},{key:"isSubjectDisabled",value:function(e,t){var n=(0,_.default)((0,c.default)(this.state,["excludedSubjects",e],[]));return(0,d.default)(t,"attrs.ab_subject_id")&&(0,f.default)(n,(0,c.default)(t,"attrs.ab_subject_id"))}},{key:"getCurrentTab",value:function(){return(0,c.default)(this,"state.tab")}},{key:"getCurrentDuration",value:function(){return(0,c.default)(this,["state","durations",this.getCurrentTab()])}},{key:"getCurrentData",value:function(){return(0,c.default)(this,["state","reportData",(0,c.default)(this,["state","durations",this.getCurrentTab()])])}},{key:"getReportData",value:function(e){if((0,d.default)(this,["state","reportData",e]))return(0,c.default)(this,["state","reportData",e]);var t=(0,c.default)(this,"state.reportData");return t[e]=k.default.abGetReportData(e),this.setState({reportData:t}),k.default.abGetReportData(e)}},{key:"getRenderedSubjects",value:function(){var e=this,t=(0,c.default)(e,"state.tab");return(0,s.default)(this.subjects,(function(n){return!e.isSubjectDisabled(t,n)}))}},{key:"getLineChartData",value:function(){var e=this,t=e.getCurrentTab(),n=e.getReportData(e.getCurrentDuration()),r=(0,c.default)(n,"dates");return!(0,g.default)(r)&&{labels:r,datasets:(0,v.default)(this.getRenderedSubjects(),(function(e){var r=(0,c.default)(e,"attrs.ab_subject_id"),o=(0,c.default)(n,["subjects_totals","subject_".concat(r),"color"]),a=k.default.abGetSubjectLabel(e);return{data:(0,_.default)((0,c.default)(n,["subjects_analysis","subject_".concat(r),t])),fillColor:"transparent",label:a,pointColor:o,pointStrokeColor:"#fff",strokeColor:o,subject_id:r}}))}}},{key:"getPieChartData",value:function(){var e=(0,c.default)(this,["state","reportData",this.getCurrentDuration(),"subjects_totals"]),t=(0,c.default)(this,"state.tab");return(0,g.default)(e)?[]:(0,u.default)((0,v.default)(this.getRenderedSubjects(),(function(n){var r=(0,c.default)(n,"attrs.ab_subject_id"),o="subject_".concat(r);return{value:(0,c.default)(e,[o,t]),color:(0,c.default)(e,[o,"color"]),label:k.default.abGetSubjectLabel(n)}})))}},{key:"headerButtons",value:function(){return[o.default.createElement(S.default,{block:!0,buttonName:E.default.AB_CLOSE_REPORT,_onClick:this._onCloseReport},o.default.createElement(M.default,{icon:"close",color:"#FFFFFF"}))]}},{key:"renderSubjectFilter",value:function(e){var t=this;return(0,v.default)(this.subjects,(function(n,r){var a="tab-".concat(e,"-filter-subject-").concat(r),i=t.isSubjectDisabled(e,n),u=i?j.default.disabledSubject:k.default.abGetSubjectRank(n,"color");return o.default.createElement("li",{key:a},o.default.createElement("button",{"data-subject-id":(0,c.default)(n,"attrs.ab_subject_id"),"data-tab-name":e,style:{backgroundColor:u},className:(0,l.default)({"et-fb-ab-testing-filter-item-subject":!0,"et-fb-ab-testing-filter-item-subject--disabled":i}),onClick:t._handleFilterSubjectChange},k.default.abGetSubjectLabel(n)))}))}},{key:"renderTimeFilter",value:function(e){var t=this;return(0,v.default)(t.timeFilterList,(function(n,r){var a="tab-".concat(e,"-filter-time-").concat(r),i=n===(0,c.default)(t,["state","durations",e]);return o.default.createElement("li",{key:a},o.default.createElement("button",{className:(0,l.default)({"et-fb-ab-testing-filter-item-time":!0,"et-fb-ab-testing-filter-item-time--active":i}),"data-time":n,onClick:t._handleFilterTimeChange},(0,c.default)(V,["abTesting","reportFilterTime",n])))}))}},{key:"renderTabPanel",value:function(e){var t=this.getCurrentData(),n="isFetchingData"===t,r=!t||(0,p.default)((0,c.default)(t,"subjects_totals")),a=((0,c.default)(this,["state","durations",e]),o.default.createElement("canvas",{id:"et-fb-ab-testing-report-chart-".concat(e),className:"et-fb-ab-testing-report-chart"}));return o.default.createElement(x.ETBuilderTabPanel,{key:"abTesting-report-panel-".concat(e)},o.default.createElement("div",{className:"et-fb-form"},o.default.createElement(T.default,{isLoading:n},r?o.default.createElement("div",{className:"et-fb-ab-testing-no-report"},o.default.createElement("object",{type:"image/svg+xml",data:"".concat(ETBuilderBackend.images_uri,"/stats-no-data.svg")}),o.default.createElement("h2",null,(0,c.default)(V,"abTesting.no_report.title")),o.default.createElement("p",null,(0,c.default)(V,"abTesting.no_report.desc"))):o.default.createElement("div",null,o.default.createElement("ul",{className:"et-fb-ab-testing-filter--time"},this.renderTimeFilter(e),o.default.createElement("li",null,o.default.createElement(S.default,{className:"et-fb-ab-testing-report-refresh",buttonName:E.default.AB_REFRESH_REPORT,_onClick:this._onRefreshReport,tooltip:(0,c.default)(V,"abTesting.reportRefreshTooltip")},o.default.createElement(M.default,{icon:"undo",color:j.default.abTestingTimeFilter})))),o.default.createElement("ul",{className:"et-fb-ab-testing-filter--subjects"},this.renderSubjectFilter(e)),a,this.renderTable(e),this.renderPieChart(e)))))}},{key:"renderTable",value:function(e){var t=this,n=(0,c.default)(this,["state","durations",e]),r=k.default.abGetAnalysisFormula(e),a=(0,c.default)(r,"denominator"),i=(0,c.default)(r,"numerator"),l=(0,c.default)(V,["abTesting","view_stats_thead_titles",e]),u=0,s=0,d=0,f=(0,v.default)(this.getRenderedSubjects(),(function(r){var l=(0,c.default)(r,"attrs.ab_subject_id");if((0,g.default)(l))return!1;var f="subject_".concat(l),p=k.default.abGetSubjectLabel(r),h=(0,c.default)(t,["state","reportData",n,"subjects_totals",f,a],0),m=(0,c.default)(t,["state","reportData",n,"subjects_totals",f,i],0),v=(0,c.default)(t,["state","reportData",n,"subjects_totals",f,e],0);return u+=parseFloat(h),s+=parseFloat(m),d+=parseFloat(v),o.default.createElement("tr",{key:"abTesting-row-".concat(e,"-").concat(n,"-").concat(l)},o.default.createElement("td",null,l),o.default.createElement("td",null,p),o.default.createElement("td",null,h),o.default.createElement("td",null,m),o.default.createElement("td",null,"".concat(v,"%")))})),h=d/f.length,m="".concat(h).split(".").length>1?2:0,y=!(0,p.default)(this.getRenderedSubjects())&&o.default.createElement("tr",null,o.default.createElement("td",{colSpan:"2"},(0,c.default)(V,["abTesting","reportTotal"])),o.default.createElement("td",null,u),o.default.createElement("td",null,s),o.default.createElement("td",null,"".concat(h.toFixed(m),"%")));return o.default.createElement("div",{className:"et-fb-ab-testing-report-table--wrapper"},o.default.createElement("table",{id:"et-fb-ab-testing-report-table-".concat(e),className:"et-fb-ab-testing-report-table"},o.default.createElement("thead",null,o.default.createElement("tr",null,o.default.createElement("th",null,l[0]),o.default.createElement("th",null,l[1]),o.default.createElement("th",null,l[2]),o.default.createElement("th",null,l[3]),o.default.createElement("th",null,l[4]))),o.default.createElement("tbody",null,f),o.default.createElement("tfoot",null,y)))}},{key:"renderPieChart",value:function(e){var t=this,n=(0,v.default)(this.subjects,(function(n,r){var a=t.isSubjectDisabled(t.state.tab,n),i=a?"#E1E4E9":k.default.abGetSubjectRank(n,"color"),l=a?{color:"#E1E4E9"}:{};return o.default.createElement("li",{key:"".concat(e,"-legend-").concat(r)},o.default.createElement("span",{style:{backgroundColor:i}}),o.default.createElement("a",{href:"#subject",style:l,"data-subject-id":(0,c.default)(n,"attrs.ab_subject_id"),"data-tab-name":e,onClick:t._handleFilterSubjectChange},k.default.abGetSubjectLabel(n)))})),r=(0,p.default)((0,c.default)(this.getLineChartData(),"datasets"))?o.default.createElement("div",{className:"et-fb-ab-testing-report-chart"}):o.default.createElement("canvas",{id:"et-fb-ab-testing-report-pie-".concat(e),className:"et-fb-ab-testing-report-pie",width:"200",height:"200"});return o.default.createElement("div",{className:"et-fb-ab-testing-report-pie--wrapper"},r,o.default.createElement("ul",{className:"et-fb-ab-testing-report-pie--legend"},n))}},{key:"render",value:function(){var e=this,t=this,n=(0,v.default)(this.tabList,(function(e){return!("conversions"===e&&!t.hasConversion)&&!("shortcode_conversions"===e&&!t.hasShortcodeConversions)&&o.default.createElement(x.ETBuilderTabItem,{key:"abTesting-report-nav-".concat(e)},(0,c.default)(V,["abTesting","reportTabNavs",e]))})),r=(0,v.default)(this.tabList,(function(n){return!("conversions"===n&&!t.hasConversion)&&!("shortcode_conversions"===n&&!t.hasShortcodeConversions)&&e.renderTabPanel(n)}));return o.default.createElement(P.default,{fullscreen:!0,headerButtons:this.headerButtons(),footerButtons:[o.default.createElement(S.default,{block:!0,info:!0,buttonName:E.default.BUTTON_AB_DISABLE},(0,b.default)((0,c.default)(V,"abTesting.reportEndTestButton")))],label:(0,c.default)(V,"abTesting.reportTitle"),onRest:this._onMotionRest,animate:this.props.animate},o.default.createElement(x.default,{selectedIndex:0,onSelect:this._handleTabSwitch},o.default.createElement(x.ETBuilderTabList,{disableScroll:!1},n),r))}}])&&N(n.prototype,r),i&&N(n,i),L}(o.default.Component);G.propTypes=H,G.defaultProps={animate:!0};var U=G;t.default=U}).call(this,n(5))},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=C(n(0));n(1762);var a=C(n(14)),i=C(n(1)),l=C(n(49)),u=C(n(166)),s=C(n(41)),c=C(n(4)),d=C(n(539)),f=C(n(152)),p=C(n(258)),h=C(n(17)),m=C(n(74)),g=C(n(79)),v=C(n(9)),y=C(n(180)),b=C(n(158)),_=C(n(1440)),w=C(n(8)),k=C(n(27)),O=C(n(3));function C(e){return e&&e.__esModule?e:{default:e}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=O.default.$appWindow("body"),L=O.default.$topWindow("body"),R=O.default.condition("is_bfb"),N=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(x,t);var n,r,C,P=M(x);function x(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),j(T(t=P.call(this)),"getElementOffset",(function(e){var t={top:100,left:0,usePrevElementPosition:!1};switch(e){case"loadLayout":case"openHistory":case"pageSettings":t={left:-50,top:R?130:80};break;case"selectLayoutPack":t={left:850,top:-330,usePrevElementPosition:!0};break;case"loadLayoutItem":t={left:0,top:150,usePrevElementPosition:!0};break;case"addSection":t={left:-240,top:100};break;case"selectSectionType":t={left:600,top:150};break;case"selectModule":t={left:600,top:19};break;case"selectRow":t={left:-500,top:163};break;case"configureModule":t={left:590,top:-700};break;case"saveModule":t={left:630,top:-878};break;case"duplicateModule":t={left:410,top:247};break;case"rightClickCopy":t={left:440,top:255};break;case"moveModule":t={left:810,top:260};break;case"rightClickPaste":t={left:-300,top:307};break;case"rowOptions":t={left:367,top:250};break;case"editRow":t={left:590,top:-710};break;case"saveRow":t={left:320,top:-879};break;case"tabletPreview":t={left:50,top:75};break;case"desktopPreview":t={left:100,top:75};break;case"editHistory":t={left:320,top:-879};break;case"savePage":t={left:-125,top:95}}return t})),j(T(t),"disableFullscreenMenu",(function(){e(".et_header_style_fullscreen .et_slide_in_menu_container").removeClass("et_pb_fullscreen_menu_opened"),D.removeClass("et_pb_fullscreen_menu_active")})),j(T(t),"disableSlideMenu",(function(){var t=e(".et_header_style_slide .et_slide_in_menu_container");return t.hasClass("et_pb_slide_menu_opened")?t.removeClass("et_pb_slide_menu_opened"):t.addClass("et_pb_slide_menu_opened"),!1})),j(T(t),"isFalse",(function(e){return!1===e})),t.productTourLocalization=ETBuilderBackend.i18n.productTourText;var n={__html:t.productTourLocalization.start.description},r=o.default.createElement("div",{className:"et-fb-product-tour-text",dangerouslySetInnerHTML:n});if(t.state={isActive:!0,modalContent:r,modalTitle:t.productTourLocalization.start.title,endButtonText:t.productTourLocalization.start.endButtonText,skipButtonText:t.productTourLocalization.start.skipButtonText,tourElement:"start",autoLoadDemo:!1,modalPosition:{top:1e3,left:1e3,element:!1}},t.stepsSequence=t.getAvailableTourItems(),t.appliedModalOffsets={},t.skipToArray={start:"loadLayout",moveModule:"rightClickCopy",rightClickCopy:"rowOptions",rightClickPaste:"rowOptions",rowOptions:"pageSettings",tabletPreview:"desktopPreview",desktopPreview:"openHistory",openHistory:"savePage",savePage:"finish"},t.absolutelyPositionedElements=["addSection","selectModule","selectSectionType","selectRow","rowOptions","rightClickPaste","rightClickCopy","moveModule","duplicateModule"],R){t.absolutelyPositionedElements=(0,b.default)(t.absolutelyPositionedElements,["loadLayout","tabletPreview","desktopPreview","openHistory","savePage"]),t.skipToArray.rowOptions="tabletPreview"}return t.onClose=t.onClose.bind(T(t)),t.nextTip=t.nextTip.bind(T(t)),t.nextTourContent=t.nextTourContent.bind(T(t)),t.skipTip=t.skipTip.bind(T(t)),t.isTourButtonClicked=t.isTourButtonClicked.bind(T(t)),t.getActiveElementPosition=t.getActiveElementPosition.bind(T(t)),t.getAvailableTourItems=t.getAvailableTourItems.bind(T(t)),t.autoloadLayout=t.autoloadLayout.bind(T(t)),t.setAfterMoveStep=t.setAfterMoveStep.bind(T(t)),t.maybeScroll=t.maybeScroll.bind(T(t)),t.maybeAddScrollbar=t.maybeAddScrollbar.bind(T(t)),t}return n=x,(r=[{key:"componentDidMount",value:function(){var t=this,n=this;D.add(L).on("click mouseup mousedown","*",n.isTourButtonClicked),D.add(L).on("mouseup click",".et-fb-product-tour-element",(function(t){"mouseup"===t.type&&"selectRow"!==n.state.tourElement||e(this).hasClass("et_fb_move_module_handler")||e(this).hasClass("et-fb-product-tour-element-text")||setTimeout(n.nextTip,0)})),D.add(L).on("keyup",".et-fb-product-tour-element-text",(function(){setTimeout(n.nextTip,0)})),D.add(L).on("mouseup",".et-fb-product-tour-secondary-element",(function(){k.default.setActiveTourElement(n.state.tourElement,!0)})),D.add(L).on("mousedown",".et_fb_move_module_handler.et-fb-product-tour-element",(function(){n.nextTip()})),D.add(L).on("et_fb_product_tour_element_clicked",(function(){return setTimeout(t.nextTip,0)})),O.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app")).append('<div class="et-core-modal-overlay et-fb-product-tour-overlay et-core-active"></div>'),e(".et_search_form_container").length>0&&e(".et_search_form_container").addClass("et_pb_is_animating"),e(".et_header_style_slide .et_slide_in_menu_container").length>0&&(e(".et_header_style_slide .et_slide_in_menu_container").addClass("et_pb_slide_menu_opened"),e("#main-header").on("click",".et_toggle_slide_menu",n.disableSlideMenu)),e(".et_header_style_fullscreen .et_slide_in_menu_container").length>0&&e("#page-container").on("click",".et_toggle_fullscreen_menu",n.disableFullscreenMenu),w.default.addProductTourMoveFinishedListener(this.setAfterMoveStep),L.on("click",".et-fb-tour-video-overlay",(function(){var t=e(this),n=t.data("video");t.replaceWith('<iframe width="200" height="150" src="'.concat(n,'" frameborder="0" allowfullscreen></iframe>'))})),L.on("mousedown, click, mouseup","#publishing-action.et-fb-product-tour-element",(function(e){return e.preventDefault(),!1})),this.shortThrottleReset=(0,y.default)(this.maybeAddScrollbar,100),O.default.appWindow().addEventListener("resize",this.shortThrottleReset),this.maybeAddScrollbar()}},{key:"componentWillUnmount",value:function(){w.default.removeProductTourMoveFinishedListener(this.setAfterMoveStep),O.default.appWindow().removeEventListener("resize",this.shortThrottleReset),D.off("click mouseup mousedown","*",this.isTourButtonClicked),D.off("et_fb_product_tour_element_clicked")}},{key:"onClose",value:function(){k.default.endProductTour();var t=this;O.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app")).find(".et-fb-product-tour-overlay").remove(),e(".et_search_form_container").length>0&&e(".et_search_form_container").removeClass("et_pb_is_animating"),e(".et_header_style_slide .et_slide_in_menu_container").length>0&&(e(".et_header_style_slide .et_slide_in_menu_container").removeClass("et_pb_slide_menu_opened"),D.removeClass("et_pb_slide_menu_active"),e("#main-header").off("click",".et_toggle_slide_menu",t.disableSlideMenu)),e(".et_header_style_fullscreen .et_slide_in_menu_container").length>0&&e("#page-container").off("click",".et_toggle_fullscreen_menu",t.disableFullscreenMenu),this.setState({isActive:!1}),D.off("click mouseup mousedown ondragstart","*",t.isTourButtonClicked)}},{key:"getActiveElementPosition",value:function(e){var t=this.state.modalPosition,n=0===O.default.$appWindow(".et-fb-product-tour-element").length,r=n?O.default.$topWindow(".et-fb-product-tour-element"):O.default.$appWindow(".et-fb-product-tour-element"),o=t,l=this.getElementOffset(e),u=R?O.default.$topWindow("#et-bfb-app-frame").offset():0,s=n&&!R?O.default.$appWindow().scrollTop():0;if(!l.usePrevElementPosition&&r.length>0&&(o=r.offset(),r.closest(".et-fb-page-settings-bar").length>0))if(R)r.closest(".et-fb-page-settings-bar__column--left").length>0&&(o.top-=u.top,o.left-=200);else{var c=r.closest(".et-fb-page-settings-bar");o.top=c.position().top-100}(0,a.default)(o)?this.setState({isActive:!0}):(o.top+=s,(0,i.default)(this.appliedModalOffsets,e)?o=this.appliedModalOffsets[e]:(o.element=!1,o.top+=(0,d.default)((0,i.default)(l,"top",0)),o.left+=(0,d.default)((0,i.default)(l,"left",0)),this.appliedModalOffsets[e]=o),R&&n&&(r.closest(".et-fb-modal__module-settings").length>0||r.closest(".et-fb-tooltip-modal").length>0||r.closest(".et-fb-right-click-menu").length>0)&&(o.top-=(0,d.default)(u.top)+200),this.setState({modalPosition:o,isActive:!0}))}},{key:"getAvailableTourItems",value:function(){var e=!1,t=!1,n=!1,r="et_pb_blurb",o=w.default.isAllowedAction("divi_library")&&w.default.isAllowedAction("load_layout"),a=w.default.isAllowedAction("add_module"),i=w.default.isAllowedAction("edit_module"),l=w.default.isAllowedAction("move_module"),u=w.default.isAllowedAction("general_settings"),s=w.default.isAllowedAction("advanced_settings"),d=w.default.isAllowedAction("custom_css_settings");if(w.default.isAllowedAction(r))e=!0,w.default.setProductTourModuleName(r);else{var f,y=(0,m.default)(ETBuilderBackend.modules,{is_parent:"on"});f=(0,g.default)(y,(function(e){return!(0,v.default)(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"],e.label)&&w.default.isAllowedAction(e.label)})),(0,c.default)(f)||(w.default.setProductTourModuleName(f.label),e=!0)}(u||s||d)&&(t=!(!w.default.isAllowedAction("general_settings")&&!w.default.isAllowedAction("custom_css_settings")),n=!0);var b={start:!0,loadLayout:o,selectLayoutPack:o,loadLayoutItem:o,addSection:e&&a,selectSectionType:e&&a,selectRow:e&&a,selectModule:e&&a,configureModule:e&&a&&t,saveModule:e&&a,duplicateModule:e&&a,moveModule:l,rightClickCopy:a,rightClickPaste:a,rowOptions:i&&n,editRow:i&&n,saveRow:i&&n,pageSettings:!O.default.condition("is_bfb"),tabletPreview:!0,desktopPreview:!0,openHistory:!0,editHistory:!0,savePage:!0,finish:!0};return(0,h.default)((0,p.default)(b,this.isFalse))}},{key:"setAfterMoveStep",value:function(){var e=(0,i.default)(this.stepsSequence,(0,f.default)(this.stepsSequence,"moveModule")+1,"");w.default.setProductTourElementReady(e)}},{key:"autoloadLayout",value:function(e){if((this.state.autoLoadDemo||e)&&!(0,c.default)(results)){var t=results.pop();this.setState({autoLoadDemo:!1}),t[0].savedShortcode=t[0].shortcode,w.default.loadSavedLayoutFromComponent(t[0],!0),setTimeout((function(){w.default.replacePageContent(),w.default.setProductTourElementReady("predefined_layouts"),O.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app")).find(".et-fb-product-tour-overlay").remove()}),1e3)}}},{key:"isTourButtonClicked",value:function(t){var n=this.state.tourElement;if("mouseup"===t.type&&"moveModule"===n)return!0;var r=e(t.target);return r.closest(".et-builder-bfb-welcome-modal, .et-theme-builder-no-post-content").length>0||!(0===r.closest(".et-fb-product-tour-element, .et-fb-product-tour-secondary-element, .et-fb-tooltip--product-tour, .et-fb-modal__module-settings, .et-fb-modal-history, .et-fb-tour-video-overlay, #wpadminbar, .et-fb-product-tour-secondary-element-hidden").length||r.closest(".et-fb-modal__footer, .et-fb-modal__badge").length>0&&0===r.closest(".et-fb-product-tour-element, .et-fb-product-tour-secondary-element, .et-fb-product-tour-secondary-element-hidden").length)||(t.preventDefault(),t.stopPropagation(),!1)}},{key:"maybeAddScrollbar",value:function(){var t=this.state.tourElement,n=e(".et-fb-tooltip--product-tour--centered"),r=O.default.$appWindow().height();this.getActiveElementPosition(t),800>r?n.addClass("et-core-modal-enabled-scrollbar"):n.removeClass("et-core-modal-enabled-scrollbar")}},{key:"maybeScroll",value:function(){var e=this.state.tourElement,t=R?"top":"app";if("selectModule"===e&&O.default.$topWindow(".et-fb-settings-options-wrap").animate({scrollTop:150},400),"editRow"===e&&O.default.$topWindow(".et-fb-tabs__panel--general").animate({scrollTop:452},400),(0,v.default)(this.absolutelyPositionedElements,e)){var n=O.default.$topWindow(".et-fb-tooltip--product-tour").length>0?O.default.$topWindow(".et-fb-tooltip--product-tour"):O.default.$appWindow(".et-fb-tooltip--product-tour");if(n.length>0){var r=O.default.$topWindow().height(),o=("top"===t?O.default.$topWindow().scrollTop():O.default.$appWindow().scrollTop())+r,a=n.innerHeight(),i=n.offset().top,l=R?90:0,u=0===O.default.$appWindow(".et-fb-product-tour-element").length?O.default.$topWindow(".et-fb-product-tour-element"):O.default.$appWindow(".et-fb-product-tour-element"),s=R&&u.closest(".et-fb-page-settings-bar").length>0;if(o<i+a+l||s){var c=i-a/2-l;("top"===t?O.default.$topWindow("html, body"):O.default.$appWindow("html, body")).animate({scrollTop:c<0?0:c},500,"swing")}}}else this.maybeAddScrollbar()}},{key:"nextTip",value:function(e){var t=this,n=this.state.tourElement,r=(0,i.default)(this.stepsSequence,(0,f.default)(this.stepsSequence,n)+1,"");if(e)if((0,l.default)(this.skipToArray,n)){var o=this.skipToArray[n];if(-1===(0,f.default)(this.stepsSequence,o))for(;-1===(0,f.default)(this.stepsSequence,o);)o=(0,l.default)(this.skipToArray,o)?this.skipToArray[o]:r;r=o}else if((0,v.default)(["selectLayoutPack","loadLayoutItem"],n)){var a="loadLayoutItem"===n?"button:last-child":"";O.default.$appWindow().trigger("et-fb-product-tour-skip",a)}else(0===O.default.$appWindow(".et-fb-product-tour-element").length?O.default.$topWindow(".et-fb-product-tour-element"):O.default.$appWindow(".et-fb-product-tour-element")).trigger("click"),"pageSettings"===n&&k.default.settingsBarToggleStatus("active");var u=!1,s=!1,c=[];switch("loadLayoutItem"===n&&k.default.settingsBarToggleStatus("inactive"),r){case"loadLayout":O.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app")).find(".et-fb-product-tour-overlay").remove(),k.default.settingsBarToggleStatus("active");break;case"selectLayoutPack":case"loadLayoutItem":u=!0,c.push(r);break;case"moveModule":case"rowOptions":case"rightClickCopy":"not_set"===w.default.getProductTourModule()&&w.default.setProductTourModule(),"moveModule"!==n||e||c.push(r);break;case"savePage":R&&O.default.$topWindow("#publishing-action").addClass("et-fb-product-tour-element");break;case"finish":R&&O.default.$topWindow("#publishing-action").removeClass("et-fb-product-tour-element"),O.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app")).append('<div class="et-core-modal-overlay et-fb-product-tour-overlay et-core-active"></div>')}if((0,v.default)(["moveModule","loadLayoutItem"],n)&&(u=!0,s=!0,"loadLayoutItem"===n&&c.push("addSection")),"start"===n&&"loadLayout"!==r&&(c.push("predefined_layouts"),u=!0,"pageSettings"===r&&(s=!0),this.setState({autoLoadDemo:!0}),w.default.activateGlobalPreloader(),w.default.emitPreloaderInProcess(),this.autoloadLayout(!0)),this.setState({isActive:!1}),s||setTimeout((function(){k.default.setActiveTourElement(r)}),0),u)this.waitProductTourElement(c,r,s);else{var d=(0,v.default)(["rightClickCopy","rightClickPaste"],n)?800:500;setTimeout((function(){t.nextTourContent(r)}),d)}}},{key:"nextTourContent",value:function(e){var t=this,n=(0,i.default)(this.productTourLocalization,[e,"endButtonText"],this.productTourLocalization.endButtonTextDefault),r=(0,i.default)(this.productTourLocalization,[e,"skipButtonText"],this.productTourLocalization.skipButtonTextDefault),a=(0,i.default)(this.productTourLocalization,[e,"title"],""),l=(0,i.default)(this.productTourLocalization,[e,"description"],!1);setTimeout((function(){t.getActiveElementPosition(e)}),200);var u={__html:l};l=o.default.createElement("div",{className:"et-fb-product-tour-text",dangerouslySetInnerHTML:u}),this.setState({tourElement:e,modalContent:l,modalTitle:a,endButtonText:n,skipButtonText:r}),setTimeout(this.maybeScroll,1e3)}},{key:"skipTip",value:function(){this.nextTip(!0)}},{key:"waitProductTourElement",value:function(e,t,n){var r=this,o=w.default.getProductTourElementReady();if((0,s.default)(e,(0,u.default)(o,e)))return n&&k.default.setActiveTourElement(t),void this.nextTourContent(t);setTimeout((function(){r.waitProductTourElement(e,t,n)}),1e3)}},{key:"render",value:function(){var e=this.state,t=e.endButtonText,n=e.isActive,r=e.modalContent,a=e.modalTitle,i=e.modalPosition,l=e.skipButtonText,u=e.tourElement;if(!n)return!1;var s="finish"===u?"":o.default.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-dont-restore et-core-modal-action-secondary",onMouseUp:this.skipTip},l),c=o.default.createElement("div",{className:"et-fb-tour-buttons"},o.default.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-dont-restore",onClick:this.onClose},t),s),d=!(0,v.default)(this.absolutelyPositionedElements,u),f={"et-fb-tooltip--no-arrow":!0,"et-fb-tooltip--product-tour":!0,"et-fb-tooltip--product-tour--centered":"start"===u||"finish"===u,"et-fb-tooltip--product-tour--finish":"finish"===u},p="start"===u||"finish"===u,h=0===O.default.$appWindow(".et-fb-product-tour-element").length;return o.default.createElement(_.default,{active:n,actionType:"custom_content",tooltipTitle:a,_closeFunction:this.onClose,classNames:f,modalPosition:i,forceFixedPosition:d,modalWidth:340,enableContextMenu:!0,ignorePosition:p,movable:!p,buttons:c,renderInsideApp:!h&&!R},o.default.createElement("div",null,r))}}])&&S(n.prototype,r),C&&S(n,C),x}(o.default.Component);t.default=N}).call(this,n(5))},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=x(n(0)),a=x(n(6));x(n(18));n(1763);var i=x(n(4)),l=x(n(1)),u=x(n(35)),s=x(n(14)),c=x(n(9)),d=x(n(147)),f=x(n(181)),p=x(n(10)),h=x(n(180)),m=x(n(447)),g=x(n(396)),v=(x(n(71)),x(n(378))),y=x(n(148)),b=x(n(118)),_=x(n(394)),w=x(n(58)),k=x(n(1459)),O=x(n(728)),C=x(n(1440)),S=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(756)),E=x(n(8)),M=(x(n(29)),x(n(27))),P=x(n(3));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function x(e){return e&&e.__esModule?e:{default:e}}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B={active:a.default.bool},F=P.default.$topWindow("body"),I=ETBuilderBackend.i18n.fonts,W=ETBuilderBackend.allFontWeights,V=ETBuilderBackend.allFontFormats,H=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(x,t);var n,r,a,T=L(x);function x(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),(e=T.call(this)).state={fontFilesData:{},fontError:"",errorElements:[],fontName:"",fontProcessing:!1,selectedFontWeightsAll:"on",selectedFontWeights:"",activeDescription:null,hoveredGroup:null},e._onFileUpload=e._onFileUpload.bind(N(e)),e.onUpload=e.onUpload.bind(N(e)),e.onDelete=e.onDelete.bind(N(e)),e._onFontNameInput=e._onFontNameInput.bind(N(e)),e.processFont=e.processFont.bind(N(e)),e.updateFontSettings=e.updateFontSettings.bind(N(e)),e.fontDataValid=e.fontDataValid.bind(N(e)),e.maybeAddScrollbar=e.maybeAddScrollbar.bind(N(e)),e.generateFilesListPreview=e.generateFilesListPreview.bind(N(e)),e.removeFontFile=e.removeFontFile.bind(N(e)),e._onClickHelp=e._onClickHelp.bind(N(e)),e._isDescriptionVisible=e._isDescriptionVisible.bind(N(e)),e._isHoveredGroup=e._isHoveredGroup.bind(N(e)),e}return n=x,(r=[{key:"componentDidMount",value:function(){var e='<div class="et-core-modal-overlay et-fb-font-upload-overlay et-core-active"></div>';P.default.isLB()?F.find(".et-block-builder-modal").append(e):P.default.isTB()?F.find(".et-tb-branded-modal").append(e):P.default.isFB()?F.find("#et-fb-app").append(e):F.append(e),F.addClass("et-fb-global-scroll-disabled et-fb-has-font-upload-overlay"),this.shortThrottleReset=(0,h.default)(this.maybeAddScrollbar,100),P.default.appWindow().addEventListener("resize",this.shortThrottleReset),this.maybeAddScrollbar();var t=E.default.getDroploaderPayloadFont();t&&this.setState({fontFilesData:t.fontFilesData,fontName:t.fontName})}},{key:"componentWillUnmount",value:function(){F.removeClass("et-fb-global-scroll-disabled et-fb-has-font-upload-overlay"),P.default.appWindow().removeEventListener("resize",this.shortThrottleReset)}},{key:"_onClickHelp",value:function(e){var t=this.state.activeDescription===e?null:e;this.setState({activeDescription:t})}},{key:"_isDescriptionVisible",value:function(e){return this.state.activeDescription===e}},{key:"_isHoveredGroup",value:function(e){return this.state.hoveredGroup===e}},{key:"maybeAddScrollbar",value:function(){var e=P.default.$topWindow(".et-fb-font-upload-modal");800>P.default.$topWindow().height()?e.addClass("et-core-modal-enabled-scrollbar"):e.removeClass("et-core-modal-enabled-scrollbar")}},{key:"fontDataValid",value:function(e){var t=[],n="";return"add"!==e||(""===this.state.fontName&&t.push("fontName"),(0,i.default)(this.state.fontFilesData)&&(n=I.noFilesError,t.push("fontFile")),"on"!==this.state.selectedFontWeightsAll&&-1===this.state.selectedFontWeights.indexOf("on")&&t.push("fontWeight"),(0,i.default)(t)?(this.setState({errorElements:[],fontError:""}),!0):(this.setState({errorElements:t,fontProcessing:!1,fontError:n}),!1))}},{key:"_onFontNameInput",value:function(e,t){var n=(0,g.default)(this.state.errorElements,(function(e){return"fontName"===e}));this.setState({fontName:t,errorElements:n})}},{key:"onUpload",value:function(e){e.preventDefault(),this.state.fontProcessing||this.processFont("add")}},{key:"onDelete",value:function(){this.state.fontProcessing||this.processFont("remove",this.props.fontID)}},{key:"getFontWeights",value:function(){if("on"===this.state.selectedFontWeightsAll)return"all";var e=this.state.selectedFontWeights.split("|"),t=0;return(0,d.default)((0,u.default)(W,(function(n,r){return t++,"on"===e[t-1]&&r}))).join(",")}},{key:"processFont",value:function(t,n){var r=this,o=(0,s.default)(n)?r.state.fontName:n,a={};if(r.fontDataValid(t)){r.setState({fontError:"",errorElements:[],fontProcessing:!0}),"add"===t&&(a=JSON.stringify({font_weights:r.getFontWeights(),generic_family:"sans-serif"}));var u=new FormData,c={action:"et_pb_process_custom_font",et_pb_font_action:t,et_fb_upload_font_nonce:ETBuilderBackend.nonces.uploadFontNonce,et_pb_font_name:o,et_pb_font_settings:a};(0,p.default)(r.state.fontFilesData,(function(e,t){c["et_pb_font_file_".concat(t)]=e.file})),e.each(c,(function(e,t){u.append(e,t)})),e.ajax({type:"POST",url:ETBuilderBackend.ajaxUrl,contentType:!1,processData:!1,data:u,success:function(e){var n=JSON.parse(e);if((0,i.default)(n.error)){if(ETBuilderBackend.customFonts=(0,l.default)(n,"updated_fonts",ETBuilderBackend.customFonts),r.setState({fontError:"",fontProcessing:!1}),"add"===t&&""!==r.props.callback){var o=(0,l.default)(n,"uploaded_font","");r.props.callback(o)}r.onClose()}else r.setState({fontError:n.error,fontProcessing:!1})}})}}},{key:"getFontName",value:function(e){return(0,l.default)(ETBuilderBackend.customFonts,[e,"font_name"],e)}},{key:"onClose",value:function(){M.default.setFontUploaderStatus("disabled"),P.default.$topWindow(".et-fb-font-upload-overlay").remove()}},{key:"_onFileUpload",value:function(e){var t=e.target.files,n=this.state.fontFilesData;if(!((0,y.default)(t)<1))if((0,p.default)(t,(function(e){var t=(0,v.default)((0,l.default)(e,"name",""));(0,p.default)(V,(function(r){".".concat(r),(0,f.default)(t,r)&&(n[r]={fileName:t,file:e})}))})),(0,i.default)(n)){var r="".concat(I.fileError,". ").concat(I.supportedFiles,": ").concat(V.join(", "));this.setState({fontError:r})}else this.setState({fontFilesData:n,fontError:""})}},{key:"updateFontSettings",value:function(e,t){switch(e){case"et-font-uploader-weights-all":this.setState({selectedFontWeightsAll:t});break;case"et-font-uploader-weights-select":this.setState({selectedFontWeights:t})}}},{key:"removeFontFile",value:function(t){var n=e(t.target).closest(".et-fb-font-files-list-item");if(!(n.length<1)){var r=n.data("file_ext"),o=this.state.fontFilesData;(0,m.default)(o,r),this.setState({fontFilesData:o})}}},{key:"generateFilesListPreview",value:function(){var e=this;if((0,i.default)(this.state.fontFilesData))return!1;var t=(0,u.default)(this.state.fontFilesData,(function(t,n){return o.default.createElement("div",{className:"et-fb-font-files-list-item","data-file_ext":n,key:n},o.default.createElement("span",{className:"et-fb-font-files-list-item-remove",onClick:e.removeFontFile},o.default.createElement(w.default,{icon:"delete",color:b.default.danger})),t.fileName)}));return o.default.createElement("div",{className:"et-fb-font-files-list"},o.default.createElement("label",{className:"et-fb-form__label"},o.default.createElement("span",{className:"et-fb-form__label-text"},I.selectedFiles,":")),t)}},{key:"getWeightCheckboxValues",value:function(){var e=[];return(0,p.default)(W,(function(t,n){var r="".concat(t," ").concat(n);e.push({value:t,label:r})})),e}},{key:"render",value:function(){var e={"et-fb-font-upload-modal":!0,"et-fb-font-upload-modal--delete":"delete"===this.props.action,"et-fb-modal-allow-scroll":!0},t=""!==this.state.fontError?o.default.createElement("div",{className:"et-fb-font-upload-error"},this.state.fontError):"",n="";if(this.state.fontProcessing)n=o.default.createElement(_.default,{isLoading:!0});else if("delete"===this.props.action){var r=o.default.createElement("div",{className:"et_pb_prompt_buttons et-fb-font-delete-confirmation"},o.default.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-dont-restore et-core-modal-action-secondary",onClick:this.onClose},I.cancel),o.default.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-restore",onClick:this.onDelete},I.delete));n=o.default.createElement("div",null,o.default.createElement("div",{className:"et-core-modal-content"},"".concat(I.deleteConfirm,' "').concat(this.getFontName(this.props.fontID),'"'),"?"),r)}else{var a="on"!==this.state.selectedFontWeightsAll?o.default.createElement(k.default,{options:this.getWeightCheckboxValues(),name:"et-font-uploader-weights-select",_onChange:this.updateFontSettings,value:this.state.selectedFontWeights}):"",i=o.default.createElement("a",{href:"#",className:"et-core-modal-action et-core-modal-action-dont-restore",onClick:this.onUpload},I.upload);n=o.default.createElement("div",null,o.default.createElement("div",{className:"et-core-modal-content et-fb-allow-mouse-wheel"},o.default.createElement("div",{className:"et-core-modal-content-inner et-fb-allow-mouse-wheel-form"},t,o.default.createElement("label",{className:"et-fb-form__label"},o.default.createElement("span",{className:"et-fb-form__label-text"},I.fontNameLabel)),o.default.createElement(O.default,{type:"text",value:this.state.fontName,name:"userFontName",_onChange:this._onFontNameInput,className:!!(0,c.default)(this.state.errorElements,"fontName")&&"et-fb-font-error-element",additional_attrs:{placeholder:I.fontName}}),o.default.createElement("div",{className:"et-fb-upload-file-container"},o.default.createElement("span",{className:"et-core-portability-import-placeholder"},I.noFile),o.default.createElement("button",{className:"et-fb-button et-fb-button--upload-font et-fb-button--inverse et-fb-settings-button--additional-button"},I.chooseFile),o.default.createElement("input",{type:"file",className:"et-fb-import-file",onChange:this._onFileUpload,accept:".ttf, .otf, .eot, .woff2, .woff",multiple:!0}),o.default.createElement("p",{className:"et-font-uploader-hint"},I.supportedFiles,":"," ",V.join(", "))),this.generateFilesListPreview(),o.default.createElement(S.ETBuilderFormLabel,{name:"et-font-uploader-weight",activeHelp:this._isDescriptionVisible("et-font-uploader-weight"),hoveredGroup:!0,key:"et-font-uploader-weight-label",onClickHelp:this._onClickHelp},I.weightsSupport),o.default.createElement(S.ETBuilderFormDescription,{active:this._isDescriptionVisible("et-font-uploader-weight"),key:"et-font-uploader-weight-desc"},I.weightsHelp),o.default.createElement("div",{className:(0,c.default)(this.state.errorElements,"fontWeight")?"et-fb-font-error-element":""},o.default.createElement(k.default,{options:[I.all],_onChange:this.updateFontSettings,name:"et-font-uploader-weights-all",value:this.state.selectedFontWeightsAll}),a))),i)}var l="delete"===this.props.action?I.delete:I.upload,u=!!P.default.condition("is_bfb")&&P.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app"));return o.default.createElement(C.default,{active:!0,actionType:"custom_content",tooltipTitle:"".concat(l," ").concat(I.font),_closeFunction:this.onClose,classNames:e,ignorePosition:!0,enableContextMenu:!0,movable:!1,tooltipModalContainer:u},n)}}])&&j(n.prototype,r),a&&j(n,a),x}(o.default.Component);H.propTypes=B,H.defaultProps={active:!1};var G=H;t.default=G}).call(this,n(5))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
e.exports=function(){"use strict";var e=ET_Builder.Frames.top.document,t=navigator.userAgent,n=navigator.platform,r=/gecko\/\d/i.test(t),o=/MSIE \d/.test(t),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),i=/Edge\/(\d+)/.exec(t),l=o||a||i,u=l&&(o?e.documentMode||6:+(i||a)[1]),s=!i&&/WebKit\//.test(t),c=s&&/Qt\/\d+\.\d+/.test(t),d=!i&&/Chrome\//.test(t),f=/Opera\//.test(t),p=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),m=/PhantomJS/.test(t),g=!i&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),v=/Android/.test(t),y=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),b=g||/Mac/.test(n),_=/\bCrOS\b/.test(t),w=/win/i.test(n),k=f&&t.match(/Version\/(\d*\.\d*)/);k&&(k=Number(k[1])),k&&k>=15&&(f=!1,s=!0);var O=b&&(c||f&&(null==k||k<12.11)),C=r||l&&u>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var E,M=function(e,t){var n=e.className,r=S(t).exec(n);if(r){var o=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(o?r[1]+o:"")}};function P(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function T(e,t){return P(e).appendChild(t)}function x(t,n,r,o){var a=e.createElement(t);if(r&&(a.className=r),o&&(a.style.cssText=o),"string"==typeof n)a.appendChild(e.createTextNode(n));else if(n)for(var i=0;i<n.length;++i)a.appendChild(n[i]);return a}function j(e,t,n,r){var o=x(e,t,n,r);return o.setAttribute("role","presentation"),o}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function L(){var t;try{t=e.activeElement}catch(n){t=e.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function R(e,t){var n=e.className;S(t).test(n)||(e.className+=(n?" ":"")+t)}function N(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!S(n[r]).test(t)&&(t+=" "+n[r]);return t}E=e.createRange?function(t,n,r,o){var a=e.createRange();return a.setEnd(o||t,r),a.setStart(t,n),a}:function(t,n,r){var o=e.body.createTextRange();try{o.moveToElementText(t.parentNode)}catch(e){return o}return o.collapse(!0),o.moveEnd("character",r),o.moveStart("character",n),o};var A=function(e){e.select()};function B(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function I(e,t,n,r,o){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=r||0,i=o||0;;){var l=e.indexOf("\t",a);if(l<0||l>=t)return i+(t-a);i+=l-a,i+=n-i%n,a=l+1}}g?A=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:l&&(A=function(e){try{e.select()}catch(e){}});var W=function(){this.id=null,this.f=null,this.time=0,this.handler=B(this.onTimeout,this)};function V(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}W.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},W.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var H=50,G={toString:function(){return"CodeMirror.Pass"}},U={scroll:!1},z={origin:"*mouse"},q={origin:"+move"};function K(e,t,n){for(var r=0,o=0;;){var a=e.indexOf("\t",r);-1==a&&(a=e.length);var i=a-r;if(a==e.length||o+i>=t)return r+Math.min(i,t-o);if(o+=a-r,r=a+1,(o+=n-o%n)>=t)return r}}var $=[""];function Y(e){for(;$.length<=e;)$.push(X($)+" ");return $[e]}function X(e){return e[e.length-1]}function J(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Q(e,t,n){for(var r=0,o=n(t);r<e.length&&n(e[r])<=o;)r++;e.splice(r,0,t)}function Z(){}function ee(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&F(t,n),n}var te=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ne(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||te.test(e))}function re(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ne(e))||t.test(e):ne(e)}function oe(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ae=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&ae.test(e)}function le(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ue(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var o=(t+n)/2,a=r<0?Math.ceil(o):Math.floor(o);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}function se(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var o=!1,a=0;a<e.length;++a){var i=e[a];(i.from<n&&i.to>t||t==n&&i.to==t)&&(r(Math.max(i.from,t),Math.min(i.to,n),1==i.level?"rtl":"ltr",a),o=!0)}o||r(t,n,"ltr")}var ce=null;function de(e,t,n){var r;ce=null;for(var o=0;o<e.length;++o){var a=e[o];if(a.from<t&&a.to>t)return o;a.to==t&&(a.from!=a.to&&"before"==n?r=o:ce=o),a.from==t&&(a.from!=a.to&&"before"!=n?r=o:ce=o)}return null!=r?r:ce}var fe=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,i=/[Lb1n]/,l=/[1n]/;function u(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var s="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!r.test(e))return!1;for(var c=e.length,d=[],f=0;f<c;++f)d.push(n(e.charCodeAt(f)));for(var p=0,h=s;p<c;++p){var m=d[p];"m"==m?d[p]=h:h=m}for(var g=0,v=s;g<c;++g){var y=d[g];"1"==y&&"r"==v?d[g]="n":a.test(y)&&(v=y,"r"==y&&(d[g]="R"))}for(var b=1,_=d[0];b<c-1;++b){var w=d[b];"+"==w&&"1"==_&&"1"==d[b+1]?d[b]="1":","!=w||_!=d[b+1]||"1"!=_&&"n"!=_||(d[b]=_),_=w}for(var k=0;k<c;++k){var O=d[k];if(","==O)d[k]="N";else if("%"==O){var C=void 0;for(C=k+1;C<c&&"%"==d[C];++C);for(var S=k&&"!"==d[k-1]||C<c&&"1"==d[C]?"1":"N",E=k;E<C;++E)d[E]=S;k=C-1}}for(var M=0,P=s;M<c;++M){var T=d[M];"L"==P&&"1"==T?d[M]="L":a.test(T)&&(P=T)}for(var x=0;x<c;++x)if(o.test(d[x])){var j=void 0;for(j=x+1;j<c&&o.test(d[j]);++j);for(var D="L"==(x?d[x-1]:s),L=D==("L"==(j<c?d[j]:s))?D?"L":"R":s,R=x;R<j;++R)d[R]=L;x=j-1}for(var N,A=[],B=0;B<c;)if(i.test(d[B])){var F=B;for(++B;B<c&&i.test(d[B]);++B);A.push(new u(0,F,B))}else{var I=B,W=A.length,V="rtl"==t?1:0;for(++B;B<c&&"L"!=d[B];++B);for(var H=I;H<B;)if(l.test(d[H])){I<H&&(A.splice(W,0,new u(1,I,H)),W+=V);var G=H;for(++H;H<B&&l.test(d[H]);++H);A.splice(W,0,new u(2,G,H)),W+=V,I=H}else++H;I<B&&A.splice(W,0,new u(1,I,B))}return"ltr"==t&&(1==A[0].level&&(N=e.match(/^\s+/))&&(A[0].from=N[0].length,A.unshift(new u(0,0,N[0].length))),1==X(A).level&&(N=e.match(/\s+$/))&&(X(A).to-=N[0].length,A.push(new u(0,c-N[0].length,c)))),"rtl"==t?A.reverse():A}}();function pe(e,t){var n=e.order;return null==n&&(n=e.order=fe(e.text,t)),n}var he=[],me=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||he).concat(n)}};function ge(e,t){return e._handlers&&e._handlers[t]||he}function ve(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,o=r&&r[t];if(o){var a=V(o,n);a>-1&&(r[t]=o.slice(0,a).concat(o.slice(a+1)))}}}function ye(e,t){var n=ge(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,r)}function be(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ye(e,n||t.type,e,t),Se(t)||t.codemirrorIgnore}function _e(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==V(n,t[r])&&n.push(t[r])}function we(e,t){return ge(e,t).length>0}function ke(e){e.prototype.on=function(e,t){me(this,e,t)},e.prototype.off=function(e,t){ve(this,e,t)}}function Oe(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ce(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Se(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ee(e){Oe(e),Ce(e)}function Me(e){return e.target||e.srcElement}function Pe(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Te,xe,je=function(){if(l&&u<9)return!1;var e=x("div");return"draggable"in e||"dragDrop"in e}();function De(t){if(null==Te){var n=x("span","\u200b");T(t,x("span",[n,e.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Te=n.offsetWidth<=1&&n.offsetHeight>2&&!(l&&u<8))}var r=Te?x("span","\u200b"):x("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Le(t){if(null!=xe)return xe;var n=T(t,e.createTextNode("A\u062eA")),r=E(n,0,1).getBoundingClientRect(),o=E(n,1,2).getBoundingClientRect();return P(t),!(!r||r.left==r.right)&&(xe=o.right-r.right<3)}var Re,Ne=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var a=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),i=a.indexOf("\r");-1!=i?(n.push(a.slice(0,i)),t+=i+1):(n.push(a),t=o+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ae=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Be="oncopy"in(Re=x("div"))||(Re.setAttribute("oncopy","return;"),"function"==typeof Re.oncopy),Fe=null;function Ie(e){if(null!=Fe)return Fe;var t=T(e,x("span","x")),n=t.getBoundingClientRect(),r=E(t,0,1).getBoundingClientRect();return Fe=Math.abs(n.left-r.left)>1}var We={},Ve={};function He(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),We[e]=t}function Ge(e,t){Ve[e]=t}function Ue(e){if("string"==typeof e&&Ve.hasOwnProperty(e))e=Ve[e];else if(e&&"string"==typeof e.name&&Ve.hasOwnProperty(e.name)){var t=Ve[e.name];"string"==typeof t&&(t={name:t}),(e=ee(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ue("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ue("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function ze(e,t){t=Ue(t);var n=We[t.name];if(!n)return ze(e,"text/plain");var r=n(e,t);if(qe.hasOwnProperty(t.name)){var o=qe[t.name];for(var a in o)o.hasOwnProperty(a)&&(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=o[a])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var i in t.modeProps)r[i]=t.modeProps[i];return r}var qe={};function Ke(e,t){F(t,qe.hasOwnProperty(e)?qe[e]:qe[e]={})}function $e(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var o=t[r];o instanceof Array&&(o=o.concat([])),n[r]=o}return n}function Ye(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Xe(e,t,n){return!e.startState||e.startState(t,n)}var Je=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Qe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var o=n.children[r],a=o.chunkSize();if(t<a){n=o;break}t-=a}return n.lines[t]}function Ze(e,t,n){var r=[],o=t.line;return e.iter(t.line,n.line+1,(function(e){var a=e.text;o==n.line&&(a=a.slice(0,n.ch)),o==t.line&&(a=a.slice(t.ch)),r.push(a),++o})),r}function et(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function tt(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function nt(e){if(null==e.parent)return null;for(var t=e.parent,n=V(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var o=0;r.children[o]!=t;++o)n+=r.children[o].chunkSize();return n+t.first}function rt(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var o=e.children[r],a=o.height;if(t<a){e=o;continue e}t-=a,n+=o.chunkSize()}return n}while(!e.lines);for(var i=0;i<e.lines.length;++i){var l=e.lines[i].height;if(t<l)break;t-=l}return n+i}function ot(e,t){return t>=e.first&&t<e.first+e.size}function at(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function it(e,t,n){if(void 0===n&&(n=null),!(this instanceof it))return new it(e,t,n);this.line=e,this.ch=t,this.sticky=n}function lt(e,t){return e.line-t.line||e.ch-t.ch}function ut(e,t){return e.sticky==t.sticky&&0==lt(e,t)}function st(e){return it(e.line,e.ch)}function ct(e,t){return lt(e,t)<0?t:e}function dt(e,t){return lt(e,t)<0?e:t}function ft(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function pt(e,t){if(t.line<e.first)return it(e.first,0);var n=e.first+e.size-1;return t.line>n?it(n,Qe(e,n).text.length):ht(t,Qe(e,t.line).text.length)}function ht(e,t){var n=e.ch;return null==n||n>t?it(e.line,t):n<0?it(e.line,0):e}function mt(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=pt(e,t[r]);return n}Je.prototype.eol=function(){return this.pos>=this.string.length},Je.prototype.sol=function(){return this.pos==this.lineStart},Je.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Je.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Je.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Je.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Je.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Je.prototype.skipToEnd=function(){this.pos=this.string.length},Je.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Je.prototype.backUp=function(e){this.pos-=e},Je.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=I(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},Je.prototype.indentation=function(){return I(this.string,null,this.tabSize)-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},Je.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var o=function(e){return n?e.toLowerCase():e};if(o(this.string.substr(this.pos,e.length))==o(e))return!1!==t&&(this.pos+=e.length),!0},Je.prototype.current=function(){return this.string.slice(this.start,this.pos)},Je.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Je.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Je.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var gt=function(e,t){this.state=e,this.lookAhead=t},vt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function yt(e,t,n,r){var o=[e.state.modeGen],a={};Mt(e,t.text,e.doc.mode,n,(function(e,t){return o.push(e,t)}),a,r);for(var i=n.state,l=function(r){n.baseTokens=o;var l=e.state.overlays[r],u=1,s=0;n.state=!0,Mt(e,t.text,l.mode,n,(function(e,t){for(var n=u;s<e;){var r=o[u];r>e&&o.splice(u,1,e,o[u+1],r),u+=2,s=Math.min(e,r)}if(t)if(l.opaque)o.splice(n,u-n,e,"overlay "+t),u=n+2;else for(;n<u;n+=2){var a=o[n+1];o[n+1]=(a?a+" ":"")+"overlay "+t}}),a),n.state=i,n.baseTokens=null,n.baseTokenPos=1},u=0;u<e.state.overlays.length;++u)l(u);return{styles:o,classes:a.bgClass||a.textClass?a:null}}function bt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=_t(e,nt(t)),o=t.text.length>e.options.maxHighlightLength&&$e(e.doc.mode,r.state),a=yt(e,t,r);o&&(r.state=o),t.stateAfter=r.save(!o),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function _t(e,t,n){var r=e.doc,o=e.display;if(!r.mode.startState)return new vt(r,!0,t);var a=Pt(e,t,n),i=a>r.first&&Qe(r,a-1).stateAfter,l=i?vt.fromSaved(r,i,a):new vt(r,Xe(r.mode),a);return r.iter(a,t,(function(n){wt(e,n.text,l);var r=l.line;n.stateAfter=r==t-1||r%5==0||r>=o.viewFrom&&r<o.viewTo?l.save():null,l.nextLine()})),n&&(r.modeFrontier=l.line),l}function wt(e,t,n,r){var o=e.doc.mode,a=new Je(t,e.options.tabSize,n);for(a.start=a.pos=r||0,""==t&&kt(o,n.state);!a.eol();)Ot(o,a,n.state),a.start=a.pos}function kt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ye(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Ot(e,t,n,r){for(var o=0;o<10;o++){r&&(r[0]=Ye(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}vt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},vt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},vt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},vt.fromSaved=function(e,t,n){return t instanceof gt?new vt(e,$e(e.mode,t.state),n,t.lookAhead):new vt(e,$e(e.mode,t),n)},vt.prototype.save=function(e){var t=!1!==e?$e(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new gt(t,this.maxLookAhead):t};var Ct=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function St(e,t,n,r){var o,a,i=e.doc,l=i.mode,u=Qe(i,(t=pt(i,t)).line),s=_t(e,t.line,n),c=new Je(u.text,e.options.tabSize,s);for(r&&(a=[]);(r||c.pos<t.ch)&&!c.eol();)c.start=c.pos,o=Ot(l,c,s.state),r&&a.push(new Ct(c,o,$e(i.mode,s.state)));return r?a:new Ct(c,o,s.state)}function Et(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Mt(e,t,n,r,o,a,i){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var u,s=0,c=null,d=new Je(t,e.options.tabSize,r),f=e.options.addModeClass&&[null];for(""==t&&Et(kt(n,r.state),a);!d.eol();){if(d.pos>e.options.maxHighlightLength?(l=!1,i&&wt(e,t,r,d.pos),d.pos=t.length,u=null):u=Et(Ot(n,d,r.state,f),a),f){var p=f[0].name;p&&(u="m-"+(u?p+" "+u:p))}if(!l||c!=u){for(;s<d.start;)o(s=Math.min(d.start,s+5e3),c);c=u}d.start=d.pos}for(;s<d.pos;){var h=Math.min(d.pos,s+5e3);o(h,c),s=h}}function Pt(e,t,n){for(var r,o,a=e.doc,i=n?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;l>i;--l){if(l<=a.first)return a.first;var u=Qe(a,l-1),s=u.stateAfter;if(s&&(!n||l+(s instanceof gt?s.lookAhead:0)<=a.modeFrontier))return l;var c=I(u.text,null,e.options.tabSize);(null==o||r>c)&&(o=l-1,r=c)}return o}function Tt(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var o=Qe(e,r).stateAfter;if(o&&(!(o instanceof gt)||r+o.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var xt=!1,jt=!1;function Dt(){xt=!0}function Lt(){jt=!0}function Rt(e,t,n){this.marker=e,this.from=t,this.to=n}function Nt(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function At(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Bt(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Ft(e,t,n){var r;if(e)for(var o=0;o<e.length;++o){var a=e[o],i=a.marker;if(null==a.from||(i.inclusiveLeft?a.from<=t:a.from<t)||a.from==t&&"bookmark"==i.type&&(!n||!a.marker.insertLeft)){var l=null==a.to||(i.inclusiveRight?a.to>=t:a.to>t);(r||(r=[])).push(new Rt(i,a.from,l?null:a.to))}}return r}function It(e,t,n){var r;if(e)for(var o=0;o<e.length;++o){var a=e[o],i=a.marker;if(null==a.to||(i.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==i.type&&(!n||a.marker.insertLeft)){var l=null==a.from||(i.inclusiveLeft?a.from<=t:a.from<t);(r||(r=[])).push(new Rt(i,l?null:a.from-t,null==a.to?null:a.to-t))}}return r}function Wt(e,t){if(t.full)return null;var n=ot(e,t.from.line)&&Qe(e,t.from.line).markedSpans,r=ot(e,t.to.line)&&Qe(e,t.to.line).markedSpans;if(!n&&!r)return null;var o=t.from.ch,a=t.to.ch,i=0==lt(t.from,t.to),l=Ft(n,o,i),u=It(r,a,i),s=1==t.text.length,c=X(t.text).length+(s?o:0);if(l)for(var d=0;d<l.length;++d){var f=l[d];if(null==f.to){var p=Nt(u,f.marker);p?s&&(f.to=null==p.to?null:p.to+c):f.to=o}}if(u)for(var h=0;h<u.length;++h){var m=u[h];null!=m.to&&(m.to+=c),null==m.from?Nt(l,m.marker)||(m.from=c,s&&(l||(l=[])).push(m)):(m.from+=c,s&&(l||(l=[])).push(m))}l&&(l=Vt(l)),u&&u!=l&&(u=Vt(u));var g=[l];if(!s){var v,y=t.text.length-2;if(y>0&&l)for(var b=0;b<l.length;++b)null==l[b].to&&(v||(v=[])).push(new Rt(l[b].marker,null,null));for(var _=0;_<y;++_)g.push(v);g.push(u)}return g}function Vt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ht(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=V(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var o=[{from:t,to:n}],a=0;a<r.length;++a)for(var i=r[a],l=i.find(0),u=0;u<o.length;++u){var s=o[u];if(!(lt(s.to,l.from)<0||lt(s.from,l.to)>0)){var c=[u,1],d=lt(s.from,l.from),f=lt(s.to,l.to);(d<0||!i.inclusiveLeft&&!d)&&c.push({from:s.from,to:l.from}),(f>0||!i.inclusiveRight&&!f)&&c.push({from:l.to,to:s.to}),o.splice.apply(o,c),u+=c.length-3}}return o}function Gt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Ut(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function zt(e){return e.inclusiveLeft?-1:0}function qt(e){return e.inclusiveRight?1:0}function Kt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),o=t.find(),a=lt(r.from,o.from)||zt(e)-zt(t);if(a)return-a;var i=lt(r.to,o.to)||qt(e)-qt(t);return i||t.id-e.id}function $t(e,t){var n,r=jt&&e.markedSpans;if(r)for(var o=void 0,a=0;a<r.length;++a)(o=r[a]).marker.collapsed&&null==(t?o.from:o.to)&&(!n||Kt(n,o.marker)<0)&&(n=o.marker);return n}function Yt(e){return $t(e,!0)}function Xt(e){return $t(e,!1)}function Jt(e,t){var n,r=jt&&e.markedSpans;if(r)for(var o=0;o<r.length;++o){var a=r[o];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!n||Kt(n,a.marker)<0)&&(n=a.marker)}return n}function Qt(e,t,n,r,o){var a=Qe(e,t),i=jt&&a.markedSpans;if(i)for(var l=0;l<i.length;++l){var u=i[l];if(u.marker.collapsed){var s=u.marker.find(0),c=lt(s.from,n)||zt(u.marker)-zt(o),d=lt(s.to,r)||qt(u.marker)-qt(o);if(!(c>=0&&d<=0||c<=0&&d>=0)&&(c<=0&&(u.marker.inclusiveRight&&o.inclusiveLeft?lt(s.to,n)>=0:lt(s.to,n)>0)||c>=0&&(u.marker.inclusiveRight&&o.inclusiveLeft?lt(s.from,r)<=0:lt(s.from,r)<0)))return!0}}}function Zt(e){for(var t;t=Yt(e);)e=t.find(-1,!0).line;return e}function en(e){for(var t;t=Xt(e);)e=t.find(1,!0).line;return e}function tn(e){for(var t,n;t=Xt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function nn(e,t){var n=Qe(e,t),r=Zt(n);return n==r?t:nt(r)}function rn(e,t){if(t>e.lastLine())return t;var n,r=Qe(e,t);if(!on(e,r))return t;for(;n=Xt(r);)r=n.find(1,!0).line;return nt(r)+1}function on(e,t){var n=jt&&t.markedSpans;if(n)for(var r=void 0,o=0;o<n.length;++o)if((r=n[o]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&an(e,t,r))return!0}}function an(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return an(e,r.line,Nt(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var o=void 0,a=0;a<t.markedSpans.length;++a)if((o=t.markedSpans[a]).marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(null==o.to||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&an(e,t,o))return!0}function ln(e){for(var t=0,n=(e=Zt(e)).parent,r=0;r<n.lines.length;++r){var o=n.lines[r];if(o==e)break;t+=o.height}for(var a=n.parent;a;a=(n=a).parent)for(var i=0;i<a.children.length;++i){var l=a.children[i];if(l==n)break;t+=l.height}return t}function un(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Yt(r);){var o=t.find(0,!0);r=o.from.line,n+=o.from.ch-o.to.ch}for(r=e;t=Xt(r);){var a=t.find(0,!0);n-=r.text.length-a.from.ch,n+=(r=a.to.line).text.length-a.to.ch}return n}function sn(e){var t=e.display,n=e.doc;t.maxLine=Qe(n,n.first),t.maxLineLength=un(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=un(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var cn=function(e,t,n){this.text=e,Ut(this,t),this.height=n?n(this):1};function dn(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Gt(e),Ut(e,n);var o=r?r(e):1;o!=e.height&&tt(e,o)}function fn(e){e.parent=null,Gt(e)}cn.prototype.lineNo=function(){return nt(this)},ke(cn);var pn={},hn={};function mn(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?hn:pn;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function gn(e,t){var n=j("span",null,null,s?"padding-right: .1px":null),r={pre:j("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var a=o?t.rest[o-1]:t.line,i=void 0;r.pos=0,r.addToken=yn,Le(e.display.measure)&&(i=pe(a,e.doc.direction))&&(r.addToken=_n(r.addToken,i)),r.map=[],kn(a,r,bt(e,a,t!=e.display.externalMeasured&&nt(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=N(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=N(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(De(e.display.measure))),0==o?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(s){var l=r.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return ye(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=N(r.pre.className,r.textClass||"")),r}function vn(e){var t=x("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function yn(t,n,r,o,a,i,s){if(n){var c,d=t.splitSpaces?bn(n,t.trailingSpace):n,f=t.cm.state.specialChars,p=!1;if(f.test(n)){c=e.createDocumentFragment();for(var h=0;;){f.lastIndex=h;var m=f.exec(n),g=m?m.index-h:n.length-h;if(g){var v=e.createTextNode(d.slice(h,h+g));l&&u<9?c.appendChild(x("span",[v])):c.appendChild(v),t.map.push(t.pos,t.pos+g,v),t.col+=g,t.pos+=g}if(!m)break;h+=g+1;var y=void 0;if("\t"==m[0]){var b=t.cm.options.tabSize,_=b-t.col%b;(y=c.appendChild(x("span",Y(_),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),t.col+=_}else"\r"==m[0]||"\n"==m[0]?((y=c.appendChild(x("span","\r"==m[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",m[0]),t.col+=1):((y=t.cm.options.specialCharPlaceholder(m[0])).setAttribute("cm-text",m[0]),l&&u<9?c.appendChild(x("span",[y])):c.appendChild(y),t.col+=1);t.map.push(t.pos,t.pos+1,y),t.pos++}}else t.col+=n.length,c=e.createTextNode(d),t.map.push(t.pos,t.pos+n.length,c),l&&u<9&&(p=!0),t.pos+=n.length;if(t.trailingSpace=32==d.charCodeAt(n.length-1),r||o||a||p||i||s){var w=r||"";o&&(w+=o),a&&(w+=a);var k=x("span",[c],w,i);if(s)for(var O in s)s.hasOwnProperty(O)&&"style"!=O&&"class"!=O&&k.setAttribute(O,s[O]);return t.content.appendChild(k)}t.content.appendChild(c)}}function bn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",o=0;o<e.length;o++){var a=e.charAt(o);" "!=a||!n||o!=e.length-1&&32!=e.charCodeAt(o+1)||(a="\xa0"),r+=a,n=" "==a}return r}function _n(e,t){return function(n,r,o,a,i,l,u){o=o?o+" cm-force-border":"cm-force-border";for(var s=n.pos,c=s+r.length;;){for(var d=void 0,f=0;f<t.length&&!((d=t[f]).to>s&&d.from<=s);f++);if(d.to>=c)return e(n,r,o,a,i,l,u);e(n,r.slice(0,d.to-s),o,a,null,l,u),a=null,r=r.slice(d.to-s),s=d.to}}}function wn(t,n,r,o){var a=!o&&r.widgetNode;a&&t.map.push(t.pos,t.pos+n,a),!o&&t.cm.display.input.needsContentAttribute&&(a||(a=t.content.appendChild(e.createElement("span"))),a.setAttribute("cm-marker",r.id)),a&&(t.cm.display.input.setUneditable(a),t.content.appendChild(a)),t.pos+=n,t.trailingSpace=!1}function kn(e,t,n){var r=e.markedSpans,o=e.text,a=0;if(r)for(var i,l,u,s,c,d,f,p=o.length,h=0,m=1,g="",v=0;;){if(v==h){u=s=c=l="",f=null,d=null,v=1/0;for(var y=[],b=void 0,_=0;_<r.length;++_){var w=r[_],k=w.marker;if("bookmark"==k.type&&w.from==h&&k.widgetNode)y.push(k);else if(w.from<=h&&(null==w.to||w.to>h||k.collapsed&&w.to==h&&w.from==h)){if(null!=w.to&&w.to!=h&&v>w.to&&(v=w.to,s=""),k.className&&(u+=" "+k.className),k.css&&(l=(l?l+";":"")+k.css),k.startStyle&&w.from==h&&(c+=" "+k.startStyle),k.endStyle&&w.to==v&&(b||(b=[])).push(k.endStyle,w.to),k.title&&((f||(f={})).title=k.title),k.attributes)for(var O in k.attributes)(f||(f={}))[O]=k.attributes[O];k.collapsed&&(!d||Kt(d.marker,k)<0)&&(d=w)}else w.from>h&&v>w.from&&(v=w.from)}if(b)for(var C=0;C<b.length;C+=2)b[C+1]==v&&(s+=" "+b[C]);if(!d||d.from==h)for(var S=0;S<y.length;++S)wn(t,0,y[S]);if(d&&(d.from||0)==h){if(wn(t,(null==d.to?p+1:d.to)-h,d.marker,null==d.from),null==d.to)return;d.to==h&&(d=!1)}}if(h>=p)break;for(var E=Math.min(p,v);;){if(g){var M=h+g.length;if(!d){var P=M>E?g.slice(0,E-h):g;t.addToken(t,P,i?i+u:u,c,h+P.length==v?s:"",l,f)}if(M>=E){g=g.slice(E-h),h=E;break}h=M,c=""}g=o.slice(a,a=n[m++]),i=mn(n[m++],t.cm.options)}}else for(var T=1;T<n.length;T+=2)t.addToken(t,o.slice(a,a=n[T]),mn(n[T+1],t.cm.options))}function On(e,t,n){this.line=t,this.rest=tn(t),this.size=this.rest?nt(X(this.rest))-n+1:1,this.node=this.text=null,this.hidden=on(e,t)}function Cn(e,t,n){for(var r,o=[],a=t;a<n;a=r){var i=new On(e.doc,Qe(e.doc,a),a);r=a+i.size,o.push(i)}return o}var Sn=null;function En(e){Sn?Sn.ops.push(e):e.ownsGroup=Sn={ops:[e],delayedCallbacks:[]}}function Mn(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var o=e.ops[r];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(n<t.length)}function Pn(e,t){var n=e.ownsGroup;if(n)try{Mn(n)}finally{Sn=null,t(n)}}var Tn=null;function xn(e,t){var n=ge(e,t);if(n.length){var r,o=Array.prototype.slice.call(arguments,2);Sn?r=Sn.delayedCallbacks:Tn?r=Tn:(r=Tn=[],setTimeout(jn,0));for(var a=function(e){r.push((function(){return n[e].apply(null,o)}))},i=0;i<n.length;++i)a(i)}}function jn(){var e=Tn;Tn=null;for(var t=0;t<e.length;++t)e[t]()}function Dn(e,t,n,r){for(var o=0;o<t.changes.length;o++){var a=t.changes[o];"text"==a?An(e,t):"gutter"==a?Fn(e,t,n,r):"class"==a?Bn(e,t):"widget"==a&&In(e,t,r)}t.changes=null}function Ln(e){return e.node==e.text&&(e.node=x("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),l&&u<8&&(e.node.style.zIndex=2)),e.node}function Rn(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=Ln(t);t.background=r.insertBefore(x("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}function Nn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):gn(e,t)}function An(e,t){var n=t.text.className,r=Nn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,Bn(e,t)):n&&(t.text.className=n)}function Bn(e,t){Rn(e,t),t.line.wrapClass?Ln(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function Fn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=Ln(t);t.gutterBackground=x("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var i=Ln(t),l=t.gutter=x("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),i.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(x("div",at(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var u=0;u<e.display.gutterSpecs.length;++u){var s=e.display.gutterSpecs[u].className,c=a.hasOwnProperty(s)&&a[s];c&&l.appendChild(x("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[s]+"px; width: "+r.gutterWidth[s]+"px"))}}}function In(e,t,n){t.alignable&&(t.alignable=null);for(var r=S("CodeMirror-linewidget"),o=t.node.firstChild,a=void 0;o;o=a)a=o.nextSibling,r.test(o.className)&&t.node.removeChild(o);Vn(e,t,n)}function Wn(e,t,n,r){var o=Nn(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),Bn(e,t),Fn(e,t,n,r),Vn(e,t,r),t.node}function Vn(e,t,n){if(Hn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)Hn(e,t.rest[r],t,n,!1)}function Hn(e,t,n,r,o){if(t.widgets)for(var a=Ln(n),i=0,l=t.widgets;i<l.length;++i){var u=l[i],s=x("div",[u.node],"CodeMirror-linewidget"+(u.className?" "+u.className:""));u.handleMouseEvents||s.setAttribute("cm-ignore-events","true"),Gn(u,s,n,r),e.display.input.setUneditable(s),o&&u.above?a.insertBefore(s,n.gutter||n.text):a.appendChild(s),xn(u,"redraw")}}function Gn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var o=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(o-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function Un(t){if(null!=t.height)return t.height;var n=t.doc.cm;if(!n)return 0;if(!D(e.body,t.node)){var r="position: relative;";t.coverGutter&&(r+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),t.noHScroll&&(r+="width: "+n.display.wrapper.clientWidth+"px;"),T(n.display.measure,x("div",[t.node],null,r))}return t.height=t.node.parentNode.offsetHeight}function zn(e,t){for(var n=Me(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function qn(e){return e.lineSpace.offsetTop}function Kn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function $n(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=T(e.measure,x("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Yn(e){return H-e.display.nativeBarWidth}function Xn(e){return e.display.scroller.clientWidth-Yn(e)-e.display.barWidth}function Jn(e){return e.display.scroller.clientHeight-Yn(e)-e.display.barHeight}function Qn(e,t,n){var r=e.options.lineWrapping,o=r&&Xn(e);if(!t.measure.heights||r&&t.measure.width!=o){var a=t.measure.heights=[];if(r){t.measure.width=o;for(var i=t.text.firstChild.getClientRects(),l=0;l<i.length-1;l++){var u=i[l],s=i[l+1];Math.abs(u.bottom-s.bottom)>2&&a.push((u.bottom+s.top)/2-n.top)}}a.push(n.bottom-n.top)}}function Zn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var o=0;o<e.rest.length;o++)if(nt(e.rest[o])>n)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}function er(e,t){var n=nt(t=Zt(t)),r=e.display.externalMeasured=new On(e.doc,t,n);r.lineN=n;var o=r.built=gn(e,r);return r.text=o.pre,T(e.display.lineMeasure,o.pre),r}function tr(e,t,n,r){return or(e,rr(e,t),n,r)}function nr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Br(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function rr(e,t){var n=nt(t),r=nr(e,n);r&&!r.text?r=null:r&&r.changes&&(Dn(e,r,n,Dr(e)),e.curOp.forceUpdate=!0),r||(r=er(e,t));var o=Zn(r,t,n);return{line:t,view:r,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function or(e,t,n,r,o){t.before&&(n=-1);var a,i=n+(r||"");return t.cache.hasOwnProperty(i)?a=t.cache[i]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Qn(e,t.view,t.rect),t.hasHeights=!0),(a=sr(e,t,n,r)).bogus||(t.cache[i]=a)),{left:a.left,right:a.right,top:o?a.rtop:a.top,bottom:o?a.rbottom:a.bottom}}var ar,ir={left:0,right:0,top:0,bottom:0};function lr(e,t,n){for(var r,o,a,i,l,u,s=0;s<e.length;s+=3)if(l=e[s],u=e[s+1],t<l?(o=0,a=1,i="left"):t<u?a=1+(o=t-l):(s==e.length-3||t==u&&e[s+3]>t)&&(o=(a=u-l)-1,t>=u&&(i="right")),null!=o){if(r=e[s+2],l==u&&n==(r.insertLeft?"left":"right")&&(i=n),"left"==n&&0==o)for(;s&&e[s-2]==e[s-3]&&e[s-1].insertLeft;)r=e[2+(s-=3)],i="left";if("right"==n&&o==u-l)for(;s<e.length-3&&e[s+3]==e[s+4]&&!e[s+5].insertLeft;)r=e[(s+=3)+2],i="right";break}return{node:r,start:o,end:a,collapse:i,coverStart:l,coverEnd:u}}function ur(e,t){var n=ir;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var o=e.length-1;o>=0&&(n=e[o]).left==n.right;o--);return n}function sr(e,t,n,r){var o,a=lr(t.map,n,r),i=a.node,s=a.start,c=a.end,d=a.collapse;if(3==i.nodeType){for(var f=0;f<4;f++){for(;s&&ie(t.line.text.charAt(a.coverStart+s));)--s;for(;a.coverStart+c<a.coverEnd&&ie(t.line.text.charAt(a.coverStart+c));)++c;if((o=l&&u<9&&0==s&&c==a.coverEnd-a.coverStart?i.parentNode.getBoundingClientRect():ur(E(i,s,c).getClientRects(),r)).left||o.right||0==s)break;c=s,s-=1,d="right"}l&&u<11&&(o=cr(e.display.measure,o))}else{var p;s>0&&(d=r="right"),o=e.options.lineWrapping&&(p=i.getClientRects()).length>1?p["right"==r?p.length-1:0]:i.getBoundingClientRect()}if(l&&u<9&&!s&&(!o||!o.left&&!o.right)){var h=i.parentNode.getClientRects()[0];o=h?{left:h.left,right:h.left+jr(e.display),top:h.top,bottom:h.bottom}:ir}for(var m=o.top-t.rect.top,g=o.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var _=b?y[b-1]:0,w=y[b],k={left:("right"==d?o.right:o.left)-t.rect.left,right:("left"==d?o.left:o.right)-t.rect.left,top:_,bottom:w};return o.left||o.right||(k.bogus=!0),e.options.singleCursorHeightPerLine||(k.rtop=m,k.rbottom=g),k}function cr(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ie(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function dr(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function fr(e){e.display.externalMeasure=null,P(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)dr(e.display.view[t])}function pr(e){fr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function hr(){return d&&v?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):window.pageXOffset||(e.documentElement||e.body).scrollLeft}function mr(){return d&&v?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):window.pageYOffset||(e.documentElement||e.body).scrollTop}function gr(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Un(e.widgets[n]));return t}function vr(e,t,n,r,o){if(!o){var a=gr(t);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var i=ln(t);if("local"==r?i+=qn(e.display):i-=e.display.viewOffset,"page"==r||"window"==r){var l=e.display.lineSpace.getBoundingClientRect();i+=l.top+("window"==r?0:mr());var u=l.left+("window"==r?0:hr());n.left+=u,n.right+=u}return n.top+=i,n.bottom+=i,n}function yr(e,t,n){if("div"==n)return t;var r=t.left,o=t.top;if("page"==n)r-=hr(),o-=mr();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,o+=a.top}var i=e.display.lineSpace.getBoundingClientRect();return{left:r-i.left,top:o-i.top}}function br(e,t,n,r,o){return r||(r=Qe(e.doc,t.line)),vr(e,r,tr(e,r,t.ch,o),n)}function _r(e,t,n,r,o,a){function i(t,i){var l=or(e,o,t,i?"right":"left",a);return i?l.left=l.right:l.right=l.left,vr(e,r,l,n)}r=r||Qe(e.doc,t.line),o||(o=rr(e,r));var l=pe(r,e.doc.direction),u=t.ch,s=t.sticky;if(u>=r.text.length?(u=r.text.length,s="before"):u<=0&&(u=0,s="after"),!l)return i("before"==s?u-1:u,"before"==s);function c(e,t,n){return i(n?e-1:e,1==l[t].level!=n)}var d=de(l,u,s),f=ce,p=c(u,d,"before"==s);return null!=f&&(p.other=c(u,f,"before"!=s)),p}function wr(e,t){var n=0;t=pt(e.doc,t),e.options.lineWrapping||(n=jr(e.display)*t.ch);var r=Qe(e.doc,t.line),o=ln(r)+qn(e.display);return{left:n,right:n,top:o,bottom:o+r.height}}function kr(e,t,n,r,o){var a=it(e,t,n);return a.xRel=o,r&&(a.outside=r),a}function Or(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return kr(r.first,0,null,-1,-1);var o=rt(r,n),a=r.first+r.size-1;if(o>a)return kr(r.first+r.size-1,Qe(r,a).text.length,null,1,1);t<0&&(t=0);for(var i=Qe(r,o);;){var l=Mr(e,i,o,t,n),u=Jt(i,l.ch+(l.xRel>0||l.outside>0?1:0));if(!u)return l;var s=u.find(1);if(s.line==o)return s;i=Qe(r,o=s.line)}}function Cr(e,t,n,r){r-=gr(t);var o=t.text.length,a=ue((function(t){return or(e,n,t-1).bottom<=r}),o,0);return{begin:a,end:o=ue((function(t){return or(e,n,t).top>r}),a,o)}}function Sr(e,t,n,r){return n||(n=rr(e,t)),Cr(e,t,n,vr(e,t,or(e,n,r),"line").top)}function Er(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Mr(e,t,n,r,o){o-=ln(t);var a=rr(e,t),i=gr(t),l=0,u=t.text.length,s=!0,c=pe(t,e.doc.direction);if(c){var d=(e.options.lineWrapping?Tr:Pr)(e,t,n,a,c,r,o);l=(s=1!=d.level)?d.from:d.to-1,u=s?d.to:d.from-1}var f,p,h=null,m=null,g=ue((function(t){var n=or(e,a,t);return n.top+=i,n.bottom+=i,!!Er(n,r,o,!1)&&(n.top<=o&&n.left<=r&&(h=t,m=n),!0)}),l,u),v=!1;if(m){var y=r-m.left<m.right-r,b=y==s;g=h+(b?0:1),p=b?"after":"before",f=y?m.left:m.right}else{s||g!=u&&g!=l||g++,p=0==g?"after":g==t.text.length?"before":or(e,a,g-(s?1:0)).bottom+i<=o==s?"after":"before";var _=_r(e,it(n,g,p),"line",t,a);f=_.left,v=o<_.top?-1:o>=_.bottom?1:0}return kr(n,g=le(t.text,g,1),p,v,r-f)}function Pr(e,t,n,r,o,a,i){var l=ue((function(l){var u=o[l],s=1!=u.level;return Er(_r(e,it(n,s?u.to:u.from,s?"before":"after"),"line",t,r),a,i,!0)}),0,o.length-1),u=o[l];if(l>0){var s=1!=u.level,c=_r(e,it(n,s?u.from:u.to,s?"after":"before"),"line",t,r);Er(c,a,i,!0)&&c.top>i&&(u=o[l-1])}return u}function Tr(e,t,n,r,o,a,i){var l=Cr(e,t,r,i),u=l.begin,s=l.end;/\s/.test(t.text.charAt(s-1))&&s--;for(var c=null,d=null,f=0;f<o.length;f++){var p=o[f];if(!(p.from>=s||p.to<=u)){var h=or(e,r,1!=p.level?Math.min(s,p.to)-1:Math.max(u,p.from)).right,m=h<a?a-h+1e9:h-a;(!c||d>m)&&(c=p,d=m)}}return c||(c=o[o.length-1]),c.from<u&&(c={from:u,to:c.to,level:c.level}),c.to>s&&(c={from:c.from,to:s,level:c.level}),c}function xr(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==ar){ar=x("pre",null,"CodeMirror-line-like");for(var n=0;n<49;++n)ar.appendChild(e.createTextNode("x")),ar.appendChild(x("br"));ar.appendChild(e.createTextNode("x"))}T(t.measure,ar);var r=ar.offsetHeight/50;return r>3&&(t.cachedTextHeight=r),P(t.measure),r||1}function jr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=x("span","xxxxxxxxxx"),n=x("pre",[t],"CodeMirror-line-like");T(e.measure,n);var r=t.getBoundingClientRect(),o=(r.right-r.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function Dr(e){for(var t=e.display,n={},r={},o=t.gutters.clientLeft,a=t.gutters.firstChild,i=0;a;a=a.nextSibling,++i){var l=e.display.gutterSpecs[i].className;n[l]=a.offsetLeft+a.clientLeft+o,r[l]=a.clientWidth}return{fixedPos:Lr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Lr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Rr(e){var t=xr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/jr(e.display)-3);return function(o){if(on(e.doc,o))return 0;var a=0;if(o.widgets)for(var i=0;i<o.widgets.length;i++)o.widgets[i].height&&(a+=o.widgets[i].height);return n?a+(Math.ceil(o.text.length/r)||1)*t:a+t}}function Nr(e){var t=e.doc,n=Rr(e);t.iter((function(e){var t=n(e);t!=e.height&&tt(e,t)}))}function Ar(e,t,n,r){var o=e.display;if(!n&&"true"==Me(t).getAttribute("cm-not-content"))return null;var a,i,l=o.lineSpace.getBoundingClientRect();try{a=t.clientX-l.left,i=t.clientY-l.top}catch(e){return null}var u,s=Or(e,a,i);if(r&&s.xRel>0&&(u=Qe(e.doc,s.line).text).length==s.ch){var c=I(u,u.length,e.options.tabSize)-u.length;s=it(s.line,Math.max(0,Math.round((a-$n(e.display).left)/jr(e.display))-c))}return s}function Br(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function Fr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var o=e.display;if(r&&n<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)jt&&nn(e.doc,t)<o.viewTo&&Wr(e);else if(n<=o.viewFrom)jt&&rn(e.doc,n+r)>o.viewFrom?Wr(e):(o.viewFrom+=r,o.viewTo+=r);else if(t<=o.viewFrom&&n>=o.viewTo)Wr(e);else if(t<=o.viewFrom){var a=Vr(e,n,n+r,1);a?(o.view=o.view.slice(a.index),o.viewFrom=a.lineN,o.viewTo+=r):Wr(e)}else if(n>=o.viewTo){var i=Vr(e,t,t,-1);i?(o.view=o.view.slice(0,i.index),o.viewTo=i.lineN):Wr(e)}else{var l=Vr(e,t,t,-1),u=Vr(e,n,n+r,1);l&&u?(o.view=o.view.slice(0,l.index).concat(Cn(e,l.lineN,u.lineN)).concat(o.view.slice(u.index)),o.viewTo+=r):Wr(e)}var s=o.externalMeasured;s&&(n<s.lineN?s.lineN+=r:t<s.lineN+s.size&&(o.externalMeasured=null))}function Ir(e,t,n){e.curOp.viewChanged=!0;var r=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[Br(e,t)];if(null!=a.node){var i=a.changes||(a.changes=[]);-1==V(i,n)&&i.push(n)}}}function Wr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Vr(e,t,n,r){var o,a=Br(e,t),i=e.display.view;if(!jt||n==e.doc.first+e.doc.size)return{index:a,lineN:n};for(var l=e.display.viewFrom,u=0;u<a;u++)l+=i[u].size;if(l!=t){if(r>0){if(a==i.length-1)return null;o=l+i[a].size-t,a++}else o=l-t;t+=o,n+=o}for(;nn(e.doc,n)!=n;){if(a==(r<0?0:i.length-1))return null;n+=r*i[a-(r<0?1:0)].size,a+=r}return{index:a,lineN:n}}function Hr(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=Cn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Cn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Br(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Cn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Br(e,n)))),r.viewTo=n}function Gr(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var o=t[r];o.hidden||o.node&&!o.changes||++n}return n}function Ur(e){e.display.input.showSelection(e.display.input.prepareSelection())}function zr(t,n){void 0===n&&(n=!0);for(var r=t.doc,o={},a=o.cursors=e.createDocumentFragment(),i=o.selection=e.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++)if(n||l!=r.sel.primIndex){var u=r.sel.ranges[l];if(!(u.from().line>=t.display.viewTo||u.to().line<t.display.viewFrom)){var s=u.empty();(s||t.options.showCursorWhenSelecting)&&qr(t,u.head,a),s||$r(t,u,i)}}return o}function qr(e,t,n){var r=_r(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=n.appendChild(x("div","\xa0","CodeMirror-cursor"));if(o.style.left=r.left+"px",o.style.top=r.top+"px",o.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var a=n.appendChild(x("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=r.other.left+"px",a.style.top=r.other.top+"px",a.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Kr(e,t){return e.top-t.top||e.left-t.left}function $r(t,n,r){var o=t.display,a=t.doc,i=e.createDocumentFragment(),l=$n(t.display),u=l.left,s=Math.max(o.sizerWidth,Xn(t)-o.sizer.offsetLeft)-l.right,c="ltr"==a.direction;function d(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),i.appendChild(x("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?s-e:n)+"px;\n                             height: "+(r-t)+"px"))}function f(e,n,r){var o,i,l=Qe(a,e),f=l.text.length;function p(n,r){return br(t,it(e,n),"div",l,r)}function h(e,n,r){var o=Sr(t,l,null,e),a="ltr"==n==("after"==r)?"left":"right";return p("after"==r?o.begin:o.end-(/\s/.test(l.text.charAt(o.end-1))?2:1),a)[a]}var m=pe(l,a.direction);return se(m,n||0,null==r?f:r,(function(e,t,a,l){var g="ltr"==a,v=p(e,g?"left":"right"),y=p(t-1,g?"right":"left"),b=null==n&&0==e,_=null==r&&t==f,w=0==l,k=!m||l==m.length-1;if(y.top-v.top<=3){var O=(c?_:b)&&k,C=(c?b:_)&&w?u:(g?v:y).left,S=O?s:(g?y:v).right;d(C,v.top,S-C,v.bottom)}else{var E,M,P,T;g?(E=c&&b&&w?u:v.left,M=c?s:h(e,a,"before"),P=c?u:h(t,a,"after"),T=c&&_&&k?s:y.right):(E=c?h(e,a,"before"):u,M=!c&&b&&w?s:v.right,P=!c&&_&&k?u:y.left,T=c?h(t,a,"after"):s),d(E,v.top,M-E,v.bottom),v.bottom<y.top&&d(u,v.bottom,null,y.top),d(P,y.top,T-P,y.bottom)}(!o||Kr(v,o)<0)&&(o=v),Kr(y,o)<0&&(o=y),(!i||Kr(v,i)<0)&&(i=v),Kr(y,i)<0&&(i=y)})),{start:o,end:i}}var p=n.from(),h=n.to();if(p.line==h.line)f(p.line,p.ch,h.ch);else{var m=Qe(a,p.line),g=Qe(a,h.line),v=Zt(m)==Zt(g),y=f(p.line,p.ch,v?m.text.length+1:null).end,b=f(h.line,v?0:null,h.ch).start;v&&(y.top<b.top-2?(d(y.right,y.top,null,y.bottom),d(u,b.top,b.left,b.bottom)):d(y.right,y.top,b.left-y.right,y.bottom)),y.bottom<b.top&&d(u,y.bottom,null,b.top)}r.appendChild(i)}function Yr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Zr(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Xr(e){e.state.focused||(e.display.input.focus(),Qr(e))}function Jr(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Zr(e))}),100)}function Qr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ye(e,"focus",e,t),e.state.focused=!0,R(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),s&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Yr(e))}function Zr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ye(e,"blur",e,t),e.state.focused=!1,M(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function eo(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var o=t.view[r],a=e.options.lineWrapping,i=void 0,s=0;if(!o.hidden){if(l&&u<8){var c=o.node.offsetTop+o.node.offsetHeight;i=c-n,n=c}else{var d=o.node.getBoundingClientRect();i=d.bottom-d.top,!a&&o.text.firstChild&&(s=o.text.firstChild.getBoundingClientRect().right-d.left-1)}var f=o.line.height-i;if((f>.005||f<-.005)&&(tt(o.line,i),to(o.line),o.rest))for(var p=0;p<o.rest.length;p++)to(o.rest[p]);if(s>e.display.sizerWidth){var h=Math.ceil(s/jr(e.display));h>e.display.maxLineLength&&(e.display.maxLineLength=h,e.display.maxLine=o.line,e.display.maxLineChanged=!0)}}}}function to(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function no(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-qn(e));var o=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=rt(t,r),i=rt(t,o);if(n&&n.ensure){var l=n.ensure.from.line,u=n.ensure.to.line;l<a?(a=l,i=rt(t,ln(Qe(t,l))+e.wrapper.clientHeight)):Math.min(u,t.lastLine())>=i&&(a=rt(t,ln(Qe(t,u))-e.wrapper.clientHeight),i=u)}return{from:a,to:Math.max(i,a+1)}}function ro(t,n){if(!be(t,"scrollCursorIntoView")){var r=ET_Builder.Frames.top,o=t.display,a=o.sizer.getBoundingClientRect(),i=null;if(n.top+a.top<0?i=!0:n.bottom+a.top>(r.innerHeight||e.documentElement.clientHeight)&&(i=!1),null!=i&&!m){var l=x("div","\u200b",null,"position: absolute;\n                         top: "+(n.top-o.viewOffset-qn(t.display))+"px;\n                         height: "+(n.bottom-n.top+Yn(t)+o.barHeight)+"px;\n                         left: "+n.left+"px; width: "+Math.max(2,n.right-n.left)+"px;");t.display.lineSpace.appendChild(l),l.scrollIntoView(i),t.display.lineSpace.removeChild(l)}}}function oo(e,t,n,r){var o;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?it(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?it(t.line,t.ch+1,"before"):t);for(var a=0;a<5;a++){var i=!1,l=_r(e,t),u=n&&n!=t?_r(e,n):l,s=io(e,o={left:Math.min(l.left,u.left),top:Math.min(l.top,u.top)-r,right:Math.max(l.left,u.left),bottom:Math.max(l.bottom,u.bottom)+r}),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=s.scrollTop&&(ho(e,s.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(i=!0)),null!=s.scrollLeft&&(go(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(i=!0)),!i)break}return o}function ao(e,t){var n=io(e,t);null!=n.scrollTop&&ho(e,n.scrollTop),null!=n.scrollLeft&&go(e,n.scrollLeft)}function io(e,t){var n=e.display,r=xr(e.display);t.top<0&&(t.top=0);var o=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=Jn(e),i={};t.bottom-t.top>a&&(t.bottom=t.top+a);var l=e.doc.height+Kn(n),u=t.top<r,s=t.bottom>l-r;if(t.top<o)i.scrollTop=u?0:t.top;else if(t.bottom>o+a){var c=Math.min(t.top,(s?l:t.bottom)-a);c!=o&&(i.scrollTop=c)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,p=Xn(e)-n.gutters.offsetWidth,h=t.right-t.left>p;return h&&(t.right=t.left+p),t.left<10?i.scrollLeft=0:t.left<f?i.scrollLeft=Math.max(0,t.left+d-(h?0:10)):t.right>p+f-3&&(i.scrollLeft=t.right+(h?0:10)-p),i}function lo(e,t){null!=t&&(fo(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function uo(e){fo(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function so(e,t,n){null==t&&null==n||fo(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function co(e,t){fo(e),e.curOp.scrollToPos=t}function fo(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,po(e,wr(e,t.from),wr(e,t.to),t.margin))}function po(e,t,n,r){var o=io(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});so(e,o.scrollLeft,o.scrollTop)}function ho(e,t){Math.abs(e.doc.scrollTop-t)<2||(r||zo(e,{top:t}),mo(e,t,!0),r&&zo(e),Bo(e,100))}function mo(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function go(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,Yo(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function vo(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Kn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Yn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var yo=function(e,t,n){this.cm=n;var r=this.vert=x("div",[x("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=x("div",[x("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=o.tabIndex=-1,e(r),e(o),me(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),me(o,"scroll",(function(){o.clientWidth&&t(o.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,l&&u<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};yo.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var o=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var a=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+a)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},yo.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},yo.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},yo.prototype.zeroWidthHack=function(){var e=b&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new W,this.disableVert=new W},yo.prototype.enableZeroWidthBar=function(t,n,r){function o(){var a=t.getBoundingClientRect();("vert"==r?e.elementFromPoint(a.right-1,(a.top+a.bottom)/2):e.elementFromPoint((a.right+a.left)/2,a.bottom-1))!=t?t.style.pointerEvents="none":n.set(1e3,o)}t.style.pointerEvents="auto",n.set(1e3,o)},yo.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var bo=function(){};function _o(e,t){t||(t=vo(e));var n=e.display.barWidth,r=e.display.barHeight;wo(e,t);for(var o=0;o<4&&n!=e.display.barWidth||r!=e.display.barHeight;o++)n!=e.display.barWidth&&e.options.lineWrapping&&eo(e),wo(e,vo(e)),n=e.display.barWidth,r=e.display.barHeight}function wo(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}bo.prototype.update=function(){return{bottom:0,right:0}},bo.prototype.setScrollLeft=function(){},bo.prototype.setScrollTop=function(){},bo.prototype.clear=function(){};var ko={native:yo,null:bo};function Oo(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&M(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ko[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),me(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?go(e,t):ho(e,t)}),e),e.display.scrollbars.addClass&&R(e.display.wrapper,e.display.scrollbars.addClass)}var Co=0;function So(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Co},En(e.curOp)}function Eo(e){var t=e.curOp;t&&Pn(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;Mo(e)}))}function Mo(e){for(var t=e.ops,n=0;n<t.length;n++)Po(t[n]);for(var r=0;r<t.length;r++)To(t[r]);for(var o=0;o<t.length;o++)xo(t[o]);for(var a=0;a<t.length;a++)jo(t[a]);for(var i=0;i<t.length;i++)Do(t[i])}function Po(e){var t=e.cm,n=t.display;Wo(t),e.updateMaxLine&&sn(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Io(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function To(e){e.updatedDisplay=e.mustUpdate&&Go(e.cm,e.update)}function xo(e){var t=e.cm,n=t.display;e.updatedDisplay&&eo(t),e.barMeasure=vo(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=tr(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Yn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Xn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function jo(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&go(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==L();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&_o(t,e.barMeasure),e.updatedDisplay&&$o(t,e.barMeasure),e.selectionChanged&&Yr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Xr(e.cm)}function Do(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&Uo(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&mo(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&go(t,e.scrollLeft,!0,!0),e.scrollToPos&&ro(t,oo(t,pt(r,e.scrollToPos.from),pt(r,e.scrollToPos.to),e.scrollToPos.margin));var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var i=0;i<o.length;++i)o[i].lines.length||ye(o[i],"hide");if(a)for(var l=0;l<a.length;++l)a[l].lines.length&&ye(a[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ye(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Lo(e,t){if(e.curOp)return t();So(e);try{return t()}finally{Eo(e)}}function Ro(e,t){return function(){if(e.curOp)return t.apply(e,arguments);So(e);try{return t.apply(e,arguments)}finally{Eo(e)}}}function No(e){return function(){if(this.curOp)return e.apply(this,arguments);So(this);try{return e.apply(this,arguments)}finally{Eo(this)}}}function Ao(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);So(t);try{return e.apply(this,arguments)}finally{Eo(t)}}}function Bo(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,B(Fo,e))}function Fo(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=_t(e,t.highlightFrontier),o=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(a){if(r.line>=e.display.viewFrom){var i=a.styles,l=a.text.length>e.options.maxHighlightLength?$e(t.mode,r.state):null,u=yt(e,a,r,!0);l&&(r.state=l),a.styles=u.styles;var s=a.styleClasses,c=u.classes;c?a.styleClasses=c:s&&(a.styleClasses=null);for(var d=!i||i.length!=a.styles.length||s!=c&&(!s||!c||s.bgClass!=c.bgClass||s.textClass!=c.textClass),f=0;!d&&f<i.length;++f)d=i[f]!=a.styles[f];d&&o.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&wt(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return Bo(e,e.options.workDelay),!0})),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),o.length&&Lo(e,(function(){for(var t=0;t<o.length;t++)Ir(e,o[t],"text")}))}}var Io=function(e,t,n){var r=e.display;this.viewport=t,this.visible=no(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Xn(e),this.force=n,this.dims=Dr(e),this.events=[]};function Wo(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Yn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Yn(e)+"px",t.scrollbarsClipped=!0)}function Vo(e){if(e.hasFocus())return null;var t=L();if(!t||!D(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&D(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}function Ho(t){if(t&&t.activeElt&&t.activeElt!=L()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&D(e.body,t.anchorNode)&&D(e.body,t.focusNode))){var n=window.getSelection(),r=e.createRange();r.setEnd(t.anchorNode,t.anchorOffset),r.collapse(!1),n.removeAllRanges(),n.addRange(r),n.extend(t.focusNode,t.focusOffset)}}function Go(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Wr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Gr(e))return!1;Xo(e)&&(Wr(e),t.dims=Dr(e));var o=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),i=Math.min(o,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>i&&n.viewTo-i<20&&(i=Math.min(o,n.viewTo)),jt&&(a=nn(e.doc,a),i=rn(e.doc,i));var l=a!=n.viewFrom||i!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Hr(e,a,i),n.viewOffset=ln(Qe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var u=Gr(e);if(!l&&0==u&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var s=Vo(e);return u>4&&(n.lineDiv.style.display="none"),qo(e,n.updateLineNumbers,t.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Ho(s),P(n.cursorDiv),P(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,l&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Bo(e,400)),n.updateLineNumbers=null,!0}function Uo(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Xn(e))r&&(t.visible=no(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Kn(e.display)-Jn(e),n.top)}),t.visible=no(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Go(e,t))break;eo(e);var o=vo(e);Ur(e),_o(e,o),$o(e,o),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function zo(e,t){var n=new Io(e,t);if(Go(e,n)){eo(e),Uo(e,n);var r=vo(e);Ur(e),_o(e,r),$o(e,r),n.finish()}}function qo(t,n,r){var o=t.display,a=t.options.lineNumbers,i=o.lineDiv,l=i.firstChild;function u(e){var n=e.nextSibling;return s&&b&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var c=o.view,d=o.viewFrom,f=0;f<c.length;f++){var p=c[f];if(p.hidden);else if(p.node&&p.node.parentNode==i){for(;l!=p.node;)l=u(l);var h=a&&null!=n&&n<=d&&p.lineNumber;p.changes&&(V(p.changes,"gutter")>-1&&(h=!1),Dn(t,p,d,r)),h&&(P(p.lineNumber),p.lineNumber.appendChild(e.createTextNode(at(t.options,d)))),l=p.node.nextSibling}else{var m=Wn(t,p,d,r);i.insertBefore(m,l)}d+=p.size}for(;l;)l=u(l)}function Ko(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function $o(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Yn(e)+"px"}function Yo(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=Lr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,a=r+"px",i=0;i<n.length;i++)if(!n[i].hidden){e.options.fixedGutter&&(n[i].gutter&&(n[i].gutter.style.left=a),n[i].gutterBackground&&(n[i].gutterBackground.style.left=a));var l=n[i].alignable;if(l)for(var u=0;u<l.length;u++)l[u].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+o+"px")}}function Xo(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=at(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var o=r.measure.appendChild(x("div",[x("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=o.firstChild.offsetWidth,i=o.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-i)+1,r.lineNumWidth=r.lineNumInnerWidth+i,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Ko(e.display),!0}return!1}function Jo(e,t){for(var n=[],r=!1,o=0;o<e.length;o++){var a=e[o],i=null;if("string"!=typeof a&&(i=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;r=!0}n.push({className:a,style:i})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Qo(e){var t=e.gutters,n=e.gutterSpecs;P(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var o=n[r],a=o.className,i=o.style,l=t.appendChild(x("div",null,"CodeMirror-gutter "+a));i&&(l.style.cssText=i),"CodeMirror-linenumbers"==a&&(e.lineGutter=l,l.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Ko(e)}function Zo(e){Qo(e.display),Fr(e),Yo(e)}function ea(e,t,n,o){var a=this;this.input=n,a.scrollbarFiller=x("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=x("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=j("div",null,"CodeMirror-code"),a.selectionDiv=x("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=x("div",null,"CodeMirror-cursors"),a.measure=x("div",null,"CodeMirror-measure"),a.lineMeasure=x("div",null,"CodeMirror-measure"),a.lineSpace=j("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");var i=j("div",[a.lineSpace],"CodeMirror-lines");a.mover=x("div",[i],null,"position: relative"),a.sizer=x("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=x("div",null,null,"position: absolute; height: "+H+"px; width: 1px;"),a.gutters=x("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=x("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=x("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),l&&u<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),s||r&&y||(a.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(a.wrapper):e(a.wrapper)),a.viewFrom=a.viewTo=t.first,a.reportedViewFrom=a.reportedViewTo=t.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=Jo(o.gutters,o.lineNumbers),Qo(a),n.init(a)}Io.prototype.signal=function(e,t){we(e,t)&&this.events.push(arguments)},Io.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ye.apply(null,this.events[e])};var ta=0,na=null;function ra(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function oa(e){var t=ra(e);return t.x*=na,t.y*=na,t}function aa(e,t){var n=ra(t),o=n.x,a=n.y,i=e.display,l=i.scroller,u=l.scrollWidth>l.clientWidth,c=l.scrollHeight>l.clientHeight;if(o&&u||a&&c){if(a&&b&&s)e:for(var d=t.target,p=i.view;d!=l;d=d.parentNode)for(var h=0;h<p.length;h++)if(p[h].node==d){e.display.currentWheelTarget=d;break e}if(o&&!r&&!f&&null!=na)return a&&c&&ho(e,Math.max(0,l.scrollTop+a*na)),go(e,Math.max(0,l.scrollLeft+o*na)),(!a||a&&c)&&Oe(t),void(i.wheelStartX=null);if(a&&null!=na){var m=a*na,g=e.doc.scrollTop,v=g+i.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),zo(e,{top:g,bottom:v})}ta<20&&(null==i.wheelStartX?(i.wheelStartX=l.scrollLeft,i.wheelStartY=l.scrollTop,i.wheelDX=o,i.wheelDY=a,setTimeout((function(){if(null!=i.wheelStartX){var e=l.scrollLeft-i.wheelStartX,t=l.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(na=(na*ta+n)/(ta+1),++ta)}}),200)):(i.wheelDX+=o,i.wheelDY+=a))}}l?na=-.53:r?na=15:d?na=-.7:p&&(na=-1/3);var ia=function(e,t){this.ranges=e,this.primIndex=t};ia.prototype.primary=function(){return this.ranges[this.primIndex]},ia.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!ut(n.anchor,r.anchor)||!ut(n.head,r.head))return!1}return!0},ia.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new la(st(this.ranges[t].anchor),st(this.ranges[t].head));return new ia(e,this.primIndex)},ia.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},ia.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(lt(t,r.from())>=0&&lt(e,r.to())<=0)return n}return-1};var la=function(e,t){this.anchor=e,this.head=t};function ua(e,t,n){var r=e&&e.options.selectionsMayTouch,o=t[n];t.sort((function(e,t){return lt(e.from(),t.from())})),n=V(t,o);for(var a=1;a<t.length;a++){var i=t[a],l=t[a-1],u=lt(l.to(),i.from());if(r&&!i.empty()?u>0:u>=0){var s=dt(l.from(),i.from()),c=ct(l.to(),i.to()),d=l.empty()?i.from()==i.head:l.from()==l.head;a<=n&&--n,t.splice(--a,2,new la(d?c:s,d?s:c))}}return new ia(t,n)}function sa(e,t){return new ia([new la(e,t||e)],0)}function ca(e){return e.text?it(e.from.line+e.text.length-1,X(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function da(e,t){if(lt(e,t.from)<0)return e;if(lt(e,t.to)<=0)return ca(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ca(t).ch-t.to.ch),it(n,r)}function fa(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var o=e.sel.ranges[r];n.push(new la(da(o.anchor,t),da(o.head,t)))}return ua(e.cm,n,e.sel.primIndex)}function pa(e,t,n){return e.line==t.line?it(n.line,e.ch-t.ch+n.ch):it(n.line+(e.line-t.line),e.ch)}function ha(e,t,n){for(var r=[],o=it(e.first,0),a=o,i=0;i<t.length;i++){var l=t[i],u=pa(l.from,o,a),s=pa(ca(l),o,a);if(o=l.to,a=s,"around"==n){var c=e.sel.ranges[i],d=lt(c.head,c.anchor)<0;r[i]=new la(d?s:u,d?u:s)}else r[i]=new la(u,u)}return new ia(r,e.sel.primIndex)}function ma(e){e.doc.mode=ze(e.options,e.doc.modeOption),ga(e)}function ga(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Bo(e,100),e.state.modeGen++,e.curOp&&Fr(e)}function va(e,t){return 0==t.from.ch&&0==t.to.ch&&""==X(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ya(e,t,n,r){function o(e){return n?n[e]:null}function a(e,n,o){dn(e,n,o,r),xn(e,"change",e,t)}function i(e,t){for(var n=[],a=e;a<t;++a)n.push(new cn(s[a],o(a),r));return n}var l=t.from,u=t.to,s=t.text,c=Qe(e,l.line),d=Qe(e,u.line),f=X(s),p=o(s.length-1),h=u.line-l.line;if(t.full)e.insert(0,i(0,s.length)),e.remove(s.length,e.size-s.length);else if(va(e,t)){var m=i(0,s.length-1);a(d,d.text,p),h&&e.remove(l.line,h),m.length&&e.insert(l.line,m)}else if(c==d)if(1==s.length)a(c,c.text.slice(0,l.ch)+f+c.text.slice(u.ch),p);else{var g=i(1,s.length-1);g.push(new cn(f+c.text.slice(u.ch),p,r)),a(c,c.text.slice(0,l.ch)+s[0],o(0)),e.insert(l.line+1,g)}else if(1==s.length)a(c,c.text.slice(0,l.ch)+s[0]+d.text.slice(u.ch),o(0)),e.remove(l.line+1,h);else{a(c,c.text.slice(0,l.ch)+s[0],o(0)),a(d,f+d.text.slice(u.ch),p);var v=i(1,s.length-1);h>1&&e.remove(l.line+1,h-1),e.insert(l.line+1,v)}xn(e,"change",e,t)}function ba(e,t,n){function r(e,o,a){if(e.linked)for(var i=0;i<e.linked.length;++i){var l=e.linked[i];if(l.doc!=o){var u=a&&l.sharedHist;n&&!u||(t(l.doc,u),r(l.doc,e,u))}}}r(e,null,!0)}function _a(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Nr(e),ma(e),wa(e),e.options.lineWrapping||sn(e),e.options.mode=t.modeOption,Fr(e)}function wa(e){("rtl"==e.doc.direction?R:M)(e.display.lineDiv,"CodeMirror-rtl")}function ka(e){Lo(e,(function(){wa(e),Fr(e)}))}function Oa(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ca(e,t){var n={from:st(t.from),to:ca(t),text:Ze(e,t.from,t.to)};return ja(e,n,t.from.line,t.to.line+1),ba(e,(function(e){return ja(e,n,t.from.line,t.to.line+1)}),!0),n}function Sa(e){for(;e.length&&X(e).ranges;)e.pop()}function Ea(e,t){return t?(Sa(e.done),X(e.done)):e.done.length&&!X(e.done).ranges?X(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),X(e.done)):void 0}function Ma(e,t,n,r){var o=e.history;o.undone.length=0;var a,i,l=+new Date;if((o.lastOp==r||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&o.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(a=Ea(o,o.lastOp==r)))i=X(a.changes),0==lt(t.from,t.to)&&0==lt(t.from,i.to)?i.to=ca(t):a.changes.push(Ca(e,t));else{var u=X(o.done);for(u&&u.ranges||xa(e.sel,o.done),a={changes:[Ca(e,t)],generation:o.generation},o.done.push(a);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(n),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=l,o.lastOp=o.lastSelOp=r,o.lastOrigin=o.lastSelOrigin=t.origin,i||ye(e,"historyAdded")}function Pa(e,t,n,r){var o=t.charAt(0);return"*"==o||"+"==o&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ta(e,t,n,r){var o=e.history,a=r&&r.origin;n==o.lastSelOp||a&&o.lastSelOrigin==a&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==a||Pa(e,a,X(o.done),t))?o.done[o.done.length-1]=t:xa(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=a,o.lastSelOp=n,r&&!1!==r.clearRedo&&Sa(o.undone)}function xa(e,t){var n=X(t);n&&n.ranges&&n.equals(e)||t.push(e)}function ja(e,t,n,r){var o=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),(function(n){n.markedSpans&&((o||(o=t["spans_"+e.id]={}))[a]=n.markedSpans),++a}))}function Da(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function La(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],o=0;o<t.text.length;++o)r.push(Da(n[o]));return r}function Ra(e,t){var n=La(e,t),r=Wt(e,t);if(!n)return r;if(!r)return n;for(var o=0;o<n.length;++o){var a=n[o],i=r[o];if(a&&i)e:for(var l=0;l<i.length;++l){for(var u=i[l],s=0;s<a.length;++s)if(a[s].marker==u.marker)continue e;a.push(u)}else i&&(n[o]=i)}return n}function Na(e,t,n){for(var r=[],o=0;o<e.length;++o){var a=e[o];if(a.ranges)r.push(n?ia.prototype.deepCopy.call(a):a);else{var i=a.changes,l=[];r.push({changes:l});for(var u=0;u<i.length;++u){var s=i[u],c=void 0;if(l.push({from:s.from,to:s.to,text:s.text}),t)for(var d in s)(c=d.match(/^spans_(\d+)$/))&&V(t,Number(c[1]))>-1&&(X(l)[d]=s[d],delete s[d])}}}return r}function Aa(e,t,n,r){if(r){var o=e.anchor;if(n){var a=lt(t,o)<0;a!=lt(n,o)<0?(o=t,t=n):a!=lt(t,n)<0&&(t=n)}return new la(o,t)}return new la(n||t,t)}function Ba(e,t,n,r,o){null==o&&(o=e.cm&&(e.cm.display.shift||e.extend)),Ga(e,new ia([Aa(e.sel.primary(),t,n,o)],0),r)}function Fa(e,t,n){for(var r=[],o=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)r[a]=Aa(e.sel.ranges[a],t[a],null,o);Ga(e,ua(e.cm,r,e.sel.primIndex),n)}function Ia(e,t,n,r){var o=e.sel.ranges.slice(0);o[t]=n,Ga(e,ua(e.cm,o,e.sel.primIndex),r)}function Wa(e,t,n,r){Ga(e,sa(t,n),r)}function Va(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new la(pt(e,t[n].anchor),pt(e,t[n].head))},origin:n&&n.origin};return ye(e,"beforeSelectionChange",e,r),e.cm&&ye(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?ua(e.cm,r.ranges,r.ranges.length-1):t}function Ha(e,t,n){var r=e.history.done,o=X(r);o&&o.ranges?(r[r.length-1]=t,Ua(e,t,n)):Ga(e,t,n)}function Ga(e,t,n){Ua(e,t,n),Ta(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Ua(e,t,n){(we(e,"beforeSelectionChange")||e.cm&&we(e.cm,"beforeSelectionChange"))&&(t=Va(e,t,n));var r=n&&n.bias||(lt(t.primary().head,e.sel.primary().head)<0?-1:1);za(e,Ka(e,t,r,!0)),n&&!1===n.scroll||!e.cm||uo(e.cm)}function za(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,_e(e.cm)),xn(e,"cursorActivity",e))}function qa(e){za(e,Ka(e,e.sel,null,!1))}function Ka(e,t,n,r){for(var o,a=0;a<t.ranges.length;a++){var i=t.ranges[a],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],u=Ya(e,i.anchor,l&&l.anchor,n,r),s=Ya(e,i.head,l&&l.head,n,r);(o||u!=i.anchor||s!=i.head)&&(o||(o=t.ranges.slice(0,a)),o[a]=new la(u,s))}return o?ua(e.cm,o,t.primIndex):t}function $a(e,t,n,r,o){var a=Qe(e,t.line);if(a.markedSpans)for(var i=0;i<a.markedSpans.length;++i){var l=a.markedSpans[i],u=l.marker,s="selectLeft"in u?!u.selectLeft:u.inclusiveLeft,c="selectRight"in u?!u.selectRight:u.inclusiveRight;if((null==l.from||(s?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(c?l.to>=t.ch:l.to>t.ch))){if(o&&(ye(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--i;continue}break}if(!u.atomic)continue;if(n){var d=u.find(r<0?1:-1),f=void 0;if((r<0?c:s)&&(d=Xa(e,d,-r,d&&d.line==t.line?a:null)),d&&d.line==t.line&&(f=lt(d,n))&&(r<0?f<0:f>0))return $a(e,d,t,r,o)}var p=u.find(r<0?-1:1);return(r<0?s:c)&&(p=Xa(e,p,r,p.line==t.line?a:null)),p?$a(e,p,t,r,o):null}}return t}function Ya(e,t,n,r,o){var a=r||1,i=$a(e,t,n,a,o)||!o&&$a(e,t,n,a,!0)||$a(e,t,n,-a,o)||!o&&$a(e,t,n,-a,!0);return i||(e.cantEdit=!0,it(e.first,0))}function Xa(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?pt(e,it(t.line-1)):null:n>0&&t.ch==(r||Qe(e,t.line)).text.length?t.line<e.first+e.size-1?it(t.line+1,0):null:new it(t.line,t.ch+n)}function Ja(e){e.setSelection(it(e.firstLine(),0),it(e.lastLine()),U)}function Qa(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,o,a){t&&(r.from=pt(e,t)),n&&(r.to=pt(e,n)),o&&(r.text=o),void 0!==a&&(r.origin=a)}),ye(e,"beforeChange",e,r),e.cm&&ye(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Za(e,t,n){if(e.cm){if(!e.cm.curOp)return Ro(e.cm,Za)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(we(e,"beforeChange")||e.cm&&we(e.cm,"beforeChange"))||(t=Qa(e,t,!0))){var r=xt&&!n&&Ht(e,t.from,t.to);if(r)for(var o=r.length-1;o>=0;--o)ei(e,{from:r[o].from,to:r[o].to,text:o?[""]:t.text,origin:t.origin});else ei(e,t)}}function ei(e,t){if(1!=t.text.length||""!=t.text[0]||0!=lt(t.from,t.to)){var n=fa(e,t);Ma(e,t,n,e.cm?e.cm.curOp.id:NaN),ri(e,t,n,Wt(e,t));var r=[];ba(e,(function(e,n){n||-1!=V(r,e.history)||(ui(e.history,t),r.push(e.history)),ri(e,t,null,Wt(e,t))}))}}function ti(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var o,a=e.history,i=e.sel,l="undo"==t?a.done:a.undone,u="undo"==t?a.undone:a.done,s=0;s<l.length&&(o=l[s],n?!o.ranges||o.equals(e.sel):o.ranges);s++);if(s!=l.length){for(a.lastOrigin=a.lastSelOrigin=null;;){if(!(o=l.pop()).ranges){if(r)return void l.push(o);break}if(xa(o,u),n&&!o.equals(e.sel))return void Ga(e,o,{clearRedo:!1});i=o}var c=[];xa(i,u),u.push({changes:c,generation:a.generation}),a.generation=o.generation||++a.maxGeneration;for(var d=we(e,"beforeChange")||e.cm&&we(e.cm,"beforeChange"),f=function(n){var r=o.changes[n];if(r.origin=t,d&&!Qa(e,r,!1))return l.length=0,{};c.push(Ca(e,r));var a=n?fa(e,r):X(l);ri(e,r,a,Ra(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:ca(r)});var i=[];ba(e,(function(e,t){t||-1!=V(i,e.history)||(ui(e.history,r),i.push(e.history)),ri(e,r,null,Ra(e,r))}))},p=o.changes.length-1;p>=0;--p){var h=f(p);if(h)return h.v}}}}function ni(e,t){if(0!=t&&(e.first+=t,e.sel=new ia(J(e.sel.ranges,(function(e){return new la(it(e.anchor.line+t,e.anchor.ch),it(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){Fr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Ir(e.cm,r,"gutter")}}function ri(e,t,n,r){if(e.cm&&!e.cm.curOp)return Ro(e.cm,ri)(e,t,n,r);if(t.to.line<e.first)ni(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);ni(e,o),t={from:it(e.first,0),to:it(t.to.line+o,t.to.ch),text:[X(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:it(a,Qe(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ze(e,t.from,t.to),n||(n=fa(e,t)),e.cm?oi(e.cm,t,r):ya(e,t,r),Ua(e,n,U),e.cantEdit&&Ya(e,it(e.firstLine(),0))&&(e.cantEdit=!1)}}function oi(e,t,n){var r=e.doc,o=e.display,a=t.from,i=t.to,l=!1,u=a.line;e.options.lineWrapping||(u=nt(Zt(Qe(r,a.line))),r.iter(u,i.line+1,(function(e){if(e==o.maxLine)return l=!0,!0}))),r.sel.contains(t.from,t.to)>-1&&_e(e),ya(r,t,n,Rr(e)),e.options.lineWrapping||(r.iter(u,a.line+t.text.length,(function(e){var t=un(e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,l=!1)})),l&&(e.curOp.updateMaxLine=!0)),Tt(r,a.line),Bo(e,400);var s=t.text.length-(i.line-a.line)-1;t.full?Fr(e):a.line!=i.line||1!=t.text.length||va(e.doc,t)?Fr(e,a.line,i.line+1,s):Ir(e,a.line,"text");var c=we(e,"changes"),d=we(e,"change");if(d||c){var f={from:a,to:i,text:t.text,removed:t.removed,origin:t.origin};d&&xn(e,"change",e,f),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function ai(e,t,n,r,o){var a;r||(r=n),lt(r,n)<0&&(n=(a=[r,n])[0],r=a[1]),"string"==typeof t&&(t=e.splitLines(t)),Za(e,{from:n,to:r,text:t,origin:o})}function ii(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function li(e,t,n,r){for(var o=0;o<e.length;++o){var a=e[o],i=!0;if(a.ranges){a.copied||((a=e[o]=a.deepCopy()).copied=!0);for(var l=0;l<a.ranges.length;l++)ii(a.ranges[l].anchor,t,n,r),ii(a.ranges[l].head,t,n,r)}else{for(var u=0;u<a.changes.length;++u){var s=a.changes[u];if(n<s.from.line)s.from=it(s.from.line+r,s.from.ch),s.to=it(s.to.line+r,s.to.ch);else if(t<=s.to.line){i=!1;break}}i||(e.splice(0,o+1),o=0)}}}function ui(e,t){var n=t.from.line,r=t.to.line,o=t.text.length-(r-n)-1;li(e.done,n,r,o),li(e.undone,n,r,o)}function si(e,t,n,r){var o=t,a=t;return"number"==typeof t?a=Qe(e,ft(e,t)):o=nt(t),null==o?null:(r(a,o)&&e.cm&&Ir(e.cm,o,n),a)}function ci(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function di(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var o=e[r];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}la.prototype.from=function(){return dt(this.anchor,this.head)},la.prototype.to=function(){return ct(this.anchor,this.head)},la.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ci.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var o=this.lines[n];this.height-=o.height,fn(o),xn(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},di.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e),i=r.height;if(r.removeInner(e,a),this.height-=i-r.height,o==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ci))){var l=[];this.collapse(l),this.children=[new ci(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var o=this.children[r],a=o.chunkSize();if(e<=a){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(var i=o.lines.length%25+25,l=i;l<o.lines.length;){var u=new ci(o.lines.slice(l,l+=25));o.height-=u.height,this.children.splice(++r,0,u),u.parent=this}o.lines=o.lines.slice(0,i),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new di(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=V(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new di(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var o=this.children[r],a=o.chunkSize();if(e<a){var i=Math.min(t,a-e);if(o.iterN(e,i,n))return!0;if(0==(t-=i))break;e=0}else e-=a}}};var fi=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function pi(e,t,n){ln(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&lo(e,n)}function hi(e,t,n,r){var o=new fi(e,n,r),a=e.cm;return a&&o.noHScroll&&(a.display.alignWidgets=!0),si(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==o.insertAt?n.push(o):n.splice(Math.min(n.length-1,Math.max(0,o.insertAt)),0,o),o.line=t,a&&!on(e,t)){var r=ln(t)<e.scrollTop;tt(t,t.height+Un(o)),r&&lo(a,o.height),a.curOp.forceUpdate=!0}return!0})),a&&xn(a,"lineWidgetAdded",a,o,"number"==typeof t?t:nt(t)),o}fi.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=nt(n);if(null!=r&&t){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(n.widgets=null);var a=Un(this);tt(n,Math.max(0,n.height-a)),e&&(Lo(e,(function(){pi(e,n,-a),Ir(e,r,"widget")})),xn(e,"lineWidgetCleared",e,this,r))}},fi.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var o=Un(this)-t;o&&(on(this.doc,r)||tt(r,r.height+o),n&&Lo(n,(function(){n.curOp.forceUpdate=!0,pi(n,r,o),xn(n,"lineWidgetChanged",n,e,nt(r))})))},ke(fi);var mi=0,gi=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++mi};function vi(e,t,n,r,o){if(r&&r.shared)return bi(e,t,n,r,o);if(e.cm&&!e.cm.curOp)return Ro(e.cm,vi)(e,t,n,r,o);var a=new gi(e,o),i=lt(t,n);if(r&&F(r,a,!1),i>0||0==i&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=j("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(Qt(e,t.line,t,n,a)||t.line!=n.line&&Qt(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Lt()}a.addToHistory&&Ma(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var l,u=t.line,s=e.cm;if(e.iter(u,n.line+1,(function(e){s&&a.collapsed&&!s.options.lineWrapping&&Zt(e)==s.display.maxLine&&(l=!0),a.collapsed&&u!=t.line&&tt(e,0),Bt(e,new Rt(a,u==t.line?t.ch:null,u==n.line?n.ch:null)),++u})),a.collapsed&&e.iter(t.line,n.line+1,(function(t){on(e,t)&&tt(t,0)})),a.clearOnEnter&&me(a,"beforeCursorEnter",(function(){return a.clear()})),a.readOnly&&(Dt(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++mi,a.atomic=!0),s){if(l&&(s.curOp.updateMaxLine=!0),a.collapsed)Fr(s,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var c=t.line;c<=n.line;c++)Ir(s,c,"text");a.atomic&&qa(s.doc),xn(s,"markerAdded",s,a)}return a}gi.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&So(e),we(this,"clear")){var n=this.find();n&&xn(this,"clear",n.from,n.to)}for(var r=null,o=null,a=0;a<this.lines.length;++a){var i=this.lines[a],l=Nt(i.markedSpans,this);e&&!this.collapsed?Ir(e,nt(i),"text"):e&&(null!=l.to&&(o=nt(i)),null!=l.from&&(r=nt(i))),i.markedSpans=At(i.markedSpans,l),null==l.from&&this.collapsed&&!on(this.doc,i)&&e&&tt(i,xr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var s=Zt(this.lines[u]),c=un(s);c>e.display.maxLineLength&&(e.display.maxLine=s,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Fr(e,r,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&qa(e.doc)),e&&xn(e,"markerCleared",e,this,r,o),t&&Eo(e),this.parent&&this.parent.clear()}},gi.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var o=0;o<this.lines.length;++o){var a=this.lines[o],i=Nt(a.markedSpans,this);if(null!=i.from&&(n=it(t?a:nt(a),i.from),-1==e))return n;if(null!=i.to&&(r=it(t?a:nt(a),i.to),1==e))return r}return n&&{from:n,to:r}},gi.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Lo(r,(function(){var o=t.line,a=nt(t.line),i=nr(r,a);if(i&&(dr(i),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!on(n.doc,o)&&null!=n.height){var l=n.height;n.height=null;var u=Un(n)-l;u&&tt(o,o.height+u)}xn(r,"markerChanged",r,e)}))},gi.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=V(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},gi.prototype.detachLine=function(e){if(this.lines.splice(V(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ke(gi);var yi=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function bi(e,t,n,r,o){(r=F(r)).shared=!1;var a=[vi(e,t,n,r,o)],i=a[0],l=r.widgetNode;return ba(e,(function(e){l&&(r.widgetNode=l.cloneNode(!0)),a.push(vi(e,pt(e,t),pt(e,n),r,o));for(var u=0;u<e.linked.length;++u)if(e.linked[u].isParent)return;i=X(a)})),new yi(a,i)}function _i(e){return e.findMarks(it(e.first,0),e.clipPos(it(e.lastLine())),(function(e){return e.parent}))}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=r.find(),a=e.clipPos(o.from),i=e.clipPos(o.to);if(lt(a,i)){var l=vi(e,a,i,r.primary,r.primary.type);r.markers.push(l),l.parent=r}}}function ki(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];ba(n.primary.doc,(function(e){return r.push(e)}));for(var o=0;o<n.markers.length;o++){var a=n.markers[o];-1==V(r,a.doc)&&(a.parent=null,n.markers.splice(o--,1))}},n=0;n<e.length;n++)t(n)}yi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();xn(this,"clear")}},yi.prototype.find=function(e,t){return this.primary.find(e,t)},ke(yi);var Oi=0,Ci=function(e,t,n,r,o){if(!(this instanceof Ci))return new Ci(e,t,n,r,o);null==n&&(n=0),di.call(this,[new ci([new cn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=it(n,0);this.sel=sa(a),this.history=new Oa(null),this.id=++Oi,this.modeOption=t,this.lineSep=r,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),ya(this,{from:a,to:a,text:e}),Ga(this,sa(a),U)};Ci.prototype=ee(di.prototype,{constructor:Ci,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=et(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Ao((function(e){var t=it(this.first,0),n=this.first+this.size-1;Za(this,{from:t,to:it(n,Qe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&so(this.cm,0,0),Ga(this,sa(t),U)})),replaceRange:function(e,t,n,r){ai(this,e,t=pt(this,t),n=n?pt(this,n):t,r)},getRange:function(e,t,n){var r=Ze(this,pt(this,e),pt(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ot(this,e))return Qe(this,e)},getLineNumber:function(e){return nt(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Qe(this,e)),Zt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return pt(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ao((function(e,t,n){Wa(this,pt(this,"number"==typeof e?it(e,t||0):e),null,n)})),setSelection:Ao((function(e,t,n){Wa(this,pt(this,e),pt(this,t||e),n)})),extendSelection:Ao((function(e,t,n){Ba(this,pt(this,e),t&&pt(this,t),n)})),extendSelections:Ao((function(e,t){Fa(this,mt(this,e),t)})),extendSelectionsBy:Ao((function(e,t){Fa(this,mt(this,J(this.sel.ranges,e)),t)})),setSelections:Ao((function(e,t,n){if(e.length){for(var r=[],o=0;o<e.length;o++)r[o]=new la(pt(this,e[o].anchor),pt(this,e[o].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ga(this,ua(this.cm,r,t),n)}})),addSelection:Ao((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new la(pt(this,e),pt(this,t||e))),Ga(this,ua(this.cm,r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var o=Ze(this,n[r].from(),n[r].to());t=t?t.concat(o):o}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var o=Ze(this,n[r].from(),n[r].to());!1!==e&&(o=o.join(e||this.lineSeparator())),t[r]=o}return t},replaceSelection:function(e,t,n){for(var r=[],o=0;o<this.sel.ranges.length;o++)r[o]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Ao((function(e,t,n){for(var r=[],o=this.sel,a=0;a<o.ranges.length;a++){var i=o.ranges[a];r[a]={from:i.from(),to:i.to(),text:this.splitLines(e[a]),origin:n}}for(var l=t&&"end"!=t&&ha(this,r,t),u=r.length-1;u>=0;u--)Za(this,r[u]);l?Ha(this,l):this.cm&&uo(this.cm)})),undo:Ao((function(){ti(this,"undo")})),redo:Ao((function(){ti(this,"redo")})),undoSelection:Ao((function(){ti(this,"undo",!0)})),redoSelection:Ao((function(){ti(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var o=0;o<e.undone.length;o++)e.undone[o].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Oa(this.history.maxGeneration),ba(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Na(this.history.done),undone:Na(this.history.undone)}},setHistory:function(e){var t=this.history=new Oa(this.history.maxGeneration);t.done=Na(e.done.slice(0),null,!0),t.undone=Na(e.undone.slice(0),null,!0)},setGutterMarker:Ao((function(e,t,n){return si(this,e,"gutter",(function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&oe(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:Ao((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&si(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,oe(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!ot(this,e))return null;if(t=e,!(e=Qe(this,e)))return null}else if(null==(t=nt(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Ao((function(e,t,n){return si(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(S(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0}))})),removeLineClass:Ao((function(e,t,n){return si(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",o=e[r];if(!o)return!1;if(null==n)e[r]=null;else{var a=o.match(S(n));if(!a)return!1;var i=a.index+a[0].length;e[r]=o.slice(0,a.index)+(a.index&&i!=o.length?" ":"")+o.slice(i)||null}return!0}))})),addLineWidget:Ao((function(e,t,n){return hi(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return vi(this,pt(this,e),pt(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return vi(this,e=pt(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Qe(this,(e=pt(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var o=n[r];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,n){e=pt(this,e),t=pt(this,t);var r=[],o=e.line;return this.iter(e.line,t.line+1,(function(a){var i=a.markedSpans;if(i)for(var l=0;l<i.length;l++){var u=i[l];null!=u.to&&o==e.line&&e.ch>=u.to||null==u.from&&o!=e.line||null!=u.from&&o==t.line&&u.from>=t.ch||n&&!n(u.marker)||r.push(u.marker.parent||u.marker)}++o})),r},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)})),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter((function(o){var a=o.text.length+r;if(a>e)return t=e,!0;e-=a,++n})),pt(this,it(n,t))},indexFromPos:function(e){var t=(e=pt(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Ci(et(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Ci(et(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],wi(r,_i(this)),r},unlinkDoc:function(e){if(e instanceof Fl&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),ki(_i(this));break}if(e.history==this.history){var n=[e.id];ba(e,(function(e){return n.push(e.id)}),!0),e.history=new Oa(null),e.history.done=Na(this.history.done,n),e.history.undone=Na(this.history.undone,n)}},iterLinkedDocs:function(e){ba(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ne(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Ao((function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&ka(this.cm))}))}),Ci.prototype.eachLine=Ci.prototype.iter;var Si=0;function Ei(e){var t=this;if(Ti(t),!be(t,e)&&!zn(t.display,e)){Oe(e),l&&(Si=+new Date);var n=Ar(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var o=r.length,a=Array(o),i=0,u=function(){++i==o&&Ro(t,(function(){var e={from:n=pt(t.doc,n),to:n,text:t.doc.splitLines(a.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};Za(t.doc,e),Ha(t.doc,sa(pt(t.doc,n),pt(t.doc,ca(e))))}))()},s=function(e,n){if(t.options.allowDropFileTypes&&-1==V(t.options.allowDropFileTypes,e.type))u();else{var r=new FileReader;r.onerror=function(){return u()},r.onload=function(){var e=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(a[n]=e),u()},r.readAsText(e)}},c=0;c<r.length;c++)s(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),Ua(t.doc,sa(n,n)),f)for(var p=0;p<f.length;++p)ai(t.doc,"",f[p].anchor,f[p].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Mi(e,t){if(l&&(!e.state.draggingText||+new Date-Si<100))Ee(t);else if(!be(e,t)&&!zn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var n=x("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}function Pi(t,n){var r=Ar(t,n);if(r){var o=e.createDocumentFragment();qr(t,r,o),t.display.dragCursor||(t.display.dragCursor=x("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),T(t.display.dragCursor,o)}}function Ti(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function xi(t){if(e.getElementsByClassName){for(var n=e.getElementsByClassName("CodeMirror"),r=[],o=0;o<n.length;o++){var a=n[o].CodeMirror;a&&r.push(a)}r.length&&r[0].operation((function(){for(var e=0;e<r.length;e++)t(r[e])}))}}var ji=!1;function Di(){ji||(Li(),ji=!0)}function Li(){var e;me(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,xi(Ri)}),100))})),me(window,"blur",(function(){return xi(Zr)}))}function Ri(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ni={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ai=0;Ai<10;Ai++)Ni[Ai+48]=Ni[Ai+96]=String(Ai);for(var Bi=65;Bi<=90;Bi++)Ni[Bi]=String.fromCharCode(Bi);for(var Fi=1;Fi<=12;Fi++)Ni[Fi+111]=Ni[Fi+63235]="F"+Fi;var Ii={};function Wi(e){var t,n,r,o,a=e.split(/-(?!$)/);e=a[a.length-1];for(var i=0;i<a.length-1;i++){var l=a[i];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Vi(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var o=J(n.split(" "),Wi),a=0;a<o.length;a++){var i=void 0,l=void 0;a==o.length-1?(l=o.join(" "),i=r):(l=o.slice(0,a+1).join(" "),i="...");var u=t[l];if(u){if(u!=i)throw new Error("Inconsistent bindings for "+l)}else t[l]=i}delete e[n]}for(var s in t)e[s]=t[s];return e}function Hi(e,t,n,r){var o=(t=qi(t)).call?t.call(e,r):t[e];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Hi(e,t.fallthrough,n,r);for(var a=0;a<t.fallthrough.length;a++){var i=Hi(e,t.fallthrough[a],n,r);if(i)return i}}}function Gi(e){var t="string"==typeof e?e:Ni[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ui(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(O?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(O?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function zi(e,t){if(f&&34==e.keyCode&&e.char)return!1;var n=Ni[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Ui(n,e,t))}function qi(e){return"string"==typeof e?Ii[e]:e}function Ki(e,t){for(var n=e.doc.sel.ranges,r=[],o=0;o<n.length;o++){for(var a=t(n[o]);r.length&&lt(a.from,X(r).to)<=0;){var i=r.pop();if(lt(i.from,a.from)<0){a.from=i.from;break}}r.push(a)}Lo(e,(function(){for(var t=r.length-1;t>=0;t--)ai(e.doc,"",r[t].from,r[t].to,"+delete");uo(e)}))}function $i(e,t,n){var r=le(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Yi(e,t,n){var r=$i(e,t.ch,n);return null==r?null:new it(t.line,r,n<0?"after":"before")}function Xi(e,t,n,r,o){if(e){"rtl"==t.doc.direction&&(o=-o);var a=pe(n,t.doc.direction);if(a){var i,l=o<0?X(a):a[0],u=o<0==(1==l.level)?"after":"before";if(l.level>0||"rtl"==t.doc.direction){var s=rr(t,n);i=o<0?n.text.length-1:0;var c=or(t,s,i).top;i=ue((function(e){return or(t,s,e).top==c}),o<0==(1==l.level)?l.from:l.to-1,i),"before"==u&&(i=$i(n,i,1))}else i=o<0?l.to:l.from;return new it(r,i,u)}}return new it(r,o<0?n.text.length:0,o<0?"before":"after")}function Ji(e,t,n,r){var o=pe(t,e.doc.direction);if(!o)return Yi(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=de(o,n.ch,n.sticky),i=o[a];if("ltr"==e.doc.direction&&i.level%2==0&&(r>0?i.to>n.ch:i.from<n.ch))return Yi(t,n,r);var l,u=function(e,n){return $i(t,e instanceof it?e.ch:e,n)},s=function(n){return e.options.lineWrapping?(l=l||rr(e,t),Sr(e,t,l,n)):{begin:0,end:t.text.length}},c=s("before"==n.sticky?u(n,-1):n.ch);if("rtl"==e.doc.direction||1==i.level){var d=1==i.level==r<0,f=u(n,d?1:-1);if(null!=f&&(d?f<=i.to&&f<=c.end:f>=i.from&&f>=c.begin)){var p=d?"before":"after";return new it(n.line,f,p)}}var h=function(e,t,r){for(var a=function(e,t){return t?new it(n.line,u(e,1),"before"):new it(n.line,e,"after")};e>=0&&e<o.length;e+=t){var i=o[e],l=t>0==(1!=i.level),s=l?r.begin:u(r.end,-1);if(i.from<=s&&s<i.to)return a(s,l);if(s=l?i.from:u(i.to,-1),r.begin<=s&&s<r.end)return a(s,l)}},m=h(a+r,r,c);if(m)return m;var g=r>0?c.end:u(c.begin,-1);return null==g||r>0&&g==t.text.length||!(m=h(r>0?0:o.length-1,r,s(g)))?null:m}Ii.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ii.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ii.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ii.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ii.default=b?Ii.macDefault:Ii.pcDefault;var Qi={selectAll:Ja,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),U)},killLine:function(e){return Ki(e,(function(t){if(t.empty()){var n=Qe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:it(t.head.line+1,0)}:{from:t.head,to:it(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Ki(e,(function(t){return{from:it(t.from().line,0),to:pt(e.doc,it(t.to().line+1,0))}}))},delLineLeft:function(e){return Ki(e,(function(e){return{from:it(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Ki(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Ki(e,(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(it(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(it(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return Zi(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return tl(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return el(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),q)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),q)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?tl(e,t.head):r}),q)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,o=0;o<n.length;o++){var a=n[o].from(),i=I(e.getLine(a.line),a.ch,r);t.push(Y(r-i%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Lo(e,(function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var o=t[r].head,a=Qe(e.doc,o.line).text;if(a)if(o.ch==a.length&&(o=new it(o.line,o.ch-1)),o.ch>0)o=new it(o.line,o.ch+1),e.replaceRange(a.charAt(o.ch-1)+a.charAt(o.ch-2),it(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var i=Qe(e.doc,o.line-1).text;i&&(o=new it(o.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+i.charAt(i.length-1),it(o.line-1,i.length-1),o,"+transpose"))}n.push(new la(o,o))}e.setSelections(n)}))},newlineAndIndent:function(e){return Lo(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);uo(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Zi(e,t){var n=Qe(e.doc,t),r=Zt(n);return r!=n&&(t=nt(r)),Xi(!0,e,r,t,1)}function el(e,t){var n=Qe(e.doc,t),r=en(n);return r!=n&&(t=nt(r)),Xi(!0,e,n,t,-1)}function tl(e,t){var n=Zi(e,t.line),r=Qe(e.doc,n.line),o=pe(r,e.doc.direction);if(!o||0==o[0].level){var a=Math.max(n.ch,r.text.search(/\S/)),i=t.line==n.line&&t.ch<=a&&t.ch;return it(n.line,i?0:a,n.sticky)}return n}function nl(e,t,n){if("string"==typeof t&&!(t=Qi[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),o=t(e)!=G}finally{e.display.shift=r,e.state.suppressEdits=!1}return o}function rl(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var o=Hi(t,e.state.keyMaps[r],n,e);if(o)return o}return e.options.extraKeys&&Hi(t,e.options.extraKeys,n,e)||Hi(t,e.options.keyMap,n,e)}var ol=new W;function al(e,t,n,r){var o=e.state.keySeq;if(o){if(Gi(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ol.set(50,(function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())})),il(e,o+" "+t,n,r))return!0}return il(e,t,n,r)}function il(e,t,n,r){var o=rl(e,t,r);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&xn(e,"keyHandled",e,t,n),"handled"!=o&&"multi"!=o||(Oe(n),Yr(e)),!!o}function ll(e,t){var n=zi(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?al(e,"Shift-"+n,t,(function(t){return nl(e,t,!0)}))||al(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return nl(e,t)})):al(e,n,t,(function(t){return nl(e,t)})))}function ul(e,t,n){return al(e,"'"+n+"'",t,(function(t){return nl(e,t,!0)}))}var sl=null;function cl(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||(n.curOp.focus=L(),be(n,t)))){l&&u<11&&27==t.keyCode&&(t.returnValue=!1);var o=t.keyCode;n.display.shift=16==o||t.shiftKey;var a=ll(n,t);f&&(sl=a?o:null,a||88!=o||Be||!(b?t.metaKey:t.ctrlKey)||n.replaceSelection("",null,"cut")),r&&!b&&!a&&46==o&&t.shiftKey&&!t.ctrlKey&&e.execCommand&&e.execCommand("cut"),18!=o||/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)||dl(n)}}function dl(t){var n=t.display.lineDiv;function r(t){18!=t.keyCode&&t.altKey||(M(n,"CodeMirror-crosshair"),ve(e,"keyup",r),ve(e,"mouseover",r))}R(n,"CodeMirror-crosshair"),me(e,"keyup",r),me(e,"mouseover",r)}function fl(e){16==e.keyCode&&(this.doc.sel.shift=!1),be(this,e)}function pl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||zn(t.display,e)||be(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(f&&n==sl)return sl=null,void Oe(e);if(!f||e.which&&!(e.which<10)||!ll(t,e)){var o=String.fromCharCode(null==r?n:r);"\b"!=o&&(ul(t,e,o)||t.display.input.onKeyPress(e))}}}var hl,ml,gl=400,vl=function(e,t,n){this.time=e,this.pos=t,this.button=n};function yl(e,t){var n=+new Date;return ml&&ml.compare(n,e,t)?(hl=ml=null,"triple"):hl&&hl.compare(n,e,t)?(ml=new vl(n,e,t),hl=null,"double"):(hl=new vl(n,e,t),ml=null,"single")}function bl(e){var t=this,n=t.display;if(!(be(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,zn(n,e))s||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!Pl(t,e)){var r=Ar(t,e),o=Pe(e),a=r?yl(r,o):"single";window.focus(),1==o&&t.state.selectingText&&t.state.selectingText(e),r&&_l(t,o,r,a,e)||(1==o?r?kl(t,r,a,e):Me(e)==n.scroller&&Oe(e):2==o?(r&&Ba(t.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==o&&(C?t.display.input.onContextMenu(e):Jr(t)))}}function _l(e,t,n,r,o){var a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),al(e,Ui(a=(1==t?"Left":2==t?"Middle":"Right")+a,o),o,(function(t){if("string"==typeof t&&(t=Qi[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=G}finally{e.state.suppressEdits=!1}return r}))}function wl(e,t,n){var r=e.getOption("configureMouse"),o=r?r(e,t,n):{};if(null==o.unit){var a=_?n.shiftKey&&n.metaKey:n.altKey;o.unit=a?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==o.extend||e.doc.extend)&&(o.extend=e.doc.extend||n.shiftKey),null==o.addNew&&(o.addNew=b?n.metaKey:n.ctrlKey),null==o.moveOnDrag&&(o.moveOnDrag=!(b?n.altKey:n.ctrlKey)),o}function kl(e,t,n,r){l?setTimeout(B(Xr,e),0):e.curOp.focus=L();var o,a=wl(e,n,r),i=e.doc.sel;e.options.dragDrop&&je&&!e.isReadOnly()&&"single"==n&&(o=i.contains(t))>-1&&(lt((o=i.ranges[o]).from(),t)<0||t.xRel>0)&&(lt(o.to(),t)>0||t.xRel<0)?Ol(e,r,t,a):Sl(e,r,t,a)}function Ol(e,t,n,r){var o=e.display,a=!1,i=Ro(e,(function(t){s&&(o.scroller.draggable=!1),e.state.draggingText=!1,ve(o.wrapper.ownerDocument,"mouseup",i),ve(o.wrapper.ownerDocument,"mousemove",c),ve(o.scroller,"dragstart",d),ve(o.scroller,"drop",i),a||(Oe(t),r.addNew||Ba(e.doc,n,null,null,r.extend),s&&!p||l&&9==u?setTimeout((function(){o.wrapper.ownerDocument.body.focus({preventScroll:!0}),o.input.focus()}),20):o.input.focus())})),c=function(e){a=a||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return a=!0};s&&(o.scroller.draggable=!0),e.state.draggingText=i,i.copy=!r.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop(),me(o.wrapper.ownerDocument,"mouseup",i),me(o.wrapper.ownerDocument,"mousemove",c),me(o.scroller,"dragstart",d),me(o.scroller,"drop",i),Jr(e),setTimeout((function(){return o.input.focus()}),20)}function Cl(e,t,n){if("char"==n)return new la(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new la(it(t.line,0),pt(e.doc,it(t.line+1,0)));var r=n(e,t);return new la(r.from,r.to)}function Sl(e,t,n,r){var o=e.display,a=e.doc;Oe(t);var i,l,u=a.sel,s=u.ranges;if(r.addNew&&!r.extend?(l=a.sel.contains(n),i=l>-1?s[l]:new la(n,n)):(i=a.sel.primary(),l=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(i=new la(n,n)),n=Ar(e,t,!0,!0),l=-1;else{var c=Cl(e,n,r.unit);i=r.extend?Aa(i,c.anchor,c.head,r.extend):c}r.addNew?-1==l?(l=s.length,Ga(a,ua(e,s.concat([i]),l),{scroll:!1,origin:"*mouse"})):s.length>1&&s[l].empty()&&"char"==r.unit&&!r.extend?(Ga(a,ua(e,s.slice(0,l).concat(s.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),u=a.sel):Ia(a,l,i,z):(l=0,Ga(a,new ia([i],0),z),u=a.sel);var d=n;function f(t){if(0!=lt(d,t))if(d=t,"rectangle"==r.unit){for(var o=[],s=e.options.tabSize,c=I(Qe(a,n.line).text,n.ch,s),f=I(Qe(a,t.line).text,t.ch,s),p=Math.min(c,f),h=Math.max(c,f),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=Qe(a,m).text,y=K(v,p,s);p==h?o.push(new la(it(m,y),it(m,y))):v.length>y&&o.push(new la(it(m,y),it(m,K(v,h,s))))}o.length||o.push(new la(n,n)),Ga(a,ua(e,u.ranges.slice(0,l).concat(o),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,_=i,w=Cl(e,t,r.unit),k=_.anchor;lt(w.anchor,k)>0?(b=w.head,k=dt(_.from(),w.anchor)):(b=w.anchor,k=ct(_.to(),w.head));var O=u.ranges.slice(0);O[l]=El(e,new la(pt(a,k),b)),Ga(a,ua(e,O,l),z)}}var p=o.wrapper.getBoundingClientRect(),h=0;function m(t){var n=++h,i=Ar(e,t,!0,"rectangle"==r.unit);if(i)if(0!=lt(i,d)){e.curOp.focus=L(),f(i);var l=no(o,a);(i.line>=l.to||i.line<l.from)&&setTimeout(Ro(e,(function(){h==n&&m(t)})),150)}else{var u=t.clientY<p.top?-20:t.clientY>p.bottom?20:0;u&&setTimeout(Ro(e,(function(){h==n&&(o.scroller.scrollTop+=u,m(t))})),50)}}function g(t){e.state.selectingText=!1,h=1/0,t&&(Oe(t),o.input.focus()),ve(o.wrapper.ownerDocument,"mousemove",v),ve(o.wrapper.ownerDocument,"mouseup",y),a.history.lastSelOrigin=null}var v=Ro(e,(function(e){0!==e.buttons&&Pe(e)?m(e):g(e)})),y=Ro(e,g);e.state.selectingText=y,me(o.wrapper.ownerDocument,"mousemove",v),me(o.wrapper.ownerDocument,"mouseup",y)}function El(e,t){var n=t.anchor,r=t.head,o=Qe(e.doc,n.line);if(0==lt(n,r)&&n.sticky==r.sticky)return t;var a=pe(o);if(!a)return t;var i=de(a,n.ch,n.sticky),l=a[i];if(l.from!=n.ch&&l.to!=n.ch)return t;var u,s=i+(l.from==n.ch==(1!=l.level)?0:1);if(0==s||s==a.length)return t;if(r.line!=n.line)u=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=de(a,r.ch,r.sticky),d=c-i||(r.ch-n.ch)*(1==l.level?-1:1);u=c==s-1||c==s?d<0:d>0}var f=a[s+(u?-1:0)],p=u==(1==f.level),h=p?f.from:f.to,m=p?"after":"before";return n.ch==h&&n.sticky==m?t:new la(new it(n.line,h,m),r)}function Ml(e,t,n,r){var o,a;if(t.touches)o=t.touches[0].clientX,a=t.touches[0].clientY;else try{o=t.clientX,a=t.clientY}catch(e){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Oe(t);var i=e.display,l=i.lineDiv.getBoundingClientRect();if(a>l.bottom||!we(e,n))return Se(t);a-=l.top-i.viewOffset;for(var u=0;u<e.display.gutterSpecs.length;++u){var s=i.gutters.childNodes[u];if(s&&s.getBoundingClientRect().right>=o)return ye(e,n,e,rt(e.doc,a),e.display.gutterSpecs[u].className,t),Se(t)}}function Pl(e,t){return Ml(e,t,"gutterClick",!0)}function Tl(e,t){zn(e.display,t)||xl(e,t)||be(e,t,"contextmenu")||C||e.display.input.onContextMenu(t)}function xl(e,t){return!!we(e,"gutterContextMenu")&&Ml(e,t,"gutterContextMenu",!1)}function jl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),pr(e)}vl.prototype.compare=function(e,t,n){return this.time+gl>e&&0==lt(t,this.pos)&&n==this.button};var Dl={toString:function(){return"CodeMirror.Init"}},Ll={},Rl={};function Nl(e){var t=e.optionHandlers;function n(n,r,o,a){e.defaults[n]=r,o&&(t[n]=a?function(e,t,n){n!=Dl&&o(e,t,n)}:o)}e.defineOption=n,e.Init=Dl,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,ma(e)}),!0),n("indentUnit",2,ma,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){ga(e),pr(e),Fr(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter((function(e){for(var o=0;;){var a=e.text.indexOf(t,o);if(-1==a)break;o=a+t.length,n.push(it(r,a))}r++}));for(var o=n.length-1;o>=0;o--)ai(e.doc,t,n[o],it(n[o].line,n[o].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Dl&&e.refresh()})),n("specialCharPlaceholder",vn,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){jl(e),Zo(e)}),!0),n("keyMap","default",(function(e,t,n){var r=qi(t),o=n!=Dl&&qi(n);o&&o.detach&&o.detach(e,r),r.attach&&r.attach(e,o||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Bl,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=Jo(t,e.options.lineNumbers),Zo(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?Lr(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return _o(e)}),!0),n("scrollbarStyle","native",(function(e){Oo(e),_o(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=Jo(e.options.gutters,t),Zo(e)}),!0),n("firstLineNumber",1,Zo,!0),n("lineNumberFormatter",(function(e){return e}),Zo,!0),n("showCursorWhenSelecting",!1,Ur,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Zr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Al),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,Ur,!0),n("singleCursorHeightPerLine",!0,Ur,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,ga,!0),n("addModeClass",!1,ga,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,ga,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}function Al(e,t,n){if(!t!=!(n&&n!=Dl)){var r=e.display.dragFunctions,o=t?me:ve;o(e.display.scroller,"dragstart",r.start),o(e.display.scroller,"dragenter",r.enter),o(e.display.scroller,"dragover",r.over),o(e.display.scroller,"dragleave",r.leave),o(e.display.scroller,"drop",r.drop)}}function Bl(e){e.options.lineWrapping?(R(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(M(e.display.wrapper,"CodeMirror-wrap"),sn(e)),Nr(e),Fr(e),pr(e),setTimeout((function(){return _o(e)}),100)}function Fl(e,t){var n=this;if(!(this instanceof Fl))return new Fl(e,t);this.options=t=t?F(t):{},F(Ll,t,!1);var r=t.value;"string"==typeof r?r=new Ci(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var o=new Fl.inputStyles[t.inputStyle](this),a=this.display=new ea(e,r,o,t);for(var i in a.wrapper.CodeMirror=this,jl(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Oo(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new W,keySeq:null,specialChars:null},t.autofocus&&!y&&a.input.focus(),l&&u<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),Il(this),Di(),So(this),this.curOp.forceUpdate=!0,_a(this,r),t.autofocus&&!y||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Qr(n)}),20):Zr(this),Rl)Rl.hasOwnProperty(i)&&Rl[i](this,t[i],Dl);Xo(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Wl.length;++c)Wl[c](this);Eo(this),s&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function Il(e){var t=e.display;me(t.scroller,"mousedown",Ro(e,bl)),me(t.scroller,"dblclick",l&&u<11?Ro(e,(function(t){if(!be(e,t)){var n=Ar(e,t);if(n&&!Pl(e,t)&&!zn(e.display,t)){Oe(t);var r=e.findWordAt(n);Ba(e.doc,r.anchor,r.head)}}})):function(t){return be(e,t)||Oe(t)}),me(t.scroller,"contextmenu",(function(t){return Tl(e,t)})),me(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||Tl(e,n)}));var n,r={end:0};function o(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(r=t.activeTouch).end=+new Date)}function a(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function i(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}me(t.scroller,"touchstart",(function(o){if(!be(e,o)&&!a(o)&&!Pl(e,o)){t.input.ensurePolled(),clearTimeout(n);var i=+new Date;t.activeTouch={start:i,moved:!1,prev:i-r.end<=300?r:null},1==o.touches.length&&(t.activeTouch.left=o.touches[0].pageX,t.activeTouch.top=o.touches[0].pageY)}})),me(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),me(t.scroller,"touchend",(function(n){var r=t.activeTouch;if(r&&!zn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,l=e.coordsChar(t.activeTouch,"page");a=!r.prev||i(r,r.prev)?new la(l,l):!r.prev.prev||i(r,r.prev.prev)?e.findWordAt(l):new la(it(l.line,0),pt(e.doc,it(l.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),Oe(n)}o()})),me(t.scroller,"touchcancel",o),me(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(ho(e,t.scroller.scrollTop),go(e,t.scroller.scrollLeft,!0),ye(e,"scroll",e))})),me(t.scroller,"mousewheel",(function(t){return aa(e,t)})),me(t.scroller,"DOMMouseScroll",(function(t){return aa(e,t)})),me(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){be(e,t)||Ee(t)},over:function(t){be(e,t)||(Pi(e,t),Ee(t))},start:function(t){return Mi(e,t)},drop:Ro(e,Ei),leave:function(t){be(e,t)||Ti(e)}};var s=t.input.getField();me(s,"keyup",(function(t){return fl.call(e,t)})),me(s,"keydown",Ro(e,cl)),me(s,"keypress",Ro(e,pl)),me(s,"focus",(function(t){return Qr(e,t)})),me(s,"blur",(function(t){return Zr(e,t)}))}Fl.defaults=Ll,Fl.optionHandlers=Rl;var Wl=[];function Vl(e,t,n,r){var o,a=e.doc;null==n&&(n="add"),"smart"==n&&(a.mode.indent?o=_t(e,t).state:n="prev");var i=e.options.tabSize,l=Qe(a,t),u=I(l.text,null,i);l.stateAfter&&(l.stateAfter=null);var s,c=l.text.match(/^\s*/)[0];if(r||/\S/.test(l.text)){if("smart"==n&&((s=a.mode.indent(o,l.text.slice(c.length),l.text))==G||s>150)){if(!r)return;n="prev"}}else s=0,n="not";"prev"==n?s=t>a.first?I(Qe(a,t-1).text,null,i):0:"add"==n?s=u+e.options.indentUnit:"subtract"==n?s=u-e.options.indentUnit:"number"==typeof n&&(s=u+n),s=Math.max(0,s);var d="",f=0;if(e.options.indentWithTabs)for(var p=Math.floor(s/i);p;--p)f+=i,d+="\t";if(f<s&&(d+=Y(s-f)),d!=c)return ai(a,d,it(t,0),it(t,c.length),"+input"),l.stateAfter=null,!0;for(var h=0;h<a.sel.ranges.length;h++){var m=a.sel.ranges[h];if(m.head.line==t&&m.head.ch<c.length){var g=it(t,c.length);Ia(a,h,new la(g,g));break}}}Fl.defineInitHook=function(e){return Wl.push(e)};var Hl=null;function Gl(e){Hl=e}function Ul(e,t,n,r,o){var a=e.doc;e.display.shift=!1,r||(r=a.sel);var i=+new Date-200,l="paste"==o||e.state.pasteIncoming>i,u=Ne(t),s=null;if(l&&r.ranges.length>1)if(Hl&&Hl.text.join("\n")==t){if(r.ranges.length%Hl.text.length==0){s=[];for(var c=0;c<Hl.text.length;c++)s.push(a.splitLines(Hl.text[c]))}}else u.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(s=J(u,(function(e){return[e]})));for(var d=e.curOp.updateInput,f=r.ranges.length-1;f>=0;f--){var p=r.ranges[f],h=p.from(),m=p.to();p.empty()&&(n&&n>0?h=it(h.line,h.ch-n):e.state.overwrite&&!l?m=it(m.line,Math.min(Qe(a,m.line).text.length,m.ch+X(u).length)):l&&Hl&&Hl.lineWise&&Hl.text.join("\n")==u.join("\n")&&(h=m=it(h.line,0)));var g={from:h,to:m,text:s?s[f%s.length]:u,origin:o||(l?"paste":e.state.cutIncoming>i?"cut":"+input")};Za(e.doc,g),xn(e,"inputRead",e,g)}t&&!l&&ql(e,t),uo(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function zl(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Lo(t,(function(){return Ul(t,n,0,null,"paste")})),!0}function ql(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var o=n.ranges[r];if(!(o.head.ch>100||r&&n.ranges[r-1].head.line==o.head.line)){var a=e.getModeAt(o.head),i=!1;if(a.electricChars){for(var l=0;l<a.electricChars.length;l++)if(t.indexOf(a.electricChars.charAt(l))>-1){i=Vl(e,o.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(Qe(e.doc,o.head.line).text.slice(0,o.head.ch))&&(i=Vl(e,o.head.line,"smart"));i&&xn(e,"electricInput",e,o.head.line)}}}function Kl(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var o=e.doc.sel.ranges[r].head.line,a={anchor:it(o,0),head:it(o+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function $l(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Yl(){var e=x("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=x("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),$l(e),t}function Xl(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,o=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Ro(this,t[e])(this,n,o),ye(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](qi(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:No((function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");Q(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,Fr(this)})),removeOverlay:No((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Fr(this)}})),indentLine:No((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ot(this.doc,e)&&Vl(this,e,t,n)})),indentSelection:No((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var o=t[r];if(o.empty())o.head.line>n&&(Vl(this,o.head.line,e,!0),n=o.head.line,r==this.doc.sel.primIndex&&uo(this));else{var a=o.from(),i=o.to(),l=Math.max(n,a.line);n=Math.min(this.lastLine(),i.line-(i.ch?0:1))+1;for(var u=l;u<n;++u)Vl(this,u,e);var s=this.doc.sel.ranges;0==a.ch&&t.length==s.length&&s[r].from().ch>0&&Ia(this.doc,r,new la(a,s[r].to()),U)}}})),getTokenAt:function(e,t){return St(this,e,t)},getLineTokens:function(e,t){return St(this,it(e),t,!0)},getTokenTypeAt:function(e){e=pt(this.doc,e);var t,n=bt(this,Qe(this.doc,e.line)),r=0,o=(n.length-1)/2,a=e.ch;if(0==a)t=n[2];else for(;;){var i=r+o>>1;if((i?n[2*i-1]:0)>=a)o=i;else{if(!(n[2*i+1]<a)){t=n[2*i+2];break}r=i+1}}var l=t?t.indexOf("overlay "):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var o=n[t],a=this.getModeAt(e);if("string"==typeof a[t])o[a[t]]&&r.push(o[a[t]]);else if(a[t])for(var i=0;i<a[t].length;i++){var l=o[a[t][i]];l&&r.push(l)}else a.helperType&&o[a.helperType]?r.push(o[a.helperType]):o[a.name]&&r.push(o[a.name]);for(var u=0;u<o._global.length;u++){var s=o._global[u];s.pred(a,this)&&-1==V(r,s.val)&&r.push(s.val)}return r},getStateAfter:function(e,t){var n=this.doc;return _t(this,(e=ft(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return _r(this,null==e?n.head:"object"==typeof e?pt(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return br(this,pt(this.doc,e),t||"page")},coordsChar:function(e,t){return Or(this,(e=yr(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=yr(this,{top:e,left:0},t||"page").top,rt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,o=!1;if("number"==typeof e){var a=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>a&&(e=a,o=!0),r=Qe(this.doc,e)}else r=e;return vr(this,r,{top:0,left:0},t||"page",n||o).top+(o?this.doc.height-ln(r):0)},defaultTextHeight:function(){return xr(this.display)},defaultCharWidth:function(){return jr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,o){var a=this.display,i=(e=_r(this,pt(this.doc,e))).bottom,l=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),"over"==r)i=e.top;else if("above"==r||"near"==r){var u=Math.max(a.wrapper.clientHeight,this.doc.height),s=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>u)&&e.top>t.offsetHeight?i=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=u&&(i=e.bottom),l+t.offsetWidth>s&&(l=s-t.offsetWidth)}t.style.top=i+"px",t.style.left=t.style.right="","right"==o?(l=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?l=0:"middle"==o&&(l=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+"px"),n&&ao(this,{left:l,top:i,right:l+t.offsetWidth,bottom:i+t.offsetHeight})},triggerOnKeyDown:No(cl),triggerOnKeyPress:No(pl),triggerOnKeyUp:fl,triggerOnMouseDown:No(bl),execCommand:function(e){if(Qi.hasOwnProperty(e))return Qi[e].call(null,this)},triggerElectric:No((function(e){ql(this,e)})),findPosH:function(e,t,n,r){var o=1;t<0&&(o=-1,t=-t);for(var a=pt(this.doc,e),i=0;i<t&&!(a=Jl(this.doc,a,o,n,r)).hitSide;++i);return a},moveH:No((function(e,t){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Jl(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()}),q)})),deleteH:No((function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Ki(this,(function(n){var o=Jl(r,n.head,e,t,!1);return e<0?{from:o,to:n.head}:{from:n.head,to:o}}))})),findPosV:function(e,t,n,r){var o=1,a=r;t<0&&(o=-1,t=-t);for(var i=pt(this.doc,e),l=0;l<t;++l){var u=_r(this,i,"div");if(null==a?a=u.left:u.left=a,(i=Ql(this,u,o,n)).hitSide)break}return i},moveV:No((function(e,t){var n=this,r=this.doc,o=[],a=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(i){if(a)return e<0?i.from():i.to();var l=_r(n,i.head,"div");null!=i.goalColumn&&(l.left=i.goalColumn),o.push(l.left);var u=Ql(n,l,e,t);return"page"==t&&i==r.sel.primary()&&lo(n,br(n,u,"div").top-l.top),u}),q),o.length)for(var i=0;i<r.sel.ranges.length;i++)r.sel.ranges[i].goalColumn=o[i]})),findWordAt:function(e){var t=Qe(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var a=t.charAt(n),i=re(a,o)?function(e){return re(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!re(e)};n>0&&i(t.charAt(n-1));)--n;for(;r<t.length&&i(t.charAt(r));)++r}return new la(it(e.line,n),it(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?R(this.display.cursorDiv,"CodeMirror-overwrite"):M(this.display.cursorDiv,"CodeMirror-overwrite"),ye(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==L()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:No((function(e,t){so(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Yn(this)-this.display.barHeight,width:e.scrollWidth-Yn(this)-this.display.barWidth,clientHeight:Jn(this),clientWidth:Xn(this)}},scrollIntoView:No((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:it(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?co(this,e):po(this,e.from,e.to,e.margin)})),setSize:No((function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&fr(this);var o=this.display.viewFrom;this.doc.iter(o,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Ir(n,o,"widget");break}++o})),this.curOp.forceUpdate=!0,ye(this,"refresh",this)})),operation:function(e){return Lo(this,e)},startOperation:function(){return So(this)},endOperation:function(){return Eo(this)},refresh:No((function(){var e=this.display.cachedTextHeight;Fr(this),this.curOp.forceUpdate=!0,pr(this),so(this,this.doc.scrollLeft,this.doc.scrollTop),Ko(this.display),(null==e||Math.abs(e-xr(this.display))>.5||this.options.lineWrapping)&&Nr(this),ye(this,"refresh",this)})),swapDoc:No((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),_a(this,e),pr(this),this.display.input.reset(),so(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,xn(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ke(e),e.registerHelper=function(t,r,o){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=o},e.registerGlobalHelper=function(t,r,o,a){e.registerHelper(t,r,a),n[t]._global.push({pred:o,val:a})}}function Jl(e,t,n,r,o){var a=t,i=n,l=Qe(e,t.line),u=o&&"rtl"==e.direction?-n:n;function s(){var n=t.line+u;return!(n<e.first||n>=e.first+e.size)&&(t=new it(n,t.ch,t.sticky),l=Qe(e,n))}function c(a){var i;if("codepoint"==r){var c=l.text.charCodeAt(t.ch+(r>0?0:-1));i=isNaN(c)?null:new it(t.line,Math.max(0,Math.min(l.text.length,t.ch+n*(c>=55296&&c<56320?2:1))),-n)}else i=o?Ji(e.cm,l,t,n):Yi(l,t,n);if(null==i){if(a||!s())return!1;t=Xi(o,e.cm,l,t.line,u)}else t=i;return!0}if("char"==r||"codepoint"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r)for(var d=null,f="group"==r,p=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(n<0)||c(!h);h=!1){var m=l.text.charAt(t.ch)||"\n",g=re(m,p)?"w":f&&"\n"==m?"n":!f||/\s/.test(m)?null:"p";if(!f||h||g||(g="s"),d&&d!=g){n<0&&(n=1,c(),t.sticky="after");break}if(g&&(d=g),n>0&&!c(!h))break}var v=Ya(e,t,a,i,!0);return ut(a,v)&&(v.hitSide=!0),v}function Ql(t,n,r,o){var a,i,l=t.doc,u=n.left;if("page"==o){var s=Math.min(t.display.wrapper.clientHeight,window.innerHeight||e.documentElement.clientHeight),c=Math.max(s-.5*xr(t.display),3);a=(r>0?n.bottom:n.top)+r*c}else"line"==o&&(a=r>0?n.bottom+3:n.top-3);for(;(i=Or(t,u,a)).outside;){if(r<0?a<=0:a>=l.height){i.hitSide=!0;break}a+=5*r}return i}var Zl=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new W,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function eu(e,t){var n=nr(e,t.line);if(!n||n.hidden)return null;var r=Qe(e.doc,t.line),o=Zn(n,r,t.line),a=pe(r,e.doc.direction),i="left";a&&(i=de(a,t.ch)%2?"right":"left");var l=lr(o.map,t.ch,i);return l.offset="right"==l.collapse?l.end:l.start,l}function tu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function nu(e,t){return t&&(e.bad=!0),e}function ru(e,t,n,r,o){var a="",i=!1,l=e.doc.lineSeparator(),u=!1;function s(e){return function(t){return t.id==e}}function c(){i&&(a+=l,u&&(a+=l),i=u=!1)}function d(e){e&&(c(),a+=e)}function f(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void d(n);var a,p=t.getAttribute("cm-marker");if(p){var h=e.findMarks(it(r,0),it(o+1,0),s(+p));return void(h.length&&(a=h[0].find(0))&&d(Ze(e.doc,a.from,a.to).join(l)))}if("false"==t.getAttribute("contenteditable"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&c();for(var g=0;g<t.childNodes.length;g++)f(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(u=!0),m&&(i=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;f(t),t!=n;)t=t.nextSibling,u=!1;return a}function ou(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return nu(e.clipPos(it(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var a=e.display.view[o];if(a.node==r)return au(a,t,n)}}function au(e,t,n){var r=e.text.firstChild,o=!1;if(!t||!D(r,t))return nu(it(nt(e.line),0),!0);if(t==r&&(o=!0,t=r.childNodes[n],n=0,!t)){var a=e.rest?X(e.rest):e.line;return nu(it(nt(a),a.text.length),o)}var i=3==t.nodeType?t:null,l=t;for(i||1!=t.childNodes.length||3!=t.firstChild.nodeType||(i=t.firstChild,n&&(n=i.nodeValue.length));l.parentNode!=r;)l=l.parentNode;var u=e.measure,s=u.maps;function c(t,n,r){for(var o=-1;o<(s?s.length:0);o++)for(var a=o<0?u.map:s[o],i=0;i<a.length;i+=3){var l=a[i+2];if(l==t||l==n){var c=nt(o<0?e.line:e.rest[o]),d=a[i]+r;return(r<0||l!=t)&&(d=a[i+(r?1:0)]),it(c,d)}}}var d=c(i,l,n);if(d)return nu(d,o);for(var f=l.nextSibling,p=i?i.nodeValue.length-n:0;f;f=f.nextSibling){if(d=c(f,f.firstChild,0))return nu(it(d.line,d.ch-p),o);p+=f.textContent.length}for(var h=l.previousSibling,m=n;h;h=h.previousSibling){if(d=c(h,h.firstChild,-1))return nu(it(d.line,d.ch+m),o);m+=h.textContent.length}}Zl.prototype.init=function(t){var n=this,r=this,o=r.cm,a=r.div=t.lineDiv;function i(e){for(var t=e.target;t;t=t.parentNode){if(t==a)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function l(t){if(i(t)&&!be(o,t)){if(o.somethingSelected())Gl({lineWise:!1,text:o.getSelections()}),"cut"==t.type&&o.replaceSelection("",null,"cut");else{if(!o.options.lineWiseCopyCut)return;var n=Kl(o);Gl({lineWise:!0,text:n.text}),"cut"==t.type&&o.operation((function(){o.setSelections(n.ranges,0,U),o.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var l=Hl.text.join("\n");if(t.clipboardData.setData("Text",l),t.clipboardData.getData("Text")==l)return void t.preventDefault()}var u=Yl(),s=u.firstChild;o.display.lineSpace.insertBefore(u,o.display.lineSpace.firstChild),s.value=Hl.text.join("\n");var c=e.activeElement;A(s),setTimeout((function(){o.display.lineSpace.removeChild(u),c.focus(),c==a&&r.showPrimarySelection()}),50)}}$l(a,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize),me(a,"paste",(function(e){!i(e)||be(o,e)||zl(e,o)||u<=11&&setTimeout(Ro(o,(function(){return n.updateFromDOM()})),20)})),me(a,"compositionstart",(function(e){n.composing={data:e.data,done:!1}})),me(a,"compositionupdate",(function(e){n.composing||(n.composing={data:e.data,done:!1})})),me(a,"compositionend",(function(e){n.composing&&(e.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)})),me(a,"touchstart",(function(){return r.forceCompositionEnd()})),me(a,"input",(function(){n.composing||n.readFromDOMSoon()})),me(a,"copy",l),me(a,"cut",l)},Zl.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Zl.prototype.prepareSelection=function(){var t=zr(this.cm,!1);return t.focus=e.activeElement==this.div,t},Zl.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Zl.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Zl.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),o=n.from(),a=n.to();if(t.display.viewTo==t.display.viewFrom||o.line>=t.display.viewTo||a.line<t.display.viewFrom)e.removeAllRanges();else{var i=ou(t,e.anchorNode,e.anchorOffset),l=ou(t,e.focusNode,e.focusOffset);if(!i||i.bad||!l||l.bad||0!=lt(dt(i,l),o)||0!=lt(ct(i,l),a)){var u=t.display.view,s=o.line>=t.display.viewFrom&&eu(t,o)||{node:u[0].measure.map[2],offset:0},c=a.line<t.display.viewTo&&eu(t,a);if(!c){var d=u[u.length-1].measure,f=d.maps?d.maps[d.maps.length-1]:d.map;c={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(s&&c){var p,h=e.rangeCount&&e.getRangeAt(0);try{p=E(s.node,s.offset,c.offset,c.node)}catch(e){}p&&(!r&&t.state.focused?(e.collapse(s.node,s.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),h&&null==e.anchorNode?e.addRange(h):r&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Zl.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Zl.prototype.showMultipleSelections=function(e){T(this.cm.display.cursorDiv,e.cursors),T(this.cm.display.selectionDiv,e.selection)},Zl.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Zl.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},Zl.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&e.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Zl.prototype.blur=function(){this.div.blur()},Zl.prototype.getField=function(){return this.div},Zl.prototype.supportsTouch=function(){return!0},Zl.prototype.receivedFocus=function(){var e=this;function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}this.selectionInEditor()?this.pollSelection():Lo(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,t)},Zl.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Zl.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(v&&d&&this.cm.display.gutterSpecs.length&&tu(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=ou(t,e.anchorNode,e.anchorOffset),r=ou(t,e.focusNode,e.focusOffset);n&&r&&Lo(t,(function(){Ga(t.doc,sa(n,r),U),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Zl.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,o=r.display,a=r.doc.sel.primary(),i=a.from(),l=a.to();if(0==i.ch&&i.line>r.firstLine()&&(i=it(i.line-1,Qe(r.doc,i.line-1).length)),l.ch==Qe(r.doc,l.line).text.length&&l.line<r.lastLine()&&(l=it(l.line+1,0)),i.line<o.viewFrom||l.line>o.viewTo-1)return!1;i.line==o.viewFrom||0==(e=Br(r,i.line))?(t=nt(o.view[0].line),n=o.view[0].node):(t=nt(o.view[e].line),n=o.view[e-1].node.nextSibling);var u,s,c=Br(r,l.line);if(c==o.view.length-1?(u=o.viewTo-1,s=o.lineDiv.lastChild):(u=nt(o.view[c+1].line)-1,s=o.view[c+1].node.previousSibling),!n)return!1;for(var d=r.doc.splitLines(ru(r,n,s,t,u)),f=Ze(r.doc,it(t,0),it(u,Qe(r.doc,u).text.length));d.length>1&&f.length>1;)if(X(d)==X(f))d.pop(),f.pop(),u--;else{if(d[0]!=f[0])break;d.shift(),f.shift(),t++}for(var p=0,h=0,m=d[0],g=f[0],v=Math.min(m.length,g.length);p<v&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var y=X(d),b=X(f),_=Math.min(y.length-(1==d.length?p:0),b.length-(1==f.length?p:0));h<_&&y.charCodeAt(y.length-h-1)==b.charCodeAt(b.length-h-1);)++h;if(1==d.length&&1==f.length&&t==i.line)for(;p&&p>i.ch&&y.charCodeAt(y.length-h-1)==b.charCodeAt(b.length-h-1);)p--,h++;d[d.length-1]=y.slice(0,y.length-h).replace(/^\u200b+/,""),d[0]=d[0].slice(p).replace(/\u200b+$/,"");var w=it(t,p),k=it(u,f.length?X(f).length-h:0);return d.length>1||d[0]||lt(w,k)?(ai(r.doc,d,w,k,"+input"),!0):void 0},Zl.prototype.ensurePolled=function(){this.forceCompositionEnd()},Zl.prototype.reset=function(){this.forceCompositionEnd()},Zl.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Zl.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Zl.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Lo(this.cm,(function(){return Fr(e.cm)}))},Zl.prototype.setUneditable=function(e){e.contentEditable="false"},Zl.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ro(this.cm,Ul)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Zl.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Zl.prototype.onContextMenu=function(){},Zl.prototype.resetPosition=function(){},Zl.prototype.needsContentAttribute=!0;var iu=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new W,this.hasSelection=!1,this.composing=null};function lu(t,n){if((n=n?F(n):{}).value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var r=L();n.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==e.body}function o(){t.value=u.getValue()}var a;if(t.form&&(me(t.form,"submit",o),!n.leaveSubmitMethodAlone)){var i=t.form;a=i.submit;try{var l=i.submit=function(){o(),i.submit=a,i.submit(),i.submit=l}}catch(e){}}n.finishInit=function(e){e.save=o,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,o(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(ve(t.form,"submit",o),n.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=a))}},t.style.display="none";var u=Fl((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),n);return u}function uu(e){e.off=ve,e.on=me,e.wheelEventPixels=oa,e.Doc=Ci,e.splitLines=Ne,e.countColumn=I,e.findColumn=K,e.isWordChar=ne,e.Pass=G,e.signal=ye,e.Line=cn,e.changeEnd=ca,e.scrollbarModel=ko,e.Pos=it,e.cmpPos=lt,e.modes=We,e.mimeModes=Ve,e.resolveMode=Ue,e.getMode=ze,e.modeExtensions=qe,e.extendMode=Ke,e.copyState=$e,e.startState=Xe,e.innerMode=Ye,e.commands=Qi,e.keyMap=Ii,e.keyName=zi,e.isModifierKey=Gi,e.lookupKey=Hi,e.normalizeKeyMap=Vi,e.StringStream=Je,e.SharedTextMarker=yi,e.TextMarker=gi,e.LineWidget=fi,e.e_preventDefault=Oe,e.e_stopPropagation=Ce,e.e_stop=Ee,e.addClass=R,e.contains=D,e.rmClass=M,e.keyNames=Ni}iu.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var o=this.textarea;function a(e){if(!be(r,e)){if(r.somethingSelected())Gl({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Kl(r);Gl({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,U):(n.prevInput="",o.value=t.text.join("\n"),A(o))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(o.style.width="0px"),me(o,"input",(function(){l&&u>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),me(o,"paste",(function(e){be(r,e)||zl(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),me(o,"cut",a),me(o,"copy",a),me(e.scroller,"paste",(function(t){if(!zn(e,t)&&!be(r,t)){if(!o.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var a=new Event("paste");a.clipboardData=t.clipboardData,o.dispatchEvent(a)}})),me(e.lineSpace,"selectstart",(function(t){zn(e,t)||Oe(t)})),me(o,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),me(o,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},iu.prototype.createField=function(e){this.wrapper=Yl(),this.textarea=this.wrapper.firstChild},iu.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},iu.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=zr(e);if(e.options.moveInputWithCursor){var o=_r(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),i=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+i.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+i.left-a.left))}return r},iu.prototype.showSelection=function(e){var t=this.cm.display;T(t.cursorDiv,e.cursors),T(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},iu.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&A(this.textarea),l&&u>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",l&&u>=9&&(this.hasSelection=null))}},iu.prototype.getField=function(){return this.textarea},iu.prototype.supportsTouch=function(){return!1},iu.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||L()!=this.textarea))try{this.textarea.focus()}catch(e){}},iu.prototype.blur=function(){this.textarea.blur()},iu.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},iu.prototype.receivedFocus=function(){this.slowPoll()},iu.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},iu.prototype.fastPoll=function(){var e=!1,t=this;function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}t.pollingFast=!0,t.polling.set(20,n)},iu.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ae(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=n.value;if(o==r&&!t.somethingSelected())return!1;if(l&&u>=9&&this.hasSelection===o||b&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=o.charCodeAt(0);if(8203!=a||r||(r="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var i=0,s=Math.min(r.length,o.length);i<s&&r.charCodeAt(i)==o.charCodeAt(i);)++i;return Lo(t,(function(){Ul(t,o.slice(i),r.length-i,null,e.composing?"*compose":null),o.length>1e3||o.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},iu.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},iu.prototype.onKeyPress=function(){l&&u>=9&&(this.hasSelection=null),this.fastPoll()},iu.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,o=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=Ar(n,e),i=r.scroller.scrollTop;if(a&&!f){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Ro(n,Ga)(n.doc,sa(a),U);var c,d=o.style.cssText,p=t.wrapper.style.cssText,h=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(l?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s&&(c=window.scrollY),r.input.focus(),s&&window.scrollTo(null,c),r.input.reset(),n.somethingSelected()||(o.value=t.prevInput=" "),t.contextMenuPending=v,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),l&&u>=9&&g(),C){Ee(e);var m=function(){ve(window,"mouseup",m),setTimeout(v,20)};me(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=o.selectionStart){var e=n.somethingSelected(),a="\u200b"+(e?o.value:"");o.value="\u21da",o.value=a,t.prevInput=e?"":"\u200b",o.selectionStart=1,o.selectionEnd=a.length,r.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=p,o.style.cssText=d,l&&u<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=i),null!=o.selectionStart)){(!l||l&&u<9)&&g();var e=0,a=function(){r.selForContextMenu==n.doc.sel&&0==o.selectionStart&&o.selectionEnd>0&&"\u200b"==t.prevInput?Ro(n,Ja)(n):e++<10?r.detectingSelectAll=setTimeout(a,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(a,200)}}},iu.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},iu.prototype.setUneditable=function(){},iu.prototype.needsContentAttribute=!1,Nl(Fl),Xl(Fl);var su="iter insert remove copy getEditor constructor".split(" ");for(var cu in Ci.prototype)Ci.prototype.hasOwnProperty(cu)&&V(su,cu)<0&&(Fl.prototype[cu]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ci.prototype[cu]));return ke(Ci),Fl.inputStyles={textarea:iu,contenteditable:Zl},Fl.defineMode=function(e){Fl.defaults.mode||"null"==e||(Fl.defaults.mode=e),He.apply(this,arguments)},Fl.defineMIME=Ge,Fl.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Fl.defineMIME("text/plain","null"),Fl.defineExtension=function(e,t){Fl.prototype[e]=t},Fl.defineDocExtension=function(e,t){Ci.prototype[e]=t},Fl.fromTextArea=lu,uu(Fl),Fl.version="5.58.2",Fl}()},function(e,t,n){"use strict";
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */e.exports=function(e,t,n,r,o,a,i,l){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,a,i,l],c=0;(u=new Error(t.replace(/%s/g,(function(){return s[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=te(n(1)),o=te(n(49)),a=te(n(14)),i=te(n(4)),l=te(n(9)),u=n(1472),s=te(n(996)),c=te(n(853)),d=te(n(1473)),f=te(n(966)),p=te(n(1493)),h=te(n(1581)),m=te(n(1588)),g=te(n(1590)),v=te(n(1494)),y=te(n(1495)),b=te(n(1496)),_=te(n(1594)),w=te(n(1459)),k=te(n(1614)),O=te(n(844)),C=te(n(1616)),S=te(n(1619)),E=te(n(1620)),M=te(n(1621)),P=te(n(1622)),T=te(n(1624)),x=te(n(1626)),j=te(n(728)),D=te(n(1628)),L=te(n(1458)),R=te(n(1631)),N=te(n(1633)),A=te(n(1635)),B=te(n(1500)),F=te(n(1637)),I=te(n(1501)),W=te(n(1645)),V=te(n(1657)),H=te(n(1659)),G=te(n(1661)),U=te(n(1673)),z=te(n(1505)),q=te(n(1683)),K=te(n(1685)),$=te(n(1687)),Y=te(n(1508)),X=te(n(1689)),J=n(1510),Q=n(1692),Z=te(n(1693)),ee=te(n(1695));function te(e){return e&&e.__esModule?e:{default:e}}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,u=[{key:"getControl",value:function(t){return!(0,a.default)(t)&&""!==t&&!(0,l.default)(["skip","computed","hidden","column_settings_background","column_settings_padding","et_builder_generate_pin_zoom_level_input"],t)&&((0,o.default)(e._map,t)?(0,r.default)(e._map,t):(0,i.default)(c.default.findComponentBySlug(t,"field"))?$.default:s.default)}}],(n=null)&&ne(t.prototype,n),u&&ne(t,u),e}();re._map={transform:Y.default,position:X.default,color:f.default,"color-alpha":f.default,gradient:p.default,background:G.default,"background-field":G.default,"border-radius":U.default,custom_margin:h.default,custom_padding:h.default,composite:z.default,date_picker:m.default,divider:S.default,"column-structure":E.default,categories:g.default,center_map:V.default,upload_gallery:W.default,"upload-gallery":W.default,select_icon:P.default,select_sidebar:M.default,font:T.default,number:j.default,multiple_buttons:k.default,multiple_checkboxes:w.default,checkboxes:v.default,checkboxes_advanced_woocommerce:Z.default,presets:d.default,presets_shadow:F.default,range:y.default,select:O.default,select_product:C.default,text:j.default,input:j.default,textarea:b.default,codemirror:_.default,text_align:x.default,tiny_mce:D.default,upload:I.default,yes_no_button:L.default,options_list:u.ETCoreSortableList,conditional_logic:R.default,select_animation:N.default,select_box_shadow:A.default,warning:H.default,select_with_option_groups:q.default,text_api_key:K.default,sortable_list:u.ETCoreSortableList,select_post:B.default,icon_picker:J.ETBuilderControlIconPicker,align:Q.ETBuilderControlAlign,motion:ee.default};var oe=re;t.default=oe},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inputsList=t.inputs=t.inputEnd=t.inputMiddle=t.inputStart=t.input=t.counterMulti=t.counters=t.counter=t.trackLv3=t.trackLv2=t.trackLv1=t.track=t.atMaxBound=t.atMinBound=t.dragging=t.rangeWrapper=t.isSingleMiddle=t.singleMiddle=t.endMiddle=t.startMiddle=t.endLimit=t.startLimit=t.handler=t.range=t.rangeLabel=t.className=void 0;var r="et-fb-settings-option-motion";t.className=r;var o="".concat(r,"__label");t.rangeLabel=o;var a="".concat(r,"__range");t.range=a;var i="".concat(r,"__handler");t.handler=i;var l="".concat(r,"--start-limit");t.startLimit=l;var u="".concat(r,"--end-limit");t.endLimit=u;var s="".concat(r,"--start-middle");t.startMiddle=s;var c="".concat(r,"--end-middle");t.endMiddle=c;var d="".concat(r,"--single-middle");t.singleMiddle=d;var f="".concat(r,"--is-single-middle");t.isSingleMiddle=f;var p="".concat(r,"__range-wrapper");t.rangeWrapper=p;var h="".concat(r,"--dragging");t.dragging=h;var m="".concat(r,"--at-min-bound");t.atMinBound=m;var g="".concat(r,"--at-max-bound");t.atMaxBound=g;var v="".concat(r,"__track");t.track=v;var y="".concat(r,"__track--lv1");t.trackLv1=y;var b="".concat(r,"__track--lv2");t.trackLv2=b;var _="".concat(r,"__track--lv3");t.trackLv3=_;var w="".concat(r,"__counter");t.counter=w;var k="".concat(r,"__counters");t.counters=k;var O="".concat(r,"__counter--multi");t.counterMulti=O;var C="".concat(r,"__input");t.input=C;var S="".concat(r,"__input-start");t.inputStart=S;var E="".concat(r,"__input-middle");t.inputMiddle=E;var M="".concat(r,"__input-end");t.inputEnd=M;var P="".concat(r,"__inputs");t.inputs=P;var T="".concat(r,"__inputs-list");t.inputsList=T},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=s(n(6)),i=s(n(18)),l=s(n(45)),u=s(n(14));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1519);var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,e);var t,n,r,a=m(l);function l(){var e;f(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(v(e=a.call.apply(a,[this].concat(n))),"_onChange",(function(){var t=e.props,n=t.name,r=t.value,o=t._onChange,a=t.readonly,i=e._getDefaultValue();a||o(n,"on"===(!r&&i?i:r)?"off":"on")})),e}return t=l,(n=[{key:"_getDefaultValue",value:function(){return this.props.defaultValue||this.props.default}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.value,a=e.name,l=e.id,s=e.dataCy,c=this._getDefaultValue(),f=!(0,u.default)(this.props.button_options)&&"equal"===this.props.button_options.button_type,p=!r&&c?c:r,h=(0,i.default)({"et-core-control-toggle":!0,"et-core-control-toggle--equal":f,"et-core-control-toggle--on":"on"===p,"et-core-control-toggle--off":!p||"off"===p},t);!l&&a&&(l="et-fb-".concat(a));var m={};return this.props.readonly&&(m.disabled=!0),o.default.createElement("div",d({className:h,"data-cy":s,onClick:n||this._onChange},m),o.default.createElement("div",{className:"et-core-control-toggle__label et-core-control-toggle__label--on"},o.default.createElement("div",{className:"et-core-control-toggle__text"},this.props.options.on),o.default.createElement("div",{className:"et-core-control-toggle__handle"})),o.default.createElement("div",{className:"et-core-control-toggle__label et-core-control-toggle__label--off"},o.default.createElement("div",{className:"et-core-control-toggle__text"},this.props.options.off),o.default.createElement("div",{className:"et-core-control-toggle__handle"})),o.default.createElement("input",{type:"hidden",id:l,name:a,value:r}))}}])&&p(t.prototype,n),r&&p(t,r),l}(o.PureComponent);b(_,"propTypes",{dataCy:a.default.string}),b(_,"defaultProps",{value:"off",_onChange:l.default});var w=_;t.default=w},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=v(n(6)),i=v(n(4)),l=v(n(15)),u=v(n(340)),s=v(n(35)),c=v(n(259)),d=v(n(148)),f=v(n(14)),p=v(n(40)),h=v(n(538)),m=v(n(23)),g=v(n(3));function v(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1464);var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(v,e);var t,n,r,a=k(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=a.call(this,e)).shouldComponentUpdate=m.default.shouldComponentUpdate.bind(C(t)),t._getDefaults=t._getDefaults.bind(C(t)),t._getValue=t._getValue.bind(C(t)),t._onChange=t._onChange.bind(C(t)),t}return t=v,(n=[{key:"_getDefaults",value:function(){var e=this.props.options,t=this.props.defaults;return(0,f.default)(t)?(0,s.default)((0,c.default)((0,d.default)(e)),(function(){return"off"})):t}},{key:"_getValue",value:function(){var e=this._getDefaults(),t=this.props.value,n=(0,f.default)(t)?e:(0,s.default)(t.split("|"),(function(e){return g.default.hasValue(e)?e:"off"}));return(0,d.default)(n)<(0,d.default)(e)&&(n=(0,l.default)(e,n)),n}},{key:"_onChange",value:function(e){var t=e.target.checked?"on":"off",n=e.target.getAttribute("data-index"),r=this._getValue();r[n]=t;var o=r.join("|");this.props._onChange(this.props.name,o)}},{key:"render",value:function(){var e=this,t=this._getValue(),n=this.props,r=n.options,a=n.name,l=n.shortcut_index,s=n.readonly,c={};s&&(c.readOnly=!0);var d="";return(0,i.default)(r)||(d=(0,u.default)(r).map((function(n,r){var i=(0,p.default)(n)?n:n.value,u=(0,p.default)(n)?n:n.label,s=(0,p.default)(n)?"":"-".concat((0,h.default)(n.className)),d=l?"-".concat(l):"",m="et-fb-multiple-checkbox-".concat(a).concat(d,"-").concat(r),v=!(0,f.default)(t[r])&&g.default.isOn(t[r]);return o.default.createElement("p",{key:m,className:"et-fb-multiple-checkbox".concat(s)},o.default.createElement("label",{htmlFor:m},o.default.createElement("input",b({type:"checkbox",id:m,name:"et_fb_multiple_checkboxes[".concat(r,"]"),value:i,onChange:e._onChange,checked:v,"data-index":r},c))," ",u))}))),o.default.createElement("div",{className:"et-fb-multiple-checkboxes-wrap"},d)}}])&&_(t.prototype,n),r&&_(t,r),v}(o.Component);E.propTypes={options:a.default.oneOfType([a.default.array,a.default.object]),defaults:a.default.array,value:a.default.string,name:a.default.string,_onChange:a.default.func};var M=E;t.default=M},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=w(n(6)),i=w(n(18)),l=w(n(35)),u=w(n(12)),s=w(n(14)),c=w(n(2)),d=w(n(4)),f=w(n(13)),p=w(n(9)),h=w(n(17)),m=w(n(1)),g=w(n(158)),v=w(n(210)),y=w(n(166)),b=w(n(1479)),_=w(n(1480));function w(e){return e&&e.__esModule?e:{default:e}}function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1518);var D=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(k,t);var n,r,a,w=M(k);function k(){var t;C(this,k);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return j(T(t=w.call.apply(w,[this].concat(r))),"getGroupForSelected",(function(){return e(t.node).find(":selected").parent().attr("label")})),j(T(t),"_onChange",(function(e){var n=t.props.name,r=t.getGroupForSelected(),o=t.props.overwrite_onchange,a=t.props.value_overwrite,i=e.target.value;r&&((0,m.default)(T(t),"props.parseGroupValue",!0)&&(i="".concat(r,"|").concat(i)),t.props.group_prop&&t.props._onChange(t.props.group_prop,r)),t.props._onChange(n,i),o&&(0,c.default)(o)&&a&&(0,f.default)(a)&&(0,l.default)(t.props.overwrite_onchange,(function(e){(0,s.default)(a[i])||t.props._onChange(e,a[i])}))})),t}return n=k,(r=[{key:"componentDidMount",value:function(){this.props.group_prop&&this.props._onChange(this.props.group_prop,this.getGroupForSelected())}},{key:"_render_options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,h.default)(e),r=this.props;if(!(0,d.default)(r.order)){var a=(0,l.default)(r.order,String);n=(0,g.default)((0,y.default)(a,n),(0,v.default)(n,a))}return(0,l.default)(n,(function(n){var r=(0,m.default)(e,n),a=n;return""!==t&&(a="".concat(t,"-").concat(n)),o.default.createElement(b.default,{key:a,value:n,name:r})}))}},{key:"render",value:function(){var e,t=this,n=(0,u.default)(this.props.value)?this.props.value:this.props.default;!(0,p.default)((0,h.default)(this.props.options),n)&&(0,p.default)((0,h.default)(this.props.options),(0,u.default)(n))&&(n=(0,u.default)(n));var r={"et-core-control-select":!0,"et-fb-settings-option-select":!0};this.props.className&&(r[this.props.className]=!0),e=this.props.groups?(0,l.default)(this.props.options,(function(e,n){return"0"===n?t._render_options(e,n):o.default.createElement(_.default,{label:n,key:"option-group-".concat(n)},t._render_options(e,n))})):this._render_options(this.props.options);var a={};this.props.readonly&&(a.disabled=!0);var s=this.props.id;return s||(s="et-fb-".concat(this.props.name)),o.default.createElement("select",O({ref:function(e){return t.node=e},className:(0,i.default)(r),value:n,name:this.props.name,id:s,onChange:this._onChange},a),e)}}])&&S(n.prototype,r),a&&S(n,a),k}(o.PureComponent);j(D,"propTypes",{name:a.default.string.isRequired});var L=D;t.default=L}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.END_DRAG=t.DROP=t.HOVER=t.PUBLISH_DRAG_SOURCE=t.BEGIN_DRAG=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.beginDrag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0,clientOffset:null},n=t.publishSource,r=t.clientOffset,l=t.getSourceClientOffset;(0,o.default)((0,a.default)(e),"Expected sourceIds to be an array.");var u=this.getMonitor(),c=this.getRegistry();(0,o.default)(!u.isDragging(),"Cannot call beginDrag while dragging.");for(var d=0;d<e.length;d++)(0,o.default)(c.getSource(e[d]),"Expected sourceIds to be registered.");for(var f=null,p=e.length-1;p>=0;p--)if(u.canDragSource(e[p])){f=e[p];break}if(null===f)return;var h=null;r&&((0,o.default)("function"==typeof l,"When clientOffset is provided, getSourceClientOffset must be a function."),h=l(f));var m=c.getSource(f),g=m.beginDrag(u,f);(0,o.default)((0,i.default)(g),"Item must be an object."),c.pinSource(f);var v=c.getSourceType(f);return{type:s,itemType:v,item:g,sourceId:f,clientOffset:r,sourceClientOffset:h,isSourcePublic:n}},t.publishDragSource=function(){if(!this.getMonitor().isDragging())return;return{type:c}},t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clientOffset,r=void 0===n?null:n;(0,o.default)((0,a.default)(e),"Expected targetIds to be an array.");var i=e.slice(0),u=this.getMonitor(),s=this.getRegistry();(0,o.default)(u.isDragging(),"Cannot call hover while not dragging."),(0,o.default)(!u.didDrop(),"Cannot call hover after drop.");for(var c=0;c<i.length;c++){var f=i[c];(0,o.default)(i.lastIndexOf(f)===c,"Expected targetIds to be unique in the passed array.");var p=s.getTarget(f);(0,o.default)(p,"Expected targetIds to be registered.")}for(var h=u.getItemType(),m=i.length-1;m>=0;m--){var g=i[m],v=s.getTargetType(g);(0,l.default)(v,h)||i.splice(m,1)}for(var y=0;y<i.length;y++){var b=i[y],_=s.getTarget(b);_.hover(u,b)}return{type:d,targetIds:i,clientOffset:r}},t.drop=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getMonitor(),a=this.getRegistry();(0,o.default)(n.isDragging(),"Cannot call drop while not dragging."),(0,o.default)(!n.didDrop(),"Cannot call drop twice during one drag operation.");var l=n.getTargetIds().filter(n.canDropOnTarget,n);l.reverse(),l.forEach((function(l,u){var s=a.getTarget(l).drop(n,l);(0,o.default)(void 0===s||(0,i.default)(s),"Drop result must either be an object or undefined."),void 0===s&&(s=0===u?{}:n.getDropResult()),e.store.dispatch({type:f,dropResult:r({},t,s)})}))},t.endDrag=function(){var e=this.getMonitor(),t=this.getRegistry();(0,o.default)(e.isDragging(),"Cannot call endDrag while not dragging.");var n=e.getSourceId();return t.getSource(n,true).endDrag(e,n),t.unpinSource(),{type:p}};var o=u(n(1455)),a=u(n(2)),i=u(n(13)),l=u(n(1484));function u(e){return e&&e.__esModule?e:{default:e}}var s=t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",c=t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",d=t.HOVER="dnd-core/HOVER",f=t.DROP="dnd-core/DROP",p=t.END_DRAG="dnd-core/END_DRAG"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSource=function(e){return{type:r,sourceId:e}},t.addTarget=function(e){return{type:o,targetId:e}},t.removeSource=function(e){return{type:a,sourceId:e}},t.removeTarget=function(e){return{type:i,targetId:e}};var r=t.ADD_SOURCE="dnd-core/ADD_SOURCE",o=t.ADD_TARGET="dnd-core/ADD_TARGET",a=t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",i=t.REMOVE_TARGET="dnd-core/REMOVE_TARGET"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){0}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return r.default.createElement("iframe",e)};i.propTypes={src:o.default.string.isRequired};var l=i;t.default=l},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=E(n(37)),i=E(n(6)),l=E(n(18)),u=E(n(15)),s=E(n(74)),c=E(n(10)),d=E(n(4)),f=E(n(14)),p=E(n(9)),h=E(n(17)),m=E(n(141)),g=E(n(45)),v=E(n(258)),y=E(n(1)),b=E(n(540)),_=E(n(3)),w=n(75),k=E(n(1662)),O=E(n(844)),C=E(n(1665)),S=E(n(1503));function E(e){return e&&e.__esModule?e:{default:e}}function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1672);var A=_.default.condition("is_bfb"),B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(g,e);var t,n,r,i=j(g);function g(){var e;P(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return N(L(e=i.call.apply(i,[this].concat(n))),"selectRef",null),N(L(e),"controlRef",null),N(L(e),"buttonRef",null),N(L(e),"state",{settingsOpen:!1,classModifier:""}),N(L(e),"isTinyMCE",(function(){return"tiny_mce"===(0,y.default)(L(e),"props.fieldType")})),N(L(e),"handleEnable",(function(){e.selectRef.toggleMenu({target:null})})),N(L(e),"handleDisable",(function(){e.props.isContentField?e.props.onChange(e.props.fieldName,"",e.props.fieldType,e.props.isContentField):e.props.onReset(e.props.fieldName),e.handleEnabledDynamicAttributesChange((0,s.default)(e.props.dynamicAttributes,(function(t){return e.props.fieldName!==t})))})),N(L(e),"handleInherit",(function(){e.props.onInherit(e.props.fieldName),e.handleEnabledDynamicAttributesChange((0,s.default)(e.props.dynamicAttributes,(function(t){return e.props.fieldName!==t})))})),N(L(e),"handleDynamicContentChange",(function(t){e.props.onChange(e.props.fieldName,(0,w.encodeDynamicContent)({dynamic:!0,content:t,settings:e.getDynamicContentFieldDefaultSettings(t)}),e.props.fieldType,e.props.isContentField),-1===e.props.dynamicAttributes.indexOf(e.props.fieldName)&&e.handleEnabledDynamicAttributesChange(e.props.dynamicAttributes.concat([e.props.fieldName]))})),N(L(e),"openSettings",(function(){var t=e.getDynamicContentSettingsFields((0,w.getDynamicContent)(e.props.value).content,e.props.type);(0,d.default)(t)||e.setState({settingsOpen:!0})})),N(L(e),"closeSettings",(function(){e.setState({settingsOpen:!1})})),N(L(e),"handleSettingsChange",(function(t){var n=(0,w.getDynamicContent)(e.props.value);e.props.onChange(e.props.fieldName,(0,w.encodeDynamicContent)((0,u.default)({},n,{settings:t})),e.props.fieldType,e.props.isContentField)})),N(L(e),"handleEnabledDynamicAttributesChange",(function(t){e.props.onChange("_dynamic_attributes",t.join(","),"multiple_checkboxes",!1)})),N(L(e),"updateButtonPositionForTinyMCE",(function(t){if(e.isTinyMCE()){e.setState({classModifier:"tinymce-mode-".concat(t)});var n=_.default.$topWindow(a.default.findDOMNode(e.buttonRef)),r=_.default.$topWindow(a.default.findDOMNode(e.controlRef)),o=r.find(".mce-tinymce .mce-toolbar-grp").first().height(),i=Math.max(0,r.find(".et-fb-tinymce-media-buttons").first().height()-38),l=50+(o>0&&n.length>0?o:0)+i;n.css({top:"".concat(l,"px")})}})),N(L(e),"isEnabledDynamicContent",(function(e){var t=e.dynamicAttributes,n=e.fieldName,r=e.value;return(0,p.default)(t,n)&&(0,w.isDynamicContent)(r)})),N(L(e),"getDynamicContentSettingsFields",(function(t,n){var r=e.getDynamicContentField(t).fields||{};return(0,v.default)(r,(function(e){return!(0,f.default)(e.show_on)&&e.show_on!==n}))})),e}return t=g,(n=[{key:"getDynamicContentField",value:function(e){return ETBuilderBackend.dynamicContentFields[e]||{label:ETBuilderBackend.i18n.dynamicContent.invalidField,type:"text",fields:{}}}},{key:"getDynamicContentFieldLabel",value:function(e){if("post_meta_key"===e){var t=(0,w.getDynamicContent)(this.props.value).settings.meta_key||ETBuilderBackend.i18n.dynamicContent.manualCustomField;return(0,b.default)(t)}return this.getDynamicContentField(e).label}},{key:"getDynamicContentFieldDefaultSettings",value:function(e){return(0,m.default)(this.getDynamicContentField(e).fields,(function(e){return e.default||""}))}},{key:"getDynamicContentFieldOptions",value:function(e){var t={};return(0,c.default)(ETBuilderBackend.dynamicContentFields,(function(n,r){if("any"===n.type||n.type===e){var o=n.group?n.group:"Default";(0,f.default)(t[o])&&(t[o]={}),t[o][r]=n.label}})),t}},{key:"componentDidMount",value:function(){_.default.$topWindow().on("wp-toolbar-toggle",this.updateButtonPositionForTinyMCE)}},{key:"componentDidUpdate",value:function(e){var t=(0,w.isDynamicContent)(e.value),n=this.isEnabledDynamicContent(e),r=this.isEnabledDynamicContent(this.props),o=this.props.fieldName===e.fieldName;if(!n&&r&&o){var a=(0,w.getDynamicContent)(this.props.value),i=this.getDynamicContentSettingsFields(a.content,this.props.type),l="text"===this.props.type?3:1;(0,h.default)(i).length>=l&&this.openSettings()}t&&!r&&((0,f.default)(this.controlRef.focus)||this.controlRef.focus()),this.updateButtonPositionForTinyMCE()}},{key:"render",value:function(){var e,t=this,n=(0,p.default)(["upload","background"],this.props.fieldType),r=this.isEnabledDynamicContent(this.props),a=(0,w.getDynamicContent)(this.props.value),i=this.getDynamicContentFieldOptions(this.props.type),u=!n||(0,d.default)(this.props.value),s=o.default.cloneElement(this.props.children,{ref:function(e){return t.controlRef=e}});if((0,d.default)(i))return o.default.createElement(o.Fragment,null,this.props.children);var c="";return"ETBuilderControlTinyMCE"===s.type.displayName&&(s=o.default.cloneElement(s,{onModeSwitch:this.updateButtonPositionForTinyMCE}),A||(0,d.default)(this.state.classModifier)||(this.props.modalWidth>=538&&this.props.modalWidth<998?c="".concat(this.state.classModifier,"-medium"):this.props.modalWidth>=998&&this.props.modalWidth<1202&&(c="".concat(this.state.classModifier,"-wide")))),o.default.createElement("div",{className:(0,l.default)((e={"et-fb-settings-option-dynamic":!0},N(e,"et-fb-settings-option-dynamic--".concat(this.props.fieldType),!0),N(e,"et-fb-settings-option-dynamic--".concat(this.state.classModifier),this.state.classModifier),N(e,"et-fb-settings-option-dynamic--".concat(c),!!c),e))},r&&this.state.settingsOpen&&o.default.createElement(k.default,{title:this.getDynamicContentFieldLabel(a.content),fields:this.getDynamicContentSettingsFields(a.content,this.props.type),values:a.settings,onChange:this.handleSettingsChange,onClose:this.closeSettings}),r&&o.default.createElement(C.default,{fieldType:this.props.fieldType,value:this.props.value,label:this.getDynamicContentFieldLabel(a.content),mode:this.props.previewMode,attributes:this.props.previewAttributes,settingsFields:this.props.showSettingsButton?this.getDynamicContentSettingsFields(a.content,this.props.type):{},showDisableButton:this.props.showDisableButton,showInheritButton:this.props.showInheritButton,dynamicEnabled:-1!==this.props.dynamicAttributes.indexOf(this.props.fieldName),onSettings:this.openSettings,onDisable:this.handleDisable,onInherit:this.handleInherit}),!r&&o.default.createElement(o.Fragment,null,o.default.createElement("div",{className:"et-fb-settings-option-select-discrete"},o.default.createElement(O.default,{ref:function(e){return t.selectRef=e},name:"".concat(this.props.fieldName,"_dynamic_content"),value:r?a.content:"",options:this.getDynamicContentFieldOptions(this.props.type),__onChange:this.handleDynamicContentChange,selectFirst:!1})),s,u&&o.default.createElement(S.default,{ref:function(e){return t.buttonRef=e},type:this.props.fieldType,icon:"dynamic",tooltip:ETBuilderBackend.i18n.dynamicContent.tooltips.enable,className:(0,l.default)("et-fb-settings-option-dynamic__enable","et-fb-settings-option-dynamic__enable--".concat(this.props.fieldType)),onClick:this.handleEnable})))}}])&&T(t.prototype,n),r&&T(t,r),g}(o.PureComponent);B.supportedFieldTypes=["text","tiny_mce","upload"],B.propTypes={children:i.default.element.isRequired,type:i.default.string.isRequired,fieldName:i.default.string.isRequired,fieldType:i.default.oneOf(B.supportedFieldTypes).isRequired,previewMode:i.default.oneOf(["image","background"]),previewAttributes:i.default.object,isContentField:i.default.bool,dynamicAttributes:i.default.arrayOf(i.default.string).isRequired,value:i.default.string.isRequired,showSettingsButton:i.default.bool,showDisableButton:i.default.bool,showInheritButton:i.default.bool,onChange:i.default.func,onReset:i.default.func,onInherit:i.default.func,modalWidth:i.default.number},B.defaultProps={previewMode:"image",previewAttributes:{},isContentField:!1,showSettingsButton:!0,showDisableButton:!0,showInheritButton:!1,onChange:g.default,onReset:g.default,onInherit:g.default};var F=B;t.default=F},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),i=c(n(6)),l=n(1482),u=c(n(1538)),s=n(239);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,b,_,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,r,i=m(c);function c(){return f(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getChildContext",value:function(){return{dragDropManager:o||(o=new l.DragDropManager(u.default,{window:s.top_window}))}}},{key:"render",value:function(){return a.default.createElement("div",null,this.props.children)}}])&&p(t.prototype,n),r&&p(t,r),c}(a.Component);y=w,b="childContextTypes",_={dragDropManager:i.default.object.isRequired},b in y?Object.defineProperty(y,b,{value:_,enumerable:!0,configurable:!0,writable:!0}):y[b]=_;var k=w;t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1487);Object.defineProperty(t,"DragDropContext",{enumerable:!0,get:function(){return u(r).default}});var o=n(1548);Object.defineProperty(t,"DragDropContextProvider",{enumerable:!0,get:function(){return u(o).default}});var a=n(1549);Object.defineProperty(t,"DragLayer",{enumerable:!0,get:function(){return u(a).default}});var i=n(1550);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return u(i).default}});var l=n(1560);function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return u(l).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,a=0;a<n.length;a+=1){if(!o.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;var i=e[n[a]],l=t[n[a]];if(i!==l)return!1}return!0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return Boolean(e&&"function"==typeof e.dispose)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getControl=function(e){return p[e]},Object.defineProperty(t,"ETCoreButton",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"ETCoreButtonGroup",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ETCoreInput",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ETCoreSelect",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ETCoreSelectOption",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ETCoreSelectOptgroup",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"ETCoreSortableList",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ETCoreToggle",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ETCoreRange",{enumerable:!0,get:function(){return d.default}});var r=f(n(1567)),o=f(n(254)),a=f(n(1569)),i=f(n(1460)),l=f(n(1479)),u=f(n(1480)),s=f(n(1571)),c=f(n(1458)),d=f(n(1576));function f(e){return e&&e.__esModule?e:{default:e}}var p={button:r.default,text:a.default,select:i.default,sortable_list:s.default,toggle:c.default,yes_no_button:c.default,range:d.default}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=h(n(0)),a=h(n(6)),i=h(n(23)),l=h(n(18)),u=h(n(14)),s=h(n(79)),c=h(n(1)),d=h(n(10)),f=h(n(58)),p=h(n(1578));h(n(8));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1579);var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(h,e);var t,n,r,a=v(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=a.call(this,e)).tag="a",t.classes={icon:"et-fb-preset__icon",title:"et-fb-preset__title",content:"et-fb-preset__content"},t.onClick=t.onClick.bind(b(t)),t.renderPreset=t.renderPreset.bind(b(t)),t.shouldComponentUpdate=i.default.shouldComponentUpdate.bind(b(t)),t}return t=h,(n=[{key:"onClick",value:function(e){var t=this.props,n=t._onChange,r=t.presets,o=t.name,a=t.type;n(o,e,a);var i=(0,c.default)((0,s.default)(r,{value:e}),"fields",{});(0,d.default)(i,(function(e,t){return n(t,e,"preset_field")}))}},{key:"renderTitle",value:function(e){return(0,u.default)(e)?null:o.default.createElement("span",{className:this.classes.title},e)}},{key:"renderIcon",value:function(e){return(0,u.default)(e)?null:o.default.createElement("span",{className:this.classes.icon},o.default.createElement(f.default,{icon:e}))}},{key:"renderContent",value:function(e){return(0,u.default)(e)?null:o.default.createElement("span",{className:this.classes.content,dangerouslySetInnerHTML:{__html:e}})}},{key:"renderPreset",value:function(e,t){var n=e.title,r=e.icon,a=e.content,i=e.value,u=(0,l.default)({"et-fb-preset":!0,"et-fb-preset--active":i===this.props.value});return o.default.createElement(p.default,{tag:this.tag,className:u,key:t,value:i,onClick:this.onClick},this.renderTitle(n),this.renderIcon(r),this.renderContent(a))}},{key:"render",value:function(){return o.default.createElement("div",{className:"et-fb-preset-container"},this.props.presets.map(this.renderPreset))}}])&&m(t.prototype,n),r&&m(t,r),h}(o.default.Component);w.propTypes={name:a.default.string.isRequired,value:a.default.string.isRequired,presets:a.default.arrayOf(a.default.object).isRequired,_onChange:a.default.func.isRequired};var k=w;t.default=k},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=b(n(6));n(1582);var i=b(n(189)),l=b(n(960)),u=b(n(395)),s=b(n(967)),c=b(n(1583)),d=b(n(1)),f=b(n(14)),p=b(n(1584)),h=n(90),m=n(399),g=n(110),v=b(n(992)),y=b(n(993));function b(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(b,e);var t,n,r,a=O(b);function b(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(e=a.call(this)).state={active:!1},e}return t=b,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.sanitize=this.sanitize.bind(this),this.onChange=this.onChange.bind(this),this.onIncrease=this.onIncrease.bind(this),this.onDecrease=this.onDecrease.bind(this),this.handleSpinnerChange=this.handleSpinnerChange.bind(this),this.makeActive=this.makeActive.bind(this),this.makeInactive=this.makeInactive.bind(this),this.sanitizeIncrease=(0,i.default)(this.sanitize,(function(t){return t+e.getStep()*((0,m.shiftKey)()?10:1)})),this.sanitizeDecrease=(0,i.default)(this.sanitize,(function(t){return t-e.getStep()*((0,m.shiftKey)()?10:1)})),this.getNumericValue=(0,i.default)(parseFloat,this.sanitize,this.getValue)}},{key:"normalize",value:function(e){return(this.normalizer||(this.normalizer=(new h.Normalizer)(this.getSpeed())))(e)*(this.getStep()>1?1:this.getStep())}},{key:"onChange",value:function(e){this.props.readonly||(this.setUpdateSource(1),this.props.onChange((0,y.default)(this.getDefaultUnit(),e,this.sanitize,this.props.allowedUnits)))}},{key:"onIncrease",value:function(){this.props.readonly||(this.setUpdateSource(2),this.props.onChange((0,y.default)(this.getDefaultUnit(),this.getValue(),this.sanitizeIncrease,this.props.allowedUnits)))}},{key:"onDecrease",value:function(){this.props.readonly||(this.setUpdateSource(2),this.props.onChange((0,y.default)(this.getDefaultUnit(),this.getValue(),this.sanitizeDecrease,this.props.allowedUnits)))}},{key:"handleSpinnerChange",value:function(e,t){var n=t.shiftKey;this.setUpdateSource(3);var r=this.normalize((0,h.maybeInt)(e,0))*(n?10:1);0!==r&&this.props.onChange((0,y.default)(this.getDefaultUnit(),this.getValue(),(0,i.default)(this.sanitize,(0,c.default)(r)),this.props.allowedUnits))}},{key:"renderLabel",value:function(){return!(0,l.default)(this.props.label)&&o.default.createElement("span",{className:"et-fb-settings-option-input-label"},this.props.label)}},{key:"getValue",value:function(){var e=this.props.value||this.props.defaultValue||0;return(0,f.default)((0,h.maybeFloat)(e))?0:e}},{key:"getSpeed",value:function(){return Math.abs(this.props.speed)*(this.getStep()>=1?1:.1)}},{key:"getStep",value:function(){return this._step||this.props.step}},{key:"getDefaultUnit",value:function(){return(0,g.getUnit)(this.props.defaultValue,this.props.defaultUnit)}},{key:"makeActive",value:function(){this.setState({active:!0})}},{key:"makeInactive",value:function(){this.setState({active:!1})}},{key:"sanitize",value:function(e){return(0,h.range)(this.props.min,this.props.max,(0,h.toFixed)((0,h.getPrecision)(this.props.precision),e))}},{key:"setUpdateSource",value:function(e){this._updateSource=[e,(0,u.default)(this._updateSource||[void 0])];var t=this.getStep(),n=this.props.step,r=(0,h.getPrecision)(this.getNumericValue()),o=r>(0,h.getPrecision)(n)?(0,h.toPrecision)(r,n):this.isSameSource()?t:n;this._step=o}},{key:"isSameSource",value:function(){var e=this._updateSource||[void 0,void 0];return(0,u.default)(e)===(0,s.default)(e)}},{key:"render",value:function(){var e=this.state.active?"active":"";return o.default.createElement("div",{className:"et-fb-settings-option--numeric-spinner-control ".concat(e)},o.default.createElement(v.default,{id:this.props.id,onChange:this.onChange,onIncrease:this.onIncrease,onDecrease:this.onDecrease,value:this.props.value,step:this.getStep(),onFocus:this.makeActive,onBlur:this.makeInactive,placeholder:this.props.defaultValue,readonly:(0,d.default)(this.props,"readonly",!1)}),o.default.createElement("div",{className:"numeric-spinner-control-label-wrapper"},!this.props.readonly&&o.default.createElement(p.default,{onChange:this.handleSpinnerChange}),this.renderLabel()))}}])&&w(t.prototype,n),r&&w(t,r),b}(o.Component);E.propTypes={onChange:a.default.func.isRequired,step:a.default.number,precision:a.default.number,min:a.default.number,max:a.default.number,value:a.default.string,placeholder:a.default.string,defaultValue:a.default.string,defaultUnit:a.default.string,speed:a.default.number},E.defaultProps={step:1,min:-9999999999,max:9999999999,defaultValue:"",speed:.5,precision:.01};var M=E;t.default=M},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t,n,r=e.Pos;function o(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}function a(e,t){for(var n=o(e),r=n,a=0;a<t.length;a++)-1==r.indexOf(t.charAt(a))&&(r+=t.charAt(a));return n==r?e:new RegExp(e.source,r)}function i(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function l(e,t,n){t=a(t,"g");for(var o=n.line,i=n.ch,l=e.lastLine();o<=l;o++,i=0){t.lastIndex=i;var u=e.getLine(o),s=t.exec(u);if(s)return{from:r(o,s.index),to:r(o,s.index+s[0].length),match:s}}}function u(e,t,n){if(!i(t))return l(e,t,n);t=a(t,"gm");for(var o,u=1,s=n.line,c=e.lastLine();s<=c;){for(var d=0;d<u&&!(s>c);d++){var f=e.getLine(s++);o=null==o?f:o+"\n"+f}u*=2,t.lastIndex=n.ch;var p=t.exec(o);if(p){var h=o.slice(0,p.index).split("\n"),m=p[0].split("\n"),g=n.line+h.length-1,v=h[h.length-1].length;return{from:r(g,v),to:r(g+m.length-1,1==m.length?v+m[0].length:m[m.length-1].length),match:p}}}}function s(e,t,n){for(var r,o=0;o<=e.length;){t.lastIndex=o;var a=t.exec(e);if(!a)break;var i=a.index+a[0].length;if(i>e.length-n)break;(!r||i>r.index+r[0].length)&&(r=a),o=a.index+1}return r}function c(e,t,n){t=a(t,"g");for(var o=n.line,i=n.ch,l=e.firstLine();o>=l;o--,i=-1){var u=e.getLine(o),c=s(u,t,i<0?0:u.length-i);if(c)return{from:r(o,c.index),to:r(o,c.index+c[0].length),match:c}}}function d(e,t,n){if(!i(t))return c(e,t,n);t=a(t,"gm");for(var o,l=1,u=e.getLine(n.line).length-n.ch,d=n.line,f=e.firstLine();d>=f;){for(var p=0;p<l&&d>=f;p++){var h=e.getLine(d--);o=null==o?h:h+"\n"+o}l*=2;var m=s(o,t,u);if(m){var g=o.slice(0,m.index).split("\n"),v=m[0].split("\n"),y=d+g.length,b=g[g.length-1].length;return{from:r(y,b),to:r(y+v.length-1,1==v.length?b+v[0].length:v[v.length-1].length),match:m}}}}function f(e,t,n,r){if(e.length==t.length)return n;for(var o=0,a=n+Math.max(0,e.length-t.length);;){if(o==a)return o;var i=o+a>>1,l=r(e.slice(0,i)).length;if(l==n)return i;l>n?a=i:o=i+1}}function p(e,o,a,i){if(!o.length)return null;var l=i?t:n,u=l(o).split(/\r|\n\r?/);e:for(var s=a.line,c=a.ch,d=e.lastLine()+1-u.length;s<=d;s++,c=0){var p=e.getLine(s).slice(c),h=l(p);if(1==u.length){var m=h.indexOf(u[0]);if(-1==m)continue e;return a=f(p,h,m,l)+c,{from:r(s,f(p,h,m,l)+c),to:r(s,f(p,h,m+u[0].length,l)+c)}}var g=h.length-u[0].length;if(h.slice(g)==u[0]){for(var v=1;v<u.length-1;v++)if(l(e.getLine(s+v))!=u[v])continue e;var y=e.getLine(s+u.length-1),b=l(y),_=u[u.length-1];if(b.slice(0,_.length)==_)return{from:r(s,f(p,h,g,l)+c),to:r(s+u.length-1,f(y,b,_.length,l))}}}}function h(e,o,a,i){if(!o.length)return null;var l=i?t:n,u=l(o).split(/\r|\n\r?/);e:for(var s=a.line,c=a.ch,d=e.firstLine()-1+u.length;s>=d;s--,c=-1){var p=e.getLine(s);c>-1&&(p=p.slice(0,c));var h=l(p);if(1==u.length){var m=h.lastIndexOf(u[0]);if(-1==m)continue e;return{from:r(s,f(p,h,m,l)),to:r(s,f(p,h,m+u[0].length,l))}}var g=u[u.length-1];if(h.slice(0,g.length)==g){var v=1;for(a=s-u.length+1;v<u.length-1;v++)if(l(e.getLine(a+v))!=u[v])continue e;var y=e.getLine(s+1-u.length),b=l(y);if(b.slice(b.length-u[0].length)==u[0])return{from:r(s+1-u.length,f(y,b,y.length-u[0].length,l)),to:r(s,f(p,h,g.length,l))}}}}function m(e,t,n,o){var i;this.atOccurrence=!1,this.doc=e,n=n?e.clipPos(n):r(0,0),this.pos={from:n,to:n},"object"==typeof o?i=o.caseFold:(i=o,o=null),"string"==typeof t?(null==i&&(i=!1),this.matches=function(n,r){return(n?h:p)(e,t,r,i)}):(t=a(t,"gm"),o&&!1===o.multiline?this.matches=function(n,r){return(n?c:l)(e,t,r)}:this.matches=function(n,r){return(n?d:u)(e,t,r)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},n=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),m.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=r(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(r(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=r(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,r(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var o=r(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:o,to:o},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var o=e.splitLines(t);this.doc.replaceRange(o,this.pos.from,this.pos.to,n),this.pos.to=r(this.pos.from.line+o.length-1,o[o.length-1].length+(1==o.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",(function(e,t,n){return new m(this.doc,e,t,n)})),e.defineDocExtension("getSearchCursor",(function(e,t,n){return new m(this,e,t,n)})),e.defineExtension("selectMatches",(function(t,n){for(var r=[],o=this.getSearchCursor(t,this.getCursor("from"),n);o.findNext()&&!(e.cmpPos(o.to(),this.getCursor("to"))>0);)r.push({anchor:o.from(),head:o.to()});r.length&&this.setSelections(r,0)}))}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n].toLowerCase()]=!0;return t}e.defineMode("css",(function(t,n){var r=n.inline;n.propertyKeywords||(n=e.resolveMode("text/css"));var o,a,i=t.indentUnit,l=n.tokenHooks,u=n.documentTypes||{},s=n.mediaTypes||{},c=n.mediaFeatures||{},d=n.mediaValueKeywords||{},f=n.propertyKeywords||{},p=n.nonStandardPropertyKeywords||{},h=n.fontProperties||{},m=n.counterDescriptors||{},g=n.colorKeywords||{},v=n.valueKeywords||{},y=n.allowNested,b=n.lineComment,_=!0===n.supportsAtComponent,w=!1!==t.highlightNonStandardPropertyKeywords;function k(e,t){return o=t,e}function O(e,t){var n=e.next();if(l[n]){var r=l[n](e,t);if(!1!==r)return r}return"@"==n?(e.eatWhile(/[\w\\\-]/),k("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?k(null,"compare"):'"'==n||"'"==n?(t.tokenize=C(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),k("atom","hash")):"!"==n?(e.match(/^\s*\w*/),k("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),k("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?k(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?k("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?k(null,n):e.match(/[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/.test(e.current().toLowerCase())&&(t.tokenize=S),k("variable callee","variable")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),k("property","word")):k(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),k("number","unit")):e.match(/^-[\w\\\-]*/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?k("variable-2","variable-definition"):k("variable-2","variable")):e.match(/^\w+-/)?k("meta","meta"):void 0}function C(e){return function(t,n){for(var r,o=!1;null!=(r=t.next());){if(r==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==r}return(r==e||!o&&")"!=e)&&(n.tokenize=null),k("string","string")}}function S(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=C(")"),k(null,"(")}function E(e,t,n){this.type=e,this.indent=t,this.prev=n}function M(e,t,n,r){return e.context=new E(n,t.indentation()+(!1===r?0:i),e.context),n}function P(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function T(e,t,n){return D[n.context.type](e,t,n)}function x(e,t,n,r){for(var o=r||1;o>0;o--)n.context=n.context.prev;return T(e,t,n)}function j(e){var t=e.current().toLowerCase();a=v.hasOwnProperty(t)?"atom":g.hasOwnProperty(t)?"keyword":"variable"}var D={top:function(e,t,n){if("{"==e)return M(n,t,"block");if("}"==e&&n.context.prev)return P(n);if(_&&/@component/i.test(e))return M(n,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return M(n,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return M(n,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return n.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return M(n,t,"at");if("hash"==e)a="builtin";else if("word"==e)a="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return M(n,t,"interpolation");if(":"==e)return"pseudo";if(y&&"("==e)return M(n,t,"parens")}return n.context.type},block:function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return f.hasOwnProperty(r)?(a="property","maybeprop"):p.hasOwnProperty(r)?(a=w?"string-2":"property","maybeprop"):y?(a=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(a+=" error","maybeprop")}return"meta"==e?"block":y||"hash"!=e&&"qualifier"!=e?D.top(e,t,n):(a="error","block")},maybeprop:function(e,t,n){return":"==e?M(n,t,"prop"):T(e,t,n)},prop:function(e,t,n){if(";"==e)return P(n);if("{"==e&&y)return M(n,t,"propBlock");if("}"==e||"{"==e)return x(e,t,n);if("("==e)return M(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)j(t);else if("interpolation"==e)return M(n,t,"interpolation")}else a+=" error";return"prop"},propBlock:function(e,t,n){return"}"==e?P(n):"word"==e?(a="property","maybeprop"):n.context.type},parens:function(e,t,n){return"{"==e||"}"==e?x(e,t,n):")"==e?P(n):"("==e?M(n,t,"parens"):"interpolation"==e?M(n,t,"interpolation"):("word"==e&&j(t),"parens")},pseudo:function(e,t,n){return"meta"==e?"pseudo":"word"==e?(a="variable-3",n.context.type):T(e,t,n)},documentTypes:function(e,t,n){return"word"==e&&u.hasOwnProperty(t.current())?(a="tag",n.context.type):D.atBlock(e,t,n)},atBlock:function(e,t,n){if("("==e)return M(n,t,"atBlock_parens");if("}"==e||";"==e)return x(e,t,n);if("{"==e)return P(n)&&M(n,t,y?"block":"top");if("interpolation"==e)return M(n,t,"interpolation");if("word"==e){var r=t.current().toLowerCase();a="only"==r||"not"==r||"and"==r||"or"==r?"keyword":s.hasOwnProperty(r)?"attribute":c.hasOwnProperty(r)?"property":d.hasOwnProperty(r)?"keyword":f.hasOwnProperty(r)?"property":p.hasOwnProperty(r)?w?"string-2":"property":v.hasOwnProperty(r)?"atom":g.hasOwnProperty(r)?"keyword":"error"}return n.context.type},atComponentBlock:function(e,t,n){return"}"==e?x(e,t,n):"{"==e?P(n)&&M(n,t,y?"block":"top",!1):("word"==e&&(a="error"),n.context.type)},atBlock_parens:function(e,t,n){return")"==e?P(n):"{"==e||"}"==e?x(e,t,n,2):D.atBlock(e,t,n)},restricted_atBlock_before:function(e,t,n){return"{"==e?M(n,t,"restricted_atBlock"):"word"==e&&"@counter-style"==n.stateArg?(a="variable","restricted_atBlock_before"):T(e,t,n)},restricted_atBlock:function(e,t,n){return"}"==e?(n.stateArg=null,P(n)):"word"==e?(a="@font-face"==n.stateArg&&!h.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==n.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,n){return"word"==e?(a="variable","keyframes"):"{"==e?M(n,t,"top"):T(e,t,n)},at:function(e,t,n){return";"==e?P(n):"{"==e||"}"==e?x(e,t,n):("word"==e?a="tag":"hash"==e&&(a="builtin"),"at")},interpolation:function(e,t,n){return"}"==e?P(n):"{"==e||";"==e?x(e,t,n):("word"==e?a="variable":"variable"!=e&&"("!=e&&")"!=e&&(a="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:r?"block":"top",stateArg:null,context:new E(r?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||O)(e,t);return n&&"object"==typeof n&&(o=n[1],n=n[0]),a=n,"comment"!=o&&(t.state=D[t.state](o,e,t)),a},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),o=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),n.prev&&("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=r||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"atBlock"!=n.type)||(o=Math.max(0,n.indent-i)):o=(n=n.prev).indent),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}}));var n=["domain","regexp","url","url-prefix"],r=t(n),o=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=t(o),i=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],l=t(i),u=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],s=t(u),c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(c),f=["border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],p=t(f),h=t(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),m=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=t(g),y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=t(y),_=n.concat(o).concat(i).concat(u).concat(c).concat(f).concat(g).concat(y);function w(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}e.registerHelper("hintWords","css",_),e.defineMIME("text/css",{documentTypes:r,mediaTypes:a,mediaFeatures:l,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:p,fontProperties:h,counterDescriptors:m,colorKeywords:v,valueKeywords:b,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=w,w(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:l,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:p,colorKeywords:v,valueKeywords:b,fontProperties:h,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:l,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:p,colorKeywords:v,valueKeywords:b,fontProperties:h,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:a,mediaFeatures:l,propertyKeywords:d,nonStandardPropertyKeywords:p,fontProperties:h,counterDescriptors:m,colorKeywords:v,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=w,w(e,t))}},name:"css",helperType:"gss"})}(n(1454))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=j(n(18)),i=j(n(9)),l=j(n(14)),u=j(n(35)),s=j(n(15)),c=j(n(1)),d=j(n(10)),f=j(n(41)),p=j(n(17)),h=j(n(49)),m=j(n(53)),g=n(846),v=j(n(4)),y=j(n(8)),b=j(n(3)),_=j(n(22)),w=j(n(48)),k=j(n(21)),O=j(n(963)),C=j(n(964)),S=j(n(974)),E=j(n(973)),M=j(n(1680)),P=j(n(1681)),T=j(n(1456)),x=j(n(370));function j(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=function(e){return(0,m.default)(e.split("."))},G=function(e){return b.default.get((0,c.default)(e,"default_on_front"),b.default.get((0,c.default)(e,"defaultValue"),b.default.get((0,c.default)(e,"default"),"")))},U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(j,e);var t,n,r,m=B(j);function j(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,j),V(I(t=m.call(this,e)),"getTabs",(function(){return(0,c.default)(I(t),"props.composite_structure",{})})),V(I(t),"getTabSettings",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,c.default)(t.getTabs(),"".concat(e,".controls"),{});if(!n)return r;var o={};return(0,d.default)(r,(function(e,t){(0,l.default)(e.main_tab_setting)||"on"!==e.main_tab_setting||(o[t]=e)})),(0,v.default)(o)?r:o})),V(I(t),"getSettings",(function(){return(0,p.default)(t.getTabs()).reduce((function(e,n){return R(R({},e),t.getTabSettings(n))}),{})})),V(I(t),"getSetting",(function(e){return(0,c.default)(t.getSettings(),e)})),V(I(t),"isTabModified",(function(e){return(0,p.default)(t.getTabSettings(e,!0)).reduce((function(e,n){return e||t.isSettingModified(n)}),!1)})),V(I(t),"isModified",(function(){return(0,p.default)(t.getTabs()).reduce((function(e,n){return e||t.isTabModified(n)}),!1)})),V(I(t),"handleTabHover",(function(e,n,r,o){var a={fieldName:(0,p.default)((0,c.default)(t.props.composite_structure,[n,"controls"],[])).join(" "),fieldLabel:r||o,fieldType:"composite_tab",toggleId:t.props.toggle_slug,toggleGroupId:t.props.tab_slug};if("enter"===e){var i=_.default.getFieldBaseName(t.props.name),l=R(R({},a),{fieldName:i,fieldLabel:t.props.label,fieldType:t.props.type});t.props.onMouseLeaveGroup(l),setTimeout((function(){t.props.onMouseEnterGroup(a)}))}else t.props.onMouseLeaveGroup(a)})),t.state={activeTabIndex:0},t._onChange=t._onChange.bind(I(t)),t._onClickReset=t._onClickReset.bind(I(t)),t._onTabChange=t._onTabChange.bind(I(t)),t}return t=j,(n=[{key:"getModule",value:function(){return(0,c.default)(this,"props.module.props.module")}},{key:"getAttrs",value:function(){return(0,c.default)(this,"props.moduleAttrs",{})}},{key:"getFieldDefault",value:function(e){var t=this.getSetting(e),n=(0,h.default)(t,"default"),r=(0,h.default)(t,"default_from")&&!n?G((0,c.default)(this.getSettings(),H((0,c.default)(t,"default_from")))):void 0;return b.default.get(r,G(t))}},{key:"getDefault",value:function(e){var t=k.default.getFieldBaseName(e);_.default.isHoverMode()?t=_.default.getFieldBaseName(this.props.name):w.default.isStickyMode()&&(t=w.default.getFieldBaseName(this.props.name));var n=this.getSetting(t),r=this.getFieldDefault(t),o=(0,h.default)(n,"default"),a=(0,h.default)(n,"default_from")&&!o?H((0,c.default)(n,"default_from")):void 0,i=a?(0,c.default)(this.getAttrs(),a):void 0,l=_.default.isHoverMode()&&_.default.isEnabled(t,this.getAttrs()),u=w.default.isStickyMode()&&w.default.isEnabled(t,this.getAttrs()),s=b.default.get(i,b.default.get(r,""));if(k.default.isMobile(this.props,!1)&&!l&&!u){var d=k.default.isResponsiveEnabled(this.getAttrs(),k.default.getFieldBaseName(e)),f=n["default_".concat(this.props.activeTabMode)]||k.default.getDefaultValue(this.getAttrs(),"".concat(e,"_").concat(this.props.activeTabMode));return s=(0,c.default)(this.getAttrs(),"".concat(a,"_").concat(this.props.activeTabMode),s),d?f:(0,c.default)(this.getAttrs(),e,s)}return l?b.default.get((0,c.default)(n,"default__hover"),(0,c.default)(this.getAttrs(),t,s)):u?b.default.get((0,c.default)(n,"default__sticky"),(0,c.default)(this.getAttrs(),t,s)):s}},{key:"getValue",value:function(e){var t=this.getAttrs(),n=_.default.isHoverMode()&&_.default.isEnabled(e,t),r=w.default.isStickyMode()&&w.default.isEnabled(e,t),o=(0,c.default)(t,e,"");if(k.default.isMobile(this.props,!1)&&!n&&!r){var a=k.default.isResponsiveEnabled(t,e),i=k.default.getAnyValue(t,"".concat(e,"_").concat(this.props.activeTabMode));return a?i:""}return n?_.default.getHoverOrNormalOnHover(e,t):r?(0,c.default)(t,w.default.getStickyField(e),o):o}},{key:"isSettingModified",value:function(e){return""!==b.default.get(this.getValue(e),"")}},{key:"_onChange",value:function(e,t,n,r){var o=b.default.get(t,this.getDefault(e))===this.getDefault(e);this.props._onChange(e,t,n,r,o)}},{key:"_onClickReset",value:function(){var e=this;(0,p.default)(this.getSettings()).map((function(t){e._onChange(_.default.getHoverFieldOnHover(t,e.getAttrs()),"")})),this.setState({activeTabIndex:0})}},{key:"_onTabChange",value:function(e){this.setState({activeTabIndex:e})}},{key:"_renderTabPreviewArea",value:function(e){return!1}},{key:"_renderOutsidePreviewArea",value:function(){return!1}},{key:"_renderTabs",value:function(){var e=this,t=this.getModule(),n=this.getAttrs(),r=this.props.module._getOptionsFields("advanced"),d=[],p=this.props,m=p.name,v=p.label;return o.default.createElement(M.default,{_onTabChange:this._onTabChange,activeTab:this.state.activeTabIndex},(0,u.default)(this.props.composite_structure,(function(p,M){return o.default.createElement(P.default,{icon:p.icon,key:M,isModified:e.isTabModified(M),label:p.label,tooltip:p.tooltip,tabName:M,handleTabHover:e.handleTabHover},e._renderTabPreviewArea(p),(0,u.default)(p.controls,(function(u,p){var M=w.default.isStickyMode()&&w.default.isEnabled(p,n)?w.default.getStickyField(p,n):_.default.getHoverFieldOnHover(p,n),P=u;u.name=M;var j={};if((0,l.default)(u.type)||!T.default.getControl(u.type))return!1;if("top_divider_style"===M&&(j.dividerFlip=n.top_divider_flip),"bottom_divider_style"===M&&(j.dividerFlip=n.bottom_divider_flip),!(0,l.default)(u.depends_on)&&!e.props.module._isVisible(M,r))return d.push(M),!1;if(!((0,l.default)(u.show_if)&&(0,l.default)(u.show_if_not)||(0,g.canShowField)(u,e.props.setting_resolver)))return d.push(M),!1;if(!(0,l.default)(u.depends_on)&&(0,f.default)(u.depends_on,intersection(u.depends_on,d)))return!1;if(!e.props.module._isOptionMatchesFilter(u.label,u.description,e.props.label))return!1;var D,L=_.default.getFieldBaseName(p),N=!(0,l.default)(u.description)&&""!==u.description,A=(0,c.default)(u,"context_menu",!0),B=k.default.isResponsiveEnabled(n,L),F=w.default.doesSupport(u)&&w.default.hasStickyOptions((0,c.default)(t,"props",{})),I=(0,l.default)(u.label)||""===u.label?"":o.default.createElement(O.default,{name:M,key:"general-form-label-".concat(e.props.uniqueKey,"-").concat(_.default.getFieldBaseName(M)),onClickHelp:!!N&&e.props.onClickHelp,activeHelp:e.props.isDescriptionVisible(M),hoveredGroup:e.props.isHoveredGroup(M),hasHoverOptions:_.default.doesSupport(u),hasStickyOptions:F,onClickResponsive:e.props.onClickResponsive,hasResponsiveOptions:u.mobile_options,activeHover:_.default.isEnabled(M,n),activeSticky:w.default.isEnabled(M,n),onClickHover:!!_.default.hasTabs(u)&&e.props.onClickHover,onClickSticky:!!F&&e.props.onClickSticky,onClickReset:e.props.onClickReset,isResetActive:e.props.isResetActive(u),isResponsiveEnabled:B,onToggleRightMenu:!!A&&e.props.onToggleRightMenu},u.label),W=N?o.default.createElement(C.default,{active:e.props.isDescriptionVisible(M),key:"general-form-description-".concat(e.props.uniqueKey,"-").concat(M)},u.description):"",V=(0,a.default)("et-fb-settings-options","et-fb-option--".concat(u.type.replace("_","-"))),H="",G={};if(u.mobile_options&&(0,i.default)(["custom_margin","custom_padding"],u.type)){var U=(0,c.default)(n,"".concat(M,"_last_edited"),""),z=(0,l.default)(U)?["off","desktop"]:U.split("|"),q=b.default.hasValue(n[M])?n[M]:"",K=(0,c.default)(n,"".concat(M,"_tablet"),""),$=(0,c.default)(n,"".concat(M,"_phone"),"");if(K&&!(0,h.default)(u,"default_phone")&&(u.default_phone=K),K||!(0,h.default)(u,"default_tablet")||(0,h.default)(u,"default_phone")||(u.default_phone=u.default_tablet),q&&((0,h.default)(u,"default_tablet")||(u.default_tablet=q),(0,h.default)(u,"default_phone")||(u.default_phone=q)),!(0,l.default)(u.default_from)){var Y=u.default_from.split(".").pop(),X=(0,c.default)(n,"".concat(Y),"");""!==X&&(0,l.default)(u.default)&&(u.default=X);var J=(0,c.default)(n,"".concat(Y,"_tablet"),"");""!==J&&(u.default_tablet=J);var Q=(0,c.default)(n,"".concat(Y,"_phone"),"");""!==Q&&(u.default_phone=Q)}D={desktop:q,tablet:K,phone:$,isResponsive:B,activeTab:z[1]},H=y.default.getPreviewMode()}else if(u.mobile_options){var Z=e.props.activeTabMode,ee=B,te=(0,i.default)(["tablet","phone"],Z)&&ee,ne=te?"_".concat(Z):"";H=y.default.getPreviewMode();var re=(0,c.default)(n,M,""),oe=(0,c.default)(n,"".concat(M,"_tablet"),"");(0,c.default)(n,"".concat(M,"_phone"),""),""===re&&!(0,l.default)(u.default_from)&&te&&(re=(0,c.default)(n,u.default_from.split(".").pop(),"")),oe&&!(0,h.default)(u,"default_phone")&&(u.default_phone=oe),oe||!(0,h.default)(u,"default_tablet")||(0,h.default)(u,"default_phone")||(u.default_phone=u.default_tablet),re&&((0,h.default)(u,"default_tablet")||(u.default_tablet=re),(0,h.default)(u,"default_phone")||(u.default_phone=re)),D=te?(0,c.default)(n,"".concat(u.name).concat(ne),""):re,te&&(G.default=(0,c.default)(u,"default".concat(ne),(0,c.default)(u,"default","")),G.name="".concat(u.name).concat(ne),G.baseName=u.name,"yes_no_button"===u.type?G.defaultValue=G.default:"background-field"===u.type?G.name=void 0:"multiple_buttons"===u.type&&u.toggleable&&u.multi_selection&&(G.emptyMobileNone=!0))}else D=(0,c.default)(n,M,e.getDefault(p));var ae={slug:u.type,type:"field"},ie=u.mobile_options&&B||_.default.hasTabs(u)&&_.default.isEnabled(L,n)||F&&w.default.isEnabled(L,n)?o.default.createElement(x.default,null,o.default.createElement(S.default,{module:e.getModule(),moduleAttrs:n,fieldName:L,activeTabMode:e.props.activeTabMode,isGlobalPresetsMode:e.props.isGlobalPresetsMode,isResponsiveEnabled:B,isHoverEnabled:_.default.isEnabled(L,n),isStickyEnabled:F&&w.default.isEnabled(L,n),isItemSelected:e.props.isItemSelected})):"",le={fieldName:M,fieldLabel:u.label,fieldType:u.type,toggleId:e.props.toggle_slug,toggleGroupId:e.props.tab_slug,fieldContextMenu:A},ue=R(R({},le),{fieldName:m,fieldLabel:v});return o.default.createElement(E.default,{name:M,key:"advanced-form-group-".concat(e.props.uniqueKey,"-").concat(_.default.getFieldBaseName(M)),onMouseEnterGroup:function(){e.props.onMouseEnterGroup(le)},onMouseLeaveGroup:function(){e.props.onMouseLeaveGroup(le),e.props.onMouseEnterGroup(ue)},isSelectiveSyncAvailable:e.props.isSelectiveSyncAvailable(),isGlobalOptionSynced:e.props.isGlobalOptionSynced(M),_unsyncGlobalSetting:e.props._unsyncGlobalSetting,className:e.props.productTourClass},I,ie,W,o.default.createElement("div",{className:V,key:"et-fb-option-advanced_".concat(e.props.uniqueKey,"-").concat(M)},o.default.createElement("div",{className:"et-fb-option-container",key:"et-fb-option-container-".concat(e.props.uniqueKey,"-").concat(M)},(0,o.createElement)(T.default.getControl(u.type),(0,s.default)({key:"".concat(e.props.uniqueKey,"-").concat(M),value:D,module:e.props.module,name:M,resetValue:!1,_onChange:e._onChange,visible:!0,previewMode:H,animate:e.props.animate,additionalProps:j,isResponsive:B,activeTabMode:e.props.activeTabMode,fieldDefinition:P,matching:ae},u,{default:e.getDefault(p)},G)))))})))})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,a=!1;if((0,d.default)(this.props.composite_structure,(function(t){(0,d.default)(t.controls,(function(t){if(!(0,l.default)(t.type)&&T.default.getControl(t.type))return e.props.module._isOptionMatchesFilter(t.label,t.description,e.props.label)?(a=!0,!1):void 0}))})),!a)return!1;var i=_.default.getFieldBaseName(n),u=this.props.isHoveredGroup(i),s=!(0,l.default)(this.props.description)&&""!==this.props.description,f=(0,c.default)(this.props,"context_menu",!0),p=(0,l.default)(r)||""===r?"":o.default.createElement(O.default,{name:n,onClickHelp:!!s&&this.props.onClickHelp,key:"advanced-form-label-".concat(this.props.uniqueKey),isResetActive:this.isModified(),onClickReset:this._onClickReset,onClickHover:this.props.onClickHover,activeHover:this.props.activeHover,hoveredGroup:u,onToggleRightMenu:!!f&&this.props.onToggleRightMenu},r),h=!1===this.props.activeHover?"":o.default.createElement(x.default,null,o.default.createElement(S.default,{module:this.getModule(),moduleAttrs:this.getAttrs(),fieldName:this.props.name,activeTabMode:this.props.activeTabMode,isGlobalPresetsMode:this.props.isGlobalPresetsMode,isHoverEnabled:this.props.activeHover,isItemSelected:this.props.isItemSelected})),m=s?o.default.createElement(C.default,{active:this.props.isDescriptionVisible(n),key:"general-form-description-".concat(n)},this.props.description):"",g=this.props.name,v={fieldName:i,fieldLabel:r,fieldType:this.props.type,toggleId:this.props.toggleId,toggleGroupId:this.props.toggleGroupId,fieldContextMenu:f};return o.default.createElement(E.default,{name:g,key:"advanced-form-group-".concat(this.props.uniqueKey,"-").concat(g),onMouseEnterGroup:function(){return e.props.onMouseEnterGroup(v)},onMouseLeaveGroup:function(){return e.props.onMouseLeaveGroup(v)}},p,h,m,this._renderOutsidePreviewArea(),this._renderTabs())}}])&&N(t.prototype,n),r&&N(t,r),j}(o.default.Component);t.default=U},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.emptyOnDefault=t.getInputs=t.getCounters=t.getTrackWidth=t.hasTrack=t.getEndLimitTitle=t.getStartLimitTitle=t.getMaxBoundClass=t.getMinBoundClass=t.isMaxBound=t.isMinBound=t.isSingle=void 0;var o=n(238),a=n(1705),i=n(90),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(1457)),u=n(1511);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var c=function(e){return(0,o.getStartMiddle)(e)===(0,o.getEndMiddle)(e)};t.isSingle=c;var d=function(e){return(0,o.getStartLimit)(e)===(0,o.getEndMiddle)(e)};t.isMinBound=d;var f=function(e){return(0,o.getEndLimit)(e)===(0,o.getStartMiddle)(e)};t.isMaxBound=f;t.getMinBoundClass=function(e){return d(e)?l.atMinBound:""};t.getMaxBoundClass=function(e){return f(e)?l.atMaxBound:""};t.getStartLimitTitle=function(e){return(0,o.getStartLimit)(e)>(0,o.getStartLimit)((0,o.getDefaultValue)())?"".concat((0,o.getStartLimit)(e),"%"):""};t.getEndLimitTitle=function(e){return(0,o.getEndLimit)(e)<(0,o.getEndLimit)((0,o.getDefaultValue)())?"".concat((0,o.getEndLimit)(e),"%"):""};t.hasTrack=function(e){return!c(e)};t.getTrackWidth=function(e){return(0,o.getEndMiddle)(e)-(0,o.getStartMiddle)(e)};t.getCounters=function(e,t){var n=Math.round((0,i.getAmount)(1,t)),r=function(e){return n*e},l=(0,o.getStartLimit)(e),s=(0,o.getEndLimit)(e),d=c(e)?[l,(0,o.getStartMiddle)(e),s]:[l,(0,o.getStartMiddle)(e),(0,o.getEndMiddle)(e),s];return(0,o.getStartLimit)((0,o.getDefaultValue)())===l&&d.shift(),(0,o.getEndLimit)((0,o.getDefaultValue)())===s&&d.pop(),(0,a.groupBy)((function(e,t){return r(t)-r(e)<=u.counterWidth}),d)};t.getInputs=function(e,t){var n=Math.round((0,i.getAmount)(1,t)),r=function(e){return n*e},l=[(0,o.getStartLimit)(e),(0,i.average)([(0,o.getEndMiddle)(e),(0,o.getStartMiddle)(e)]),(0,o.getEndLimit)(e)];return(0,a.groupBy)((function(e,t){return r(t)-r(e)<=56}),l)};t.emptyOnDefault=function(e,t,n){if(""===n)return"";var r=e(n);return e(t)===r?"":r}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=i?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}o.default=e,n&&n.set(e,o);return o}(n(0));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=new(n(136).AllHtmlEntities),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var t,n,r,a=s(c);function c(){return i(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return o.default.createElement("option",{value:this.props.value},f.decode(this.props.name))}}])&&l(t.prototype,n),r&&l(t,r),c}(o.PureComponent);t.default=p},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=i?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}o.default=e,n&&n.set(e,o);return o}(n(0));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var t,n,r,a=s(c);function c(){return i(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return o.default.createElement("optgroup",{label:this.props.label},this.props.children)}}])&&l(t.prototype,n),r&&l(t,r),c}(o.PureComponent);t.default=f},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=d(n(6)),i=d(n(18)),l=d(n(1)),u=d(n(77)),s=d(n(394)),c=d(n(3));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1520);var b=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(f,t);var n,r,a,d=m(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=d.call(this)).state={loading:!1},e._onClickChangeApiKey=e._onClickChangeApiKey.bind(v(e)),e._onClickGenerateImageUrlFromVideo=e._onClickGenerateImageUrlFromVideo.bind(v(e)),e}return n=f,(r=[{key:"_onClickChangeApiKey",value:function(){c.default.topWindow().open(ETBuilderBackend.urls.themeOptionsUrl,"_blank").focus()}},{key:"_onClickGenerateImageUrlFromVideo",value:function(){var t=this,n=t.props.module,r=(0,l.default)(t,"props.module.props.attrs.__oembed_thumbnail");c.default.hasValue(r)?t.props._onChange(t.props.name,r):(this.setState({loading:!0}),e.ajax({type:"POST",url:ETBuilderBackend.ajaxUrl,data:{action:"et_pb_video_get_oembed_thumbnail",et_admin_load_nonce:ETBuilderBackend.nonces.et_admin_load,et_video_url:n.props.attrs[t.props.attrs.video_source]},success:function(e){t.props._onChange(t.props.name,e),t.setState({loading:!1})}}))}},{key:"render",value:function(){var e="";switch(this.props.type){case"change_google_api_key":e=o.default.createElement(u.default,{_onClick:this._onClickChangeApiKey,className:(0,i.default)(["et-fb-settings-button--additional-button","et-fb-settings-button--change-api-key"]),inverse:!0},ETBuilderBackend.i18n.controls.additionalButton.changeApiKey);break;case"generate_image_url_from_video":e=o.default.createElement(u.default,{_onClick:this._onClickGenerateImageUrlFromVideo,className:(0,i.default)(["et-fb-settings-button--additional-button","et-fb-settings-button--generate-image-url-from-video"]),inverse:!0},ETBuilderBackend.i18n.controls.additionalButton.generateImageUrlFromVideo)}return o.default.createElement(s.default,{useWrapper:!1,isLoading:this.state.loading},e)}}])&&p(n.prototype,r),a&&p(n,a),f}(o.Component);b.propTypes={attrs:a.default.object,module:a.default.object,name:a.default.string,type:a.default.string,_onChange:a.default.func};var _=b;t.default=_}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1522);Object.defineProperty(t,"DragDropManager",{enumerable:!0,get:function(){return l(r).default}});var o=n(1535);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return l(o).default}});var a=n(1536);Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return l(a).default}});var i=n(1537);function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"createTestBackend",{enumerable:!0,get:function(){return l(i).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case o.BEGIN_DRAG:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case o.HOVER:return i(e.clientOffset,t.clientOffset)?e:r({},e,{clientOffset:t.clientOffset});case o.END_DRAG:case o.DROP:return a;default:return e}},t.getSourceClientOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset,r=e.initialSourceClientOffset;if(!t||!n||!r)return null;return{x:t.x+r.x-n.x,y:t.y+r.y-n.y}},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset;if(!t||!n)return null;return{x:t.x-n.x,y:t.y-n.y}};var o=n(1461),a={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function i(e,t){return e===t||e&&t&&e.x===t.x&&e.y===t.y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e)?e.some((function(e){return e===t})):e===t};var r,o=n(2),a=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments[1],t=arguments[2];switch(e.type){case a.HOVER:break;case i.ADD_SOURCE:case i.ADD_TARGET:case i.REMOVE_TARGET:case i.REMOVE_SOURCE:return u;case a.BEGIN_DRAG:case a.PUBLISH_DRAG_SOURCE:case a.END_DRAG:case a.DROP:default:return s}var n=e.targetIds,o=t.targetIds,l=(0,r.default)(n,o),c=!1;if(0===l.length){for(var d=0;d<n.length;d++)if(n[d]!==o[d]){c=!0;break}}else c=!0;if(!c)return u;var f=o[o.length-1],p=n[n.length-1];f!==p&&(f&&l.push(f),p&&l.push(p));return l},t.areDirty=function(e,t){if(e===u)return!1;if(e===s||void 0===t)return!0;return(0,o.default)(t,e).length>0};var r=l(n(537)),o=l(n(166)),a=n(1461),i=n(1462);function l(e){return e&&e.__esModule?e:{default:e}}var u=[],s=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafari=t.isFirefox=void 0;var r,o=n(159),a=(r=o)&&r.__esModule?r:{default:r};t.isFirefox=(0,a.default)((function(){return/firefox/i.test(navigator.userAgent)})),t.isSafari=(0,a.default)((function(){return Boolean(window.safari)}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackBackendForEs5Users=t.createChildContext=t.CHILD_CONTEXT_TYPES=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){f.default.apply(void 0,["DragDropContext","backend"].concat(Array.prototype.slice.call(arguments)));var t=b(e),n=y(t);return function(e){var t,a,u=e.displayName||e.name||"Component",s=(a=t=function(t){function a(){return h(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return g(a,t),o(a,[{key:"getDecoratedComponentInstance",value:function(){return(0,c.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"getManager",value:function(){return n.dragDropManager}},{key:"getChildContext",value:function(){return n}},{key:"render",value:function(){var t=this;return l.default.createElement(e,r({},this.props,{ref:function(e){t.child=e}}))}}]),a}(i.Component),t.DecoratedComponent=e,t.displayName="DragDropContext("+u+")",t.childContextTypes=v,a);return(0,d.default)(s,e)}};var i=n(0),l=p(i),u=p(n(6)),s=n(1482),c=p(n(1455)),d=p(n(848)),f=p(n(1463));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=t.CHILD_CONTEXT_TYPES={dragDropManager:u.default.object.isRequired},y=t.createChildContext=function(e,t){return{dragDropManager:new s.DragDropManager(e,t)}},b=t.unpackBackendForEs5Users=function(e){var t=e;return"object"===(void 0===t?"undefined":a(t))&&"function"==typeof t.default&&(t=t.default),(0,c.default)("function"==typeof t,"Expected the backend to be a function or an ES6 module exporting a default function. Read more: http://react-dnd.github.io/react-dnd/docs-drag-drop-context.html"),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":r(e))||null===e||"object"!==(void 0===t?"undefined":r(t))||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty,i=0;i<n.length;i+=1){if(!a.call(t,n[i]))return!1;var l=e[n[i]],u=t[n[i]];if(l!==u||"object"===(void 0===l?"undefined":r(l))||"object"===(void 0===u?"undefined":r(u)))return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t,n,h=e.DecoratedComponent,m=e.createHandler,g=e.createMonitor,v=e.createConnector,y=e.registerHandler,b=e.containerDisplayName,_=e.getType,w=e.collect,k=e.options.arePropsEqual,O=void 0===k?p.default:k,C=h.displayName||h.name||"Component",S=(n=t=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleChange=r.handleChange.bind(r),r.handleChildRef=r.handleChildRef.bind(r),(0,c.default)("object"===o(r.context.dragDropManager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",C,C),r.manager=r.context.dragDropManager,r.handlerMonitor=g(r.manager),r.handlerConnector=v(r.manager.getBackend()),r.handler=m(r.handlerMonitor),r.disposable=new s.SerialDisposable,r.receiveProps(e),r.state=r.getCurrentState(),r.dispose(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return this.decoratedComponentInstance}},{key:"shouldComponentUpdate",value:function(e,t){return!O(e,this.props)||!(0,f.default)(t,this.state)}}]),a(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.disposable=new s.SerialDisposable,this.currentType=null,this.receiveProps(this.props),this.handleChange()}},{key:"componentWillReceiveProps",value:function(e){O(e,this.props)||(this.receiveProps(e),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose(),this.isCurrentlyMounted=!1}},{key:"receiveProps",value:function(e){this.handler.receiveProps(e),this.receiveType(_(e))}},{key:"receiveType",value:function(e){if(e!==this.currentType){this.currentType=e;var t=y(e,this.handler,this.manager),n=t.handlerId,r=t.unregister;this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new s.CompositeDisposable(new s.Disposable(o),new s.Disposable(r)))}}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,f.default)(e,this.state)||this.setState(e)}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector.receiveHandlerId(null)}},{key:"handleChildRef",value:function(e){this.decoratedComponentInstance=e,this.handler.receiveComponent(e)}},{key:"getCurrentState",value:function(){return w(this.handlerConnector.hooks,this.handlerMonitor)}},{key:"render",value:function(){return l.default.createElement(h,r({},this.props,this.state,{ref:this.handleChildRef}))}}]),t}(i.Component),t.DecoratedComponent=h,t.displayName=b+"("+C+")",t.contextTypes={dragDropManager:u.default.object.isRequired},n);return(0,d.default)(S,h)};var i=n(0),l=h(i),u=h(n(6)),s=n(1551),c=(h(n(119)),h(n(1455))),d=h(n(848)),f=h(n(1470)),p=h(n(1488));function h(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return Object.keys(e).forEach((function(n){var r=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((0,o.isValidElement)(t)){var r=t;l(r);var a=n?function(t){return e(t,n)}:e;return(0,i.default)(r,a)}e(t,n)}}(e[n]);t[n]=function(){return r}})),t};var r,o=n(0),a=n(1559),i=(r=a)&&r.__esModule?r:{default:r};function l(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t===e)return!0;return null!==t&&null!==e&&(0,a.default)(t,e)};var r,o=n(1470),a=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,n){return"string"==typeof t||"symbol"===(void 0===t?"undefined":r(t))||n&&(0,i.default)(t)&&t.every((function(t){return e(t,!1)}))};var o,a=n(2),i=(o=a)&&o.__esModule?o:{default:o}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=w(n(0)),a=b(n(6)),i=b(n(18)),l=b(n(10)),u=b(n(1)),s=b(n(9)),c=b(n(4)),d=b(n(30)),f=b(n(13)),p=b(n(140)),h=b(n(95)),m=b(n(29)),g=w(n(3)),v=b(n(731)),y=b(n(987));function b(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m.default.getI18n(e,t)}n(1580);var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(b,e);var t,n,r,a=M(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=a.call(this,e)).state={colorPicker:!1},t.edges=["colorStart","colorEnd"],t.colorPickerLastActive="colorStart",t._classNameBase="et-fb-settings-option-color-gradient",t._wrapperRef=o.default.createRef(),t._onClickButton=t._onClickButton.bind(T(t)),t._onClickPreviewCanvas=t._onClickPreviewCanvas.bind(T(t)),t._onClickPreviewAddButton=t._onClickPreviewAddButton.bind(T(t)),t._onClickPreviewRemoveButton=t._onClickPreviewRemoveButton.bind(T(t)),t._onClickPreviewSwapButton=t._onClickPreviewSwapButton.bind(T(t)),t._onClickPreviewResetButton=t._onClickPreviewResetButton.bind(T(t)),t._onChangeColorPicker=t._onChangeColorPicker.bind(T(t)),t._onClearColorPicker=t._onClearColorPicker.bind(T(t)),t._onCloseColorPicker=t._onCloseColorPicker.bind(T(t)),t._setColorPickerState=t._setColorPickerState.bind(T(t)),t._onSelectColorManagerPalette=t._onSelectColorManagerPalette.bind(T(t)),t._onMouseEnterPreview=t._onMouseEnterPreview.bind(T(t)),t._onMouseLeavePreview=t._onMouseLeavePreview.bind(T(t)),t._onMouseEnterButton=t._onMouseEnterButton.bind(T(t)),t._onMouseLeaveButton=t._onMouseLeaveButton.bind(T(t)),t._emitChange=t._emitChange.bind(T(t)),t}return t=b,(n=[{key:"_onClickButton",value:function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-index"),n=this.state.colorPicker;t===n?(this.colorPickerLastActive=n,this.setState({colorPicker:!1})):this.setState({colorPicker:t})}},{key:"_onClickPreviewCanvas",value:function(){this.props.readonly||((0,c.default)(this._getValue())?this._onClickPreviewAddButton():this.setState({colorPicker:this.colorPickerLastActive||"colorStart"}))}},{key:"_onClickPreviewAddButton",value:function(){this.props.readonly||this._emitChange("on")}},{key:"_onClickPreviewSwapButton",value:function(){this._emitChange({colorEnd:v.default.normalize(this._getValue("colorStart")),colorStart:v.default.normalize(this._getValue("colorEnd"))})}},{key:"_onClickPreviewRemoveButton",value:function(){this._emitChange("off")}},{key:"_onClickPreviewResetButton",value:function(){this._emitChange()}},{key:"_onChangeColorPicker",value:function(e,t){t&&!this.props.readonly&&this._emitChange(C({},t,v.default.normalize(e)))}},{key:"_onClearColorPicker",value:function(e){this._onChangeColorPicker("",e)}},{key:"_onCloseColorPicker",value:function(){var e=this.state.colorPicker;this.colorPickerLastActive=e,this.setState({colorPicker:!1})}},{key:"_onSelectColorManagerPalette",value:function(e,t){t&&!this.props.readonly&&this._emitChange(C({},t,v.default.normalize(e)))}},{key:"_onMouseEnterPreview",value:function(){var e=this.props,t=e.name,n=e._onMouseEnterPreview,r=e._onMouseEnter;(0,d.default)(n)&&n(t),(0,d.default)(r)&&r(t,"preview")}},{key:"_onMouseLeavePreview",value:function(){var e=this.props,t=e.name,n=e._onMouseLeavePreview,r=e._onMouseLeave;(0,d.default)(n)&&n(t),(0,d.default)(r)&&r(t,"preview")}},{key:"_onMouseEnterButton",value:function(e){var t=this.props,n=t.name,r=t._onMouseEnterButtonColorStart,o=t._onMouseEnterButtonColorEnd,a=t._onMouseEnterButton,i=t._onMouseEnter,l=e.currentTarget.getAttribute("data-index");"colorStart"===l&&(0,d.default)(r)?r(n):"colorEnd"===l&&(0,d.default)(o)&&o(n),(0,d.default)(a)&&a(n,l),(0,d.default)(i)&&i(n,l)}},{key:"_onMouseLeaveButton",value:function(e){var t=this.props,n=t.name,r=t._onMouseLeaveButtonColorStart,o=t._onMouseLeaveButtonColorEnd,a=t._onMouseLeaveButton,i=t._onMouseLeave,l=e.currentTarget.getAttribute("data-index");"colorStart"===l&&(0,d.default)(r)&&r(n),"colorEnd"===l&&(0,d.default)(o)&&o(n),(0,d.default)(a)&&a(n,l),(0,d.default)(i)&&i(n,l)}},{key:"_emitChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.props,r=n.name,o=n._onChange,a=t||r;(0,d.default)(o)&&o(a,e)}},{key:"isEdgeValueChanged",value:function(e,t){return(0,h.default)(this.edges,(function(n){var r=v.default.normalize((0,u.default)(e,n)),o=v.default.normalize((0,u.default)(t,n)),a=v.default.normalize((0,u.default)(g.default.gradientDefault(),n)),i=(0,g.hasValue)(o);return!(!i||r===o)||!i&&r!==a}))}},{key:"_getValue",value:function(e){var t=this.props.value;return e?(0,u.default)(t,e):t}},{key:"_getDefaultValue",value:function(e){var t=this.props.defaultValue;return e?(0,u.default)(t,e):t}},{key:"_getClassName",value:function(e){return e?"".concat(this._classNameBase,"-").concat(e):this._classNameBase}},{key:"_getPreviewStyle",value:function(){var e=this,t=this._getValue();if((0,c.default)(t)||!(0,f.default)(t))return{};var n={};return(0,l.default)(t,(function(t,r){(0,c.default)(t)&&(0,s.default)(e.edges,r)?n[r]=v.default.transparent:n[r]=t})),{backgroundImage:g.default.getGradient(n)}}},{key:"_setColorPickerState",value:function(e){this.setState({colorPicker:e})}},{key:"_renderColorGradientShared",value:function(){var e=this.state.colorPicker,t=this.props,n=t.readonly,r=t.showPalettes,a=t.hideAddButton,i=t.disableCurrent,l=t.hideSwapButton,u=t.hideResetButton,s=t.hasColorManager,d=t.hideRemoveButton,f=(0,p.default)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props),["name","value"]),h=e||this.colorPickerLastActive,g=e?this._getValue(e):"",v=this._getDefaultValue(),b=!(0,c.default)(this._getValue()),_=b&&this.isEdgeValueChanged(g,v),w=!n&&!a&&!b,S=!n&&!l&&b,E=!n&&!d&&b,M=!n&&!u&&b&&_;return o.default.createElement(y.default,k({},f,{isGradient:!0,name:h,value:g,colorPicker:e,onChangeColorPicker:this._onChangeColorPicker,showPickerPalettes:r&&!s,setColorPickerState:this._setColorPickerState,onClickPreviewCanvas:this._onClickPreviewCanvas,onCloseColorPicker:this._onCloseColorPicker,addTitle:m.default.getI18n("controls.background.addGradient"),previewStyle:this._getPreviewStyle(),showAddButton:w,showSwapButton:S,showResetButton:M,showRemoveButton:E,onClickSwapButton:this._onClickPreviewSwapButton,onClickRemoveButton:this._onClickPreviewRemoveButton,onClickPreviewAddButton:this._onClickPreviewAddButton,onMouseEnterPreview:this._onMouseEnterPreview,onMouseLeavePreview:this._onMouseLeavePreview,isVisible:!!e,disableCurrent:i,onSelectColorManagerPalette:this._onSelectColorManagerPalette}))}},{key:"_renderButtons",value:function(){var e=this,t=this.state.colorPicker,n=this.props.hasPreview;return(!(0,c.default)(this._getValue())||!n)&&o.default.createElement("div",{className:this._getClassName("wrap--buttons")},this.edges.map((function(n){var r,a,l=(C(r={},e._getClassName("buttons-inner"),!0),C(r,e._getClassName("buttons-inner--".concat(n)),!0),C(r,e._getClassName("buttons-inner--active"),t===n),r),u=(C(a={},e._getClassName("buttons-button"),!0),C(a,e._getClassName("buttons-button--".concat(n)),!0),C(a,e._getClassName("buttons-button--active"),t===n),a),s={borderColor:e._getValue(n)};return o.default.createElement("button",{type:"button",key:n,"data-index":n,className:(0,i.default)(l),onClick:e._onClickButton,onMouseEnter:e._onMouseEnterButton,onMouseLeave:e._onMouseLeaveButton,"data-et-colorpicker-part":"true"},o.default.createElement("div",{style:s,className:(0,i.default)(u),"data-text":j("controls.colorpicker.selectColor")}))})))}},{key:"render",value:function(){var e,t=this.props,n=t.hasPreview,r=t.hasColorManager,a=(C(e={},this._getClassName(),!0),C(e,this._getClassName("-has-preview"),n),C(e,this._getClassName("-has-color-manager"),r),e);return o.default.createElement("div",{ref:this._wrapperRef,className:(0,i.default)(a)},this._renderColorGradientShared(),this._renderButtons())}}])&&S(t.prototype,n),r&&S(t,r),b}(o.PureComponent),L=a.default.oneOfType([a.default.string,a.default.shape({colorEnd:a.default.string,colorStart:a.default.string,direction:a.default.string,endPosition:a.default.string,overlaysImage:a.default.string,radialDirection:a.default.string,startPosition:a.default.string,type:a.default.string})]);D.propTypes={name:a.default.string,hasPreview:a.default.bool,hasColorManager:a.default.bool,showColorManagerOnPickerActive:a.default.bool,disableCurrent:a.default.bool,showPalettes:a.default.bool,isAlpha:a.default.bool,readonly:a.default.bool,animate:a.default.bool,value:L,defaultValue:L,hideAddButton:a.default.bool,hideSwapButton:a.default.bool,hideRemoveButton:a.default.bool,hideResetButton:a.default.bool,_onChange:a.default.func,_onMouseEnter:a.default.func,_onMouseLeave:a.default.func,_onMouseEnterPreview:a.default.func,_onMouseLeavePreview:a.default.func,_onMouseEnterButton:a.default.func,_onMouseLeaveButton:a.default.func},D.defaultProps={hasPreview:!1,hasColorManager:!0,showColorManagerOnPickerActive:!0,disableCurrent:!1,showPalettes:!0,isAlpha:!0,readonly:!1,animate:!1,hideAddButton:!1,hideSwapButton:!1,hideRemoveButton:!1,hideResetButton:!1};var R=D;t.default=R},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=s(n(23)),i=s(n(6)),l=n(42),u=n(3);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1464);var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,n,r,i=h(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),y(g(t=i.call(this,e)),"onChange",(function(e){var n=e.target.checked,r=e.target.value,o=(0,l.map)(t.props.options,(function(e){return e.value})),a=t.props.value.split("|");n&&!(0,l.includes)(a,r)?a.push(r):n||(a=(0,l.remove)(a,(function(e){return e!==r})));var i=(0,l.map)(o,(function(e){return(0,l.includes)(a,e)?e:""})).join("|");!(0,u.hasValue)(i)&&(0,u.hasValue)((0,l.get)(t.props,"default"))&&(i="|"),t.props._onChange(t.props.name,i)})),y(g(t),"getValue",(function(){var e=t.props.value;return(0,u.hasValue)(e)?e.split("|"):(0,l.get)(t.props,"default","").split("|")})),y(g(t),"renderLoading",(function(){return o.default.createElement("div",{className:"et-fb-select-ajaxified__spinner"})})),t.shouldComponentUpdate=a.default.shouldComponentUpdate.bind(g(t)),t}return t=s,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.options,a=t.readonly,i=t.shortcut_index,u={readOnly:a},s="";return(0,l.isEmpty)(r)||(s=(0,l.toArray)(r).map((function(t,r){var a=(0,l.isString)(t)?t:t.value,s=(0,l.isString)(t)?t:t.label,c="et-fb-multiple-checkbox-".concat(n,"-").concat(i,"-").concat(r),f=(0,l.includes)(e.getValue(),a);return o.default.createElement("p",{key:c},o.default.createElement("label",{htmlFor:c},o.default.createElement("input",d({type:"checkbox",id:c,name:"et_fb_multiple_checkboxes[".concat(r,"]"),value:a,onChange:e.onChange,checked:f,"data-index":r},u))," ",s))}))),o.default.createElement("div",{className:"et-fb-multiple-checkboxes-wrap"},s,this.props.loading&&this.renderLoading())}}])&&f(t.prototype,n),r&&f(t,r),s}(o.Component);y(b,"defaultProps",{defaults:[],value:"",_onChange:l.noop,readonly:!1,loading:!1}),y(b,"propTypes",{options:i.default.object.isRequired,defaults:i.default.array,value:i.default.string,name:i.default.string.isRequired,_onChange:i.default.func,readonly:i.default.bool,loading:i.default.bool});var _=b;t.default=_},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=E(n(0)),a=E(n(6)),i=E(n(339)),l=E(n(18)),u=E(n(45)),s=E(n(14)),c=E(n(52)),d=(E(n(13)),E(n(2))),f=E(n(40)),p=E(n(9)),h=(E(n(10)),E(n(180)),E(n(12))),m=(E(n(49)),E(n(1))),g=E(n(153)),v=E(n(91)),y=E(n(23)),b=E(n(3)),_=n(399),w=E(n(8)),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(110)),O=(E(n(27)),E(n(991)));n(1592);E(n(22));var C=E(n(21));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function E(e){return e&&e.__esModule?e:{default:e}}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P=E(n(256)).default.instance(),T="desktop";b.default.$appWindow().on("resize",(0,c.default)((function(){T=P.getViewModeByWidth(b.default.$appWindow().width()),b.default.$appWindow().trigger("et_builder_range_resize")}),400));var x=(0,i.default)({displayName:"ETBuilderControlRange",mixins:[y.default],isChangingRange:!1,getRangeSettings:function(){return(0,s.default)(this.props.range_settings)?{min:0,max:100,step:1}:this.props.range_settings},getInitialState:function(){var e=this.getRangeSettings();return{rangeMin:e.min,rangeMax:e.max,rangeStep:e.step,value:this.props.value,rangeFocus:!1}},componentDidMount:function(){var e=this.props.value;this.deferredUpdate=(0,c.default)(this.updateOptionAndState,700),parseFloat(this.state.rangeStep)>.1&&parseFloat(e)%1>0&&this.setState({rangeStep:"0.1"}),this.checkRangeBoundaries(this.state.value)},componentDidUpdate:function(e){(this.props.previewMode&&this.props.previewMode!==e.previewMode||this.state.value!==e.value)&&this.setState({value:this.emptyIfDefault(this.getCurrentInputValue())})},componentWillUnmount:function(){this.deferredUpdate.cancel()},_calculatePreviewMode:function(){var e=w.default.getPreviewMode();return"zoom"===e?"desktop":"wireframe"===e?"wireframe":T},getCurrentInputValue:function(){var e=this.props.value;if((0,f.default)(this.props.isTransformOrigin)){if("50%"===this.props.value)return"center";if("x"===this.props.isTransformOrigin){if("0%"===this.props.value)return"left";if("100%"===this.props.value)return"right"}else if("y"===this.props.isTransformOrigin){if("0%"===this.props.value)return"top";if("100%"===this.props.value)return"bottom"}}return(0,s.default)(e)||(0,v.default)(e)||(0,g.default)(e)?"":e},getDefaultValue:function(){var e=(0,m.default)(this,"props.allow_empty",!1)?void 0:0,t=(0,m.default)(this,"props.additionalAttrs.getDefaultFrom",!1),n=(0,m.default)(this,"props.default_values_mapping",!1),r=C.default.isMobile(this.props),o=this.props.default;return t&&n&&!r&&(o=(0,m.default)(n,t,o)),b.default.hasValue(o)?o:e},getDefaultUnit:function(){return(0,k.getUnit)(this.getDefaultValue())},emptyIfDefault:function(e){return e===this.getDefaultValue()?"":e},isFixedUnit:function(){return b.default.hasValue(this.props.fixed_unit)},isAllowedUnit:function(){return b.default.hasValue(this.props.allowed_units)&&(0,d.default)(this.props.allowed_units)},isValidateUnit:function(){return!1!==this.props.validate_unit},validateValue:function(e){if((0,p.default)(this.props.allowed_values,e))return e;var t=this.props.value||this.props.default,n=k.default.getUnit(this.isChangingRange?t:e,this.props.default_unit);this.isAllowedUnit()&&!(0,p.default)(this.props.allowed_units,n)&&(n=this.props.default_unit||"px");var r=this.isFixedUnit()?this.props.fixed_unit:n,o=this.isValidateUnit()&&!0!==this.props.unitless?r:"";return k.default.sanitizeInputUnit((0,h.default)(parseFloat(e)),!1,o)},reset:function(e){e.preventDefault(),this.updateOptionAndState("")},onRangeFocus:function(){this.setState({rangeFocus:!0})},onRangeBlur:function(){this.setState({rangeFocus:!1})},inputsWrap:function(){var e="et-fb-".concat(this.props.name),t=this.props.name,n=(0,s.default)(this.getDefaultValue())?"0":this.validateValue(this.getDefaultValue()),r=this.validateValue(this.getCurrentInputValue())===n?"":this.validateValue(this.getCurrentInputValue()),a=""===r?n:r;if((0,f.default)(this.props.isTransformOrigin))switch(r){case"center":a=50;break;case"top":case"left":a=0;break;case"right":case"bottom":a=100}var i={};b.default.hasValue(this.getRangeSettings().min_limit)&&(i.min=parseFloat(this.getRangeSettings().min_limit)),b.default.hasValue(this.getRangeSettings().max_limit)&&(i.max=parseFloat(this.getRangeSettings().max_limit)),isNaN(parseFloat(a))&&(a=this.state.rangeMax);var l={};return l.onInput=this._updateFromRange,l.onChange=u.default,o.default.createElement("div",{className:"et-fb-settings-option-inputs-wrap"},o.default.createElement("input",M({id:e,name:t,type:"range",min:this.state.rangeMin,max:this.state.rangeMax,step:this.getRangeStep(),className:"et-fb-range",value:parseFloat(a),"data-shortcuts-allowed":!0},l,{onFocus:this.onRangeFocus,onBlur:this.onRangeBlur})),o.default.createElement("div",{className:"et-fb-range-number et-fb-settings-option-input"},o.default.createElement(O.default,M({id:"".concat(e,"-number")},i,{value:r,onChange:this._onChange,defaultValue:n,defaultUnit:this.getDefaultUnit(),step:parseFloat(this.getRangeSettings().step),precision:this.props.precision,isTransformOrigin:this.props.isTransformOrigin}))))},render:function(){var e=this.getDefaultValue(),t=this.props.value,n=this.inputsWrap();return!t||t===e||this.props.readonly||this.props.disableReset||o.default.createElement("button",{className:"et-fb-settings-option-button--reset",onClick:this.reset}),o.default.createElement("div",{className:(0,l.default)({"et-fb-settings-option-inner":!0,"et-fb-settings-option-inner-range":!0})},n)},updateOptionAndState:function(e){e=(0,s.default)(e)?this.state.value:e;var t=this.validateValue(e);this.setState({value:this.emptyIfDefault(t)}),this.props._onChange(this.props.name,t,this.props.type)},_updateFromRange:function(e){this.props.readonly||(this.isChangingRange=!0,this.updateOptionAndState(e.target.value),this.isChangingRange=!1)},_onChange:function(e){this.props.readonly||(this.updateOptionAndState(e),this.checkRangeBoundaries(e))},checkRangeBoundaries:function(e){if(b.default.hasValue(e)){var t=parseFloat(e);!b.default.hasValue(this.getRangeSettings().max_limit)&&t>this.state.rangeMax&&this.setState({rangeMax:t}),!b.default.hasValue(this.getRangeSettings().min_limit)&&t<this.state.rangeMin&&this.setState({rangeMin:t}),parseFloat(this.state.rangeStep)>.1&&t%1>0?this.setState({rangeStep:"0.1"}):parseFloat(this.state.rangeStep)<1&&0==t%1&&this.setState({rangeStep:this.getRangeSettings().step})}},getRangeStep:function(){return parseFloat(this.state.rangeStep)*(this.state.rangeFocus&&(0,_.shiftKey)()?10:1)}});x.propTypes={default_unit:a.default.string,precision:a.default.number,name:a.default.string,value:a.default.oneOfType([a.default.string,a.default.object,a.default.array]),range_settings:a.default.object,mobile_options:a.default.bool,reset_animation:a.default.bool,previewMode:a.default.string,default:a.default.oneOfType([a.default.string,a.default.number]),default_tablet:a.default.string,default_phone:a.default.string,type:a.default.string,fixed_unit:a.default.string,validate_unit:a.default.bool,readonly:a.default.bool,_onChange:a.default.func,unitless:a.default.bool,isTransformOrigin:a.default.oneOfType([a.default.string,a.default.bool])},x.defaultProps={default_unit:"",allowed_values:[],isTransformOrigin:!1};var j=x;t.default=j},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(0)),o=d(n(339)),a=d(n(18)),i=d(n(23)),l=d(n(45)),u=d(n(14)),s=d(n(180)),c=d(n(1));d(n(27));function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n(1593);var p=(0,o.default)({displayName:"ETBuilderControlTextarea",mixins:[i.default],getInitialState:function(){return this.isEditing=!1,this.getNewState()},getModuleAddres:function(){return(0,c.default)(this,"props.module.props.module.props.address")},getNewState:function(){var e=this.props.is_fb_content?this.props.content:this.props.value;return{value:this.processValue(e),id:this.getModuleAddres()}},componentDidMount:function(){this.saveValue=(0,s.default)(this.updateOptionValue,0,{leading:!1})},componentDidUpdate:function(){this.getModuleAddres()!==this.state.id&&this.setState(this.getNewState())},UNSAFE_componentWillReceiveProps:function(e){if(this.isEditing)this.isEditing=!1;else{var t=this.props,n=t.is_fb_content?t.content:t.value,r=t.is_fb_content?e.content:e.value;n!=r&&this.setState({value:this.processValue(r)})}},processValue:function(e){return"string"!=typeof e||e?("raw_content"===this.props.name&&(e=e.split("\x3c!-- [et_pb_line_break_holder] --\x3e").join("\n")),"custom_message"!==this.props.name||(0,u.default)(e)||(e=e.split("||et_pb_line_break_holder||").join("\r\n")),e):new String("")},render:function(){var e=this.props.additional_attrs?this.props.additional_attrs:{},t={"et-fb-settings-option-textarea":!0};return this.props.className?t[this.props.className]=!0:(t["et-fb-main-setting"]=!0,t["regular-text"]=!0),r.default.createElement("textarea",f({className:(0,a.default)(t),value:this.state.value,name:this.props.name,id:"et-fb-".concat(this.props.name),onChange:l.default,onInput:this._onInput},e))},_onInput:function(e){var t=e.target.value;this.setState({value:this.processValue(t)}),this.saveValue.cancel(),this.saveValue()},updateOptionValue:function(){var e=this.state.value;this.isEditing=!0,this.props._onChange(this.props.name,e,this.props.type)}});t.default=p},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=e.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function o(e){return e&&e.bracketRegex||/[(){}[\]]/}function a(e,t,a){var l=e.getLineHandle(t.line),u=t.ch-1,s=a&&a.afterCursor;null==s&&(s=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var c=o(a),d=!s&&u>=0&&c.test(l.text.charAt(u))&&r[l.text.charAt(u)]||c.test(l.text.charAt(u+1))&&r[l.text.charAt(++u)];if(!d)return null;var f=">"==d.charAt(1)?1:-1;if(a&&a.strict&&f>0!=(u==t.ch))return null;var p=e.getTokenTypeAt(n(t.line,u+1)),h=i(e,n(t.line,u+(f>0?1:0)),f,p||null,a);return null==h?null:{from:n(t.line,u),to:h&&h.pos,match:h&&h.ch==d.charAt(0),forward:f>0}}function i(e,t,a,i,l){for(var u=l&&l.maxScanLineLength||1e4,s=l&&l.maxScanLines||1e3,c=[],d=o(l),f=a>0?Math.min(t.line+s,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-s),p=t.line;p!=f;p+=a){var h=e.getLine(p);if(h){var m=a>0?0:h.length-1,g=a>0?h.length:-1;if(!(h.length>u))for(p==t.line&&(m=t.ch-(a<0?1:0));m!=g;m+=a){var v=h.charAt(m);if(d.test(v)&&(void 0===i||e.getTokenTypeAt(n(p,m+1))==i)){var y=r[v];if(y&&">"==y.charAt(1)==a>0)c.push(v);else{if(!c.length)return{pos:n(p,m),ch:v};c.pop()}}}}}return p-a!=(a>0?e.lastLine():e.firstLine())&&null}function l(e,r,o){for(var i=e.state.matchBrackets.maxHighlightLineLength||1e3,l=[],u=e.listSelections(),s=0;s<u.length;s++){var c=u[s].empty()&&a(e,u[s].head,o);if(c&&e.getLine(c.from.line).length<=i){var d=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";l.push(e.markText(c.from,n(c.from.line,c.from.ch+1),{className:d})),c.to&&e.getLine(c.to.line).length<=i&&l.push(e.markText(c.to,n(c.to.line,c.to.ch+1),{className:d}))}}if(l.length){t&&e.state.focused&&e.focus();var f=function(){e.operation((function(){for(var e=0;e<l.length;e++)l[e].clear()}))};if(!r)return f;setTimeout(f,800)}}function u(e){e.operation((function(){e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null),e.state.matchBrackets.currentlyHighlighted=l(e,!1,e.state.matchBrackets)}))}e.defineOption("matchBrackets",!1,(function(t,n,r){function o(e){e.state.matchBrackets&&e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null)}r&&r!=e.Init&&(t.off("cursorActivity",u),t.off("focus",u),t.off("blur",o),o(t)),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",u),t.on("focus",u),t.on("blur",o))})),e.defineExtension("matchBrackets",(function(){l(this,!0)})),e.defineExtension("findMatchingBracket",(function(e,t,n){return(n||"boolean"==typeof t)&&(n?(n.strict=t,t=n):t=t?{strict:!0}:null),a(this,e,t)})),e.defineExtension("scanForBracket",(function(e,t,n,r){return i(this,e,t,n,r)}))}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t=e.Pos;function n(e,t){return e.line-t.line||e.ch-t.ch}var r="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o=new RegExp("<(/?)(["+r+"]["+r+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function a(e,t,n,r){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=r?Math.max(r.from,e.firstLine()):e.firstLine(),this.max=r?Math.min(r.to-1,e.lastLine()):e.lastLine()}function i(e,n){var r=e.cm.getTokenTypeAt(t(e.line,n));return r&&/\btag\b/.test(r)}function l(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function u(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function s(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(l(e))continue;return}if(i(e,t+1)){var n=e.text.lastIndexOf("/",t),r=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t+1}}function c(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(u(e))continue;return}if(i(e,t+1)){o.lastIndex=t,e.ch=t;var n=o.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function d(e){for(;;){o.lastIndex=e.ch;var t=o.exec(e.text);if(!t){if(l(e))continue;return}if(i(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}function f(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(u(e))continue;return}if(i(e,t+1)){var n=e.text.lastIndexOf("/",t),r=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t}}function p(e,n){for(var r=[];;){var o,a=d(e),i=e.line,l=e.ch-(a?a[0].length:0);if(!a||!(o=s(e)))return;if("selfClose"!=o)if(a[1]){for(var u=r.length-1;u>=0;--u)if(r[u]==a[2]){r.length=u;break}if(u<0&&(!n||n==a[2]))return{tag:a[2],from:t(i,l),to:t(e.line,e.ch)}}else r.push(a[2])}}function h(e,n){for(var r=[];;){var o=f(e);if(!o)return;if("selfClose"!=o){var a=e.line,i=e.ch,l=c(e);if(!l)return;if(l[1])r.push(l[2]);else{for(var u=r.length-1;u>=0;--u)if(r[u]==l[2]){r.length=u;break}if(u<0&&(!n||n==l[2]))return{tag:l[2],from:t(e.line,e.ch),to:t(a,i)}}}else c(e)}}e.registerHelper("fold","xml",(function(e,r){for(var o=new a(e,r.line,0);;){var i=d(o);if(!i||o.line!=r.line)return;var l=s(o);if(!l)return;if(!i[1]&&"selfClose"!=l){var u=t(o.line,o.ch),c=p(o,i[2]);return c&&n(c.from,u)>0?{from:u,to:c.from}:null}}})),e.findMatchingTag=function(e,r,o){var i=new a(e,r.line,r.ch,o);if(-1!=i.text.indexOf(">")||-1!=i.text.indexOf("<")){var l=s(i),u=l&&t(i.line,i.ch),d=l&&c(i);if(l&&d&&!(n(i,r)>0)){var f={from:t(i.line,i.ch),to:u,tag:d[2]};return"selfClose"==l?{open:f,close:null,at:"open"}:d[1]?{open:h(i,d[2]),close:f,at:"close"}:{open:f,close:p(i=new a(e,u.line,u.ch,o),d[2]),at:"open"}}}},e.findEnclosingTag=function(e,t,n,r){for(var o=new a(e,t.line,t.ch,n);;){var i=h(o,r);if(!i)break;var l=p(new a(e,t.line,t.ch,n),i.tag);if(l)return{open:i,close:l}}},e.scanForClosingTag=function(e,t,n,r){return p(new a(e,t.line,t.ch,r?{from:0,to:r}:null),n)}}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){function t(t,n,r){var o,a=t.getWrapperElement();return(o=a.appendChild(document.createElement("div"))).className=r?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?o.innerHTML=n:o.appendChild(n),e.addClass(a,"dialog-opened"),o}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",(function(r,o,a){a||(a={}),n(this,null);var i=t(this,r,a.bottom),l=!1,u=this;function s(t){if("string"==typeof t)d.value=t;else{if(l)return;l=!0,e.rmClass(i.parentNode,"dialog-opened"),i.parentNode.removeChild(i),u.focus(),a.onClose&&a.onClose(i)}}var c,d=i.getElementsByTagName("input")[0];return d?(d.focus(),a.value&&(d.value=a.value,!1!==a.selectValueOnOpen&&d.select()),a.onInput&&e.on(d,"input",(function(e){a.onInput(e,d.value,s)})),a.onKeyUp&&e.on(d,"keyup",(function(e){a.onKeyUp(e,d.value,s)})),e.on(d,"keydown",(function(t){a&&a.onKeyDown&&a.onKeyDown(t,d.value,s)||((27==t.keyCode||!1!==a.closeOnEnter&&13==t.keyCode)&&(d.blur(),e.e_stop(t),s()),13==t.keyCode&&o(d.value,t))})),!1!==a.closeOnBlur&&e.on(i,"focusout",(function(e){null!==e.relatedTarget&&s()}))):(c=i.getElementsByTagName("button")[0])&&(e.on(c,"click",(function(){s(),u.focus()})),!1!==a.closeOnBlur&&e.on(c,"blur",s),c.focus()),s})),e.defineExtension("openConfirm",(function(r,o,a){n(this,null);var i=t(this,r,a&&a.bottom),l=i.getElementsByTagName("button"),u=!1,s=this,c=1;function d(){u||(u=!0,e.rmClass(i.parentNode,"dialog-opened"),i.parentNode.removeChild(i),s.focus())}l[0].focus();for(var f=0;f<l.length;++f){var p=l[f];!function(t){e.on(p,"click",(function(n){e.e_preventDefault(n),d(),t&&t(s)}))}(o[f]),e.on(p,"blur",(function(){--c,setTimeout((function(){c<=0&&d()}),200)})),e.on(p,"focus",(function(){++c}))}})),e.defineExtension("openNotification",(function(r,o){n(this,s);var a,i=t(this,r,o&&o.bottom),l=!1,u=o&&void 0!==o.duration?o.duration:5e3;function s(){l||(l=!0,clearTimeout(a),e.rmClass(i.parentNode,"dialog-opened"),i.parentNode.removeChild(i))}return e.on(i,"click",(function(t){e.e_preventDefault(t),s()})),u&&(a=setTimeout(s,u)),s}))}(n(1454))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=(c(n(6)),c(n(79))),i=c(n(14)),l=c(n(1617)),u=c(n(29)),s=["post_type","include_latest_post","include_current_post","current_post_type","defaultOption"];function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(c,e);var t,n,r,u=v(c);function c(){var e;h(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(b(e=u.call.apply(u,[this].concat(n))),"filterOptionLabel",(function(e,t,n){var r=(0,a.default)(n,(function(e){return e.value.toString()===t.toString()}));return(0,i.default)(r)?e:o.default.createElement(o.Fragment,null,o.default.createElement("span",{className:"et-fb-select-ajaxified__item-label"},e))})),w(b(e),"getArguments",(function(t,n,r){var o=e.props,a=o.post_type,i=o.include_latest_post,l=o.include_current_post,u=o.current_post_type;return{action:"et_builder_search_posts",nonce:ETBuilderBackend.nonces.searchPosts,post_type:a,include_latest_post:i,include_current_post:l,current_post_type:u,value:t,search:n,page:r}})),e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=(e.post_type,e.include_latest_post,e.include_current_post,e.current_post_type,e.defaultOption),n=p(e,s);return o.default.createElement(l.default,f({},n,{labelFilter:this.filterOptionLabel,defaultOption:t,arguments:this.getArguments}))}}])&&m(t.prototype,n),r&&m(t,r),c}(o.PureComponent);w(k,"defaultProps",{include_latest_post:"0",include_current_post:"0",current_post_type:u.default.postType,defaultOption:!1});var O=k;t.default=O},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=y(n(6)),i=y(n(18)),l=n(136),u=y(n(14)),s=y(n(45)),c=y(n(1)),d=y(n(49)),f=y(n(9)),p=n(959),h=y(n(118)),m=y(n(988)),g=y(n(3)),v=y(n(1639));function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1644);var M=new l.AllHtmlEntities,P={},T=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(y,t);var n,r,a,l=O(y);function y(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),t=l.call(this,e),n=S(t),o="ETBuilderControlUpload",(r="displayName")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t._onChange=t._onChange.bind(S(t)),t._onClick=t._onClick.bind(S(t)),t._onClickRemove=t._onClickRemove.bind(S(t)),t._onClickReset=t._onClickReset.bind(S(t)),t}return n=y,(r=[{key:"_onChange",value:function(e){this.props._onChange(this.props.name,e.target.value)}},{key:"_onClick",value:function(t){if(!this.props.readonly){t&&"function"==typeof t.preventDefault&&t.preventDefault(),t&&"function"==typeof t.stopPropagation&&t.stopPropagation();var n=(0,c.default)(g.default.topWindow(),"getUserSetting",s.default)("imgsize"),r=(0,c.default)(g.default.topWindow(),"setUserSetting",s.default),o=function(){return r("imgsize",n)};r("imgsize","full");var a,i=g.default.topWindow().wp.media,l=this.props,f=l.name,p=l.hide_metadata,h=l.attachment_id,m=l.embed,v=l.choose_text,y=l.upload_button_text,b=l._onChange,_=l._onEnableBackgroundSetting;if(!0===p&&e("body").addClass("et-bp-settings-option-upload-hide-metadata"),void 0!==a)return a.open(),void o();(a=i.frames.file_frame=new i.view.MediaFrame.ETSelect({title:M.decode(v),library:{type:this._getDataType()},button:{text:M.decode(y)},multiple:!1,embed:m})).on("select",(function(){var e=a.state().props.get("url");b(f,e)})),a.on("close",(function(){e("body").removeClass("et-bp-settings-option-upload-hide-metadata")})),a.on("insert",(function(){var e=a.state().get("selection").first();if(e){var t=e.get("alt");t&&(0,u.default)(_)&&b("alt",t);var n=e.get("title");n&&(0,u.default)(_)&&b("title_text",n);var r=e.get("url"),o=a.state().display(e).get("size");o&&(0,d.default)(e,"attributes.sizes.".concat(o))&&(r=(0,c.default)(e,"attributes.sizes.".concat(o)).url);var i=r;if(h){var l=e.get("id");P[l]=r,i=l}b(f,i)}})),a.open(),o()}}},{key:"_onClickRemove",value:function(){this.props._onChange(this.props.name,""),(0,u.default)(this.props._onEnableBackgroundSetting)||this.props._onEnableBackgroundSetting(this.props.name,"delete",this.props.type)}},{key:"_onClickReset",value:function(){this.props._onChange(this.props.name,"",void 0,void 0,!0),(0,u.default)(this.props._onEnableBackgroundSetting)||this.props._onEnableBackgroundSetting(this.props.name,"reset",this.props.type)}},{key:"_hasPreview",value:function(){return"image"===this._getDataType()||"video"===this._getDataType()}},{key:"getAddTitle",value:function(){var e=ETBuilderBackend.i18n.controls.upload,t="video"===this._getDataType()?e.addVideo:e.addImage;return(0,c.default)(this,"props.addTitle",t)}},{key:"_getDataType",value:function(){return(0,u.default)(this.props.data_type)?"image":this.props.data_type}},{key:"_getPreviewStyle",value:function(e){if(g.default.hasValue(e)&&this._hasPreview()&&"video"!==this._getDataType()){var t={};if((0,c.default)(this,"props.isBackgroundType")){var n=(0,c.default)(this,"props.imagePreviewAttrs",{});t.backgroundImage="url(".concat(e,")"),t.backgroundPosition=(0,u.default)(n.position)?"":n.position.replace("_"," "),n.parallax?(t.backgroundRepeat="no-repeat",t.backgroundSize="cover",t.backgroundPosition="center"):(t.backgroundColor=n.color,t.backgroundBlendMode=n.blend,t.backgroundRepeat=n.repeat,t.backgroundSize=n.size,n.gradient&&(e&&(t.backgroundColor="initial"),g.default.isOn(n.gradientOverlaysImage)?t.backgroundImage="".concat(n.gradient,", url(").concat(e,")"):t.backgroundImage="url(".concat(e,"), ").concat(n.gradient)))}else t.backgroundColor=h.default.uploadImagePreview;return t}}},{key:"_getPreviewContent",value:function(e){if(g.default.hasValue(e)&&this._hasPreview())return"image"!==this._getDataType()||(0,c.default)(this,"props.isBackgroundType")?"video"===this._getDataType()?o.default.createElement(v.default,{className:"et-fb-settings-option-preview-content",loop:"loop",muted:"muted",autoPlay:"autoplay",height:190,style:{width:"100%",background:"rgb(51, 59, 68)"},src:(0,p.setArgs)({width:500,controls:0,fs:0,iv_load_policy:3,modestbranding:1,showinfo:0},e)}):void 0:o.default.createElement("img",{src:e})}},{key:"_renderPreview",value:function(e,t){if(!this._hasPreview())return!1;var n=this.props,r=n.readonly,a=n.hideAddButton,i=n.hideEditButton,l=n.hideRemoveButton,u=n.hideResetButton,s=g.default.hasValue(e),c=!r&&!a&&!s,d=!r&&!i&&s,f=!r&&!l&&s,p=!r&&!u&&s&&e!==t;return o.default.createElement(m.default,{className:"et-fb-settings-option-upload-type-".concat(this._getDataType()),addTitle:this.getAddTitle(),previewStyle:this._getPreviewStyle(e),showAddButton:c,showEditButton:d,showRemoveButton:f,showResetButton:p,onClickCanvas:this._onClick,onClickAddButton:this._onClick,onClickEditButton:this._onClick,onClickRemoveButton:this._onClickRemove,onClickResetButton:this._onClickReset},this._getPreviewContent(e))}},{key:"render",value:function(){var e=this._hasPreview(),t=(0,c.default)(this.props,"default",""),n=(0,c.default)(this.props,"value",t),r=(0,c.default)(this.props,"additional_attrs",{}),a={"et-fb-settings-option-inner":!0,"et-fb-settings-option-inner-upload":!0,"et-fb-settings-option-inner-upload--previewable":e},l={"et-fb-settings-option-input":!0,"et-fb-settings-option-upload":!0},u=(0,c.default)(this,"props.module.props.module.props"),s="background_image"===(0,c.default)(this,"props.name")&&(0,f.default)(ETBuilderBackend.modulesFeaturedImageBackground,(0,c.default)(u,"type"))&&g.default.isOn((0,c.default)(u,"attrs.featured_image"))&&"background"===(0,c.default)(u,"attrs.featured_placement");return this.props.className?l[this.props.className]=!0:(l["et-fb-main-setting"]=!0,l["regular-text"]=!0),(0,c.default)(this,"props.attachment_id")&&g.default.hasValue(n)&&(t=(0,c.default)(P,t,ETBuilderBackend.currentPage.thumbnailUrl),n=(0,c.default)(P,n,t)),s&&(n=ETBuilderBackend.currentPage.thumbnailUrl),o.default.createElement("div",{className:(0,i.default)(a)},this._renderPreview(n,t),o.default.createElement("input",_({className:(0,i.default)(l),type:"text",value:n,name:this.props.name,id:"et-fb-".concat(this.props.name),onChange:this._onChange},r)),o.default.createElement("button",{className:"et-fb-settings-option-upload-button",onClick:this._onClick},ETBuilderBackend.i18n.controls.upload.buttonText))}}])&&w(n.prototype,r),a&&w(n,a),y}(o.PureComponent);T.propTypes={choose_text:a.default.string,upload_button_text:a.default.string,embed:a.default.bool,attachment_id:a.default.bool,isBackgroundType:a.default.bool,hideAddButton:a.default.bool,hideEditButton:a.default.bool,hideRemoveButton:a.default.bool,hideResetButton:a.default.bool},T.defaultProps={choose_text:"",upload_button_text:"",embed:!0,attachment_id:!1,isBackgroundType:!1,hideAddButton:!1,hideEditButton:!1,hideRemoveButton:!1,hideResetButton:!1};var x=T;t.default=x}).call(this,n(5))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.preLoad=t.getMany=void 0;var r=f(n(17)),o=f(n(210)),a=f(n(1652)),i=f(n(395)),l=f(n(189)),u=f(n(1653)),s=f(n(961)),c=f(n(446)),d=f(n(960));function f(e){return e&&e.__esModule?e:{default:e}}var p={},h=(0,l.default)((function(t){var n=(0,o.default)(t,(0,r.default)(p));if(!(0,d.default)(n)){var i=function(t){return new Promise((function(n){return e.ajax({type:"POST",url:ETBuilderBackend.ajaxUrl,dataType:"json",data:{action:"et_fb_fetch_attachments",et_fb_fetch_attachments:ETBuilderBackend.nonces.fetchAttachments,ids:t},success:n})}))}(n);n.map((function(e){return p[e]=i.then((0,a.default)((function(t){var n=t.ID;return e===(0,c.default)(n)})))}))}return t.map((function(e){return p[e]}))}),(0,s.default)(c.default));t.getMany=h;var m=(0,l.default)(u.default,h);t.preLoad=m;var g=(0,l.default)(i.default,h,(function(e){return[e]}));t.default=g}).call(this,n(5))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=s(n(6)),i=s(n(157)),l=s(n(45)),u=s(n(58));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=h(l);function l(){return d(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"componentDidMount",value:function(){i.default.rebuild()}},{key:"render",value:function(){return o.default.createElement("button",{type:"button",className:"et-fb-settings-option-dynamic__button et-fb-settings-option-dynamic__button--".concat(this.props.type," ").concat(this.props.className),onClick:this.props.onClick,"data-tip":this.props.tooltip},o.default.createElement(u.default,{size:"14",icon:this.props.icon}))}}])&&f(t.prototype,n),r&&f(t,r),l}(o.PureComponent);v.propTypes={type:a.default.string.isRequired,icon:a.default.string.isRequired,tooltip:a.default.string,className:a.default.string,onClick:a.default.func},v.defaultProps={tooltip:"",className:"",onClick:l.default};var y=v;t.default=y},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=s(n(14)),a=s(n(15)),i=s(n(1678)),l=s(n(1477)),u=s(n(1682));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"createControl",value:function(t,n){return!(0,o.default)(t.composite_type)&&(0,r.createElement)(e._controlTypesMap[t.composite_type],(0,a.default)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({label:t.label,key:n.uniqueKey},n),t))}}],(n=null)&&f(t.prototype,n),i&&f(t,i),e}();p._controlTypesMap={default:l.default,tabbed:i.default,transforms:u.default};var h=p;t.default=h},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=v(n(6)),i=v(n(1)),l=v(n(9)),u=v(n(15)),s=v(n(45)),c=v(n(41)),d=v(n(14));n(1507);var f=n(3),p=v(n(58)),h=v(n(1456)),m=n(110),g=v(n(118));function v(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T="#C9D2DD",x="#e7eef5",j="#0287e0",D=50,L=function(e){var t="";switch(e){case"ew":t=o.default.createElement("path",{fill:g.default.white,d:"M12.29 6.29L9.85 3.85a.5.5 0 0 0-.85.36V6H5V4.21a.5.5 0 0 0-.85-.35L1.71 6.29a1 1 0 0 0 0 1.41l2.44 2.44A.5.5 0 0 0 5 9.79V8h4v1.79a.5.5 0 0 0 .85.35l2.44-2.44a1 1 0 0 0 0-1.41z",fillRule:"evenodd"});break;case"nesw":t=o.default.createElement("path",{fill:g.default.white,d:"M10 3H6.51a.51.51 0 0 0-.36.86l1.27 1.3-2.28 2.29-1.28-1.28a.51.51 0 0 0-.86.36V10a1 1 0 0 0 1 1h3.49a.51.51 0 0 0 .36-.86l-1.3-1.3 2.29-2.26 1.3 1.3a.51.51 0 0 0 .86-.36V4a1 1 0 0 0-1-1z",fillRule:"evenodd"});break;case"nwse":t=o.default.createElement("path",{fill:g.default.white,d:"M10.85 6.17a.51.51 0 0 0-.71 0L8.86 7.45 6.58 5.16l1.27-1.27A.51.51 0 0 0 7.49 3H4a1 1 0 0 0-1 1v3.52a.51.51 0 0 0 .86.36l1.3-1.3 2.29 2.28-1.3 1.3a.51.51 0 0 0 .36.86H10a1 1 0 0 0 1-1V6.53a.5.5 0 0 0-.15-.36z",fillRule:"evenodd"});break;default:t=o.default.createElement("path",{fill:g.default.white,d:"M9.79 9H8V5h1.79a.5.5 0 0 0 .35-.85L7.71 1.73a1 1 0 0 0-1.41 0L3.85 4.17a.5.5 0 0 0 .36.83H6v4H4.21a.5.5 0 0 0-.35.85l2.44 2.44a1 1 0 0 0 1.41 0l2.44-2.44A.5.5 0 0 0 9.79 9z",fillRule:"evenodd"})}return o.default.createElement("svg",{viewBox:"0 0 14 14",preserveAspectRatio:"xMidYMid meet",shapeRendering:"geometricPrecision"},t)},R=function(e){var t,n,r,a,i=(0,f.hasValue)(e.angle)?parseFloat(e.angle)*Math.PI/180:0;switch(e.type){case"rotate_z":n={x:(t={x:40,y:40}).x+1.5+7,y:t.y+1.5+7},r="m ".concat(n.x,",").concat(n.y," 0,0"),a="m ".concat(n.x,",").concat(n.y," 0,0");break;case"rotate_y":n={x:(t={x:42.4681,y:21.3538076}).x+1.5+7,y:t.y+1.5+7+t.y},r="m ".concat(n.x,",").concat(n.y," 0,-").concat(2*t.y),a="m ".concat(n.x,",").concat(n.y+t.y," 0,").concat(t.y);break;case"rotate_x":n={x:(t={x:21.3538076,y:42.4681}).x+1.5+7+t.x,y:t.y+1.5+7},r="m ".concat(n.x,",").concat(n.y," -").concat(2*t.x,",0"),a="m ".concat(n.x+t.x,",").concat(n.y," ").concat(t.x,",0")}var l={x:t.x*Math.cos(i)+n.x,y:t.y*Math.sin(i)+n.y};return o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:2*n.x,height:2*n.y},o.default.createElement("circle",{fill:T,cx:n.x,cy:n.y,r:3.5}),o.default.createElement("path",{fill:"none",stroke:T,strokeWidth:2,strokeDasharray:"".concat(4,",").concat(4),d:"m ".concat(n.x,",").concat(n.y," ").concat(l.x-n.x,",").concat(l.y-n.y)}),o.default.createElement("ellipse",{fill:"none",stroke:x,strokeWidth:3.5,cx:n.x,cy:n.y,rx:t.x,ry:t.y}),o.default.createElement("path",{fill:"none",stroke:T,strokeWidth:3,d:r}),o.default.createElement("path",{fill:"none",stroke:T,strokeWidth:3,d:a}),o.default.createElement("circle",{fill:j,cx:l.x,cy:l.y,r:7,"data-transform_type":e.type,onMouseDown:e.handleOnMouseDown,style:{cursor:"pointer"}}))};R.propTypes={type:a.default.string,angle:a.default.string,handleOnMouseDown:a.default.func},R.defaultProps={angle:"0",type:"rotate_x",handleOnMouseDown:s.default};var N=function(e){return o.default.createElement("div",{id:"et-fb-settings-transform-container",className:"et-fb-settings-transform-container",style:(0,u.default)({},e.style)},e.hideRuler?null:o.default.createElement("div",{className:"et-fb-settings-transform-hr"}),e.hideRuler?null:o.default.createElement("div",{className:"et-fb-settings-transform-vr"}),e.hideDotSquare?null:o.default.createElement("div",{className:"et-fb-settings-transform-square-dotted"}),e.children)};N.propTypes={hideRuler:a.default.bool,hideDotSquare:a.default.bool,children:a.default.node,style:a.default.object,onMouseLeave:a.default.func},N.defaultProps={hideRuler:!1,hideDotSquare:!1,children:o.default.createElement("span",null),style:{},onMouseLeave:s.default};var A=function(e){var t="".concat(e).split("_");return{type:t[0],axis:t[1],index:(0,i.default)({x:0,y:1,z:2},t[1],0)}},B=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(s,t);var n,r,a,u=C(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),P(E(t=u.call(this,e)),"state",{dragHandle:"",values:[],scaleLinked:!0,skewLinked:!0,translateLinked:!0,controllerCenter:{x:0,y:0},containerDimensions:{width:170,height:170}}),t._handleMouseMove=t._handleMouseMove.bind(E(t)),t._handleMouseUp=t._handleMouseUp.bind(E(t)),t._handleOnMouseDown=t._handleOnMouseDown.bind(E(t)),t._handleOriginClick=t._handleOriginClick.bind(E(t)),t._setOption=t._setOption.bind(E(t)),t._handleLinkedClick=t._handleLinkedClick.bind(E(t)),t._handleWrapperEnter=t._handleWrapperEnter.bind(E(t)),t._handleWrapperLeave=t._handleWrapperLeave.bind(E(t)),t}return n=s,(r=[{key:"shouldComponentUpdate",value:function(e){return!(0,c.default)(this.props,e)}},{key:"UNSAFE_componentWillMount",value:function(){this.setState({values:this._getValues(),scaleLinked:this.props.scaleLinked,skewLinked:this.props.skewLinked,translateLinked:this.props.translateLinked})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(0,f.hasValue)(e.value)&&e.value!==e.default?this.state.values.join("|")!==e.value&&this.setState({values:"".concat(e.value).split("|")}):this.setState({values:"".concat(e.default).split("|")})}},{key:"componentDidMount",value:function(){(0,f.topWindow)().addEventListener("mousemove",this._handleMouseMove),(0,f.topWindow)().addEventListener("mouseup",this._handleMouseUp)}},{key:"componentWillUnmount",value:function(){(0,f.topWindow)().removeEventListener("mousemove",this._handleMouseMove),(0,f.topWindow)().removeEventListener("mouseup",this._handleMouseUp)}},{key:"_handleOnMouseDown",value:function(t){if(!(0,f.hasValue)(this.props.readonly)){var n=t.currentTarget.dataset.transform_type;if(this.setState({dragHandle:n}),"rotate"===A(n).type){var r=e(t.target.parentElement),o=r.position();this.setState({controllerCenter:{x:o.left+r.width()/2,y:o.top+r.height()/2}})}}}},{key:"_handleMouseMove",value:function(e){if(!(0,f.hasValue)(this.props.readonly)&&(0,f.hasValue)(this.state.dragHandle)&&(0!==e.movementX||0!==e.movementY))switch(A(this.state.dragHandle).type){case"scale":var t=this.props.scaleLinked,n=-1*e.movementY,r=e.movementX,o="".concat(100*n/D+parseFloat(this._getOption("scale_y")),"%"),a="".concat(100*r/D+parseFloat(this._getOption("scale_x")),"%");if("scale_y"===this.state.dragHandle)0!==e.movementY&&this._setOption("scale_y",o);else if("scale_x"===this.state.dragHandle)0!==e.movementX&&this._setOption("scale_x",a);else if(t){var i="".concat(100*(r+n)/D+parseFloat(this._getOption("scale_x")),"%");this._setOption("scale_x",i)}else this._setOption("scale_y",o),this._setOption("scale_x",a);break;case"skew":var l=180,u=(2*e.movementX+this.state.containerDimensions.width)*l/this.state.containerDimensions.width-l,s=(2*e.movementY*-1+this.state.containerDimensions.height)*l/this.state.containerDimensions.height-l,c="".concat(Math.round(s)+parseFloat(this._getOption("skew_y")),"deg"),d="".concat(Math.round(u)+parseFloat(this._getOption("skew_x")),"deg");"skew_y"===this.state.dragHandle?0!==e.movementY&&this._setOption("skew_y",c):"skew_x"===this.state.dragHandle&&0!==e.movementX&&this._setOption("skew_x",d);break;case"translate":var p=(0,m.getUnit)(this._getOption("translate_y")),h=(0,m.getUnit)(this._getOption("translate_x")),g=300,v=(2*e.movementX+this.state.containerDimensions.width)*g/this.state.containerDimensions.width-g,y=(2*e.movementY+this.state.containerDimensions.height)*g/this.state.containerDimensions.height-g,b="".concat(Math.round(y)+parseFloat(this._getOption("translate_y"))).concat(p),_="".concat(Math.round(v)+parseFloat(this._getOption("translate_x"))).concat(h);0!==e.movementY&&this._setOption("translate_y",b),0!==e.movementX&&this._setOption("translate_x",_);break;case"origin":var w=(0,m.getUnit)(this._getOption("origin_y")),k=(0,m.getUnit)(this._getOption("origin_x")),O=e.movementY,C=e.movementX;"%"===w&&(O*=100/D),"%"===k&&(C*=100/D);var S=O+parseFloat(this._getOption("origin_y"))+w,E=C+parseFloat(this._getOption("origin_x"))+k;0!==e.movementY&&this._setOption("origin_y",S),0!==e.movementX&&this._setOption("origin_x",E);break;case"rotate":var M=this.state.controllerCenter,P=Math.atan2(e.pageY-M.y,e.pageX-M.x)*(180/Math.PI);P<0&&(P+=360),360===P&&(P=0);var T="".concat(P.toFixed(0),"deg");this._setOption(this.state.dragHandle,T)}}},{key:"_handleMouseUp",value:function(e){this.setState({dragHandle:!1})}},{key:"_handleLinkedClick",value:function(e){var t=e.currentTarget.dataset.linked_type;(0,l.default)(["scale","skew","translate"],t)&&this.props.onClickLink(t),e.preventDefault()}},{key:"_handleOriginClick",value:function(e){if(e.preventDefault(),e.stopPropagation(),!(0,f.hasValue)(this.props.readonly)){var t=e.currentTarget.dataset.origin_type,n={1:{x:0,y:0},2:{x:50,y:0},3:{x:100,y:0},4:{x:0,y:50},5:{x:50,y:50},6:{x:100,y:50},7:{x:0,y:100},8:{x:50,y:100},9:{x:100,y:100}};(0,f.hasValue)((0,i.default)(n,t,!1))&&(this._setOption("origin_x","".concat(n[t].x,"%")),this._setOption("origin_y","".concat(n[t].y,"%")))}}},{key:"_handleWrapperEnter",value:function(){this.current=e('[data-address="'.concat(this.props.module.props.address,'"]'))[0],(0,d.default)(this.current)||(this.current.style.transition="transform 0s ease",this.current.firstChild instanceof Element&&(this.current.firstChild.style.transition="transform 0s ease"))}},{key:"_handleWrapperLeave",value:function(){(0,d.default)(this.current)||(this.current.style.removeProperty("transition"),0===this.current.style.length&&this.current.removeAttribute("style"),this.current.firstChild instanceof Element&&(this.current.firstChild.style.removeProperty("transition"),0===this.current.firstChild.style.length&&this.current.firstChild.removeAttribute("style")))}},{key:"_setOption",value:function(e,t,n){var r=A(e),o=this.state.values[r.index];if(o!==t){var a=this._sanitization(t,e),i=a.value-parseFloat(o),u=this.state.values;if(u[r.index]=a.value+a.unit,((0,f.hasValue)(n)||(0,l.default)(["skew","scale"],r.type))&&(this.props.scaleLinked&&"scale"===r.type||this.props.skewLinked&&"skew"===r.type||this.props.translateLinked&&"translate"===r.type)){var s="x"===r.axis?"".concat(r.type,"_y"):"".concat(r.type,"_x"),c=this._getOption(s),d=c;0!==i&&(d=parseFloat(c)+i+a.unit);var p=this._sanitization(d,s);u["x"===r.axis?1:0]=p.value+p.unit}var h=u.join("|"),m=h===this.props.default;this.setState({values:u}),this.props._onChange(this.props.name,h,n,null,m)}}},{key:"_getValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t="".concat(e.default).split("|"),n=t;return(0,f.hasValue)(e.value)&&(n="".concat(e.value).split("|")),t.forEach((function(e,t){(0,f.hasValue)(n[t])||(n[t]=e)})),n}},{key:"_getOption",value:function(e){return this.state.values[A(e).index]}},{key:"_getOptionDefault",value:function(e){return"".concat(this.props.default).split("|")[A(e).index]}},{key:"_sanitization",value:function(e,t){var n=this._getOptionDefault(t),r={value:parseFloat(n),unit:this.props.default_unit};if(!(0,f.hasValue)(e))return r;var o=isNaN(parseFloat(e))?parseFloat(n):parseFloat(e);switch(r.value=o,t){case"skew_x":case"skew_y":var a=this._getOption(t),i=isNaN(parseFloat(a))?o:parseFloat(a),u=0===Math.sign(i)?1:Math.sign(i),s=Math.abs(o);if(90===s){var c=Math.abs(i);c<90?r.value=91*u:c>=90&&(r.value=89*u)}s>180&&(r.value=180*u);break;case"rotate_x":case"rotate_y":case"rotate_z":r.value=o%360;break;default:r.unit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px",n=["em","rem","px","%","vw","vh"],r=(0,m.getUnit)(e,t);return(0,l.default)(n,r)?r:t}(e,this.props.default_unit)}return r}},{key:"_renderField",value:function(e){var t=A(e),n=!1;"origin"===t.type&&(n=t.axis);var r={name:e,type:"range",value:this._getOption(e),default:this._getOptionDefault(e),default_unit:this.props.default_unit,range_settings:this.props.range_settings,key:"".concat(this.props.name,"-").concat(e),_onChange:this._setOption,visible:!0,previewMode:"desktop",readonly:this.props.readonly,isTransformOrigin:n,allowed_values:!1!==n?["top","left","right","bottom","center"]:[]};return(0,o.createElement)(h.default.getControl("range"),r)}},{key:"render",value:function(){var e=this,t=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{minWidth:"25px",width:"25px",height:"25px",margin:"0",fill:e?g.default.info:g.default.default}},n=(0,f.hasValue)(this.props.transform_type)?this.props.transform_type:"".concat(e.props.name).replace(/(transform_|__hover|_tablet|_phone)/g,""),r={onMouseEnter:this._handleWrapperEnter,onMouseLeave:this._handleWrapperLeave};switch(n){case"scale":var a=this._getOption("scale_x"),i=this._getOption("scale_y"),l=this.props.scaleLinked?{display:"none"}:{},u={};return u=a?w(w({},u),{},{width:"".concat(D*parseFloat(a)/100,"px")}):u,u=i?w(w({},u),{},{height:"".concat(D*parseFloat(i)/100,"px")}):u,o.default.createElement("div",b({className:"et-fb-settings-transform-wrapper"},r),o.default.createElement(N,{onMouseLeave:this._handleMouseUp},o.default.createElement("div",{className:"et-fb-settings-transform-square",style:u},o.default.createElement("div",{className:"et-fb-settings-transform-square-half"},o.default.createElement("div",{className:"et-fb-settings-transform-controller","data-transform_type":"scale_xy",onMouseDown:this._handleOnMouseDown,style:{margin:"-8px",cursor:"nesw-resize"}},L("nesw")),o.default.createElement("div",{className:"et-fb-settings-transform-controller","data-transform_type":"scale_y",onMouseDown:this._handleOnMouseDown,style:w(w({},l),{},{marginTop:"-9px",marginLeft:"-2px",cursor:"ns-resize"})},L("ns")),o.default.createElement("div",null)),o.default.createElement("div",{className:"et-fb-settings-transform-square-half"},o.default.createElement("div",{className:"et-fb-settings-transform-controller","data-transform_type":"scale_x",onMouseDown:this._handleOnMouseDown,style:w(w({},l),{},{marginTop:"-7px",marginRight:"-9px",cursor:"ew-resize"})},L("ew"))))),o.default.createElement("div",{className:"et-fb-settings-transform-vertical-range"},this._renderField("scale_y")),o.default.createElement("div",{className:"et-fb-settings-transform-horizontal-range"},this._renderField("scale_x")),o.default.createElement("button",{disabled:(0,f.hasValue)(this.props.readonly),"data-linked_type":"scale",onClick:this._handleLinkedClick,className:"et-fb-settings-transform-linked"},o.default.createElement(p.default,{icon:this.props.scaleLinked?"linked":"unlinked",style:t(this.props.scaleLinked)})));case"skew":var s=this._getOption("skew_x"),c=this._getOption("skew_y"),d="";d+=s?"skewX(".concat(s,")"):d;var h={transform:d+=c?" skewY(".concat(c,")"):d},v=(parseFloat(s)+180)*this.state.containerDimensions.width/360,y=(parseFloat(c)+180)*this.state.containerDimensions.height/360,_=v-this.state.containerDimensions.width/2,k=y-this.state.containerDimensions.height/2;return o.default.createElement("div",b({className:"et-fb-settings-transform-wrapper"},r),o.default.createElement(N,{onMouseLeave:this._handleMouseUp},o.default.createElement("div",{className:"et-fb-settings-transform-square",style:h}),o.default.createElement("div",{className:"et-fb-settings-transform-square-transparent"},o.default.createElement("div",{className:"et-fb-settings-transform-square-half-skew"},o.default.createElement("div",{className:"et-fb-settings-transform-controller","data-transform_type":"skew_y",onMouseDown:this._handleOnMouseDown,style:{marginLeft:"-20px",marginBottom:"-6px",cursor:"ns-resize",transform:"translateY(".concat(-1*k,"px)")}},L("ns")),o.default.createElement("div",null)),o.default.createElement("div",{className:"et-fb-settings-transform-square-half-skew",style:{justifyContent:"center",alignItems:"flex-end"}},o.default.createElement("div",{className:"et-fb-settings-transform-controller","data-transform_type":"skew_x",onMouseDown:this._handleOnMouseDown,style:{marginBottom:"-20px",cursor:"ew-resize",transform:"translateX(".concat(_,"px)")}},L("ew"))))),o.default.createElement("div",{className:"et-fb-settings-transform-vertical-range"},this._renderField("skew_y")),o.default.createElement("div",{className:"et-fb-settings-transform-horizontal-range"},this._renderField("skew_x")),o.default.createElement("button",{disabled:(0,f.hasValue)(this.props.readonly),"data-linked_type":"skew",onClick:this._handleLinkedClick,className:"et-fb-settings-transform-linked"},o.default.createElement(p.default,{icon:this.props.skewLinked?"linked":"unlinked",style:t(this.props.skewLinked)})));case"translate":var O=300,C=180,S=parseFloat(this._getOption("translate_x")),E=parseFloat(this._getOption("translate_y")),M=(E+O)*C/600-90,P="";P+=S?"translateX(".concat((S+O)*C/600-90,"px)"):"";var T={transform:P+=E?" translateY(".concat(M,"px)"):""};return o.default.createElement("div",b({className:"et-fb-settings-transform-wrapper"},r),o.default.createElement(N,{onMouseLeave:this._handleMouseUp},o.default.createElement("option",{className:"et-fb-settings-transform-square-translate",style:T,"data-transform_type":"translate",onMouseDown:this._handleOnMouseDown})),o.default.createElement("div",{className:"et-fb-settings-transform-vertical-range et-fb-settings-transform-vertical-range-inverted"},this._renderField("translate_y")),o.default.createElement("div",{className:"et-fb-settings-transform-horizontal-range"},this._renderField("translate_x")),o.default.createElement("button",{disabled:(0,f.hasValue)(this.props.readonly),"data-linked_type":"translate",onClick:this._handleLinkedClick,className:"et-fb-settings-transform-linked"},o.default.createElement(p.default,{icon:this.props.translateLinked?"linked":"unlinked",style:t(this.props.translateLinked)})));case"origin":var x=this._getOption("origin_x"),j=this._getOption("origin_y"),A="";"%"===(0,m.getUnit)(x,"%")&&(x="".concat(D/100*parseFloat(x)-25,"px")),"%"===(0,m.getUnit)(j,"%")&&(j="".concat(D/100*parseFloat(j)-25,"px")),A+=x?"translateX(".concat(x,")"):A;var B={transform:A+=j?" translateY(".concat(j,")"):A};return o.default.createElement("div",b({className:"et-fb-settings-transform-wrapper"},r),o.default.createElement(N,{hideDotSquare:!0,onMouseLeave:this._handleMouseUp},o.default.createElement("div",{className:"et-fb-settings-transform-square-origin"}),o.default.createElement("div",{className:"et-fb-settings-transform-square-transparent-origin",style:{width:"52.5px",height:"52.5px"}},o.default.createElement("div",{className:"et-fb-settings-transform-square-half",style:{flexDirection:"row",alignItems:"flex-start"}},o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"1",onMouseDown:this._handleOriginClick}),o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"2",onMouseDown:this._handleOriginClick}),o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"3",onMouseDown:this._handleOriginClick})),o.default.createElement("div",{className:"et-fb-settings-transform-square-half",style:{flexDirection:"row",alignItems:"center"}},o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"4",onMouseDown:this._handleOriginClick}),o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"5",onMouseDown:this._handleOriginClick}),o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"6",onMouseDown:this._handleOriginClick})),o.default.createElement("div",{className:"et-fb-settings-transform-square-half",style:{flexDirection:"row",alignItems:"flex-end"}},o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"7",onMouseDown:this._handleOriginClick}),o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"8",onMouseDown:this._handleOriginClick}),o.default.createElement("div",{className:"et-fb-settings-transform-origin-controller","data-origin_type":"9",onMouseDown:this._handleOriginClick}))),o.default.createElement("div",{className:"et-fb-settings-transform-origin-dot",style:B,"data-transform_type":"origin",onMouseDown:this._handleOnMouseDown})),o.default.createElement("div",{className:"et-fb-settings-transform-vertical-range et-fb-settings-transform-vertical-range-inverted"},this._renderField("origin_y")),o.default.createElement("div",{className:"et-fb-settings-transform-horizontal-range"},this._renderField("origin_x")));case"rotate":var F=this._getOption("rotate_x"),I=this._getOption("rotate_y"),W=this._getOption("rotate_z");return o.default.createElement("div",r,o.default.createElement(N,{style:{justifyContent:"space-around",width:"100%"},hideDotSquare:!0,hideRuler:!0,onMouseLeave:this._handleMouseUp},o.default.createElement(R,{type:"rotate_z",angle:W,handleOnMouseDown:this._handleOnMouseDown}),o.default.createElement(R,{type:"rotate_x",angle:F,handleOnMouseDown:this._handleOnMouseDown}),o.default.createElement(R,{type:"rotate_y",angle:I,handleOnMouseDown:this._handleOnMouseDown})),o.default.createElement("div",{className:"et-fb-settings-transform-rotate"},o.default.createElement("div",{className:"et-fb-settings-transform-rotate-range"},this._renderField("rotate_z")),o.default.createElement("div",{className:"et-fb-settings-transform-rotate-range"},this._renderField("rotate_x")),o.default.createElement("div",{className:"et-fb-settings-transform-rotate-range"},this._renderField("rotate_y"))));default:return o.default.createElement("div",null,"".concat(n," is not a registered Transform type"))}}}])&&k(n.prototype,r),a&&k(n,a),s}(o.default.Component);B.propTypes={name:a.default.string,default:a.default.string,default_unit:a.default.string,transform_type:a.default.string,range_settings:a.default.object,value:a.default.string,uniqueKey:a.default.string,_onChange:a.default.func,onClickLink:a.default.func,scaleLinked:a.default.bool,skewLinked:a.default.bool,translateLinked:a.default.bool,readonly:a.default.bool},B.defaultProps={name:"transform_scale",default:"100%|100%",default_unit:"%",transform_type:"scale",range_settings:{min:-100,max:300,step:1},value:"100%|100%",uniqueKey:"",_onChange:s.default,onClickLink:s.default,scaleLinked:!0,skewLinked:!0,translateLinked:!0,readonly:!1};var F=B;t.default=F}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModule=t.getTextAlignIconName=t.getAlignIconName=void 0;var r,o=(r=n(1))&&r.__esModule?r:{default:r};t.getAlignIconName=function(e){switch(e){case"force_left":case"left":return"align-left";case"center":return"align-center";case"right":return"align-right";default:return e}};t.getTextAlignIconName=function(e){switch(e){case"justified":return"text-justify";case"force_left":case"left":return"text-left";case"center":return"text-center";case"right":return"text-right";default:return e}};t.getModule=function(e){return(0,o.default)(e,"props.module.props.module",!1)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ETBuilderControlIconPicker=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=c(n(6)),i=c(n(35)),l=c(n(41)),u=c(n(58)),s=c(n(118));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1691);var _=function(e,t){return e===t?"":e},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,r,a=m(c);function c(){var e;f(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(v(e=a.call.apply(a,[this].concat(n))),"onClick",(function(t){return e.props._onChange(e.props.name,_(t,e.props.value))})),e}return t=c,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.name!==e.name||this.props.value!==e.value||this.props.size!==e.size||this.props.className!==e.className||!(0,l.default)(this.props.options,e.options)}},{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:"et-fb-settings-option-icon-picker ".concat(this.props.className)},(0,i.default)(this.props.options,(function(t,n){var r=n===e.props.value?s.default.uiActiveIcon:s.default.uiInactiveIcon;return o.default.createElement("span",{className:"et-fb-settings-option-icon-picker-button",key:n,onClick:e.onClick.bind(null,n)},o.default.createElement(u.default,{size:e.props.size,color:r,icon:t}))})))}}])&&p(t.prototype,n),r&&p(t,r),c}(o.Component);t.ETBuilderControlIconPicker=w,b(w,"propTypes",{name:a.default.string.isRequired,value:a.default.oneOfType([a.default.string,a.default.number]),size:a.default.number,options:a.default.object.isRequired,className:a.default.string,_onChange:a.default.func.isRequired}),b(w,"defaultProps",{value:"",size:12,className:""})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitDistance=t.inputWidth=t.counterWidth=void 0;t.counterWidth=20;t.inputWidth=60;t.splitDistance=5},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ETCoreDropdown",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"ETCoreMenu",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ETCoreMenuItem",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ETCoreMenuDivider",{enumerable:!0,get:function(){return i.default}}),t.default=void 0;var r=l(n(1716)),o=l(n(1722)),a=l(n(1724)),i=l(n(1726));function l(e){return e&&e.__esModule?e:{default:e}}var u=r.default;t.default=u},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ETCorePopup=t.ANIMATION_POPUP=t.ANIMATION_FOLD=void 0;var o,a=f(n(0)),i=f(n(6)),l=f(n(45)),u=n(1717),s=f(n(1718)),c=f(n(1719)),d=n(509);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1720);var k="popup";t.ANIMATION_POPUP=k;var O="fold";t.ANIMATION_FOLD=O;var C=(w(o={},O,{points:["tl","bl"]}),w(o,k,{points:["tl","tl"],offset:["50%","50%"]}),o),S=function(e,t,n){var r=ReactDOM.unstable_batchedUpdates?function(e){ReactDOM.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,r),{remove:function(){e.removeEventListener(t,r)}}},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,r,o=v(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),w(b(t=o.call(this,e)),"handleDocumentClick",(function(e){var n=e.target;t.props.ignoreDocumentClicks||(0,d.doesDomElementContain)(t.props.anchor.current,n)||(0,d.doesDomElementContain)(t.popupRef.current,n)||t.props.onClose()})),t.handlerOutsideClick=null,t.handlerOutsideTouch=null,t.popupRef=a.default.createRef(),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.getDocument();this.handlerOutsideClick=S(e,"mousedown",this.handleDocumentClick),this.handlerOutsideTouch=S(e,"touchstart",this.handleDocumentClick),this.alignPopup()}},{key:"componentWillUnmount",value:function(){this.handlerOutsideClick.remove(),this.handlerOutsideTouch.remove()}},{key:"componentDidUpdate",value:function(e){e.visible!==this.props.visible&&this.alignPopup()}},{key:"alignPopup",value:function(){var e=this.props,t=e.animation,n=e.anchor,r=e.offsetH,o=e.offsetV;if(e.visible){var a=h(h({},C[t]),{},{targetOffset:[-r,-o]});(0,u.alignElement)(this.popupRef.current,n.current,a)}}},{key:"renderPopup",value:function(){var e=this.props,t=e.anchor,n=e.style,r=e.onMouseEnter,o=e.onMouseLeave,i=e.children,l=t.current?t.current.offsetWidth:0;return a.default.createElement("div",{className:"et-core-popup__wrapper",ref:this.popupRef,onMouseEnter:r,onMouseLeave:o,style:h({width:l},n)},i)}},{key:"render",value:function(){var e=this.props,t=e.animation,n=e.animationEnabled;if(!e.visible)return null;var r=this.renderPopup();return t===k?a.default.createElement(s.default,{enabled:n},r):a.default.createElement(c.default,{enabled:n},r)}}])&&m(t.prototype,n),r&&m(t,r),i}(a.default.PureComponent);t.ETCorePopup=E,w(E,"propTypes",{anchor:i.default.shape({current:d.validateRefType}),animation:i.default.oneOf([k,O]),animationEnabled:i.default.bool,getDocument:i.default.func,ignoreDocumentClicks:i.default.bool,offsetH:i.default.number,offsetV:i.default.number,onClose:i.default.func,onMouseEnter:i.default.func,onMouseLeave:i.default.func,style:i.default.object,visible:i.default.bool}),w(E,"defaultProps",{animation:k,animationEnabled:!0,getDocument:function(){return window.document},ignoreDocumentClicks:!1,offsetH:0,offsetV:0,onClose:l.default,onMouseEnter:l.default,onMouseLeave:l.default,style:{},visible:!0});var M=E;t.default=M},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=s(n(6)),i=s(n(15)),l=s(n(45)),u=["singleClick","doubleClick","children"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,e);var t,n,r,a=m(l);function l(){var e;f(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(v(e=a.call.apply(a,[this].concat(n))),"lastEvent",0),b(v(e),"handleClick",(function(t){var n=t.timeStamp-e.lastEvent;e.lastEvent=t.timeStamp,t.persist(),n<300?e.props.doubleClick(t):e.props.singleClick(t)})),e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=(e.singleClick,e.doubleClick,e.children),n=d(e,u),r=(0,i.default)(n,{onClick:this.handleClick});return o.default.cloneElement(t,r)}}])&&p(t.prototype,n),r&&p(t,r),l}(o.PureComponent);b(_,"displayName","WithDoubleClick(".concat(_.displayName||_.name||"Component",")")),b(_,"propTypes",{singleClick:a.default.func.isRequired,doubleClick:a.default.func,children:a.default.element.isRequired}),b(_,"defaultProps",{doubleClick:l.default}),b(_,"defaultTypes",void 0);var w=_;t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"withOneRender",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"withPortability",{enumerable:!0,get:function(){return o.default}});var r=a(n(975)),o=a(n(1750));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(0),a=n(89),i=u(n(1)),l=u(n(27));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h,m,g,v=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,t);var n,r,o,u=d(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e)).state={isCompleted:!1},t}return n=f,(r=[{key:"componentDidUpdate",value:function(e,t){var n=this;!t.isCompleted&&this.state.isCompleted&&setTimeout((function(){l.default.togglePortabilityProgressBar(n.props.name,!1)}),1e3),100!==e.progress&&100===this.props.progress&&setTimeout((function(){n.setState({isCompleted:!0})}),1e3)}},{key:"render",value:function(){var t=this.props,n=t.progress,r=t.time_remaining;if(t.renderStart>n)return!1;var o={width:(0,a.spring)(n,{stiffness:300,damping:30})},l=(0,i.default)(this.props,"name",""),u=(0,i.default)(e.appWindow(),"etCore.portability.text.".concat(l,"ing"),"");return this.state.isCompleted?React.createElement("span",{className:"et-fb-tooltip-modal--loader et-core-loader et-core-loader-success"}):React.createElement("div",{className:"et-fb-tooltip-modal--progress"},React.createElement("div",{className:"et-fb-tooltip-modal--progress-bar"},React.createElement(a.Motion,{defaultStyle:{width:0,opacity:100},style:o},(function(e){return React.createElement("div",{className:"et-fb-tooltip-modal--progress-chart",style:{width:"".concat(e.width,"%")}},React.createElement("div",{className:"et-fb-tooltip-modal--progress-label"},parseInt(e.width),"%"))}))),React.createElement("div",{className:"et-fb-tooltip-modal--time-estimation"},r>0&&u.replace("<span>1</span>",r)))}}])&&s(n.prototype,r),o&&s(n,o),f}(o.Component);g={name:"",progress:0,time_remaining:1,renderStart:1},(m="defaultProps")in(h=v)?Object.defineProperty(h,m,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[m]=g;var y=v;t.default=y}).call(this,n(3))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),i=E(n(6)),l=E(n(14)),u=E(n(35)),s=E(n(398)),c=E(n(147)),d=E(n(1)),f=E(n(30)),p=E(n(49)),h=E(n(10)),m=E(n(1467)),g=E(n(1546)),v=E(n(1547)),y=E(n(27)),b=E(n(29)),_=E(n(8)),w=E(n(24)),k=E(n(376)),O=E(n(1566)),C=E(n(370)),S=E(n(3));function E(e){return e&&e.__esModule?e:{default:e}}function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=!1,I=function(e){var t;_.default.getModuleItemDragEndWaiting()&&("function"!=typeof Event?(t=document.createEvent("Event")).initEvent("dragend",!0,!0):t=new Event("dragend"),S.default.appWindow().dispatchEvent(t))},W=function(e){F=!0},V=function(e){clearTimeout(o),o=setTimeout((function(){var e;!F&&(0,f.default)(Event)&&("function"!=typeof Event?(e=document.createEvent("Event")).initEvent("dragend",!0,!0):e=new Event("dragend"),S.default.appWindow().dispatchEvent(e));F=!1}),150)},H={module:i.default.object,_v:w.default._v,setHoveredElement:i.default.oneOfType([i.default.func,i.default.bool]),disableDuplicate:i.default.bool,disableDelete:i.default.bool,onToggleRightMenu:i.default.oneOfType([i.default.func,i.default.bool]),isGlobalPresetsMode:i.default.bool},G=S.default.condition("is_layout_block"),U=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(f,t);var n,r,o,i=L(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),B(N(t=i.call(this,e)),"moveItem",(function(e,n){var r=t.props.module.props.content,o=r.filter((function(t){return t._i===e}))[0],a=r.filter((function(e){return e._i===n}))[0],i=o._order;o._order=a._order,a._order=i,r.sort(t.compareItems),r=(0,u.default)((0,c.default)(r),(function(e,t){var n=e.address.split(".");return(n=(0,s.default)(n)).push(t),e.address=n.join("."),e})),y.default.moduleContentChange(t.props.module,r,!1,!0)})),B(N(t),"_onMouseEnterItem",(function(e){var n=t.props.setHoveredElement;n&&n("child_item",e.type,k.default.getHelper("child_item").preparePayload(e))})),B(N(t),"_onMouseLeaveItem",(function(e){var n=t.props.setHoveredElement;n&&n(!1,e.type)})),B(N(t),"_getItemTitleAttribute",(function(e){if("content"===e.child_title_var&&(0,d.default)(e,"content"))return{value:(0,d.default)(e,"content"),attribute:"content"};for(var t=[[(0,d.default)(e.attrs,e.child_title_var),e.child_title_var],[(0,d.default)(e.attrs,e.child_title_fallback_var),e.child_title_fallback_var],[(0,d.default)(e,"advanced_setting_title_text",ETBuilderBackend.i18n.modules.items.newItemDefaultText),"advanced_setting_title_text"],[(0,d.default)(e.attrs,"title"),"title"]],n=0;n<t.length;n++)if(t[n][0])return{value:t[n][0].trim(),attribute:t[n][1]};return{value:"",attribute:"title"}})),t.gutenbergDragStartEventListeners=G?(0,d.default)(S.default.topWindow(),"ETSavedGutenbergEventListeners.document.dragstart",[]):[],t}return n=f,(r=[{key:"componentDidMount",value:function(){G&&0<this.gutenbergDragStartEventListeners.length&&(0,h.default)(this.gutenbergDragStartEventListeners,(function(e){S.default.topDocument().removeEventListener("dragstart",e)})),S.default.appWindow().addEventListener("dragstart",I),S.default.appWindow().addEventListener("dragend",W),S.default.appWindow().addEventListener("drop",V)}},{key:"componentWillUnmount",value:function(){S.default.appWindow().removeEventListener("dragstart",I),S.default.appWindow().removeEventListener("dragend",W),S.default.appWindow().removeEventListener("drop",V),G&&0<this.gutenbergDragStartEventListeners.length&&(0,h.default)(this.gutenbergDragStartEventListeners,(function(e){S.default.topDocument().addEventListener("dragstart",e)}))}},{key:"compareItems",value:function(e,t){return e._order-t._order}},{key:"_renderModuleItems",value:function(){var t=this,n=a.default.createElement("ul",{className:"et-fb-settings-module-items"},(0,u.default)(this.props.module.props.content,(function(n,r){if(!(0,l.default)(n)){var o=x({},n);o.attrs=b.default.getPrefilledAttributes(o);var i=t._getItemTitleAttribute(o),u=a.default.createElement(C.default,null,a.default.createElement(O.default,{attributes:o.attrs,attribute:i.attribute,value:i.value},(function(t,n){return n?e(e.parseHTML(t)).text():t}))),s=a.default.createElement(g.default,P({key:r,index:r,id:r,title:u,disableDuplicate:t.props.disableDuplicate,disableDelete:t.props.disableDelete,_onMouseEnterItem:t._onMouseEnterItem,_onMouseLeaveItem:t._onMouseLeaveItem,onToggleRightMenu:t.props.onToggleRightMenu},o));return a.default.createElement(v.default,{key:o._i,moveItem:t.moveItem.bind(t),id:o._i},s)}})));return a.default.createElement(m.default,null,n)}},{key:"_renderItemDefaults",value:function(){var e=this.props.module.props.child_slug,t=x({},this.props.module.props.content[0]),n=ETBuilderBackend.i18n,r=(0,p.default)(n.modules,"".concat(e,".name"))?"".concat((0,d.default)(n.modules,"".concat(e,".name"))," "):"",o="".concat(r).concat(n.rightClickMenuItems.item," ").concat(n.modals.globalPresets.defaults);return t.attrs=b.default.getPrefilledAttributes(t),a.default.createElement("ul",{className:"et-fb-settings-module-items"},a.default.createElement(g.default,P({key:0,index:0,id:0,title:o,_onMouseEnterItem:this._onMouseEnterItem,_onMouseLeaveItem:this._onMouseLeaveItem,onToggleRightMenu:this.props.onToggleRightMenu},t,{isGlobalPresetsMode:!0})))}},{key:"render",value:function(){return this.props.isGlobalPresetsMode?this._renderItemDefaults():this._renderModuleItems()}}])&&j(n.prototype,r),o&&j(n,o),f}(a.Component);U.propTypes=H,U.defaultProps={module:{},_v:0,setHoveredElement:!1,disableDuplicate:!1,disableDelete:!1,onToggleRightMenu:!1,isGlobalPresetsMode:!1};var z=U;t.default=z}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(1523)),a=u(n(1526)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1461)),l=u(n(1530));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e);var r=(0,o.default)(a.default);this.context=n,this.store=r,this.monitor=new l.default(r),this.registry=this.monitor.registry,this.backend=t(this),r.subscribe(this.handleRefCountChange.bind(this))}return r(e,[{key:"handleRefCountChange",value:function(){var e=this.store.getState().refCount>0;e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1)}},{key:"getContext",value:function(){return this.context}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch;return Object.keys(i).filter((function(e){return"function"==typeof i[e]})).reduce((function(n,r){var o,a=i[r];return n[r]=(o=a,function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=o.apply(e,r);void 0!==i&&t(i)}),n}),{})}}]),e}();t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.ActionTypes=void 0,t.default=function e(t,n,a){var l;"function"==typeof n&&void 0===a&&(a=n,n=void 0);if(void 0!==a){if("function"!=typeof a)throw new Error("Expected the enhancer to be a function.");return a(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var u=t,s=n,c=[],d=c,f=!1;function p(){d===c&&(d=c.slice())}function h(){return s}function m(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return p(),d.push(e),function(){if(t){t=!1,p();var n=d.indexOf(e);d.splice(n,1)}}}function g(e){if(!(0,r.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,s=u(s,e)}finally{f=!1}for(var t=c=d,n=0;n<t.length;n++){(0,t[n])()}return e}return g({type:i.INIT}),(l={dispatch:g,subscribe:m,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,g({type:i.INIT})}})[o.default]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[o.default]=function(){return this},e},l};var r=a(n(119)),o=a(n(1524));function a(e){return e&&e.__esModule?e:{default:e}}var i=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";n.r(t),function(e,r){var o,a=n(1525);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var i=Object(a.a)(o);t.default=i}.call(this,n(128),n(995)(e))},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return{dirtyHandlerIds:(0,i.default)(e.dirtyHandlerIds,t,e.dragOperation),dragOffset:(0,r.default)(e.dragOffset,t),refCount:(0,a.default)(e.refCount,t),dragOperation:(0,o.default)(e.dragOperation,t),stateId:(0,l.default)(e.stateId)}};var r=u(n(1483)),o=u(n(1527)),a=u(n(1528)),i=u(n(1485)),l=u(n(1529));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case l.BEGIN_DRAG:return r({},e,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case l.PUBLISH_DRAG_SOURCE:return r({},e,{isSourcePublic:!0});case l.HOVER:return r({},e,{targetIds:t.targetIds});case u.REMOVE_TARGET:return-1===e.targetIds.indexOf(t.targetId)?e:r({},e,{targetIds:(0,i.default)(e.targetIds,t.targetId)});case l.DROP:return r({},e,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case l.END_DRAG:return r({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}};var o,a=n(534),i=(o=a)&&o.__esModule?o:{default:o},l=n(1461),u=n(1462);var s={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case r.ADD_SOURCE:case r.ADD_TARGET:return e+1;case r.REMOVE_SOURCE:case r.REMOVE_TARGET:return e-1;default:return e}};var r=n(1462)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(1455)),a=c(n(2)),i=c(n(1484)),l=c(n(1531)),u=n(1483),s=n(1485);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=new l.default(t)}return r(e,[{key:"subscribeToStateChange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.handlerIds;(0,o.default)("function"==typeof e,"listener must be a function."),(0,o.default)(void 0===r||(0,a.default)(r),"handlerIds, when specified, must be an array of strings.");var i=this.store.getState().stateId,l=function(){var n=t.store.getState(),o=n.stateId;try{o===i||o===i+1&&!(0,s.areDirty)(n.dirtyHandlerIds,r)||e()}finally{i=o}};return this.store.subscribe(l)}},{key:"subscribeToOffsetChange",value:function(e){var t=this;(0,o.default)("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){var t=this.registry.getSource(e);return(0,o.default)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){var t=this.registry.getTarget(e);if((0,o.default)(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();return(0,i.default)(n,r)&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){var t=this.registry.getSource(e,!0);return(0,o.default)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))}},{key:"isOverTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1},n=t.shallow;if(!this.isDragging())return!1;var r=this.registry.getTargetType(e),o=this.getItemType();if(!(0,i.default)(r,o))return!1;var a=this.getTargetIds();if(!a.length)return!1;var l=a.indexOf(e);return n?l===a.length-1:l>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return(0,u.getSourceClientOffset)(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return(0,u.getDifferenceFromInitialOffset)(this.store.getState().dragOffset)}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=c(n(1455)),i=c(n(2)),l=c(n(1532)),u=n(1462),s=c(n(1534));function c(e){return e&&e.__esModule?e:{default:e}}var d="SOURCE",f="TARGET";function p(e,t){t&&(0,i.default)(e)?e.forEach((function(e){return p(e,!1)})):(0,a.default)("string"==typeof e||"symbol"===(void 0===e?"undefined":o(e)),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function h(e){switch(e[0]){case"S":return d;case"T":return f;default:(0,a.default)(!1,"Cannot parse handler ID: "+e)}}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.types={},this.handlers={},this.pinnedSourceId=null,this.pinnedSource=null}return r(e,[{key:"addSource",value:function(e,t){p(e),function(e){(0,a.default)("function"==typeof e.canDrag,"Expected canDrag to be a function."),(0,a.default)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),(0,a.default)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(d,e,t);return this.store.dispatch((0,u.addSource)(n)),n}},{key:"addTarget",value:function(e,t){p(e,!0),function(e){(0,a.default)("function"==typeof e.canDrop,"Expected canDrop to be a function."),(0,a.default)("function"==typeof e.hover,"Expected hover to be a function."),(0,a.default)("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(f,e,t);return this.store.dispatch((0,u.addTarget)(n)),n}},{key:"addHandler",value:function(e,t,n){var r=function(e){var t=(0,s.default)().toString();switch(e){case d:return"S"+t;case f:return"T"+t;default:(0,a.default)(!1,"Unknown role: "+e)}}(e);return this.types[r]=t,this.handlers[r]=n,r}},{key:"containsHandler",value:function(e){var t=this;return Object.keys(this.handlers).some((function(n){return t.handlers[n]===e}))}},{key:"getSource",value:function(e,t){return(0,a.default)(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.handlers[e]}},{key:"getTarget",value:function(e){return(0,a.default)(this.isTargetId(e),"Expected a valid target ID."),this.handlers[e]}},{key:"getSourceType",value:function(e){return(0,a.default)(this.isSourceId(e),"Expected a valid source ID."),this.types[e]}},{key:"getTargetType",value:function(e){return(0,a.default)(this.isTargetId(e),"Expected a valid target ID."),this.types[e]}},{key:"isSourceId",value:function(e){return h(e)===d}},{key:"isTargetId",value:function(e){return h(e)===f}},{key:"removeSource",value:function(e){var t=this;(0,a.default)(this.getSource(e),"Expected an existing source."),this.store.dispatch((0,u.removeSource)(e)),(0,l.default)((function(){delete t.handlers[e],delete t.types[e]}))}},{key:"removeTarget",value:function(e){var t=this;(0,a.default)(this.getTarget(e),"Expected an existing target."),this.store.dispatch((0,u.removeTarget)(e)),(0,l.default)((function(){delete t.handlers[e],delete t.types[e]}))}},{key:"pinSource",value:function(e){var t=this.getSource(e);(0,a.default)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){(0,a.default)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}}]),e}();t.default=m},function(e,t,n){"use strict";var r=n(1533),o=[],a=[],i=r.makeRequestCallFromTimer((function(){if(a.length)throw a.shift()}));function l(e){var t;(t=o.length?o.pop():new u).task=e,r(t)}function u(){this.task=null}e.exports=l,u.prototype.call=function(){try{this.task.call()}catch(e){l.onerror?l.onerror(e):(a.push(e),i())}finally{this.task=null,o[o.length]=this}}},function(e,t,n){"use strict";(function(t){function n(e){o.length||(r(),!0),o[o.length]=e}e.exports=n;var r,o=[],a=0;function i(){for(;a<o.length;){var e=a;if(a+=1,o[e].call(),a>1024){for(var t=0,n=o.length-a;t<n;t++)o[t]=o[t+a];o.length-=a,a=0}}o.length=0,a=0,!1}var l,u,s,c=void 0!==t?t:self,d=c.MutationObserver||c.WebKitMutationObserver;function f(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof d?(l=1,u=new d(i),s=document.createTextNode(""),u.observe(s,{characterData:!0}),r=function(){l=-l,s.data=l}):r=f(i),n.requestFlush=r,n.makeRequestCallFromTimer=f}).call(this,n(128))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r++};var r=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"canDrag",value:function(){return!0}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"canDrop",value:function(){return!0}},{key:"hover",value:function(){}},{key:"drop",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new l(e)};var o,a=n(45),i=(o=a)&&o.__esModule?o:{default:o};var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actions=t.getActions()}return r(e,[{key:"setup",value:function(){this.didCallSetup=!0}},{key:"teardown",value:function(){this.didCallTeardown=!0}},{key:"connectDragSource",value:function(){return i.default}},{key:"connectDragPreview",value:function(){return i.default}},{key:"connectDropTarget",value:function(){return i.default}},{key:"simulateBeginDrag",value:function(e,t){this.actions.beginDrag(e,t)}},{key:"simulatePublishDragSource",value:function(){this.actions.publishDragSource()}},{key:"simulateHover",value:function(e,t){this.actions.hover(e,t)}},{key:"simulateDrop",value:function(){this.actions.drop()}},{key:"simulateEndDrag",value:function(){this.actions.endDrag()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyImage=t.NativeTypes=void 0,t.default=function(e){return new r.default(e)};var r=i(n(1539)),o=i(n(1545)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1468));function i(e){return e&&e.__esModule?e:{default:e}}t.NativeTypes=a,t.getEmptyImage=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=d(n(397)),a=d(n(1540)),i=d(n(1541)),l=n(1486),u=n(1542),s=n(1544),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1468));function d(e){return e&&e.__esModule?e:{default:e}}function f(){var e=ET_Builder.Frames.top.document.querySelectorAll(".media-modal.wp-core-ui"),t=e.length?e[e.length-1]:null;return null!==t&&"object"==typeof t&&"none"!==t.parentElement.style.display}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.context=t.getContext(),this.sourcePreviewNodes={},this.sourcePreviewNodeOptions={},this.sourceNodes={},this.sourceNodeOptions={},this.enterLeaveCounter=new i.default,this.getSourceClientOffset=this.getSourceClientOffset.bind(this),this.handleTopDragStart=this.handleTopDragStart.bind(this),this.handleTopDragStartCapture=this.handleTopDragStartCapture.bind(this),this.handleTopDragEndCapture=this.handleTopDragEndCapture.bind(this),this.handleTopDragEnter=this.handleTopDragEnter.bind(this),this.handleTopDragEnterCapture=this.handleTopDragEnterCapture.bind(this),this.handleTopDragLeaveCapture=this.handleTopDragLeaveCapture.bind(this),this.handleTopDragOver=this.handleTopDragOver.bind(this),this.handleTopDragOverCapture=this.handleTopDragOverCapture.bind(this),this.handleTopDrop=this.handleTopDrop.bind(this),this.handleTopDropCapture=this.handleTopDropCapture.bind(this),this.handleSelectStart=this.handleSelectStart.bind(this),this.endDragIfSourceWasRemovedFromDOM=this.endDragIfSourceWasRemovedFromDOM.bind(this),this.endDragNativeItem=this.endDragNativeItem.bind(this)}return r(e,[{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode())}},{key:"addEventListeners",value:function(e){e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0)}},{key:"removeEventListeners",value:function(e){e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0)}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions[e]=n,this.sourcePreviewNodes[e]=t,function(){delete r.sourcePreviewNodes[e],delete r.sourcePreviewNodeOptions[e]}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes[e]=t,this.sourceNodeOptions[e]=n;var o=function(t){return r.handleDragStart(t,e)},a=function(t){return r.handleSelectStart(t,e)};return t.setAttribute("draggable",!0),t.addEventListener("dragstart",o),t.addEventListener("selectstart",a),function(){delete r.sourceNodes[e],delete r.sourceNodeOptions[e],t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",a),t.setAttribute("draggable",!1)}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},o=function(t){return n.handleDragOver(t,e)},a=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",o),t.addEventListener("drop",a),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",o),t.removeEventListener("drop",a)}}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions[e];return(0,o.default)(t||{},{dropEffect:"move"})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions[e];return(0,o.default)(t||{},{anchorX:.5,anchorY:.5,captureDraggingState:!1})}},{key:"getSourceClientOffset",value:function(e){return(0,u.getNodeClientOffset)(this.sourceNodes[e])}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(c).some((function(t){return c[t]===e}))}},{key:"beginDragNativeItem",value:function(e){this.clearCurrentDragSourceNode();var t=(0,s.createNativeDragSource)(e);this.currentNativeSource=new t,this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle]),(0,l.isFirefox)()&&this.window.addEventListener("mousemove",this.endDragNativeItem,!0)}},{key:"endDragNativeItem",value:function(){this.isDraggingNativeItem()&&((0,l.isFirefox)()&&this.window.removeEventListener("mousemove",this.endDragNativeItem,!0),this.actions.endDrag(),this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)}},{key:"endDragIfSourceWasRemovedFromDOM",value:function(){var e=this.currentDragSourceNode;ET_Builder.Frames.top.document.body.contains(e)||this.clearCurrentDragSourceNode()&&this.actions.endDrag()}},{key:"setCurrentDragSourceNode",value:function(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.currentDragSourceNodeOffset=(0,u.getNodeClientOffset)(e),this.currentDragSourceNodeOffsetChanged=!1,this.window.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0),!0)}},{key:"checkIfCurrentDragSourceRectChanged",value:function(){var e=this.currentDragSourceNode;return!!e&&(!!this.currentDragSourceNodeOffsetChanged||(this.currentDragSourceNodeOffsetChanged=!(0,a.default)((0,u.getNodeClientOffset)(e),this.currentDragSourceNodeOffset),this.currentDragSourceNodeOffsetChanged))}},{key:"handleTopDragStartCapture",value:function(){this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]}},{key:"handleDragStart",value:function(e,t){this.dragStartSourceIds.unshift(t)}},{key:"handleTopDragStart",value:function(e){var t=this,n=this.dragStartSourceIds;this.dragStartSourceIds=null;var r=(0,u.getEventClientOffset)(e);this.actions.beginDrag(n,{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});var o=e.dataTransfer,a=(0,s.matchNativeItemType)(o);if(this.monitor.isDragging()){if("function"==typeof o.setDragImage){var i=this.monitor.getSourceId(),l=this.sourceNodes[i],c=this.sourcePreviewNodes[i]||l,d=this.getCurrentSourcePreviewNodeOptions(),f={anchorX:d.anchorX,anchorY:d.anchorY},p=(0,u.getDragPreviewOffset)(l,c,r,f);o.setDragImage(c,p.x,p.y)}try{o.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target),this.getCurrentSourcePreviewNodeOptions().captureDraggingState?this.actions.publishDragSource():setTimeout((function(){return t.actions.publishDragSource()}))}else if(a)this.beginDragNativeItem(a);else{if(!(o.types||e.target.hasAttribute&&e.target.hasAttribute("draggable")))return;e.preventDefault()}}},{key:"handleTopDragEndCapture",value:function(){this.clearCurrentDragSourceNode()&&this.actions.endDrag()}},{key:"handleTopDragEnterCapture",value:function(e){if(this.dragEnterTargetIds=[],this.enterLeaveCounter.enter(e.target)&&!this.monitor.isDragging()){var t=e.dataTransfer,n=(0,s.matchNativeItemType)(t);n&&this.beginDragNativeItem(n)}}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleTopDragEnter",value:function(e){var t=this,n=this.dragEnterTargetIds;(this.dragEnterTargetIds=[],this.monitor.isDragging())&&((0,l.isFirefox)()||this.actions.hover(n,{clientOffset:(0,u.getEventClientOffset)(e)}),n.some((function(e){return t.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()))}},{key:"handleTopDragOverCapture",value:function(){this.dragOverTargetIds=[]}},{key:"handleDragOver",value:function(e,t){this.dragOverTargetIds.unshift(t)}},{key:"handleTopDragOver",value:function(e){if(!f()){var t=this,n=this.dragOverTargetIds;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer.dropEffect="none");this.actions.hover(n,{clientOffset:(0,u.getEventClientOffset)(e)}),n.some((function(e){return t.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()):this.isDraggingNativeItem()?(e.preventDefault(),e.dataTransfer.dropEffect="none"):this.checkIfCurrentDragSourceRectChanged()&&(e.preventDefault(),e.dataTransfer.dropEffect="move")}}},{key:"handleTopDragLeaveCapture",value:function(e){this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&this.isDraggingNativeItem()&&this.endDragNativeItem()}},{key:"handleTopDropCapture",value:function(e){this.dropTargetIds=[],e.preventDefault(),this.isDraggingNativeItem()&&this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),this.enterLeaveCounter.reset()}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"handleTopDrop",value:function(e){if(!f()){var t=this.dropTargetIds;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:(0,u.getEventClientOffset)(e)}),this.actions.drop(),this.isDraggingNativeItem()?this.endDragNativeItem():this.endDragIfSourceWasRemovedFromDOM()}}},{key:"handleSelectStart",value:function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))}},{key:"window",get:function(){return this.context&&this.context.window||window}}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,a=0;a<n.length;a+=1){if(!o.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;var i=e[n[a]],l=t[n[a]];if(i!==l)return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(60)),a=i(n(534));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[]}return r(e,[{key:"enter",value:function(e){var t=this.entered.length;return this.entered=(0,o.default)(this.entered.filter((function(t){return document.documentElement.contains(t)&&(!t.contains||t.contains(e))})),[e]),0===t&&this.entered.length>0}},{key:"leave",value:function(e){var t=this.entered.length;return this.entered=(0,a.default)(this.entered.filter((function(e){return document.documentElement.contains(e)})),e),t>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeClientOffset=l,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,n,r){var a="IMG"===t.nodeName&&((0,o.isFirefox)()||!document.documentElement.contains(t)),u=l(a?e:t),s={x:n.x-u.x,y:n.y-u.y},c=e.offsetWidth,d=e.offsetHeight,f=r.anchorX,p=r.anchorY,h=a?t.width:c,m=a?t.height:d;(0,o.isSafari)()&&a&&(m/=window.devicePixelRatio,h/=window.devicePixelRatio);var g=new i.default([0,.5,1],[s.x,s.x/c*h,s.x+h-c]),v=new i.default([0,.5,1],[s.y,s.y/d*m,s.y+m-d]),y=g.interpolate(f),b=v.interpolate(p);(0,o.isSafari)()&&a&&(b+=(window.devicePixelRatio-1)*m);return{x:y,y:b}};var r,o=n(1486),a=n(1543),i=(r=a)&&r.__esModule?r:{default:r};function l(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,o=[],a=0;a<r;a++)o.push(a);o.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var i=[],l=[],u=[],s=void 0,c=void 0,d=0;d<r-1;d++)s=t[d+1]-t[d],c=n[d+1]-n[d],l.push(s),i.push(c),u.push(c/s);for(var f=[u[0]],p=0;p<l.length-1;p++){var h=u[p],m=u[p+1];if(h*m<=0)f.push(0);else{s=l[p];var g=l[p+1],v=s+g;f.push(3*v/((v+g)/h+(v+s)/m))}}f.push(u[u.length-1]);for(var y=[],b=[],_=void 0,w=0;w<f.length-1;w++){_=u[w];var k=f[w],O=1/l[w],C=k+f[w+1]-_-_;y.push((_-k-C)*O),b.push(C*O*O)}this.xs=t,this.ys=n,this.c1s=f,this.c2s=y,this.c3s=b}return r(e,[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,o=this.c2s,a=this.c3s,i=t.length-1;if(e===t[i])return n[i];for(var l=0,u=a.length-1,s=void 0;l<=u;){var c=t[s=Math.floor(.5*(l+u))];if(c<e)l=s+1;else{if(!(c>e))return n[s];u=s-1}}var d=e-t[i=Math.max(0,u)],f=d*d;return n[i]+r[i]*d+o[i]*f+a[i]*d*f}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.createNativeDragSource=function(e){var t=u[e],n=t.exposeProperty,r=t.matchesTypes,a=t.getData;return function(){function e(){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.item=(t={},(r={})[n]=r[n]||{},r[n].get=function(){return console.warn("Browser doesn't allow reading \""+n+'" until the drop event.'),null},function(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}}(t,r),t)}return o(e,[{key:"mutateItemByReadingDataTransfer",value:function(e){delete this.item[n],this.item[n]=a(e,r)}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}()},t.matchNativeItemType=function(e){var t=Array.prototype.slice.call(e.types||[]);return Object.keys(u).filter((function(e){return u[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1468));function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),null);return null!=r?r:n}var u=(i(r={},a.FILE,{exposeProperty:"files",matchesTypes:["Files"],getData:function(e){return Array.prototype.slice.call(e.files)}}),i(r,a.URL,{exposeProperty:"urls",matchesTypes:["Url","text/uri-list"],getData:function(e,t){return l(e,t,"").split("\n")}}),i(r,a.TEXT,{exposeProperty:"text",matchesTypes:["Text","text/plain"],getData:function(e,t){return l(e,t,"")}}),r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){r||((r=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==");return r};var r=void 0},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(0)),a=f(n(6)),i=f(n(1)),l=f(n(78)),u=f(n(77)),s=f(n(58)),c=f(n(27)),d=f(n(118));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={title:a.default.oneOfType([a.default.element,a.default.string]).isRequired,_onMouseEnterItem:a.default.oneOfType([a.default.func,a.default.bool]),_onMouseLeaveItem:a.default.oneOfType([a.default.func,a.default.bool]),onToggleRightMenu:a.default.oneOfType([a.default.func,a.default.bool]),disableDuplicate:a.default.bool,disableDelete:a.default.bool,isGlobalPresetsMode:a.default.bool},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,e);var t,n,r,a=g(f);function f(){var e;p(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(y(e=a.call.apply(a,[this].concat(n))),"_handleMouseEnter",(function(){var t=e.props._onMouseEnterItem;t&&t(y(e))})),_(y(e),"_handleMouseLeave",(function(){var t=e.props._onMouseLeaveItem;t&&t(y(e))})),e}return t=f,(n=[{key:"UNSAFE_componentWillMount",value:function(){(0,i.default)(this,"props.just_created")&&c.default.openModuleSettings(this)}},{key:"render",value:function(){var e={cursor:this.props.isGlobalPresetsMode?"default":"move",opacity:this.props.isDragging?0:1};return o.default.createElement("li",{className:"et-fb-settings-module-item",style:e,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave},o.default.createElement(u.default,{buttonName:this.props.isGlobalPresetsMode?l.default.BUTTON_GLOBAL_PRESETS_CHILD_ITEM_EDIT:l.default.MODULE_ITEM_EDIT,editingModule:this,className:"et-fb-settings-module-item-button et-fb-settings-module-item-button--edit",small:!0,ink:!1},o.default.createElement(s.default,{icon:"setting",color:d.default.moduleItemControlIcons})),this.props.isGlobalPresetsMode||this.props.disableDuplicate?null:o.default.createElement(u.default,{buttonName:l.default.MODULE_ITEM_COPY,editingModule:this,className:"et-fb-settings-module-item-button et-fb-settings-module-item-button--copy",small:!0,ink:!1},o.default.createElement(s.default,{icon:"copy",color:d.default.moduleItemControlIcons})),this.props.isGlobalPresetsMode||this.props.disableDelete?null:o.default.createElement(u.default,{buttonName:l.default.MODULE_ITEM_DELETE,editingModule:this,className:"et-fb-settings-module-item-button et-fb-settings-module-item-button--delete",small:!0,ink:!1},o.default.createElement(s.default,{icon:"delete",color:d.default.moduleItemControlIcons})),o.default.createElement(u.default,{buttonName:l.default.TAB_BUTTON_MODULE_RIGHT_MENU,className:"et-fb-settings-module-item-button et-fb-settings-module-item-button--menu",__onClick:this.props.onToggleRightMenu,small:!0,needEvent:!0,ink:!1},o.default.createElement(s.default,{icon:"app-setting",color:d.default.moduleItemControlIcons,viewBox:"0 0 4 17",style:{height:14,width:3,minWidth:3,margin:"2px 0"}})),o.default.createElement("span",{className:"et-fb-settings-module-item-title"},this.props.title))}}])&&h(t.prototype,n),r&&h(t,r),f}(o.default.Component);k.propTypes=w,k.defaultProps={_onMouseEnterItem:!1,_onMouseLeaveItem:!1,onOptionsHarmonyRightMenu:!1,disableDuplicate:!1,disableDelete:!1,isGlobalPresetsMode:!1};var O=k;t.default=O},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(0)),a=s(n(6)),i=n(1469),l=s(n(1565)),u=s(n(27));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=!1,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"render",value:function(){return this.props.connectDragSource(this.props.connectDropTarget(o.default.createElement("div",null,o.default.cloneElement(this.props.children,{isDragging:this.props.isDragging}))))}}])&&c(t.prototype,n),r&&c(t,r),i}(o.default.Component);g.propTypes={connectDragSource:a.default.func.isRequired,connectDropTarget:a.default.func.isRequired,moveItem:a.default.func.isRequired,isDragging:a.default.bool.isRequired,id:a.default.any.isRequired};var v={beginDrag:function(e){return{id:e.id}},endDrag:function(e){u.default.moduleItemDragEnd(e,m),m=!1}},y={hover:function(e,t){var n=t.getItem().id;n!==e.id&&(m=!0,e.moveItem(n,e.id))}},b=(0,i.DragSource)(l.default.MODULE_ITEM,v,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})),_=(0,i.DropTarget)(l.default.MODULE_ITEM,y,(function(e){return{connectDropTarget:e.dropTarget()}}))(b(g));t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=n(6),s=(a=u)&&a.__esModule?a:{default:a},c=n(1487);var d=(o=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.backend=(0,c.unpackBackendForEs5Users)(e.backend),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getChildContext",value:function(){var e=this;return(0,c.createChildContext)(this.backend,{window:e.props&&e.props.window?e.props.window:e.context&&e.context.window?e.context.window:"undefined"!=typeof window?window:void 0})}},{key:"render",value:function(){return l.Children.only(this.props.children)}}]),t}(l.Component),r.propTypes={backend:s.default.oneOfType([s.default.func,s.default.object]).isRequired,children:s.default.element.isRequired,window:s.default.object},r.defaultProps={window:void 0},r.childContextTypes=c.CHILD_CONTEXT_TYPES,r.displayName="DragDropContextProvider",r.contextTypes={window:s.default.object},o);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h.default.apply(void 0,["DragLayer","collect[, options]"].concat(Array.prototype.slice.call(arguments))),(0,d.default)("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html",e),(0,d.default)((0,c.default)(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html',t),function(n){var c,h,m=t.arePropsEqual,b=void 0===m?p.default:m,_=n.displayName||n.name||"Component",w=(h=c=function(t){function i(e,t){g(this,i);var n=v(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.handleChange=n.handleChange.bind(n),n.manager=t.dragDropManager,(0,d.default)("object"===o(n.manager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",_,_),n.state=n.getCurrentState(),n}return y(i,t),a(i,[{key:"getDecoratedComponentInstance",value:function(){return(0,d.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"shouldComponentUpdate",value:function(e,t){return!b(e,this.props)||!(0,f.default)(t,this.state)}}]),a(i,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0;var e=this.manager.getMonitor();this.unsubscribeFromOffsetChange=e.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=e.subscribeToStateChange(this.handleChange),this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange(),this.unsubscribeFromStateChange()}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,f.default)(e,this.state)||this.setState(e)}}},{key:"getCurrentState",value:function(){var t=this.manager.getMonitor();return e(t)}},{key:"render",value:function(){var e=this;return l.default.createElement(n,r({},this.props,this.state,{ref:function(t){e.child=t}}))}}]),i}(i.Component),c.DecoratedComponent=n,c.displayName="DragLayer("+_+")",c.contextTypes={dragDropManager:u.default.object.isRequired},h);return(0,s.default)(w,n)}};var i=n(0),l=m(i),u=m(n(6)),s=m(n(848)),c=m(n(119)),d=m(n(1455)),f=m(n(1470)),p=m(n(1488)),h=m(n(1463));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a.default.apply(void 0,["DragSource","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var p=e;"function"!=typeof e&&((0,r.default)((0,d.default)(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',e),p=function(){return e});(0,r.default)((0,o.default)(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',t);var h=(0,u.default)(t);return(0,r.default)("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),(0,r.default)((0,o.default)(f),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),function(e){return(0,i.default)({connectBackend:function(e,t){return e.connectDragSource(t)},containerDisplayName:"DragSource",createHandler:h,registerHandler:l.default,createMonitor:s.default,createConnector:c.default,DecoratedComponent:e,getType:p,collect:n,options:f})}};var r=f(n(1455)),o=f(n(119)),a=f(n(1463)),i=f(n(1489)),l=f(n(1555)),u=f(n(1556)),s=f(n(1557)),c=f(n(1558)),d=f(n(1492));function f(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(n(1471));t.isDisposable=o.default;var a=r(n(1552));t.Disposable=a.default;var i=r(n(1553));t.CompositeDisposable=i.default;var l=r(n(1554));t.SerialDisposable=l.default},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isDisposed=!1,this.action=t||o}return r(e,null,[{key:"empty",value:{dispose:o},enumerable:!0}]),e.prototype.dispose=function(){this.isDisposed||(this.action.call(null),this.isDisposed=!0)},e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o,a=n(1471),i=(o=a)&&o.__esModule?o:{default:o},l=function(){function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r(this,e),Array.isArray(n[0])&&1===n.length&&(n=n[0]);for(var a=0;a<n.length;a++)if(!i.default(n[a]))throw new Error("Expected a disposable");this.disposables=n,this.isDisposed=!1}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){if(this.isDisposed)return!1;var t=this.disposables.indexOf(e);return-1!==t&&(this.disposables.splice(t,1),e.dispose(),!0)},e.prototype.dispose=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.isDisposed=!0,this.disposables=[],this.length=0;for(n=0;n<e;n++)t[n].dispose()}},e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(1471),a=(r=o)&&r.__esModule?r:{default:r},i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isDisposed=!1,this.current=null}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];if(null!=e&&!a.default(e))throw new Error("Expected either an empty value or a valid disposable");var t=this.isDisposed,n=void 0;t||(n=this.current,this.current=e),n&&n.dispose(),t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null,e&&e.dispose()}},e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=n.getRegistry(),o=r.addSource(e,t);return{handlerId:o,unregister:function(){r.removeSource(o)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){Object.keys(e).forEach((function(t){(0,o.default)(i.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',i.join(", "),t),(0,o.default)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])})),l.forEach((function(t){(0,o.default)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])}));var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.monitor=e,this.props=null,this.component=null}return r(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrag",value:function(){return!e.canDrag||e.canDrag(this.props,this.monitor)}},{key:"isDragging",value:function(t,n){return e.isDragging?e.isDragging(this.props,this.monitor):n===t.getSourceId()}},{key:"beginDrag",value:function(){return e.beginDrag(this.props,this.monitor,this.component)}},{key:"endDrag",value:function(){e.endDrag&&e.endDrag(this.props,this.monitor,this.component)}}]),t}();return function(e){return new t(e)}};var o=a(n(1455));a(n(119));function a(e){return e&&e.__esModule?e:{default:e}}var i=["canDrag","beginDrag","isDragging","endDrag"],l=["beginDrag"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new s(e)};var o,a=n(1455),i=(o=a)&&o.__esModule?o:{default:o};var l=!1,u=!1,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.internalMonitor=t.getMonitor()}return r(e,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"canDrag",value:function(){(0,i.default)(!l,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return l=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{l=!1}}},{key:"isDragging",value:function(){(0,i.default)(!u,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return u=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{u=!1}}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n=void 0,a=void 0,i=void 0,l=void 0,u=void 0,s=void 0;function c(){i&&(i(),i=null),t&&n&&(i=e.connectDragSource(t,n,a))}function d(){s&&(s(),s=null),t&&l&&(s=e.connectDragPreview(t,l,u))}return{receiveHandlerId:function(e){e!==t&&(t=e,c(),d())},hooks:(0,r.default)({dragSource:function(e,t){e===n&&(0,o.default)(t,a)||(n=e,a=t,c())},dragPreview:function(e,t){e===l&&(0,o.default)(t,u)||(l=e,u=t,d())}})}};var r=a(n(1490)),o=a(n(1491));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.ref;if((0,a.default)("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),!n)return(0,i.cloneElement)(e,{ref:t});return(0,i.cloneElement)(e,{ref:function(e){t(e),n&&n(e)}})};var r,o=n(1455),a=(r=o)&&r.__esModule?r:{default:r},i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a.default.apply(void 0,["DropTarget","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var p=e;"function"!=typeof e&&((0,r.default)((0,d.default)(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',e),p=function(){return e});(0,r.default)((0,o.default)(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',t);var h=(0,u.default)(t);return(0,r.default)("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),(0,r.default)((0,o.default)(f),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),function(e){return(0,i.default)({connectBackend:function(e,t){return e.connectDropTarget(t)},containerDisplayName:"DropTarget",createHandler:h,registerHandler:l.default,createMonitor:s.default,createConnector:c.default,DecoratedComponent:e,getType:p,collect:n,options:f})}};var r=f(n(1455)),o=f(n(119)),a=f(n(1463)),i=f(n(1489)),l=f(n(1561)),u=f(n(1562)),s=f(n(1563)),c=f(n(1564)),d=f(n(1492));function f(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=n.getRegistry(),o=r.addTarget(e,t);return{handlerId:o,unregister:function(){r.removeTarget(o)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){Object.keys(e).forEach((function(t){(0,o.default)(i.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',i.join(", "),t),(0,o.default)("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html",t,t,e[t])}));var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.monitor=e,this.props=null,this.component=null}return r(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrop",value:function(){return!e.canDrop||e.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){e.hover&&e.hover(this.props,this.monitor,this.component)}},{key:"drop",value:function(){if(e.drop)return e.drop(this.props,this.monitor,this.component)}}]),t}();return function(e){return new t(e)}};var o=a(n(1455));a(n(119));function a(e){return e&&e.__esModule?e:{default:e}}var i=["canDrop","hover","drop"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new u(e)};var o,a=n(1455),i=(o=a)&&o.__esModule?o:{default:o};var l=!1,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.internalMonitor=t.getMonitor()}return r(e,[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"canDrop",value:function(){(0,i.default)(!l,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target-monitor.html");try{return l=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{l=!1}}},{key:"isOver",value:function(e){return this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n=void 0,a=void 0,i=void 0;function l(){i&&(i(),i=null),t&&n&&(i=e.connectDropTarget(t,n,a))}return{receiveHandlerId:function(e){e!==t&&(t=e,l())},hooks:(0,r.default)({dropTarget:function(e,t){e===n&&(0,o.default)(t,a)||(n=e,a=t,l())}})}};var r=a(n(1490)),o=a(n(1491));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={MODULE:"module",MODULE_ITEM:"module_item"};t.default=r},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(0)),a=u(n(6)),i=n(66),l=n(75);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o=f(a);function a(){return s(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props.dynamic.attribute;return e.loading?this.props.renderLoading(this.props.type):this.props.children(e.value,e.dynamic)}}])&&c(t.prototype,n),r&&c(t,r),a}(o.default.PureComponent);m.propTypes={type:a.default.oneOf(["text","image"]),attributes:a.default.object.isRequired,attribute:a.default.string.isRequired,value:a.default.oneOfType([a.default.string,a.default.number]),renderLoading:a.default.func,children:a.default.func},m.defaultProps={type:"text",value:void 0,renderLoading:l.renderLoading,children:function(e,t){return t?(0,l.renderContent)(e):e}};var g=(0,i.withDynamicContent)((function(e){return{attribute:{attribute:e.attribute,value:e.value}}}),(function(e){return e.attributes}))(m);t.default=g},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=s(n(6)),i=s(n(18)),l=s(n(45)),u=s(n(764));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1568);var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=h(l);function l(){var e;d(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(g(e=a.call.apply(a,[this].concat(n))),"defaultStyle",{width:"200%",height:"200%",top:"-50%",left:"-50%"}),y(g(e),"_onClick",(function(t){t.preventDefault(),e.props.stopPropagation&&t.stopPropagation(),e.props._onClick(g(e))})),y(g(e),"_renderRipple",(function(){return o.default.createElement(u.default,{radius:150,duration:1200,background:!1,options:{background:!1},style:e.defaultStyle})})),e}return t=l,(n=[{key:"componentDidMount",value:function(){this.props.componentDidMount(this)}},{key:"componentDidUpdate",value:function(){this.props.componentDidUpdate(this)}},{key:"render",value:function(){var e=(0,i.default)({"et-fb-button":!0,"et-fb-button--block":this.props.block,"et-fb-button--danger":this.props.danger,"et-fb-button--danger-alt":this.props.danger&&this.props.alt,"et-fb-button--elevate":this.props.elevate,"et-fb-button--globalitem":this.props.globalitem,"et-fb-button--info":this.props.info,"et-fb-button--info-alt":this.props.info&&this.props.alt,"et-fb-button--inverse":this.props.inverse,"et-fb-button--large":this.props.large,"et-fb-button--primary":this.props.primary,"et-fb-button--primary-alt":this.props.primary&&this.props.alt,"et-fb-button--round":this.props.round,"et-fb-button--small":this.props.small,"et-fb-button--success":this.props.success,"et-fb-button--active":this.props.activeButton,"et-fb-button--warning":this.props.warning,"et-fb-button--tooltip":this.props.isTooltipButton},this.props.className);return"button"===this.props.tagName?o.default.createElement("button",{type:this.props.type,"data-tip":this.props.tooltip,className:e,style:this.props.style,onClick:this._onClick,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,disabled:this.props.disabled},this.props.children,this.props.ink?this._renderRipple():null):o.default.createElement(this.props.tagName,{className:e,"data-tip":this.props.tooltip,style:this.props.style,onClick:this._onClick,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp},this.props.children,this.props.ink?this._renderRipple():null)}}])&&f(t.prototype,n),r&&f(t,r),l}(o.PureComponent);y(b,"defaultProps",{type:"button",tagName:"button",block:!1,elevate:!1,ink:!0,inverse:!1,large:!1,primary:!1,success:!1,small:!1,disabled:!1,disableClick:!1,additionalAttrs:{},onMouseDown:l.default,onMouseUp:l.default,onMouseEnter:l.default,onMouseLeave:l.default,componentDidMount:l.default,componentDidUpdate:l.default,_onClick:l.default,stopPropagation:!1}),y(b,"propTypes",{block:a.default.bool,children:a.default.node,tagName:a.default.string,elevate:a.default.bool,danger:a.default.bool,ink:a.default.bool,inverse:a.default.bool,large:a.default.bool,primary:a.default.bool,round:a.default.bool,success:a.default.bool,info:a.default.bool,alt:a.default.bool,warning:a.default.bool,small:a.default.bool,disabled:a.default.bool,disableClick:a.default.bool,additionalAttrs:a.default.object,type:a.default.string,onMouseDown:a.default.func,onMouseUp:a.default.func,_onClick:a.default.func,componentDidMount:a.default.func,componentDidUpdate:a.default.func,className:a.default.oneOfType([a.default.string,a.default.object]),style:a.default.object});var _=b;t.default=_},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=h(n(6)),i=h(n(18)),l=h(n(14)),u=h(n(180)),s=h(n(45)),c=h(n(1)),d=h(n(12)),f=h(n(81)),p=h(n(509));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1570);var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(h,e);var t,n,r,a=b(h);function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),O(w(t=a.call(this,e)),"emitChange",(0,u.default)(t._emitChange,0,{leading:!1})),O(w(t),"userUpdate",!1),O(w(t),"_onInput",(function(e){var n=e.target.value;t.setState({value:n}),t.emitChange.cancel(),t.emitChange()})),O(w(t),"_onBlur",(function(e){var n=p.default.decodeHtmlEntities(e.target.value);!(0,l.default)(t.props.valueMin)&&(0,f.default)(n)<t.props.valueMin&&(n=t.props.valueMin),!(0,l.default)(t.props.valueMax)&&(0,f.default)(n)>t.props.valueMax&&(n=t.props.valueMax),t.props._onChange(t.props.name,n),t.setState({value:n})}));var n=(0,d.default)(t.props.value),r=(0,d.default)(t.props.default);return t.state={value:n===r?"":n},t}return t=h,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props.value;e.value===t||this.userUpdate||this.setState({value:t}),this.userUpdate=!1}},{key:"getDefaultValue",value:function(){return(0,d.default)(this.props.default)}},{key:"_emitChange",value:function(){this.userUpdate=!0,this.props._onChange(this.props.name,this.state.value)}},{key:"render",value:function(){var e=(0,c.default)(this.props,"additional_attrs",{}),t={"et-core-control-input":!0};this.props.className&&(t[this.props.className]=!0),this.props.readonly&&(e.readOnly=!0);var n=this.props,r=n.id,a=n.type;return r||(r="et-fb-".concat(this.props.name)),a||(a="text"),o.default.createElement("input",g({className:(0,i.default)(t),type:a,value:this.state.value,name:this.props.name,id:r,onChange:s.default,onInput:this._onInput,onBlur:this._onBlur,placeholder:this.getDefaultValue()},e))}}])&&v(t.prototype,n),r&&v(t,r),h}(o.PureComponent);O(C,"propTypes",{name:a.default.string.isRequired});var S=C;t.default=S},function(e,t,n){},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=E(n(18)),i=n(89),l=E(n(35)),u=E(n(10)),s=E(n(15)),c=E(n(14)),d=E(n(122)),f=E(n(4)),p=(E(n(5)),E(n(94))),h=E(n(1)),m=E(n(49)),g=E(n(45)),v=E(n(397)),y=E(n(121)),b=E(n(157)),_=n(1472),w=E(n(58)),k=E(n(1572)),O=E(n(1467)),C=E(n(1574)),S=n(509);function E(e){return e&&e.__esModule?e:{default:e}}function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1575);var F=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(T,t);var n,r,E,M=L(T);function T(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T),B(N(t=M.call(this,e)),"nextDragID",-1),B(N(t),"_nextDragID",(function(){return t.nextDragID++})),B(N(t),"emitChange",(function(){return setTimeout((function(){return t.props._onChange(t.props.name,t.state.items)}),0)})),B(N(t),"focusItemInput",(function(e){setTimeout((function(){var n=t.itemsList.querySelectorAll(".et-core-control-sortable-list__row input");0!==n.length&&((!1===e||(0,c.default)(e))&&(e=n.length-1),n[e].focus())}))})),B(N(t),"moveItem",(function(e,n){var r=JSON.parse(t.state.items),o=r[e];r[e]=r[n],r[n]=o,t.userUpdate=!0,t.setState({items:JSON.stringify(r)}),t.emitChange()})),B(N(t),"onChangeLinkSettings",(function(e,n){var r=JSON.parse(t.state.items);(0,p.default)(r,e,n),t.userUpdate=!0,t.setState({items:JSON.stringify(r)}),t.emitChange()}));var n=(0,S.isJson)(t.props.value)?JSON.parse(t.props.value):[];if(0!==n.length||t.props.allowEmpty)(0,u.default)(n,(function(e){return e.dragID=t._nextDragID()}));else{var r=(0,h.default)(t.props,"module.props.module.props.attrs.field_type",!1),o=(0,h.default)(t.props,"module.props.module.props.attrs.checkbox_checked","off"),a="";"checkbox"===r&&(a=(0,h.default)(t.props,"module.props.module.props.attrs.field_title","")),n=[{value:a,checked:"on"===o?1:0,dragID:t._nextDragID()}],t.focusItemInput()}return t.state={items:JSON.stringify(n),editing_link:!1},t.emitChange(),t}return n=T,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props.value;e.value===t||this.userUpdate||this.setState({items:t}),this.userUpdate=!1,b.default.rebuild()}},{key:"addItem",value:function(e,t,n){t&&t.preventDefault();var r=this.state.items||"[]",o=JSON.parse(r),a=o.length&&!1!==e&&!n?o[e]:{},i=this._nextDragID();!1!==e?o.splice(e+1,0,x(x({},a),{},{dragID:i})):o.push({value:"",checked:0,dragID:i}),this.userUpdate=!0,this.setState({items:JSON.stringify(o)}),this.emitChange(),(0,d.default)(e)?(this.focusItemInput(e+1),this.props._onAddItem(e+1)):(this.focusItemInput(),this.props._onAddItem(o.length-1))}},{key:"editItem",value:function(e,t){t.preventDefault(),this.props._onAddItem(e)}},{key:"removeItem",value:function(e,t){t.preventDefault();var n=this.state.items||"[]",r=JSON.parse(n);r.splice(e,1),0!==r.length||this.props.allowEmpty||(r=[{value:"",checked:0,dragID:0}]),this.userUpdate=!0,this.setState({items:JSON.stringify(r)}),this.emitChange()}},{key:"showLinkSettings",value:function(t,n){if(n.target){n.preventDefault();var r=this.state.items||"[]",o=JSON.parse(r);this.link_settings_backup=(0,y.default)(o[t]),(0,v.default)(this.link_settings_backup,{link_url:"",link_text:""})}else if(t=!1,C.default.SORTABLE_LIST_LINK_SETTINGS_CLOSE===n.props.buttonName){var a=this.state.items||"[]",i=JSON.parse(a);i[this.state.editing_link]=this.link_settings_backup,this.setState({items:JSON.stringify(i)}),this.emitChange()}(ET_Builder&&ET_Builder.Frames.top.jQuery("body")||e("body")).toggleClass("et-core-control-sortable-list-editing-link",!1!==t),this.setState({editing_link:t}),this.props.onEditingLink(!1!==t)}},{key:"updateItems",value:function(e,t,n,r){r.preventDefault();var o="click"===r.type,a=this.state.items||"[]",i=JSON.parse(a),l=o?t.value:r.target.value,d=!(0,c.default)(this.props.checkbox)&&!0===this.props.checkbox;(0,f.default)(i)&&i.push(t),o&&!d&&(0,u.default)(i,(function(e){return e.checked=0})),(0,s.default)(i[e],{value:l,checked:n?1:0}),this.userUpdate=!0,this.setState({items:JSON.stringify(i)}),this.emitChange()}},{key:"_renderAddNewItemButton",value:function(){var e=this,t=this.addItem.bind(this,!1,!1),n={size:(0,i.spring)(1,{stiffness:300,damping:20}),opacity:(0,i.spring)(1,{stiffness:300,damping:20})};return o.default.createElement("span",{className:"et-fb-item-button-wrap--add"},o.default.createElement(i.Motion,{defaultStyle:{size:0,opacity:0},style:n},(function(n){var r={opacity:n.opacity,transform:"scale( ".concat(n.size," )")};return o.default.createElement(_.ETCoreButton,{round:!0,style:r,tooltip:e.props.tooltip,_onClick:t},o.default.createElement(w.default,{size:"14",icon:"add",color:"#FFFFFF"}))})),o.default.createElement("label",{className:"et-fb-form__label"},this.props.buttonLabel))}},{key:"_renderItems",value:function(){var e=this,t=this.state.items||"[]",n=JSON.parse(t),r=!(0,c.default)(this.props.radio)&&!0===this.props.radio,i=!(0,c.default)(this.props.checkbox)&&!0===this.props.checkbox,u=this.props.right_actions;return this.props.readonly&&(0,m.default)(this,"props.right_actions_readonly")?u=this.props.right_actions_readonly:this.props.readonly&&!u?u="move":u||(u="move|copy|delete"),(0,l.default)(n,(function(t,n){var l=1===t.checked,s=(0,a.default)({"et-core-control-sortable-list__row":!0,"et-core-control-sortable-list__row--radio":r,"et-core-control-sortable-list__row--checkbox":i}),c=(0,a.default)({"et-core-control-sortable-list__check":!0,"et-core-control-sortable-list--checked":l}),d=e.updateItems.bind(e,n,t,!l),f=e.updateItems.bind(e,n,t,l),p=e.addItem.bind(e,n),m=e.addItem.bind(e,n,!1,!0),g=e.removeItem.bind(e,n),v=e.editItem.bind(e,n),y=e.showLinkSettings.bind(e,n),b=(0,h.default)(t,"value",""),_=(0,h.default)(t,"field_id",""),w=""===(0,h.default)(t,"field_title","")?_:(0,h.default)(t,"field_title",""),O=""===b?w:b;return o.default.createElement(k.default,{classes:s,key:t.dragID,id:t.dragID,index:n,moveItem:e.moveItem,isCheckbox:i,isRadio:r,checkClasses:c,onCheck:d,onChange:f,onAdd:m,onCopy:p,onDelete:g,onSetting:v,onLink:y,value:O,useInput:e.props.useInput||!e.props.readonly,readonly:e.props.readonly,left_actions:e.props.left_actions,right_actions:u})}))}},{key:"_renderLinkSettings",value:function(){var e=this,t=this.state.items||"[]",n=JSON.parse(t);if(!n[this.state.editing_link])return!1;var r=n[this.state.editing_link],a=this.showLinkSettings.bind(this,this.state.editing_link),l={size:this.props.animation?(0,i.spring)(1,{stiffness:300,damping:20}):1,opacity:this.props.animation?(0,i.spring)(1,{stiffness:300,damping:20}):1};return o.default.createElement(i.Motion,{defaultStyle:{size:.5,opacity:0},style:l},(function(t){return o.default.createElement("div",{className:"et-core-control-sortable-list__link-settings",style:{opacity:t.opacity,transform:"scale( ".concat(t.size," )")}},o.default.createElement("h4",null,e.props.labels.link_settings),o.default.createElement("div",null,o.default.createElement("p",{className:"et-fb-form__label"},e.props.labels.link_url),o.default.createElement(_.ETCoreInput,{className:"et-fb-settings-option-input et-fb-settings-option-input--block",type:"text",name:"".concat(e.state.editing_link,".link_url"),value:r.link_url,_onChange:e.onChangeLinkSettings})),o.default.createElement("div",null,o.default.createElement("p",{className:"et-fb-form__label"},e.props.labels.link_text),o.default.createElement(_.ETCoreInput,{className:"et-fb-settings-option-input et-fb-settings-option-input--block",type:"text",name:"".concat(e.state.editing_link,".link_text"),value:r.link_text,_onChange:e.onChangeLinkSettings})),o.default.createElement(_.ETCoreButtonGroup,{block:!0},o.default.createElement(_.ETCoreButton,{block:!0,danger:!0,buttonName:C.default.SORTABLE_LIST_LINK_SETTINGS_CLOSE,tooltip:e.props.labels.link_cancel,_onClick:a},e.props.linkSettingsShowIcon?o.default.createElement(w.default,{icon:"exit",color:"#FFFFFF"}):null,e.props.linkSettingsShowIcon?null:e.props.labels.link_cancel),o.default.createElement(_.ETCoreButton,{block:!0,success:!0,buttonName:C.default.SORTABLE_LIST_LINK_SETTINGS_SAVE,tooltip:e.props.labels.link_save,_onClick:a},e.props.linkSettingsShowIcon?o.default.createElement(w.default,{icon:"check",color:"#FFFFFF"}):null,e.props.linkSettingsShowIcon?null:e.props.labels.link_save)))}))}},{key:"render",value:function(){var e=this,t=this.props.additional_attrs?this.props.additional_attrs:{},n=this.props.id;n||(n="et-fb-".concat(this.props.name));var r=!1!==this.state.editing_link;return o.default.createElement(O.default,null,o.default.createElement("div",{className:"et-core-control-sortable-list",ref:function(t){return e.itemsList=t}},this._renderItems(),r&&this._renderLinkSettings(),o.default.createElement("textarea",P({value:this.state.items,name:this.props.name,id:n,onChange:g.default},t)),this.props.useAddNewButton&&this._renderAddNewItemButton()))}}])&&j(n.prototype,r),E&&j(n,E),T}(o.PureComponent);B(F,"defaultProps",{onEditingLink:g.default,_onAddItem:g.default,animation:!0,linkSettingsShowIcon:!0});var I=F;t.default=I}).call(this,n(5))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=h(n(37)),i=h(n(18)),l=h(n(6)),u=n(1469),s=h(n(35)),c=h(n(257)),d=h(n(147)),f=h(n(1573)),p=h(n(58));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={hover:function(e,t,n){var r=t.getItem().index,o=e.index;if(r!==o){var i=a.default.findDOMNode(n).getBoundingClientRect(),l=(i.bottom-i.top)/2,u=t.getClientOffset().y-i.top;r<o&&u<l||r>o&&u>l||(e.moveItem(r,o),t.getItem().index=o)}}},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,e);var t,n,r,a=_(l);function l(){var e;v(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(k(e=a.call.apply(a,[this].concat(n))),"preventModalKeyPress",(function(t){e.props.useInput&&"Enter"===t.key&&t.preventDefault()})),C(k(e),"handleOnKeyUp",(function(t){e.props.useInput&&"Enter"===t.key&&(t.preventDefault(),e.props.onAdd())})),C(k(e),"_renderCheckbox",(function(){return o.default.createElement("a",{href:"#",className:e.props.checkClasses,onClick:e.props.onCheck})})),e}return t=l,(n=[{key:"_renderInput",value:function(){var e={};return this.props.readonly&&(e.readOnly=!0),o.default.createElement("input",g({type:"text",value:this.props.value,onChange:this.props.onChange,onKeyPress:this.preventModalKeyPress,onKeyUp:this.handleOnKeyUp},e))}},{key:"_renderActions",value:function(e){var t=this;return(0,s.default)(e,(function(e){if("link"===e&&!t.props.isCheckbox&&!t.props.isRadio)return!1;var n="on".concat((0,c.default)(e)),r="link"===e?"text-link":e;return o.default.createElement("a",{href:"#",key:e,className:"et-core-control-sortable-list__".concat(e),onClick:t.props[n]},o.default.createElement(p.default,{icon:r,color:"rgb(163, 176, 194)"}))}))}},{key:"_renderLeftSideActions",value:function(){var e=(0,d.default)(this.props.left_actions.split("|"));return o.default.createElement("div",{className:"et-core-control-sortable-list__actions--left"},this._renderActions(e))}},{key:"_renderRightSideActions",value:function(){var e=(0,d.default)(this.props.right_actions.split("|"));return o.default.createElement("div",{className:"et-core-control-sortable-list__actions--right"},this._renderActions(e))}},{key:"render",value:function(){var e=this.props,t=e.isDragging,n=e.connectDragSource,r=e.connectDropTarget,a={opacity:this.props.isDragging?0:1},l=(0,i.default)({"et-core-control-sortable-list__row--dragged":t,"et-core-control-sortable-list__row--no-input":!this.props.useInput},this.props.classes);return n(r(o.default.createElement("div",{className:l,style:a},(this.props.isRadio||this.props.isCheckbox)&&this._renderCheckbox(),this._renderLeftSideActions(),this.props.useInput&&this._renderInput(),this.props.useInput||o.default.createElement("span",null,this.props.value),this._renderRightSideActions())))}}])&&y(t.prototype,n),r&&y(t,r),l}(o.PureComponent);C(E,"defaultProps",{left_actions:"",right_actions:"move|copy|delete"}),C(E,"propTypes",{id:l.default.any.isRequired,classes:l.default.string.isRequired,checkClasses:l.default.string.isRequired,isDragging:l.default.bool.isRequired,isCheckbox:l.default.bool.isRequired,isRadio:l.default.bool.isRequired,moveItem:l.default.func.isRequired,onCheck:l.default.func.isRequired,onChange:l.default.func.isRequired,onAdd:l.default.func.isRequired,onSettings:l.default.func,onCopy:l.default.func.isRequired,onDelete:l.default.func.isRequired,connectDragSource:l.default.func.isRequired});var M=(0,u.DragSource)(f.default.MODULE_ITEM,{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})),P=(0,u.DropTarget)(f.default.MODULE_ITEM,S,(function(e){return{connectDropTarget:e.dropTarget()}}))(M(E));t.default=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={MODULE:"module",MODULE_ITEM:"module_item"}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,((r=n(759))&&r.__esModule?r:{default:r}).default)({SORTABLE_LIST_LINK_SETTINGS_CLOSE:null,SORTABLE_LIST_LINK_SETTINGS_SAVE:null});t.default=o},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=d(n(6)),i=d(n(18)),l=d(n(14)),u=d(n(52)),s=d(n(12)),c=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1577);var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(d,e);var t,n,r,a=m(d);function d(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),b(v(t=a.call(this,e)),"isChangingRange",!1),b(v(t),"updateOptionAndState",(function(e){e=(0,l.default)(e)?t.state.value:e,t.userUpdate=!0,t.setState({value:t.emptyIfDefault(e)}),t.props._onChange(t.props.name,e)})),b(v(t),"_updateFromRange",(function(e){t.isChangingRange=!0,t.updateOptionAndState((0,c.default)(e,"target.value")),t.isChangingRange=!1})),b(v(t),"_onChange",(function(e){var n=(0,c.default)(e,"target.value");t.updateOptionAndState(n),t.checkRangeBoundaries(n)}));var n=(0,c.default)(v(t),"props.range_settings",{min:0,max:100,step:1}),r=(0,s.default)(t.props.value);return t.state={rangeMin:n.min,rangeMax:n.max,rangeStep:n.step,value:t.emptyIfDefault(r)},t}return t=d,(n=[{key:"componentDidMount",value:function(){var e=this.props.value;this.deferredUpdate=(0,u.default)(this.updateOptionAndState,700),parseFloat(this.state.rangeStep)>.1&&parseFloat(e)%1>0&&this.setState({rangeStep:"0.1"}),this.checkRangeBoundaries(this.state.value)}},{key:"componentDidUpdate",value:function(e){var t=this.emptyIfDefault(this.props.value);e.value===t||this.userUpdate||this.setState({value:t}),this.userUpdate=!1}},{key:"componentWillUnmount",value:function(){this.deferredUpdate.cancel()}},{key:"getDefaultValue",value:function(){return(0,s.default)(this.props.default)}},{key:"emptyIfDefault",value:function(e){return e===this.getDefaultValue()?"":e}},{key:"checkRangeBoundaries",value:function(e){if((0,s.default)(e)){var t=parseFloat(e);t>this.state.rangeMax&&this.setState({rangeMax:t}),t<this.state.rangeMin&&this.setState({rangeMin:t}),parseFloat(this.state.rangeStep)>.1&&t%1>0&&this.setState({rangeStep:"0.1"})}}},{key:"_renderInput",value:function(){var e=this.props.id||"et-fb-".concat(this.props.name),t=this.props.name,n=this.emptyIfDefault(this.state.value),r=this.getDefaultValue(),a=""===n?r:n;return o.default.createElement("div",{className:"et-fb-settings-option-inputs-wrap"},o.default.createElement("input",{id:e,name:t,type:"range",min:this.state.rangeMin,max:this.state.rangeMax,step:this.state.rangeStep,className:"et-fb-range",value:parseFloat(a),"data-shortcuts-allowed":!0,onChange:this._updateFromRange}),o.default.createElement("div",{className:"et-fb-range-number et-fb-settings-option-input"},o.default.createElement("input",{type:"number",value:n,placeholder:r,onChange:this._onChange})))}},{key:"render",value:function(){var e=this.getDefaultValue(),t=this.props.value,n="";return t&&t!==e&&(n=o.default.createElement("button",{className:"et-fb-settings-option-button--reset",onClick:this.reset})),o.default.createElement("div",{className:(0,i.default)({"et-fb-settings-option-inner":!0,"et-fb-settings-option-inner-range":!0})},this._renderInput(),n)}}])&&p(t.prototype,n),r&&p(t,r),d}(o.PureComponent);b(_,"defaultProps",{default_unit:""}),b(_,"propTypes",{name:a.default.string.isRequired,default_unit:a.default.string,precision:a.default.number});var w=_;t.default=w},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),a=i(n(6));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,n,r,a=s(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onClick=t.onClick.bind(d(t)),t}return t=i,(n=[{key:"onClick",value:function(e){e.preventDefault(),this.props.onClick(this.props.value)}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.className,r=e.children;return o.default.createElement(t,{className:n,onClick:this.onClick},r)}}])&&l(t.prototype,n),r&&l(t,r),i}(o.default.Component);p.propTypes={tag:a.default.string.isRequired,className:a.default.string,children:a.default.arrayOf(a.default.node).isRequired,value:a.default.oneOfType([a.default.number,a.default.string,a.default.object,a.default.array]).isRequired,onClick:a.default.func.isRequired},p.defaultProps={className:""};var h=p;t.default=h},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=j(n(0)),o=j(n(339)),a=j(n(14)),i=j(n(10)),l=j(n(9)),u=j(n(180)),s=j(n(2)),c=j(n(13)),d=j(n(40)),f=j(n(148)),p=j(n(182)),h=j(n(1)),m=j(n(374)),g=j(n(189)),v=j(n(960)),y=j(n(446)),b=j(n(445)),_=j(n(983)),w=j(n(448)),k=j(n(23)),O=j(n(3)),C=j(n(8)),S=j(n(27)),E=j(n(997)),M=j(n(1474));n(1587);var P=j(n(22)),T=j(n(256)),x=n(110);function j(e){return e&&e.__esModule?e:{default:e}}var D=function(e){return!(0,v.default)(e)&&0!==parseInt(e)&&"false"!==e},L=function(e){return e&&!1!==e?"true":"false"},R=function(e,t){return e||t},N=T.default.instance(),A=(0,o.default)({displayName:"ETBuilderControlInputMargins",mixins:[k.default],getInitialState:function(){var e=this._calculatePreviewMode(),t=(0,h.default)(this.props,"value.activeTab","desktop"),n="wireframe"===e?t:e;return{activeTab:n,value:this.getCurrentInputValue(n)}},getDefaultValues:function(){var e=this._calculatePreviewMode();return"zoom"!==e&&"wireframe"!==e||(e="desktop"),{desktop:["","","",""],tablet:["","","",""],phone:["","","",""],activeTab:e,isResponsive:!1}},UNSAFE_componentWillMount:function(){var e=this;this._onTopChange=this._onInputChange(0).bind(this),this._onRightChange=this._onInputChange(1).bind(this),this._onBottomChange=this._onInputChange(2).bind(this),this._onLeftChange=this._onInputChange(3).bind(this),this.getTopBottomLink=(0,g.default)(D,(0,_.default)(4),(function(t){return(0,w.default)(t,e.getDefaultValue(),R)}),(0,b.default)("|"),this.getStateValue),this.getLeftRightLink=(0,g.default)(D,(0,_.default)(5),(function(t){return(0,w.default)(t,e.getDefaultValue(),R)}),(0,b.default)("|"),this.getStateValue)},componentDidMount:function(){this.updatePreviewMode=(0,u.default)(this._onPreviewModeChange,500,{leading:!1}),O.default.appWindow().addEventListener("resize",this.updatePreviewMode),this.saveValue=(0,u.default)(this.updateOptionValue,0,{leading:!1})},componentWillUnmount:function(){O.default.appWindow().removeEventListener("resize",this.updatePreviewMode)},UNSAFE_componentWillReceiveProps:function(e){var t=(0,h.default)(e,"value.activeTab"),n=N.isAnimating()?this.state.activeTab:this._calculatePreviewMode(),r="wireframe"===n?t:n,o=this.hasResponsiveValue()?r:"desktop",a=(0,h.default)(e,"value",{}),i=(0,c.default)(a)?a[o]:a;r===this.state.activeTab&&i===this.getStateValue()||this.setState({activeTab:r,value:i})},componentDidUpdate:function(e){var t=(0,h.default)(e,["value","activeTab"]),n=(0,h.default)(this.props,["value","activeTab"]);t&&n&&t!==n&&this.setState({activeTab:n})},_calculatePreviewMode:function(){var e=C.default.getPreviewMode();return"zoom"!==e&&(0,h.default)(this.props,"value.isResponsive",!1)?"wireframe"===e?"wireframe":e:"desktop"},_onPreviewModeChange:function(){var e=this.getValue("isResponsive")?this._calculatePreviewMode():"desktop";(0,l.default)(["desktop","tablet","phone"],e)&&this.setState({activeTab:e,value:this.getCurrentInputValue(e)})},getCSSProperty:function(){return(0,h.default)({custom_padding:"padding",custom_margin:"margin"},this.props.type)},getValues:function(e){var t=this.getDefaultValues(),n=(0,a.default)(e)?this.props:e,r=(0,a.default)(n.value)||""===n.value?t:O.default.intentionallyClone(n.value),o=["desktop","tablet","phone"];return(0,d.default)(r)&&(r={desktop:r}),(0,i.default)(r,(function(e,n){if((0,l.default)(o,n)){var i=(0,a.default)(e)||(0,s.default)(e)?e:e.split("|");(0,s.default)(i)&&2===(0,f.default)(i)&&(i=[i[0],"",i[1],""]),r[n]=!(0,a.default)(e)&&O.default.hasValue(e)?i:t[n]}else"activeTab"===n&&(r.activeTab=(0,l.default)(o,e)?e:t.activeTab)})),r},getValue:function(e,t){var n=this.getValues(t);return(0,a.default)(n)||(0,a.default)(n[e])?"":n[e]},getStateValue:function(){return(0,y.default)(this.state.value)},getDefaultValue:function(e){e=e||this.getValue("activeTab");var t=O.default.getPrevBreakpoint(e),n=(0,h.default)(this.props,"default_".concat(e),"");return t?n?n.split("|"):this.getDefaultValue(t):(0,h.default)(this.props,"default","").split("|")},getCurrentInputValue:function(e,t){var n,r="desktop";return(0,a.default)(e)?(this.getActiveTab("tablet")&&this.getValue("isResponsive")&&(r="tablet"),this.getActiveTab("phone")&&this.getValue("isResponsive")&&(r="phone")):r=e,n=this.getValue(r,t),(0,a.default)(n)||!(0,s.default)(n)?"||||":n.join("|")},getActiveTab:function(e){var t="zoom"===this._calculatePreviewMode()?"desktop":(0,h.default)(this,"state.activeTab");return this.hasResponsiveValue()?e===t:e===this.getValue("activeTab")},getPropsNameSuffix:function(){var e=this.state.activeTab;return!(0,l.default)(["zoom","wireframe","desktop"],e)&&this.hasResponsiveValue()?"_".concat(e):""},getPropsNameLastEdited:function(){return"".concat(this.props.name,"_last_edited")},getPropsValueLastEdited:function(e,t){return t=e?t:"desktop","".concat(e?"on":"off","|").concat(t)},hasMobileOptions:function(){return O.default.hasValue(this.props.mobile_options)},hasResponsiveValue:function(){return this.hasMobileOptions()&&(0,c.default)(this.props.value)&&this.props.value.isResponsive},reset:function(e){e.preventDefault();var t=this.getDefaultValues(),n=this.getValue("activeTab");this.getValues()[n]=t[n],this.props._onChange(this.props.name+this.getPropsNameSuffix(),t[n].join("|")),this.setState({value:t[n].join("|")})},changeTab:function(e){var t=C.default.getActiveModule(),n=this.getValue("isResponsive"),r=e.target.getAttribute("data-tab"),o=this._calculatePreviewMode();return"hover"===r?(S.default.switchResponsivePreviewMode("desktop"),S.default.toggleModuleHover(!0),void S.default.moduleSettingsChange(t,"hover_enabled",1)):"sticky"===r?(S.default.switchResponsiveMode("desktop"),S.default.toggleModuleSticky(!0),void S.default.moduleSettingsChange(t,"sticky_enabled",1)):(S.default.toggleModuleHover(!1),S.default.moduleSettingsChange(t,"hover_enabled",0),S.default.moduleSettingsChange(t,"sticky_enabled",0),this.setState({activeTab:r,value:this.getCurrentInputValue(r)}),"wireframe"!==o&&S.default.switchResponsivePreviewMode(r),this.props._onChange(this.getPropsNameLastEdited(),this.getPropsValueLastEdited(n,r)),void this.removePaddingMobile())},removePaddingMobile:function(){var e=(0,h.default)(this,"props.name",!1),t=(0,h.default)(this,"props.moduleAttrs.padding_mobile",!1),n=(0,h.default)(this,"props.moduleAttrs.column_padding_mobile",!1);"custom_padding"===e&&O.default.hasValue(t)&&this.props._onChange("padding_mobile",""),(0,l.default)(["padding_1","padding_2","padding_3","padding_4","padding_5","padding_6"],e)&&O.default.hasValue(n)&&this.props._onChange("column_padding_mobile","")},getInput:function(e,t,n,o){var a="et-fb-".concat(this.props.name),i="padding"===this.getCSSProperty()?0:void 0,l=n===o?"":n,u=(0,h.default)({top:this._onTopChange,right:this._onRightChange,bottom:this._onBottomChange,left:this._onLeftChange},t);return r.default.createElement("div",{className:"et-fb-settings-option-input-wrap ".concat(t)},r.default.createElement(M.default,{id:"".concat(a,"-input-").concat(t),name:"".concat(this.props.name,"-input-").concat(t),type:"text",className:"et-fb-settings-option-input et-fb-settings-option-input-margin et-fb-settings-option-input-margin--".concat(t),value:(0,p.default)(l),defaultValue:o,"data-tab":e,"data-order":"0",onChange:u,speed:4,min:i,label:ETBuilderBackend.i18n.controls.inputMargin[t],defaultUnit:"px",allowedUnits:this.props.allowed_units,property:this.getCSSProperty(),readonly:(0,h.default)(this.props,"readonly",!1)}))},inputsWrap:function(e){var t=this.getStateValue().split("|"),n=this.getDefaultValue(e);return r.default.createElement("div",{className:"et-fb-settings-option-inputs-wrap"},this.getInput(e,"top",t[0],n[0]),r.default.createElement(E.default,{active:this.getTopBottomLink(),onClick:this._topBottomLink}),this.getInput(e,"bottom",t[2],n[2]),this.getInput(e,"left",t[3],n[3]),r.default.createElement(E.default,{active:this.getLeftRightLink(),onClick:this._leftRightLink}),this.getInput(e,"right",t[1],n[1]))},render:function(){var e,t,n,o=this.getActiveTab("desktop")?"active":"",a=this.getActiveTab("tablet")?"active":"",i=this.getActiveTab("phone")?"active":"",l=this.getValue("isResponsive"),u=ETBuilderBackend.i18n.controls.responsiveTabs;if(this.getValue("isResponsive")){var s=P.default.getFieldBaseName((0,h.default)(this,"props.name","")),c=P.default.isEnabled("moduleAttrs.".concat(s),this.props),d=!0===C.default.getHoverMode()?"active":"",f=c?r.default.createElement("li",{className:d,"data-tab":"hover",onClick:this.changeTab},ETBuilderBackend.i18n.controls.tabs.hover):"",p=c?"et-fb-settings-option-responsive-tab-nav et-fb-settings-option-responsive-tab-nav-hover-active ":"et-fb-settings-option-responsive-tab-nav";"active"===d&&(o=""),r.default.createElement("ul",{className:p},r.default.createElement("li",{className:o,"data-tab":"desktop",onClick:this.changeTab},u.desktop),f,r.default.createElement("li",{className:a,"data-tab":"tablet",onClick:this.changeTab},u.tablet),r.default.createElement("li",{className:i,"data-tab":"phone",onClick:this.changeTab},u.phone))}return!this.getActiveTab("desktop")&&this.hasResponsiveValue()||(e=this.inputsWrap("desktop")),this.getActiveTab("tablet")&&l&&(t=this.inputsWrap("tablet")),this.getActiveTab("phone")&&l&&(n=this.inputsWrap("phone")),r.default.createElement("div",{className:"et-fb-settings-option-inner et-fb-settings-option-inner-responsive et-fb-settings-option-inner-input-margins"},e,t,n)},_topBottomLink:function(){if(!this.props.readonly){var e=this.getLastVerticalUpdated(),t=this.getStateValue().split("|");t[4]=L(!this.getTopBottomLink()),this.getTopBottomLink()||t[0]===t[2]||((0,v.default)(e)?(0,v.default)(t[0])?t[0]=t[2]:t[2]=t[0]:"top"===e?t[2]=t[0]:t[0]=t[2]),this.updatePadding(t.join("|"))}},_leftRightLink:function(){if(!this.props.readonly){var e=this.getLastHorizontalUpdated(),t=this.getStateValue().split("|");t[5]=L(!this.getLeftRightLink()),this.getLeftRightLink()||t[1]===t[3]||((0,v.default)(e)?(0,v.default)(t[3])?t[3]=t[1]:t[1]=t[3]:"left"===e?t[1]=t[3]:t[3]=t[1]),this.updatePadding(t.join("|"))}},_onInputChange:(0,m.default)((function(e,t){if(!this.props.readonly){var n=this.getStateValue().split("|");switch(n[e]=this.validateValue(t)?t:"",e){case 0:n[2]=this.getTopBottomLink()?n[e]:n[2],this._lastVUpdated="top";break;case 1:n[3]=this.getLeftRightLink()?n[e]:n[3],this._lastHUpdated="right";break;case 2:n[0]=this.getTopBottomLink()?n[e]:n[0],this._lastVUpdated="bottom";break;case 3:n[1]=this.getLeftRightLink()?n[e]:n[1],this._lastHUpdated="left"}n[4]=n[4]||this.getTopBottomLink(),n[5]=n[5]||this.getLeftRightLink(),this.updatePadding(n.join("|"))}})),validateValue:function(e){if((0,x.isAcceptableCSSStringValue)(this.getCSSProperty(),e))return!0;if(isNaN(parseFloat(e)))return!1;switch(this.getCSSProperty()){case"padding":return parseFloat(e)>=0;default:return!0}},getLastVerticalUpdated:function(){return this._lastVUpdated},getLastHorizontalUpdated:function(){return this._lastHUpdated},updatePadding:function(e){this.removePaddingMobile(),this.setState({value:e}),this.saveValue.cancel(),this.saveValue()},updateOptionValue:function(){this.props._onChange(this.props.name+this.getPropsNameSuffix(),this.getStateValue())}});A.defaultProps={default:"|||||"};var B=A;t.default=B},function(e,t,n){},function(e,t,n){var r=n(56)("add",n(514));r.placeholder=n(47),e.exports=r},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=d(n(6)),i=d(n(1585)),l=d(n(850));n(1586);var u=d(n(45)),s=d(n(189)),c=n(90);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,r,a=m(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=a.call(this)).state={spinner:-5e3,isDragging:!1},e}return t=u,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.handleDrag=(0,s.default)(parseInt,this.handleDrag.bind(this)),this.handleDragStart=this.handleDragStart.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this.normalize=(new c.Normalizer)(1.8)}},{key:"handleDrag",value:function(e,t){this.props.onChange(e,t),this.setState({spinner:this.normalize(e)+this.state.spinner})}},{key:"handleDragStart",value:function(){this.setState({isDragging:!0})}},{key:"handleDragEnd",value:function(){this.setState({isDragging:!1,spinner:-5e3})}},{key:"render",value:function(){var e=this.state.isDragging?"dragging":"";return o.default.createElement(l.default,{className:"et-fb-settings-option--spinner-control ".concat(e),onDragX:this.handleDrag,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd},o.default.createElement(i.default,{pos:this.state.spinner}))}}])&&p(t.prototype,n),r&&p(t,r),u}(o.Component);y.propTypes={onChange:a.default.func.isRequired},y.defaultProps={onChange:u.default};var b=y;t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=i(n(12)),a=["pos","style","className"];function i(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.default=function(e){var t=e.pos,n=e.style,i=e.className,s=u(e,a);return r.default.createElement("div",l({},s,{style:n,className:"et-fb-spinner-control__spinner ".concat((0,o.default)(i))}),r.default.createElement("div",{className:"et-fb-spinner-control__spinner-item",style:{transform:"translateX(".concat(t,"px)")}}))}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=(u(n(6)),u(n(37))),i=u(n(23)),l=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1589);var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,r,u=f(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).state={date_time:null},t.shouldComponentUpdate=i.default.shouldComponentUpdate.bind(h(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this,t=l.default.$topWindow(a.default.findDOMNode(this.refs.input));t.datetimepicker({showButtonPanel:!1,dateFormat:"yy-mm-dd",onSelect:function(t,n){e.props._onChange(e.props.name,t)}}),t.datetimepicker("setDate",this.props.value)}},{key:"render",value:function(){return o.default.createElement("div",{className:"et-fb-settings-option-input-datetime",ref:"input"})}}])&&c(t.prototype,n),r&&c(t,r),s}(o.Component);t.default=g},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=_(n(6)),i=_(n(23)),l=_(n(35)),u=_(n(9)),s=_(n(4)),c=_(n(14)),d=_(n(12)),f=_(n(396)),p=_(n(166)),h=_(n(340)),m=_(n(1)),g=_(n(158)),v=_(n(147)),y=n(136),b=_(n(8));function _(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1591);var P=new y.AllHtmlEntities,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(y,e);var t,n,r,a=C(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=a.call(this,e)).shouldComponentUpdate=i.default.shouldComponentUpdate.bind(E(t)),t._onChange=t._onChange.bind(E(t)),t}return t=y,(n=[{key:"render",value:function(){var e=this,t=(0,h.default)(this._getCategories()),n=b.default.getTaxonomyLabels(this._getTermName()),r=this.props.value,a=(0,c.default)(r)?[]:r.split(","),i=[];return(0,s.default)(t)||(i=t.map((function(t,n){if((0,s.default)(t))return!1;var r=(0,m.default)(e.props,"module.props.module.props.shortcut_index",e._getTermName()),i="select-category-".concat(r,"-").concat(t.term_id);return!(0,s.default)(t)&&o.default.createElement("p",{key:i},o.default.createElement("label",{htmlFor:i},o.default.createElement("input",{type:"checkbox",id:i,name:"et_fb_select_category[".concat(n,"]"),value:t.term_id,onChange:e._onChange,checked:(0,u.default)(a,t.term_id.toString())})," ",P.decode(t.name)))}))),(0,s.default)((0,v.default)(i))&&(i=[]),(0,s.default)((0,v.default)(i))&&(i=(0,c.default)(n.not_found)?"":P.decode(n.not_found)),o.default.createElement("div",{className:"et-fb-checkboxes-category-wrap"},i)}},{key:"_getTermName",value:function(){return(0,m.default)(this.props,"renderer_options.use_terms",!1)?(0,m.default)(this.props,"renderer_options.term_name"):this.props.taxonomy_name}},{key:"_getCategories",value:function(){var e=b.default.getTaxonomy(this._getTermName()),t=(0,m.default)(this.props,"renderer_options.custom_items",[]);return(0,g.default)(t,this._getMetaCategories(),e)}},{key:"_useMetaCategories",value:function(){return!(0,c.default)(this.props.meta_categories)&&!(0,s.default)(this.props.meta_categories)}},{key:"_getMetaCategories",value:function(){return this._useMetaCategories()?(0,l.default)(this.props.meta_categories,(function(e,t){return{term_id:t,name:e}})):[]}},{key:"_onChange",value:function(e){var t=this.props.value,n=this._getCategories(),r=(0,l.default)(n,(function(e){return(0,d.default)(e.term_id)})),o=e.target.checked,a=(0,d.default)(e.target.value),i=(0,c.default)(t)?[]:t.split(",");o?(0,s.default)(i)?i=[a]:i.push(a):i=(0,f.default)(i,(function(e){return e!==a}));var u=(0,p.default)(i,r);this.props._onChange(this.props.name,u.join(","))}}])&&k(t.prototype,n),r&&k(t,r),y}(o.Component);T.propTypes={taxonomy_name:a.default.string,value:a.default.string,_onChange:a.default.func};var x=T;t.default=x},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1595),a=O(n(0)),i=O(n(6)),l=O(n(45)),u=O(n(4)),s=O(n(40)),c=O(n(14)),d=O(n(122)),f=O(n(52)),p=O(n(1)),h=O(n(94)),m=O(n(49)),g=O(n(9)),v=O(n(10)),y=O(n(396));n(1596),n(1476),n(1597),n(1600),n(1601),n(1602),n(1604),n(1497),n(1605),n(1606),n(1607),n(1475),n(1608),n(1499),n(1609),n(1610),n(1611),n(1612);var b=O(n(370)),_=O(n(1613)),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(3));O(n(27));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function O(e){return e&&e.__esModule?e:{default:e}}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}var N=100,A=500,B=2e3,F={common:{keyMap:"sublime",autofocus:!1,cursorBlinkRate:0,viewportMargin:1/0,theme:"et",styleActiveLine:!0,matchBrackets:!0,autoCloseBrackets:!0,autoCloseTags:!0,lineWrapping:!0,lineNumbers:!0,indentUnit:2,tabSize:2},modes:{css:{mode:{name:"css",inline:!0},colorpicker:{mode:"edit"},lineBreakPlaceholder:/\|\||<!-- \[et_pb_line_break_holder\] -->/},html:{mode:{name:"htmlmixed"},colorpicker:{mode:"edit"},matchTags:{bothTags:!0},lineBreakPlaceholder:/<!-- \[et_pb_line_break_holder\] -->/}}},I={line:0,ch:0},W={ignoreKeys:[13,37,39],prefix:{css:/[A-z-]/,default:/[A-z]/},tokens:{xml:["attribute","tag"]}},V=function(e){var t=(0,p.default)(e,e.is_fb_content?"content":"value");return t===e.default?"":t},H=function(e){e.hideCompletion(),e.hideColorPicker()},G=new(function(){function e(){D(this,e),this.instances=[],this.listener=!1,this.$window=w.default.$appWindow(),this.onScroll=this.onScroll.bind(this)}return R(e,[{key:"add",value:function(e){this.instances.push(e),this.check()}},{key:"remove",value:function(e){(0,y.default)(this.instances,e),this.check()}},{key:"onScroll",value:function(){(0,v.default)(this.instances,H)}},{key:"check",value:function(){this.instances.length>0?this.listener||(this.$window.on("wheel scroll",this.onScroll),this.listener=!0):this.listener&&(this.$window.off("wheel scroll",this.onScroll),this.listener=!1)}}]),e}()),U=(0,w.isIEOrEdge)()?e("body")[0]:{scrollTop:0};function z(t){var n=this,r=t.lineNo,o=t.ch,a=t.nameColor,i=t.color;if(this.colorpicker){var l=i,u=this.cm.charCoords({line:r,ch:o},"window");this.colorpicker.show({left:u.left,top:u.bottom+U.scrollTop,isShortCut:t.isShortCut||!1,hideDelay:this.opt.hideDelay||2e3},a||i,(function(e){n.cm.replaceRange(e,{line:r,ch:o},{line:r,ch:o+l.length},"*colorpicker"),l=e})),e(this.colorpicker.$root.el).css({top:"".concat(u.bottom+U.scrollTop,"px"),left:(0,d.default)(u.left)?"".concat(u.left,"px"):u.left})}}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(n,e);var t=P(n);function n(e){var r;D(this,n),(r=t.call(this,e)).editor=!1,r.dirty=!1,r.markers=[],r.mode=(0,p.default)(e,"mode","css"),r.options=S(S(S({},F.common),(0,p.default)(F.modes,r.mode,{})),{},{readOnly:(0,p.default)(e,"readonly",!1)}),(0,m.default)(r.options,"mode.inline")&&(0,m.default)(e,"inline")&&(r.options.mode.inline=e.inline),r.completion=(0,p.default)(W.prefix,r.mode,W.prefix.default),r.onChange=r.onChange.bind(x(r)),r.onClick=r.onClick.bind(x(r)),r.onKeyUp=r.onKeyUp.bind(x(r)),r.onKeyDown=r.onKeyDown.bind(x(r)),r._onFocus=r._onFocus.bind(x(r)),r._onBlur=r._onBlur.bind(x(r)),r.onBeforeChange=r.onBeforeChange.bind(x(r)),r.editorDidMount=r.editorDidMount.bind(x(r)),r.debouncedShowCompletion=(0,f.default)(r.showCompletion,A),r.debouncedUpdateSettings=(0,f.default)(r.updateSettings,N),r.incrementalKey=0;var o=r.addLineBreaks(V(e)),a=r.addLineBreaks(r.props.default);return r.state={value:o,default:a,enabled:!(0,u.default)(o)||!(0,u.default)(a),focused:!1},r}return R(n,[{key:"componentDidMount",value:function(){G.add(this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.addLineBreaks(V(e));if(this.state.enabled||(0,u.default)(t)&&(0,u.default)(this.state.default)||this.enableEditor(),this.state.value!==t||e.activeTabMode!==this.props.activeTabMode){var n=this.addLineBreaks(e.default);this.setState({default:n}),this.dirty||(this.incrementalKey++,this.setValue(t))}}},{key:"componentDidUpdate",value:function(){if(this.editor){var e=this.editor;if((0,v.default)(this.markers,(function(e){e.clear()})),this.markers=[],(0,u.default)((0,p.default)(this,"props.search")))return;for(var t=e.getSearchCursor(this.props.search);t.findNext();)this.markers.push(e.doc.markText(t.from(),t.to(),{className:"cm-searching",clearOnEnter:!0}))}}},{key:"componentWillUnmount",value:function(){this.hideCompletion(),this.hideColorPicker(),G.remove(this),this.debouncedShowCompletion.cancel(),this.debouncedUpdateSettings.flush(),this.editor=!1,this.linter&&this.linter.destroy()}},{key:"onBeforeChange",value:function(e,t,n){this.dirty=!0,this.setValue(n)}},{key:"onChange",value:function(){N>0?this.debouncedUpdateSettings():this.updateSettings(),this.lint()}},{key:"onKeyUp",value:function(e,t){this.checkCompletion(e,t)}},{key:"onKeyDown",value:function(e,t){"Enter"!==t.key&&13!==t.keyCode||t.stopPropagation()}},{key:"onClick",value:function(){this.options.autofocus=!0,this.enableEditor()}},{key:"setValue",value:function(e){this.setState({value:e})}},{key:"addLineBreaks",value:function(e){if((0,c.default)(e)||!(0,s.default)(e))return e;var t=this.options.lineBreakPlaceholder;return e.match(t)?e.split(t).join("\n"):e}},{key:"enableEditor",value:function(){this.setState({enabled:!0})}},{key:"lint",value:function(e){this.linter&&this.linter.lint(e)}},{key:"editorDidMount",value:function(e){this.editor=e;var t=e.state.colorpicker;t&&(0,h.default)(t,"open_color_picker",z.bind(t)),this.linter=new _.default(this.options.mode,e,B),this.lint(0)}},{key:"updateSettings",value:function(){var e=this.props;e._onChange(e.name,this.state.value,e.type),this.dirty=!1}},{key:"hideCompletion",value:function(){this.debouncedShowCompletion.cancel(),this.editor&&this.editor.state.completionActive&&this.editor.state.completionActive.close()}},{key:"hideColorPicker",value:function(){this.editor&&this.editor.state.colorpicker&&this.editor.state.colorpicker.close_color_picker()}},{key:"checkCompletion",value:function(e,t){if((0,g.default)(W.ignoreKeys,t.keyCode))this.hideCompletion();else{var n=e.doc,r=n.getCursor(),o=r.line,a=r.ch,i=(0,p.default)(e.getModeAt(r),"name"),l=n.getLine(o),u=l.substr(Math.max(a-1,0),1),s=l.substr(a,1);if(this.completion.test(u)&&!this.completion.test(s)){var c=(0,p.default)(W,"tokens.".concat(i));if(c){var d=e.getTokenTypeAt(r);if(!(0,g.default)(c,d))return void this.hideCompletion()}this.debouncedShowCompletion()}else this.hideCompletion()}}},{key:"showCompletion",value:function(){if(!this.editor.state.completionActive){var e=w.default.$topWindow("".concat(ETBuilderBackend.css.layoutPrefix," #et-fb-app"))[0];this.editor.showHint({completeSingle:!1,container:e})}}},{key:"render",value:function(){var e;if(this.state.enabled){var t=S(S({},this.options),{},{lineNumbers:this.state.focused||!(0,u.default)(this.state.value)||(0,u.default)(this.state.default),placeholder:this.state.default});e=a.default.createElement(o.Controlled,{key:this.incrementalKey,value:this.state.value,options:t,cursor:this.options.autofocus?I:null,autoFocus:this.options.autofocus,name:this.props.name,id:"et-fb-".concat(this.props.name),onChange:this.onChange,onBeforeChange:this.onBeforeChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,editorDidMount:this.editorDidMount,onFocus:this._onFocus,onBlur:this._onBlur})}else e=a.default.createElement("textarea",{className:"et-fb-settings-option-textarea",value:this.state.value,name:this.props.name,onChange:l.default,onClick:this.onClick,onFocus:this._onFocus,onBlur:this._onBlur,placeholder:this.state.default});return a.default.createElement(b.default,{componentName:this.props.name},a.default.createElement("div",{className:"et-fb-codemirror"},e))}},{key:"_onFocus",value:function(){this.setState({focused:!0})}},{key:"_onBlur",value:function(){this.setState({focused:!1})}}]),n}(a.default.Component);q.propTypes={value:i.default.string,name:i.default.string.isRequired,search:i.default.string,inline:i.default.bool},q.defaultProps={value:"",search:"",inline:!0};var K=q;t.default=K}).call(this,n(5))},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(0),l="undefined"==typeof navigator;l||(a=n(1454));var u=function(){function e(e,t){this.editor=e,this.props=t,this.notifyOfDeprecation()}return e.prototype.notifyOfDeprecation=function(){void 0!==this.props.autoScrollCursorOnSet&&console.warn("`autoScrollCursorOnSet` has been deprecated. Use `autoScroll` instead\n\nSee https://github.com/scniro/react-codemirror2#props"),void 0!==this.props.resetCursorOnSet&&console.warn("`resetCursorOnSet` has been deprecated. Use `autoCursor` instead\n\nSee https://github.com/scniro/react-codemirror2#props"),void 0!==this.props.onSet&&console.warn("`onSet` has been deprecated. User `editorDidMount` instead. See https://github.com/scniro/react-codemirror2#events"),void 0!==this.props.onBeforeSet&&console.warn("`onBeforeSet` has been deprecated. User `onBeforeChange` for `Controlled`. instead. See https://github.com/scniro/react-codemirror2#events")},e.prototype.wire=function(e){var t=this;switch(e){case"onBlur":this.editor.on("blur",(function(e,n){t.props.onBlur(t.editor,n)}));break;case"onCursor":this.editor.on("cursorActivity",(function(e){t.props.onCursor(t.editor,t.editor.getCursor())}));break;case"onCursorActivity":this.editor.on("cursorActivity",(function(e){t.props.onCursorActivity(t.editor)}));break;case"onDragEnter":this.editor.on("dragenter",(function(e,n){t.props.onDragEnter(t.editor,n)}));break;case"onDragOver":this.editor.on("dragover",(function(e,n){t.props.onDragOver(t.editor,n)}));break;case"onDrop":this.editor.on("drop",(function(e,n){t.props.onDrop(t.editor,n)}));break;case"onFocus":this.editor.on("focus",(function(e,n){t.props.onFocus(t.editor,n)}));break;case"onGutterClick":this.editor.on("gutterClick",(function(e,n,r,o){t.props.onGutterClick(t.editor,n,r,o)}));break;case"onKeyDown":this.editor.on("keydown",(function(e,n){t.props.onKeyDown(t.editor,n)}));break;case"onKeyPress":this.editor.on("keypress",(function(e,n){t.props.onKeyPress(t.editor,n)}));break;case"onKeyUp":this.editor.on("keyup",(function(e,n){t.props.onKeyUp(t.editor,n)}));break;case"onScroll":this.editor.on("scroll",(function(e){t.props.onScroll(t.editor,t.editor.getScrollInfo())}));break;case"onSelection":this.editor.on("beforeSelectionChange",(function(e,n){t.props.onSelection(t.editor,n)}));break;case"onUpdate":this.editor.on("update",(function(e){t.props.onUpdate(t.editor)}));break;case"onViewportChange":this.editor.on("viewportChange",(function(e,n,r){t.props.onViewportChange(t.editor,n,r)}))}},e}(),s=function(e){function t(t){var n=e.call(this,t)||this;return l||(n.deferred=null,n.emulating=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1),n}return o(t,e),t.prototype.setCursor=function(e,t,n){var r=this.editor.getDoc();n&&this.editor.focus(),t?r.setCursor(e):r.setCursor(e,null,{scroll:!1})},t.prototype.moveCursor=function(e,t){var n=this.editor.getDoc();t?n.setCursor(e):n.setCursor(e,null,{scroll:!1})},t.prototype.hydrate=function(e){var t=this;Object.keys(e.options||{}).forEach((function(n){t.editor.setOption(n,e.options[n]),t.mirror.setOption(n,e.options[n])})),this.hydrated||(this.mounted&&this.deferred?this.resolveChange():this.initChange(e.value||"")),this.hydrated=!0},t.prototype.initChange=function(e){this.emulating=!0;var t=this.editor.lastLine(),n=this.editor.getLine(this.editor.lastLine()).length;this.editor.replaceRange(e||"",{line:0,ch:0},{line:t,ch:n}),this.mirror.setValue(e),this.editor.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},t.prototype.resolveChange=function(){this.emulating=!0,"undo"===this.deferred.origin?this.editor.undo():"redo"===this.deferred.origin?this.editor.redo():this.editor.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),this.emulating=!1,this.deferred=null},t.prototype.mirrorChange=function(e){return"undo"===e.origin?(this.editor.setHistory(this.mirror.getHistory()),this.mirror.undo()):"redo"===e.origin?(this.editor.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(e.text,e.from,e.to,e.origin),this.mirror.getValue()},t.prototype.componentWillMount=function(){l||this.props.editorWillMount&&this.props.editorWillMount()},t.prototype.componentDidMount=function(){var e=this;if(!l){if(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&a.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=a(this.ref),this.shared=new u(this.editor,this.props),this.mirror=a((function(){})),this.editor.on("electricInput",(function(){e.mirror.setHistory(e.editor.getHistory())})),this.editor.on("cursorActivity",(function(){e.mirror.setCursor(e.editor.getCursor())})),this.editor.on("beforeChange",(function(t,n){if(!e.emulating){n.cancel(),e.deferred=n;var r=e.mirrorChange(e.deferred);e.props.onBeforeChange&&e.props.onBeforeChange(e.editor,e.deferred,r)}})),this.editor.on("change",(function(t,n){e.mounted&&e.props.onChange&&e.props.onChange(e.editor,n,e.editor.getValue())})),this.props.onBlur&&this.shared.wire("onBlur"),this.props.onCursor&&this.shared.wire("onCursor"),this.props.onCursorActivity&&this.shared.wire("onCursorActivity"),this.props.onDragEnter&&this.shared.wire("onDragEnter"),this.props.onDragOver&&this.shared.wire("onDragOver"),this.props.onDrop&&this.shared.wire("onDrop"),this.props.onFocus&&this.shared.wire("onFocus"),this.props.onGutterClick&&this.shared.wire("onGutterClick"),this.props.onKeyDown&&this.shared.wire("onKeyDown"),this.props.onKeyPress&&this.shared.wire("onKeyPress"),this.props.onKeyUp&&this.shared.wire("onKeyUp"),this.props.onScroll&&this.shared.wire("onScroll"),this.props.onSelection&&this.shared.wire("onSelection"),this.props.onUpdate&&this.shared.wire("onUpdate"),this.props.onViewportChange&&this.shared.wire("onViewportChange"),this.hydrate(this.props),this.props.selection)this.editor.getDoc().setSelections(this.props.selection);this.props.cursor&&this.setCursor(this.props.cursor,this.props.autoScroll||!1,this.props.autoFocus||!1),this.props.scroll&&this.editor.scrollTo(this.props.scroll.x,this.props.scroll.y),this.mounted=!0,this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb)}},t.prototype.componentWillReceiveProps=function(e){var t;l||(e.value!==this.props.value&&(this.hydrated=!1),this.props.autoCursor||void 0===this.props.autoCursor||(t=this.editor.getCursor()),this.hydrate(e),this.props.autoCursor||void 0===this.props.autoCursor||this.moveCursor(t,this.props.autoScroll||!1))},t.prototype.componentWillUnmount=function(){l||this.props.editorWillUnmount&&this.props.editorWillUnmount(a)},t.prototype.shouldComponentUpdate=function(e,t){return!l},t.prototype.render=function(){var e=this;if(l)return null;var t=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return i.createElement("div",{className:t,ref:function(t){return e.ref=t}})},t}(i.Component);t.Controlled=s;var c=function(e){function t(t){var n=e.call(this,t)||this;return l||(n.continueChange=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1,n.onBeforeChangeCb=function(){n.continueChange=!0}),n}return o(t,e),t.prototype.setCursor=function(e,t,n){var r=this.editor.getDoc();n&&this.editor.focus(),t?r.setCursor(e):r.setCursor(e,null,{scroll:!1})},t.prototype.moveCursor=function(e,t){var n=this.editor.getDoc();t?n.setCursor(e):n.setCursor(e,null,{scroll:!1})},t.prototype.hydrate=function(e){var t=this;if(Object.keys(e.options||{}).forEach((function(n){return t.editor.setOption(n,e.options[n])})),!this.hydrated){var n=this.editor.lastLine(),r=this.editor.getLine(this.editor.lastLine()).length;this.editor.replaceRange(e.value||"",{line:0,ch:0},{line:n,ch:r})}this.hydrated=!0},t.prototype.componentWillMount=function(){l||this.props.editorWillMount&&this.props.editorWillMount()},t.prototype.componentDidMount=function(){var e=this;if(!l){if(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&a.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=a(this.ref),this.shared=new u(this.editor,this.props),this.editor.on("beforeChange",(function(t,n){e.props.onBeforeChange&&e.props.onBeforeChange(e.editor,n,null,e.onBeforeChangeCb)})),this.editor.on("change",(function(t,n){if(e.mounted)if(e.props.onBeforeChange){if(!e.continueChange)return;e.props.onChange(e.editor,n,e.editor.getValue())}else e.props.onChange(e.editor,n,e.editor.getValue())})),this.props.onBlur&&this.shared.wire("onBlur"),this.props.onCursor&&this.shared.wire("onCursor"),this.props.onCursorActivity&&this.shared.wire("onCursorActivity"),this.props.onDragEnter&&this.shared.wire("onDragEnter"),this.props.onDragOver&&this.shared.wire("onDragOver"),this.props.onDrop&&this.shared.wire("onDrop"),this.props.onFocus&&this.shared.wire("onFocus"),this.props.onGutterClick&&this.shared.wire("onGutterClick"),this.props.onKeyDown&&this.shared.wire("onKeyDown"),this.props.onKeyPress&&this.shared.wire("onKeyPress"),this.props.onKeyUp&&this.shared.wire("onKeyUp"),this.props.onScroll&&this.shared.wire("onScroll"),this.props.onSelection&&this.shared.wire("onSelection"),this.props.onUpdate&&this.shared.wire("onUpdate"),this.props.onViewportChange&&this.shared.wire("onViewportChange"),this.hydrate(this.props),this.props.selection)this.editor.getDoc().setSelections(this.props.selection);this.props.cursor&&this.setCursor(this.props.cursor,this.props.autoScroll||!1,this.props.autoFocus||!1),this.props.scroll&&this.editor.scrollTo(this.props.scroll.x,this.props.scroll.y),this.mounted=!0,this.editor.clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb)}},t.prototype.componentWillReceiveProps=function(e){var t;l||(e.value!==this.props.value&&(this.hydrated=!1),this.props.autoCursor||void 0===this.props.autoCursor||(t=this.editor.getCursor()),this.hydrate(e),this.props.autoCursor||void 0===this.props.autoCursor||this.moveCursor(t,this.props.autoScroll||!1))},t.prototype.componentWillUnmount=function(){l||this.props.editorWillUnmount&&this.props.editorWillUnmount(a)},t.prototype.shouldComponentUpdate=function(e,t){return!l},t.prototype.render=function(){var e=this;if(l)return null;var t=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return i.createElement("div",{className:t,ref:function(t){return e.ref=t}})},t}(i.Component);t.UnControlled=c},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t=e.commands,n=e.Pos;function r(t,r,o){if(o<0&&0==r.ch)return t.clipPos(n(r.line-1));var a=t.getLine(r.line);if(o>0&&r.ch>=a.length)return t.clipPos(n(r.line+1,0));for(var i,l="start",u=r.ch,s=u,c=o<0?0:a.length,d=0;s!=c;s+=o,d++){var f=a.charAt(o<0?s-1:s),p="_"!=f&&e.isWordChar(f)?"w":"o";if("w"==p&&f.toUpperCase()==f&&(p="W"),"start"==l)"o"!=p?(l="in",i=p):u=s+o;else if("in"==l&&i!=p){if("w"==i&&"W"==p&&o<0&&s--,"W"==i&&"w"==p&&o>0){if(s==u+1){i="w";continue}s--}break}}return n(r.line,s)}function o(e,t){e.extendSelectionsBy((function(n){return e.display.shift||e.doc.extend||n.empty()?r(e.doc,n.head,t):t<0?n.from():n.to()}))}function a(t,r){if(t.isReadOnly())return e.Pass;t.operation((function(){for(var e=t.listSelections().length,o=[],a=-1,i=0;i<e;i++){var l=t.listSelections()[i].head;if(!(l.line<=a)){var u=n(l.line+(r?0:1),0);t.replaceRange("\n",u,null,"+insertLine"),t.indentLine(u.line,null,!0),o.push({head:u,anchor:u}),a=l.line+1}}t.setSelections(o)})),t.execCommand("indentAuto")}function i(t,r){for(var o=r.ch,a=o,i=t.getLine(r.line);o&&e.isWordChar(i.charAt(o-1));)--o;for(;a<i.length&&e.isWordChar(i.charAt(a));)++a;return{from:n(r.line,o),to:n(r.line,a),word:i.slice(o,a)}}function l(e,t){for(var n=e.listSelections(),r=[],o=0;o<n.length;o++){var a=n[o],i=e.findPosV(a.anchor,t,"line",a.anchor.goalColumn),l=e.findPosV(a.head,t,"line",a.head.goalColumn);i.goalColumn=null!=a.anchor.goalColumn?a.anchor.goalColumn:e.cursorCoords(a.anchor,"div").left,l.goalColumn=null!=a.head.goalColumn?a.head.goalColumn:e.cursorCoords(a.head,"div").left;var u={anchor:i,head:l};r.push(a),r.push(u)}e.setSelections(r)}function u(t,n,r){for(var o=0;o<t.length;o++)if(0==e.cmpPos(t[o].from(),n)&&0==e.cmpPos(t[o].to(),r))return!0;return!1}t.goSubwordLeft=function(e){o(e,-1)},t.goSubwordRight=function(e){o(e,1)},t.scrollLineUp=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top+t.clientHeight,"local");e.getCursor().line>=n&&e.execCommand("goLineUp")}e.scrollTo(null,t.top-e.defaultTextHeight())},t.scrollLineDown=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top,"local")+1;e.getCursor().line<=n&&e.execCommand("goLineDown")}e.scrollTo(null,t.top+e.defaultTextHeight())},t.splitSelectionByLine=function(e){for(var t=e.listSelections(),r=[],o=0;o<t.length;o++)for(var a=t[o].from(),i=t[o].to(),l=a.line;l<=i.line;++l)i.line>a.line&&l==i.line&&0==i.ch||r.push({anchor:l==a.line?a:n(l,0),head:l==i.line?i:n(l)});e.setSelections(r,0)},t.singleSelectionTop=function(e){var t=e.listSelections()[0];e.setSelection(t.anchor,t.head,{scroll:!1})},t.selectLine=function(e){for(var t=e.listSelections(),r=[],o=0;o<t.length;o++){var a=t[o];r.push({anchor:n(a.from().line,0),head:n(a.to().line+1,0)})}e.setSelections(r)},t.insertLineAfter=function(e){return a(e,!1)},t.insertLineBefore=function(e){return a(e,!0)},t.selectNextOccurrence=function(t){var r=t.getCursor("from"),o=t.getCursor("to"),a=t.state.sublimeFindFullWord==t.doc.sel;if(0==e.cmpPos(r,o)){var l=i(t,r);if(!l.word)return;t.setSelection(l.from,l.to),a=!0}else{var s=t.getRange(r,o),c=a?new RegExp("\\b"+s+"\\b"):s,d=t.getSearchCursor(c,o),f=d.findNext();if(f||(f=(d=t.getSearchCursor(c,n(t.firstLine(),0))).findNext()),!f||u(t.listSelections(),d.from(),d.to()))return;t.addSelection(d.from(),d.to())}a&&(t.state.sublimeFindFullWord=t.doc.sel)},t.skipAndSelectNextOccurrence=function(n){var r=n.getCursor("anchor"),o=n.getCursor("head");t.selectNextOccurrence(n),0!=e.cmpPos(r,o)&&n.doc.setSelections(n.doc.listSelections().filter((function(e){return e.anchor!=r||e.head!=o})))},t.addCursorToPrevLine=function(e){l(e,-1)},t.addCursorToNextLine=function(e){l(e,1)};var s="(){}[]";function c(t){for(var r=t.listSelections(),o=[],a=0;a<r.length;a++){var i=r[a],l=i.head,u=t.scanForBracket(l,-1);if(!u)return!1;for(;;){var c=t.scanForBracket(l,1);if(!c)return!1;if(c.ch==s.charAt(s.indexOf(u.ch)+1)){var d=n(u.pos.line,u.pos.ch+1);if(0!=e.cmpPos(d,i.from())||0!=e.cmpPos(c.pos,i.to())){o.push({anchor:d,head:c.pos});break}if(!(u=t.scanForBracket(u.pos,-1)))return!1}l=n(c.pos.line,c.pos.ch+1)}}return t.setSelections(o),!0}function d(e){return e?/\bpunctuation\b/.test(e)?e:void 0:null}function f(t,r){if(t.isReadOnly())return e.Pass;for(var o,a=t.listSelections(),i=[],l=0;l<a.length;l++){var u=a[l];if(!u.empty()){for(var s=u.from().line,c=u.to().line;l<a.length-1&&a[l+1].from().line==c;)c=a[++l].to().line;a[l].to().ch||c--,i.push(s,c)}}i.length?o=!0:i.push(t.firstLine(),t.lastLine()),t.operation((function(){for(var e=[],a=0;a<i.length;a+=2){var l=i[a],u=i[a+1],s=n(l,0),c=n(u),d=t.getRange(s,c,!1);r?d.sort():d.sort((function(e,t){var n=e.toUpperCase(),r=t.toUpperCase();return n!=r&&(e=n,t=r),e<t?-1:e==t?0:1})),t.replaceRange(d,s,c),o&&e.push({anchor:s,head:n(u+1,0)})}o&&t.setSelections(e,0)}))}function p(t,n){t.operation((function(){for(var r=t.listSelections(),o=[],a=[],l=0;l<r.length;l++)(s=r[l]).empty()?(o.push(l),a.push("")):a.push(n(t.getRange(s.from(),s.to())));var u;for(t.replaceSelections(a,"around","case"),l=o.length-1;l>=0;l--){var s=r[o[l]];if(!(u&&e.cmpPos(s.head,u)>0)){var c=i(t,s.head);u=c.from,t.replaceRange(n(c.word),c.from,c.to)}}}))}function h(t){var n=t.getCursor("from"),r=t.getCursor("to");if(0==e.cmpPos(n,r)){var o=i(t,n);if(!o.word)return;n=o.from,r=o.to}return{from:n,to:r,query:t.getRange(n,r),word:o}}function m(e,t){var r=h(e);if(r){var o=r.query,a=e.getSearchCursor(o,t?r.to:r.from);(t?a.findNext():a.findPrevious())?e.setSelection(a.from(),a.to()):(a=e.getSearchCursor(o,t?n(e.firstLine(),0):e.clipPos(n(e.lastLine()))),(t?a.findNext():a.findPrevious())?e.setSelection(a.from(),a.to()):r.word&&e.setSelection(r.from,r.to))}}t.selectScope=function(e){c(e)||e.execCommand("selectAll")},t.selectBetweenBrackets=function(t){if(!c(t))return e.Pass},t.goToBracket=function(t){t.extendSelectionsBy((function(r){var o=t.scanForBracket(r.head,1,d(t.getTokenTypeAt(r.head)));if(o&&0!=e.cmpPos(o.pos,r.head))return o.pos;var a=t.scanForBracket(r.head,-1,d(t.getTokenTypeAt(n(r.head.line,r.head.ch+1))));return a&&n(a.pos.line,a.pos.ch+1)||r.head}))},t.swapLineUp=function(t){if(t.isReadOnly())return e.Pass;for(var r=t.listSelections(),o=[],a=t.firstLine()-1,i=[],l=0;l<r.length;l++){var u=r[l],s=u.from().line-1,c=u.to().line;i.push({anchor:n(u.anchor.line-1,u.anchor.ch),head:n(u.head.line-1,u.head.ch)}),0!=u.to().ch||u.empty()||--c,s>a?o.push(s,c):o.length&&(o[o.length-1]=c),a=c}t.operation((function(){for(var e=0;e<o.length;e+=2){var r=o[e],a=o[e+1],l=t.getLine(r);t.replaceRange("",n(r,0),n(r+1,0),"+swapLine"),a>t.lastLine()?t.replaceRange("\n"+l,n(t.lastLine()),null,"+swapLine"):t.replaceRange(l+"\n",n(a,0),null,"+swapLine")}t.setSelections(i),t.scrollIntoView()}))},t.swapLineDown=function(t){if(t.isReadOnly())return e.Pass;for(var r=t.listSelections(),o=[],a=t.lastLine()+1,i=r.length-1;i>=0;i--){var l=r[i],u=l.to().line+1,s=l.from().line;0!=l.to().ch||l.empty()||u--,u<a?o.push(u,s):o.length&&(o[o.length-1]=s),a=s}t.operation((function(){for(var e=o.length-2;e>=0;e-=2){var r=o[e],a=o[e+1],i=t.getLine(r);r==t.lastLine()?t.replaceRange("",n(r-1),n(r),"+swapLine"):t.replaceRange("",n(r,0),n(r+1,0),"+swapLine"),t.replaceRange(i+"\n",n(a,0),null,"+swapLine")}t.scrollIntoView()}))},t.toggleCommentIndented=function(e){e.toggleComment({indent:!0})},t.joinLines=function(e){for(var t=e.listSelections(),r=[],o=0;o<t.length;o++){for(var a=t[o],i=a.from(),l=i.line,u=a.to().line;o<t.length-1&&t[o+1].from().line==u;)u=t[++o].to().line;r.push({start:l,end:u,anchor:!a.empty()&&i})}e.operation((function(){for(var t=0,o=[],a=0;a<r.length;a++){for(var i,l=r[a],u=l.anchor&&n(l.anchor.line-t,l.anchor.ch),s=l.start;s<=l.end;s++){var c=s-t;s==l.end&&(i=n(c,e.getLine(c).length+1)),c<e.lastLine()&&(e.replaceRange(" ",n(c),n(c+1,/^\s*/.exec(e.getLine(c+1))[0].length)),++t)}o.push({anchor:u||i,head:i})}e.setSelections(o,0)}))},t.duplicateLine=function(e){e.operation((function(){for(var t=e.listSelections().length,r=0;r<t;r++){var o=e.listSelections()[r];o.empty()?e.replaceRange(e.getLine(o.head.line)+"\n",n(o.head.line,0)):e.replaceRange(e.getRange(o.from(),o.to()),o.from())}e.scrollIntoView()}))},t.sortLines=function(e){f(e,!0)},t.sortLinesInsensitive=function(e){f(e,!1)},t.nextBookmark=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){var n=t.shift(),r=n.find();if(r)return t.push(n),e.setSelection(r.from,r.to)}},t.prevBookmark=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){t.unshift(t.pop());var n=t[t.length-1].find();if(n)return e.setSelection(n.from,n.to);t.pop()}},t.toggleBookmark=function(e){for(var t=e.listSelections(),n=e.state.sublimeBookmarks||(e.state.sublimeBookmarks=[]),r=0;r<t.length;r++){for(var o=t[r].from(),a=t[r].to(),i=t[r].empty()?e.findMarksAt(o):e.findMarks(o,a),l=0;l<i.length;l++)if(i[l].sublimeBookmark){i[l].clear();for(var u=0;u<n.length;u++)n[u]==i[l]&&n.splice(u--,1);break}l==i.length&&n.push(e.markText(o,a,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},t.clearBookmarks=function(e){var t=e.state.sublimeBookmarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();t.length=0},t.selectBookmarks=function(e){var t=e.state.sublimeBookmarks,n=[];if(t)for(var r=0;r<t.length;r++){var o=t[r].find();o?n.push({anchor:o.from,head:o.to}):t.splice(r--,0)}n.length&&e.setSelections(n,0)},t.smartBackspace=function(t){if(t.somethingSelected())return e.Pass;t.operation((function(){for(var r=t.listSelections(),o=t.getOption("indentUnit"),a=r.length-1;a>=0;a--){var i=r[a].head,l=t.getRange({line:i.line,ch:0},i),u=e.countColumn(l,null,t.getOption("tabSize")),s=t.findPosH(i,-1,"char",!1);if(l&&!/\S/.test(l)&&u%o==0){var c=new n(i.line,e.findColumn(l,u-o,o));c.ch!=i.ch&&(s=c)}t.replaceRange("",s,i,"+delete")}}))},t.delLineRight=function(e){e.operation((function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange("",t[r].anchor,n(t[r].to().line),"+delete");e.scrollIntoView()}))},t.upcaseAtCursor=function(e){p(e,(function(e){return e.toUpperCase()}))},t.downcaseAtCursor=function(e){p(e,(function(e){return e.toLowerCase()}))},t.setSublimeMark=function(e){e.state.sublimeMark&&e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor())},t.selectToSublimeMark=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&e.setSelection(e.getCursor(),t)},t.deleteToSublimeMark=function(t){var n=t.state.sublimeMark&&t.state.sublimeMark.find();if(n){var r=t.getCursor(),o=n;if(e.cmpPos(r,o)>0){var a=o;o=r,r=a}t.state.sublimeKilled=t.getRange(r,o),t.replaceRange("",r,o)}},t.swapWithSublimeMark=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&(e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor()),e.setCursor(t))},t.sublimeYank=function(e){null!=e.state.sublimeKilled&&e.replaceSelection(e.state.sublimeKilled,null,"paste")},t.showInCenter=function(e){var t=e.cursorCoords(null,"local");e.scrollTo(null,(t.top+t.bottom)/2-e.getScrollInfo().clientHeight/2)},t.findUnder=function(e){m(e,!0)},t.findUnderPrevious=function(e){m(e,!1)},t.findAllUnder=function(e){var t=h(e);if(t){for(var n=e.getSearchCursor(t.query),r=[],o=-1;n.findNext();)r.push({anchor:n.from(),head:n.to()}),n.from().line<=t.from.line&&n.from().ch<=t.from.ch&&o++;e.setSelections(r,o)}};var g=e.keyMap;g.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Cmd-F5":"sortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},e.normalizeKeyMap(g.macSublime),g.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Ctrl-F9":"sortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},e.normalizeKeyMap(g.pcSublime);var v=g.default==g.macDefault;g.sublime=v?g.macSublime:g.pcSublime}(n(1454),n(1475),n(1497))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function n(e,t,n){var r=e.current(),o=r.search(t);return o>-1?e.backUp(r.length-o):r.match(/<\/?$/)&&(e.backUp(r.length),e.match(t,!1)||e.match(r)),n}var r={};function o(e){var t=r[e];return t||(r[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}function a(e,t){var n=e.match(o(t));return n?/^\s*(.*?)\s*$/.exec(n[2])[1]:""}function i(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function l(e,t){for(var n in e)for(var r=t[n]||(t[n]=[]),o=e[n],a=o.length-1;a>=0;a--)r.unshift(o[a])}function u(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!r[0]||r[1].test(a(t,r[0])))return r[2]}}e.defineMode("htmlmixed",(function(r,o){var a=e.getMode(r,{name:"xml",htmlMode:!0,multilineTagIndentFactor:o.multilineTagIndentFactor,multilineTagIndentPastTag:o.multilineTagIndentPastTag}),s={},c=o&&o.tags,d=o&&o.scriptTypes;if(l(t,s),c&&l(c,s),d)for(var f=d.length-1;f>=0;f--)s.script.unshift(["type",d[f].matches,d[f].mode]);function p(t,o){var l,c=a.token(t,o.htmlState),d=/\btag\b/.test(c);if(d&&!/[<>\s\/]/.test(t.current())&&(l=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&s.hasOwnProperty(l))o.inTag=l+" ";else if(o.inTag&&d&&/>$/.test(t.current())){var f=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var h=">"==t.current()&&u(s[f[1]],f[2]),m=e.getMode(r,h),g=i(f[1],!0),v=i(f[1],!1);o.token=function(e,t){return e.match(g,!1)?(t.token=p,t.localState=t.localMode=null,null):n(e,v,t.localMode.token(e,t.localState))},o.localMode=m,o.localState=e.startState(m,a.indent(o.htmlState,"",""))}else o.inTag&&(o.inTag+=t.current(),t.eol()&&(o.inTag+=" "));return c}return{startState:function(){return{token:p,inTag:null,localMode:null,localState:null,htmlState:e.startState(a)}},copyState:function(t){var n;return t.localState&&(n=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:n,htmlState:e.copyState(a,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n,r){return!t.localMode||/^\s*<\//.test(n)?a.indent(t.htmlState,n,r):t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||a}}}}),"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}(n(1454),n(1598),n(1599),n(1476))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(r,o){var a,i,l=r.indentUnit,u={},s=o.htmlMode?t:n;for(var c in s)u[c]=s[c];for(var c in o)u[c]=o[c];function d(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();return"<"==r?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(h("atom","]]>")):null:e.match("--")?n(h("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(m(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=h("meta","?>"),"meta"):(a=e.eat("/")?"closeTag":"openTag",t.tokenize=f,"tag bracket"):"&"==r?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function f(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=d,a=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return a="equals",null;if("<"==n){t.tokenize=d,t.state=b,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=p(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function p(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=f;break}return"string"};return t.isInAttribute=!0,t}function h(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=d;break}n.next()}return e}}function m(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=m(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=d;break}return n.tokenize=m(e-1),n.tokenize(t,n)}}return"meta"}}function g(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(u.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function v(e){e.context&&(e.context=e.context.prev)}function y(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!u.contextGrabbers.hasOwnProperty(n)||!u.contextGrabbers[n].hasOwnProperty(t))return;v(e)}}function b(e,t,n){return"openTag"==e?(n.tagStart=t.column(),_):"closeTag"==e?w:b}function _(e,t,n){return"word"==e?(n.tagName=t.current(),i="tag",C):u.allowMissingTagName&&"endTag"==e?(i="tag bracket",C(e,t,n)):(i="error",_)}function w(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&u.implicitlyClosed.hasOwnProperty(n.context.tagName)&&v(n),n.context&&n.context.tagName==r||!1===u.matchClosing?(i="tag",k):(i="tag error",O)}return u.allowMissingTagName&&"endTag"==e?(i="tag bracket",k(e,t,n)):(i="error",O)}function k(e,t,n){return"endTag"!=e?(i="error",k):(v(n),b)}function O(e,t,n){return i="error",k(e,t,n)}function C(e,t,n){if("word"==e)return i="attribute",S;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,o=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||u.autoSelfClosers.hasOwnProperty(r)?y(n,r):(y(n,r),n.context=new g(n,r,o==n.indented)),b}return i="error",C}function S(e,t,n){return"equals"==e?E:(u.allowMissing||(i="error"),C(e,t,n))}function E(e,t,n){return"string"==e?M:"word"==e&&u.allowUnquoted?(i="string",C):(i="error",C(e,t,n))}function M(e,t,n){return"string"==e?M:C(e,t,n)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:b,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;a=null;var n=t.tokenize(e,t);return(n||a)&&"comment"!=n&&(i=null,t.state=t.state(a||n,e,t),i&&(n="error"==i?n+" error":i)),n},indent:function(t,n,r){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+l;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=f&&t.tokenize!=d)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==u.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+l*(u.multilineTagIndentFactor||1);if(u.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var a=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(a&&a[1])for(;o;){if(o.tagName==a[2]){o=o.prev;break}if(!u.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(a)for(;o;){var i=u.contextGrabbers[o.tagName];if(!i||!i.hasOwnProperty(a[2]))break;o=o.prev}for(;o&&o.prev&&!o.startOfLine;)o=o.prev;return o?o.indent+l:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:u.htmlMode?"html":"xml",helperType:u.htmlMode?"html":"xml",skipAttribute:function(e){e.state==E&&(e.state=C)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)n.tagName&&t.push(n.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";e.defineMode("javascript",(function(t,n){var r,o,a=t.indentUnit,i=n.statementIndent,l=n.jsonld,u=n.json||l,s=n.typescript,c=n.wordCharacters||/[\w$\xa1-\uffff]/,d=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),o=e("keyword d"),a=e("operator"),i={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:o,break:o,continue:o,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:i,false:i,null:i,undefined:i,NaN:i,Infinity:i,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),f=/[+\-*&%=<>!?|~^@]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function h(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function m(e,t,n){return r=e,o=n,t}function g(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=v(n),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return m("number","number");if("."==n&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return m(n);if("="==n&&e.eat(">"))return m("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return m("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),m("number","number");if("/"==n)return e.eat("*")?(t.tokenize=y,y(e,t)):e.eat("/")?(e.skipToEnd(),m("comment","comment")):et(e,t,1)?(h(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),m("regexp","string-2")):(e.eat("="),m("operator","operator",e.current()));if("`"==n)return t.tokenize=b,b(e,t);if("#"==n&&"!"==e.peek())return e.skipToEnd(),m("meta","meta");if("#"==n&&e.eatWhile(c))return m("variable","property");if("<"==n&&e.match("!--")||"-"==n&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),m("comment","comment");if(f.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),"?"==n&&e.eat(".")?m("."):m("operator","operator",e.current());if(c.test(n)){e.eatWhile(c);var r=e.current();if("."!=t.lastType){if(d.propertyIsEnumerable(r)){var o=d[r];return m(o.type,o.style,r)}if("async"==r&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return m("async","keyword",r)}return m("variable","variable",r)}}function v(e){return function(t,n){var r,o=!1;if(l&&"@"==t.peek()&&t.match(p))return n.tokenize=g,m("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=e||o);)o=!o&&"\\"==r;return o||(n.tokenize=g),m("string","string")}}function y(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=g;break}r="*"==n}return m("comment","comment")}function b(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}r=!r&&"\\"==n}return m("quasi","string-2",e.current())}var _="([{}])";function w(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(s){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var o=0,a=!1,i=n-1;i>=0;--i){var l=e.string.charAt(i),u=_.indexOf(l);if(u>=0&&u<3){if(!o){++i;break}if(0==--o){"("==l&&(a=!0);break}}else if(u>=3&&u<6)++o;else if(c.test(l))a=!0;else if(/["'\/`]/.test(l))for(;;--i){if(0==i)return;if(e.string.charAt(i-1)==l&&"\\"!=e.string.charAt(i-2)){i--;break}}else if(a&&!o){++i;break}}a&&!o&&(t.fatArrowAt=i)}}var k={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function O(e,t,n,r,o,a){this.indented=e,this.column=t,this.type=n,this.prev=o,this.info=a,null!=r&&(this.align=r)}function C(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}function S(e,t,n,r,o){var a=e.cc;for(E.state=e,E.stream=o,E.marked=null,E.cc=a,E.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():u?U:H)(n,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return E.marked?E.marked:"variable"==n&&C(e,r)?"variable-2":t}}var E={state:null,column:null,marked:null,cc:null};function M(){for(var e=arguments.length-1;e>=0;e--)E.cc.push(arguments[e])}function P(){return M.apply(null,arguments),!0}function T(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function x(e){var t=E.state;if(E.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var r=j(e,t.context);if(null!=r)return void(t.context=r)}else if(!T(e,t.localVars))return void(t.localVars=new R(e,t.localVars));n.globalVars&&!T(e,t.globalVars)&&(t.globalVars=new R(e,t.globalVars))}function j(e,t){if(t){if(t.block){var n=j(e,t.prev);return n?n==t.prev?t:new L(n,t.vars,!0):null}return T(e,t.vars)?t:new L(t.prev,new R(e,t.vars),!1)}return null}function D(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function L(e,t,n){this.prev=e,this.vars=t,this.block=n}function R(e,t){this.name=e,this.next=t}var N=new R("this",new R("arguments",null));function A(){E.state.context=new L(E.state.context,E.state.localVars,!1),E.state.localVars=N}function B(){E.state.context=new L(E.state.context,E.state.localVars,!0),E.state.localVars=null}function F(){E.state.localVars=E.state.context.vars,E.state.context=E.state.context.prev}function I(e,t){var n=function(){var n=E.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var o=n.lexical;o&&")"==o.type&&o.align;o=o.prev)r=o.indented;n.lexical=new O(r,E.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function W(){var e=E.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function V(e){function t(n){return n==e?P():";"==e||"}"==n||")"==n||"]"==n?M():P(t)}return t}function H(e,t){return"var"==e?P(I("vardef",t),Ce,V(";"),W):"keyword a"==e?P(I("form"),q,H,W):"keyword b"==e?P(I("form"),H,W):"keyword d"==e?E.stream.match(/^\s*$/,!1)?P():P(I("stat"),$,V(";"),W):"debugger"==e?P(V(";")):"{"==e?P(I("}"),B,de,W,F):";"==e?P():"if"==e?("else"==E.state.lexical.info&&E.state.cc[E.state.cc.length-1]==W&&E.state.cc.pop()(),P(I("form"),q,H,W,xe)):"function"==e?P(Re):"for"==e?P(I("form"),je,H,W):"class"==e||s&&"interface"==t?(E.marked="keyword",P(I("form","class"==e?e:t),Ie,W)):"variable"==e?s&&"declare"==t?(E.marked="keyword",P(H)):s&&("module"==t||"enum"==t||"type"==t)&&E.stream.match(/^\s*\w/,!1)?(E.marked="keyword","enum"==t?P(Je):"type"==t?P(Ae,V("operator"),ge,V(";")):P(I("form"),Se,V("{"),I("}"),de,W,W)):s&&"namespace"==t?(E.marked="keyword",P(I("form"),U,H,W)):s&&"abstract"==t?(E.marked="keyword",P(H)):P(I("stat"),oe):"switch"==e?P(I("form"),q,V("{"),I("}","switch"),B,de,W,W,F):"case"==e?P(U,V(":")):"default"==e?P(V(":")):"catch"==e?P(I("form"),A,G,H,W,F):"export"==e?P(I("stat"),Ge,W):"import"==e?P(I("stat"),ze,W):"async"==e?P(H):"@"==t?P(U,H):M(I("stat"),U,V(";"),W)}function G(e){if("("==e)return P(Be,V(")"))}function U(e,t){return K(e,t,!1)}function z(e,t){return K(e,t,!0)}function q(e){return"("!=e?M():P(I(")"),$,V(")"),W)}function K(e,t,n){if(E.state.fatArrowAt==E.stream.start){var r=n?ee:Z;if("("==e)return P(A,I(")"),se(Be,")"),W,V("=>"),r,F);if("variable"==e)return M(A,Se,V("=>"),r,F)}var o=n?X:Y;return k.hasOwnProperty(e)?P(o):"function"==e?P(Re,o):"class"==e||s&&"interface"==t?(E.marked="keyword",P(I("form"),Fe,W)):"keyword c"==e||"async"==e?P(n?z:U):"("==e?P(I(")"),$,V(")"),W,o):"operator"==e||"spread"==e?P(n?z:U):"["==e?P(I("]"),Xe,W,o):"{"==e?ce(ie,"}",null,o):"quasi"==e?M(J,o):"new"==e?P(te(n)):"import"==e?P(U):P()}function $(e){return e.match(/[;\}\)\],]/)?M():M(U)}function Y(e,t){return","==e?P($):X(e,t,!1)}function X(e,t,n){var r=0==n?Y:X,o=0==n?U:z;return"=>"==e?P(A,n?ee:Z,F):"operator"==e?/\+\+|--/.test(t)||s&&"!"==t?P(r):s&&"<"==t&&E.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?P(I(">"),se(ge,">"),W,r):"?"==t?P(U,V(":"),o):P(o):"quasi"==e?M(J,r):";"!=e?"("==e?ce(z,")","call",r):"."==e?P(ae,r):"["==e?P(I("]"),$,V("]"),W,r):s&&"as"==t?(E.marked="keyword",P(ge,r)):"regexp"==e?(E.state.lastType=E.marked="operator",E.stream.backUp(E.stream.pos-E.stream.start-1),P(o)):void 0:void 0}function J(e,t){return"quasi"!=e?M():"${"!=t.slice(t.length-2)?P(J):P(U,Q)}function Q(e){if("}"==e)return E.marked="string-2",E.state.tokenize=b,P(J)}function Z(e){return w(E.stream,E.state),M("{"==e?H:U)}function ee(e){return w(E.stream,E.state),M("{"==e?H:z)}function te(e){return function(t){return"."==t?P(e?re:ne):"variable"==t&&s?P(we,e?X:Y):M(e?z:U)}}function ne(e,t){if("target"==t)return E.marked="keyword",P(Y)}function re(e,t){if("target"==t)return E.marked="keyword",P(X)}function oe(e){return":"==e?P(W,H):M(Y,V(";"),W)}function ae(e){if("variable"==e)return E.marked="property",P()}function ie(e,t){return"async"==e?(E.marked="property",P(ie)):"variable"==e||"keyword"==E.style?(E.marked="property","get"==t||"set"==t?P(le):(s&&E.state.fatArrowAt==E.stream.start&&(n=E.stream.match(/^\s*:\s*/,!1))&&(E.state.fatArrowAt=E.stream.pos+n[0].length),P(ue))):"number"==e||"string"==e?(E.marked=l?"property":E.style+" property",P(ue)):"jsonld-keyword"==e?P(ue):s&&D(t)?(E.marked="keyword",P(ie)):"["==e?P(U,fe,V("]"),ue):"spread"==e?P(z,ue):"*"==t?(E.marked="keyword",P(ie)):":"==e?M(ue):void 0;var n}function le(e){return"variable"!=e?M(ue):(E.marked="property",P(Re))}function ue(e){return":"==e?P(z):"("==e?M(Re):void 0}function se(e,t,n){function r(o,a){if(n?n.indexOf(o)>-1:","==o){var i=E.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),P((function(n,r){return n==t||r==t?M():M(e)}),r)}return o==t||a==t?P():n&&n.indexOf(";")>-1?M(e):P(V(t))}return function(n,o){return n==t||o==t?P():M(e,r)}}function ce(e,t,n){for(var r=3;r<arguments.length;r++)E.cc.push(arguments[r]);return P(I(t,n),se(e,t),W)}function de(e){return"}"==e?P():M(H,de)}function fe(e,t){if(s){if(":"==e)return P(ge);if("?"==t)return P(fe)}}function pe(e,t){if(s&&(":"==e||"in"==t))return P(ge)}function he(e){if(s&&":"==e)return E.stream.match(/^\s*\w+\s+is\b/,!1)?P(U,me,ge):P(ge)}function me(e,t){if("is"==t)return E.marked="keyword",P()}function ge(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(E.marked="keyword",P("typeof"==t?z:ge)):"variable"==e||"void"==t?(E.marked="type",P(_e)):"|"==t||"&"==t?P(ge):"string"==e||"number"==e||"atom"==e?P(_e):"["==e?P(I("]"),se(ge,"]",","),W,_e):"{"==e?P(I("}"),se(ye,"}",",;"),W,_e):"("==e?P(se(be,")"),ve,_e):"<"==e?P(se(ge,">"),ge):void 0}function ve(e){if("=>"==e)return P(ge)}function ye(e,t){return"variable"==e||"keyword"==E.style?(E.marked="property",P(ye)):"?"==t||"number"==e||"string"==e?P(ye):":"==e?P(ge):"["==e?P(V("variable"),pe,V("]"),ye):"("==e?M(Ne,ye):void 0}function be(e,t){return"variable"==e&&E.stream.match(/^\s*[?:]/,!1)||"?"==t?P(be):":"==e?P(ge):"spread"==e?P(be):M(ge)}function _e(e,t){return"<"==t?P(I(">"),se(ge,">"),W,_e):"|"==t||"."==e||"&"==t?P(ge):"["==e?P(ge,V("]"),_e):"extends"==t||"implements"==t?(E.marked="keyword",P(ge)):"?"==t?P(ge,V(":"),ge):void 0}function we(e,t){if("<"==t)return P(I(">"),se(ge,">"),W,_e)}function ke(){return M(ge,Oe)}function Oe(e,t){if("="==t)return P(ge)}function Ce(e,t){return"enum"==t?(E.marked="keyword",P(Je)):M(Se,fe,Pe,Te)}function Se(e,t){return s&&D(t)?(E.marked="keyword",P(Se)):"variable"==e?(x(t),P()):"spread"==e?P(Se):"["==e?ce(Me,"]"):"{"==e?ce(Ee,"}"):void 0}function Ee(e,t){return"variable"!=e||E.stream.match(/^\s*:/,!1)?("variable"==e&&(E.marked="property"),"spread"==e?P(Se):"}"==e?M():"["==e?P(U,V("]"),V(":"),Ee):P(V(":"),Se,Pe)):(x(t),P(Pe))}function Me(){return M(Se,Pe)}function Pe(e,t){if("="==t)return P(z)}function Te(e){if(","==e)return P(Ce)}function xe(e,t){if("keyword b"==e&&"else"==t)return P(I("form","else"),H,W)}function je(e,t){return"await"==t?P(je):"("==e?P(I(")"),De,W):void 0}function De(e){return"var"==e?P(Ce,Le):"variable"==e?P(Le):M(Le)}function Le(e,t){return")"==e?P():";"==e?P(Le):"in"==t||"of"==t?(E.marked="keyword",P(U,Le)):M(U,Le)}function Re(e,t){return"*"==t?(E.marked="keyword",P(Re)):"variable"==e?(x(t),P(Re)):"("==e?P(A,I(")"),se(Be,")"),W,he,H,F):s&&"<"==t?P(I(">"),se(ke,">"),W,Re):void 0}function Ne(e,t){return"*"==t?(E.marked="keyword",P(Ne)):"variable"==e?(x(t),P(Ne)):"("==e?P(A,I(")"),se(Be,")"),W,he,F):s&&"<"==t?P(I(">"),se(ke,">"),W,Ne):void 0}function Ae(e,t){return"keyword"==e||"variable"==e?(E.marked="type",P(Ae)):"<"==t?P(I(">"),se(ke,">"),W):void 0}function Be(e,t){return"@"==t&&P(U,Be),"spread"==e?P(Be):s&&D(t)?(E.marked="keyword",P(Be)):s&&"this"==e?P(fe,Pe):M(Se,fe,Pe)}function Fe(e,t){return"variable"==e?Ie(e,t):We(e,t)}function Ie(e,t){if("variable"==e)return x(t),P(We)}function We(e,t){return"<"==t?P(I(">"),se(ke,">"),W,We):"extends"==t||"implements"==t||s&&","==e?("implements"==t&&(E.marked="keyword"),P(s?ge:U,We)):"{"==e?P(I("}"),Ve,W):void 0}function Ve(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||s&&D(t))&&E.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(E.marked="keyword",P(Ve)):"variable"==e||"keyword"==E.style?(E.marked="property",P(He,Ve)):"number"==e||"string"==e?P(He,Ve):"["==e?P(U,fe,V("]"),He,Ve):"*"==t?(E.marked="keyword",P(Ve)):s&&"("==e?M(Ne,Ve):";"==e||","==e?P(Ve):"}"==e?P():"@"==t?P(U,Ve):void 0}function He(e,t){if("?"==t)return P(He);if(":"==e)return P(ge,Pe);if("="==t)return P(z);var n=E.state.lexical.prev;return M(n&&"interface"==n.info?Ne:Re)}function Ge(e,t){return"*"==t?(E.marked="keyword",P(Ye,V(";"))):"default"==t?(E.marked="keyword",P(U,V(";"))):"{"==e?P(se(Ue,"}"),Ye,V(";")):M(H)}function Ue(e,t){return"as"==t?(E.marked="keyword",P(V("variable"))):"variable"==e?M(z,Ue):void 0}function ze(e){return"string"==e?P():"("==e?M(U):M(qe,Ke,Ye)}function qe(e,t){return"{"==e?ce(qe,"}"):("variable"==e&&x(t),"*"==t&&(E.marked="keyword"),P($e))}function Ke(e){if(","==e)return P(qe,Ke)}function $e(e,t){if("as"==t)return E.marked="keyword",P(qe)}function Ye(e,t){if("from"==t)return E.marked="keyword",P(U)}function Xe(e){return"]"==e?P():M(se(z,"]"))}function Je(){return M(I("form"),Se,V("{"),I("}"),se(Qe,"}"),W,W)}function Qe(){return M(Se,Pe)}function Ze(e,t){return"operator"==e.lastType||","==e.lastType||f.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function et(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return F.lex=!0,W.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new O((e||0)-a,0,"block",!1),localVars:n.localVars,context:n.localVars&&new L(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),w(e,t)),t.tokenize!=y&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==r?n:(t.lastType="operator"!=r||"++"!=o&&"--"!=o?r:"incdec",S(t,n,r,o,e))},indent:function(t,r){if(t.tokenize==y||t.tokenize==b)return e.Pass;if(t.tokenize!=g)return 0;var o,l=r&&r.charAt(0),u=t.lexical;if(!/^\s*else\b/.test(r))for(var s=t.cc.length-1;s>=0;--s){var c=t.cc[s];if(c==W)u=u.prev;else if(c!=xe)break}for(;("stat"==u.type||"form"==u.type)&&("}"==l||(o=t.cc[t.cc.length-1])&&(o==Y||o==X)&&!/^[,\.=+\-*:?[\(]/.test(r));)u=u.prev;i&&")"==u.type&&"stat"==u.prev.type&&(u=u.prev);var d=u.type,f=l==d;return"vardef"==d?u.indented+("operator"==t.lastType||","==t.lastType?u.info.length+1:0):"form"==d&&"{"==l?u.indented:"form"==d?u.indented+a:"stat"==d?u.indented+(Ze(t,r)?i||a:0):"switch"!=u.info||f||0==n.doubleIndentSwitch?u.align?u.column+(f?0:1):u.indented+(f?0:a):u.indented+(/^(?:case|default)\b/.test(r)?a:2*a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:l,jsonMode:u,expressionAllowed:et,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=U&&t!=z||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t="CodeMirror-hint",n="CodeMirror-hint-active";function r(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var r={hint:t};if(n)for(var o in n)r[o]=n[o];return e.showHint(r)},e.defineExtension("showHint",(function(t){t=i(this,this.getCursor("start"),t);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var o=0;o<n.length;o++)if(n[o].head.line!=n[o].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var a=this.state.completionActive=new r(this,t);a.options.hint&&(e.signal(this,"startCompletion",this),a.update(!0))}})),e.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var o=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},a=window.cancelAnimationFrame||clearTimeout;function i(e,t,n){var r=e.options.hintOptions,o={};for(var a in h)o[a]=h[a];if(r)for(var a in r)void 0!==r[a]&&(o[a]=r[a]);if(n)for(var a in n)void 0!==n[a]&&(o[a]=n[a]);return o.hint.resolve&&(o.hint=o.hint.resolve(e,t)),o}function l(e){return"string"==typeof e?e:e.text}function u(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close};/Mac/.test(navigator.platform)&&(n["Ctrl-P"]=function(){t.moveFocus(-1)},n["Ctrl-N"]=function(){t.moveFocus(1)});var r=e.options.customKeys,o=r?{}:n;function a(e,r){var a;a="string"!=typeof r?function(e){return r(e,t)}:n.hasOwnProperty(r)?n[r]:r,o[e]=a}if(r)for(var i in r)r.hasOwnProperty(i)&&a(i,r[i]);var l=e.options.extraKeys;if(l)for(var i in l)l.hasOwnProperty(i)&&a(i,l[i]);return o}function s(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function c(r,o){this.completion=r,this.data=o,this.picked=!1;var a=this,i=r.cm,c=i.getInputField().ownerDocument,d=c.defaultView||c.parentWindow,f=this.hints=c.createElement("ul"),p=r.cm.options.theme;f.className="CodeMirror-hints "+p,this.selectedHint=o.selectedHint||0;for(var h=o.list,m=0;m<h.length;++m){var g=f.appendChild(c.createElement("li")),v=h[m],y=t+(m!=this.selectedHint?"":" "+n);null!=v.className&&(y=v.className+" "+y),g.className=y,v.render?v.render(g,o,v):g.appendChild(c.createTextNode(v.displayText||l(v))),g.hintId=m}var b=r.options.container||c.body,_=i.cursorCoords(r.options.alignWithWord?o.from:null),w=_.left,k=_.bottom,O=!0,C=0,S=0;if(b!==c.body){var E=-1!==["absolute","relative","fixed"].indexOf(d.getComputedStyle(b).position)?b:b.offsetParent,M=E.getBoundingClientRect(),P=c.body.getBoundingClientRect();C=M.left-P.left-E.scrollLeft,S=M.top-P.top-E.scrollTop}f.style.left=w-C+"px",f.style.top=k-S+"px";var T=d.innerWidth||Math.max(c.body.offsetWidth,c.documentElement.offsetWidth),x=d.innerHeight||Math.max(c.body.offsetHeight,c.documentElement.offsetHeight);b.appendChild(f);var j=f.getBoundingClientRect(),D=j.bottom-x,L=f.scrollHeight>f.clientHeight+1,R=i.getScrollInfo();if(D>0){var N=j.bottom-j.top;if(_.top-(_.bottom-j.top)-N>0)f.style.top=(k=_.top-N-S)+"px",O=!1;else if(N>x){f.style.height=x-5+"px",f.style.top=(k=_.bottom-j.top-S)+"px";var A=i.getCursor();o.from.ch!=A.ch&&(_=i.cursorCoords(A),f.style.left=(w=_.left-C)+"px",j=f.getBoundingClientRect())}}var B,F=j.right-T;if(F>0&&(j.right-j.left>T&&(f.style.width=T-5+"px",F-=j.right-j.left-T),f.style.left=(w=_.left-F-C)+"px"),L)for(var I=f.firstChild;I;I=I.nextSibling)I.style.paddingRight=i.display.nativeBarWidth+"px";return i.addKeyMap(this.keyMap=u(r,{moveFocus:function(e,t){a.changeActive(a.selectedHint+e,t)},setFocus:function(e){a.changeActive(e)},menuSize:function(){return a.screenAmount()},length:h.length,close:function(){r.close()},pick:function(){a.pick()},data:o})),r.options.closeOnUnfocus&&(i.on("blur",this.onBlur=function(){B=setTimeout((function(){r.close()}),100)}),i.on("focus",this.onFocus=function(){clearTimeout(B)})),i.on("scroll",this.onScroll=function(){var e=i.getScrollInfo(),t=i.getWrapperElement().getBoundingClientRect(),n=k+R.top-e.top,o=n-(d.pageYOffset||(c.documentElement||c.body).scrollTop);if(O||(o+=f.offsetHeight),o<=t.top||o>=t.bottom)return r.close();f.style.top=n+"px",f.style.left=w+R.left-e.left+"px"}),e.on(f,"dblclick",(function(e){var t=s(f,e.target||e.srcElement);t&&null!=t.hintId&&(a.changeActive(t.hintId),a.pick())})),e.on(f,"click",(function(e){var t=s(f,e.target||e.srcElement);t&&null!=t.hintId&&(a.changeActive(t.hintId),r.options.completeOnSingleClick&&a.pick())})),e.on(f,"mousedown",(function(){setTimeout((function(){i.focus()}),20)})),this.scrollToActive(),e.signal(o,"select",h[this.selectedHint],f.childNodes[this.selectedHint]),!0}function d(e,t){if(!e.somethingSelected())return t;for(var n=[],r=0;r<t.length;r++)t[r].supportsSelection&&n.push(t[r]);return n}function f(e,t,n,r){if(e.async)e(t,r,n);else{var o=e(t,n);o&&o.then?o.then(r):r(o)}}function p(t,n){var r,o=t.getHelpers(n,"hint");if(o.length){var a=function(e,t,n){var r=d(e,o);function a(o){if(o==r.length)return t(null);f(r[o],e,n,(function(e){e&&e.list.length>0?t(e):a(o+1)}))}a(0)};return a.async=!0,a.supportsSelection=!0,a}return(r=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:r})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}r.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var r=t.list[n],o=this;this.cm.operation((function(){r.hint?r.hint(o.cm,t,r):o.cm.replaceRange(l(r),r.from||t.from,r.to||t.to,"complete"),e.signal(t,"pick",r),o.cm.scrollIntoView()})),this.close()},cursorActivity:function(){this.debounce&&(a(this.debounce),this.debounce=0);var e=this.startPos;this.data&&(e=this.data.from);var t=this.cm.getCursor(),n=this.cm.getLine(t.line);if(t.line!=this.startPos.line||n.length-t.ch!=this.startLen-this.startPos.ch||t.ch<e.ch||this.cm.somethingSelected()||!t.ch||this.options.closeCharacters.test(n.charAt(t.ch-1)))this.close();else{var r=this;this.debounce=o((function(){r.update()})),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;f(this.options.hint,this.cm,this.options,(function(r){t.tick==n&&t.finishUpdate(r,e)}))}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var r=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(r&&1==t.list.length?this.pick(t,0):(this.widget=new c(this,t),e.signal(t,"shown")))}},c.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,r){if(t>=this.data.list.length?t=r?this.data.list.length-1:0:t<0&&(t=r?0:this.data.list.length-1),this.selectedHint!=t){var o=this.hints.childNodes[this.selectedHint];o&&(o.className=o.className.replace(" "+n,"")),(o=this.hints.childNodes[this.selectedHint=t]).className+=" "+n,this.scrollToActive(),e.signal(this.data,"select",this.data.list[this.selectedHint],o)}},scrollToActive:function(){var e=this.completion.options.scrollMargin||0,t=this.hints.childNodes[Math.max(0,this.selectedHint-e)],n=this.hints.childNodes[Math.min(this.data.list.length-1,this.selectedHint+e)],r=this.hints.firstChild;t.offsetTop<this.hints.scrollTop?this.hints.scrollTop=t.offsetTop-r.offsetTop:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+r.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:p}),e.registerHelper("hint","fromList",(function(t,n){var r,o=t.getCursor(),a=t.getTokenAt(o),i=e.Pos(o.line,a.start),l=o;a.start<o.ch&&/\w/.test(a.string.charAt(o.ch-a.start-1))?r=a.string.substr(0,o.ch-a.start):(r="",i=o);for(var u=[],s=0;s<n.words.length;s++){var c=n.words[s];c.slice(0,r.length)==r&&u.push(c)}if(u.length)return{list:u,from:i,to:l}})),e.commands.autocomplete=e.showHint;var h={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t={active:1,after:1,before:1,checked:1,default:1,disabled:1,empty:1,enabled:1,"first-child":1,"first-letter":1,"first-line":1,"first-of-type":1,focus:1,hover:1,"in-range":1,indeterminate:1,invalid:1,lang:1,"last-child":1,"last-of-type":1,link:1,not:1,"nth-child":1,"nth-last-child":1,"nth-last-of-type":1,"nth-of-type":1,"only-of-type":1,"only-child":1,optional:1,"out-of-range":1,placeholder:1,"read-only":1,"read-write":1,required:1,root:1,selection:1,target:1,valid:1,visited:1};e.registerHelper("hint","css",(function(n){var r=n.getCursor(),o=n.getTokenAt(r),a=e.innerMode(n.getMode(),o.state);if("css"==a.mode.name){if("keyword"==o.type&&0=="!important".indexOf(o.string))return{list:["!important"],from:e.Pos(r.line,o.start),to:e.Pos(r.line,o.end)};var i=o.start,l=r.ch,u=o.string.slice(0,l-i);/[^\w$_-]/.test(u)&&(u="",i=l=r.ch);var s=e.resolveMode("text/css"),c=[],d=a.state.state;return"pseudo"==d||"variable-3"==o.type?f(t):"block"==d||"maybeprop"==d?f(s.propertyKeywords):"prop"==d||"parens"==d||"at"==d||"params"==d?(f(s.valueKeywords),f(s.colorKeywords)):"media"!=d&&"media_parens"!=d||(f(s.mediaTypes),f(s.mediaFeatures)),c.length?{list:c,from:e.Pos(r.line,i),to:e.Pos(r.line,l)}:void 0}function f(e){for(var t in e)u&&0!=t.lastIndexOf(u,0)||c.push(t)}}))}(n(1454),n(1476))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t="ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "),n=["_blank","_self","_top","_parent"],r=["ascii","utf-8","utf-16","latin1","latin1"],o=["get","post","put","delete"],a=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],i=["all","screen","print","embossed","braille","handheld","print","projection","screen","tty","tv","speech","3d-glasses","resolution [>][<][=] [X]","device-aspect-ratio: X/Y","orientation:portrait","orientation:landscape","device-height: [X]","device-width: [X]"],l={attrs:{}},u={a:{attrs:{href:null,ping:null,type:null,media:i,target:n,hreflang:t}},abbr:l,acronym:l,address:l,applet:l,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:i,hreflang:t,type:null,shape:["default","rect","circle","poly"]}},article:l,aside:l,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["","autoplay"],loop:["","loop"],controls:["","controls"]}},b:l,base:{attrs:{href:null,target:n}},basefont:l,bdi:l,bdo:l,big:l,blockquote:{attrs:{cite:null}},body:l,br:l,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["","autofocus"],disabled:["","autofocus"],formenctype:a,formmethod:o,formnovalidate:["","novalidate"],formtarget:n,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:l,center:l,cite:l,code:l,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["","disabled"],checked:["","checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["","disabled"],multiple:["","multiple"]}},datalist:{attrs:{data:null}},dd:l,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["","open"]}},dfn:l,dir:l,div:l,dl:l,dt:l,em:l,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["","disabled"],form:null,name:null}},figcaption:l,figure:l,font:l,footer:l,form:{attrs:{action:null,name:null,"accept-charset":r,autocomplete:["on","off"],enctype:a,method:o,novalidate:["","novalidate"],target:n}},frame:l,frameset:l,h1:l,h2:l,h3:l,h4:l,h5:l,h6:l,head:{attrs:{},children:["title","base","link","style","meta","script","noscript","command"]},header:l,hgroup:l,hr:l,html:{attrs:{manifest:null},children:["head","body"]},i:l,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["","seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["","autofocus"],checked:["","checked"],disabled:["","disabled"],formenctype:a,formmethod:o,formnovalidate:["","novalidate"],formtarget:n,multiple:["","multiple"],readonly:["","readonly"],required:["","required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:l,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["","autofocus"],disabled:["","disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:l,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:t,media:i,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:l,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:r,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:l,noframes:l,noscript:l,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["","typemustmatch"]}},ol:{attrs:{reversed:["","reversed"],start:null,type:["1","a","A","i","I"]}},optgroup:{attrs:{disabled:["","disabled"],label:null}},option:{attrs:{disabled:["","disabled"],label:null,selected:["","selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:l,param:{attrs:{name:null,value:null}},pre:l,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:l,rt:l,ruby:l,s:l,samp:l,script:{attrs:{type:["text/javascript"],src:null,async:["","async"],defer:["","defer"],charset:r}},section:l,select:{attrs:{form:null,name:null,size:null,autofocus:["","autofocus"],disabled:["","disabled"],multiple:["","multiple"]}},small:l,source:{attrs:{src:null,type:null,media:null}},span:l,strike:l,strong:l,style:{attrs:{type:["text/css"],media:i,scoped:null}},sub:l,summary:l,sup:l,table:l,tbody:l,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["","autofocus"],disabled:["","disabled"],readonly:["","readonly"],required:["","required"],wrap:["soft","hard"]}},tfoot:l,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:l,time:{attrs:{datetime:null}},title:l,tr:l,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:t}},tt:l,u:l,ul:l,var:l,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["","autoplay"],mediagroup:["movie"],muted:["","muted"],controls:["","controls"]}},wbr:l},s={accesskey:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],class:null,contenteditable:["true","false"],contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["en","es"],spellcheck:["true","false"],autocorrect:["true","false"],autocapitalize:["true","false"],style:null,tabindex:["1","2","3","4","5","6","7","8","9"],title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"]};function c(e){for(var t in s)s.hasOwnProperty(t)&&(e.attrs[t]=s[t])}for(var d in c(l),u)u.hasOwnProperty(d)&&u[d]!=l&&c(u[d]);function f(t,n){var r={schemaInfo:u};if(n)for(var o in n)r[o]=n[o];return e.hint.xml(t,r)}e.htmlSchema=u,e.registerHelper("hint","html",f)}(n(1454),n(1603))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t=e.Pos;function n(e,t,n){return n?e.indexOf(t)>=0:0==e.lastIndexOf(t,0)}function r(r,o){var a=o&&o.schemaInfo,i=o&&o.quoteChar||'"',l=o&&o.matchInMiddle;if(a){var u=r.getCursor(),s=r.getTokenAt(u);if(s.end>u.ch&&(s.end=u.ch,s.string=s.string.slice(0,u.ch-s.start)),(b=e.innerMode(r.getMode(),s.state)).mode.xmlCurrentTag){var c,d,f=[],p=!1,h=/\btag\b/.test(s.type)&&!/>$/.test(s.string),m=h&&/^\w/.test(s.string);if(m){var g=r.getLine(u.line).slice(Math.max(0,s.start-2),s.start),v=/<\/$/.test(g)?"close":/<$/.test(g)?"open":null;v&&(d=s.start-("close"==v?2:1))}else h&&"<"==s.string?v="open":h&&"</"==s.string&&(v="close");var y=b.mode.xmlCurrentTag(b.state);if(!h&&!y||v){m&&(c=s.string),p=v;var b,_=b.mode.xmlCurrentContext?b.mode.xmlCurrentContext(b.state):[],w=(b=_.length&&_[_.length-1])&&a[b],k=b?w&&w.children:a["!top"];if(k&&"close"!=v)for(var O=0;O<k.length;++O)c&&!n(k[O],c,l)||f.push("<"+k[O]);else if("close"!=v)for(var C in a)!a.hasOwnProperty(C)||"!top"==C||"!attrs"==C||c&&!n(C,c,l)||f.push("<"+C);b&&(!c||"close"==v&&n(b,c,l))&&f.push("</"+b+">")}else{var S=(w=y&&a[y.name])&&w.attrs,E=a["!attrs"];if(!S&&!E)return;if(S){if(E){var M={};for(var P in E)E.hasOwnProperty(P)&&(M[P]=E[P]);for(var P in S)S.hasOwnProperty(P)&&(M[P]=S[P]);S=M}}else S=E;if("string"==s.type||"="==s.string){var T,x=(g=r.getRange(t(u.line,Math.max(0,u.ch-60)),t(u.line,"string"==s.type?s.start:s.end))).match(/([^\s\u00a0=<>\"\']+)=$/);if(!x||!S.hasOwnProperty(x[1])||!(T=S[x[1]]))return;if("function"==typeof T&&(T=T.call(this,r)),"string"==s.type){c=s.string;var j=0;/['"]/.test(s.string.charAt(0))&&(i=s.string.charAt(0),c=s.string.slice(1),j++);var D=s.string.length;if(/['"]/.test(s.string.charAt(D-1))&&(i=s.string.charAt(D-1),c=s.string.substr(j,D-2)),j){var L=r.getLine(u.line);L.length>s.end&&L.charAt(s.end)==i&&s.end++}p=!0}function R(e){if(e)for(var t=0;t<e.length;++t)c&&!n(e[t],c,l)||f.push(i+e[t]+i);return A()}return T&&T.then?T.then(R):R(T)}for(var N in"attribute"==s.type&&(c=s.string,p=!0),S)!S.hasOwnProperty(N)||c&&!n(N,c,l)||f.push(N)}return A()}}function A(){return{list:f,from:p?t(u.line,null==d?s.start:d):u,to:p?t(u.line,s.end):u}}}e.registerHelper("hint","xml",r)}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){var t={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},n=e.Pos;function r(e,n){return"pairs"==n&&"string"==typeof e?e:"object"==typeof e&&null!=e[n]?e[n]:t[n]}e.defineOption("autoCloseBrackets",!1,(function(t,n,i){i&&i!=e.Init&&(t.removeKeyMap(o),t.state.closeBrackets=null),n&&(a(r(n,"pairs")),t.state.closeBrackets=n,t.addKeyMap(o))}));var o={Backspace:u,Enter:s};function a(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),r="'"+n+"'";o[r]||(o[r]=i(n))}}function i(e){return function(t){return d(t,e)}}function l(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function u(t){var o=l(t);if(!o||t.getOption("disableInput"))return e.Pass;for(var a=r(o,"pairs"),i=t.listSelections(),u=0;u<i.length;u++){if(!i[u].empty())return e.Pass;var s=f(t,i[u].head);if(!s||a.indexOf(s)%2!=0)return e.Pass}for(u=i.length-1;u>=0;u--){var c=i[u].head;t.replaceRange("",n(c.line,c.ch-1),n(c.line,c.ch+1),"+delete")}}function s(t){var n=l(t),o=n&&r(n,"explode");if(!o||t.getOption("disableInput"))return e.Pass;for(var a=t.listSelections(),i=0;i<a.length;i++){if(!a[i].empty())return e.Pass;var u=f(t,a[i].head);if(!u||o.indexOf(u)%2!=0)return e.Pass}t.operation((function(){var e=t.lineSeparator()||"\n";t.replaceSelection(e+e,null),t.execCommand("goCharLeft"),a=t.listSelections();for(var n=0;n<a.length;n++){var r=a[n].head.line;t.indentLine(r,null,!0),t.indentLine(r+1,null,!0)}}))}function c(t){var r=e.cmpPos(t.anchor,t.head)>0;return{anchor:new n(t.anchor.line,t.anchor.ch+(r?-1:1)),head:new n(t.head.line,t.head.ch+(r?1:-1))}}function d(t,o){var a=l(t);if(!a||t.getOption("disableInput"))return e.Pass;var i=r(a,"pairs"),u=i.indexOf(o);if(-1==u)return e.Pass;for(var s,d=r(a,"closeBefore"),f=r(a,"triples"),h=i.charAt(u+1)==o,m=t.listSelections(),g=u%2==0,v=0;v<m.length;v++){var y,b=m[v],_=b.head,w=t.getRange(_,n(_.line,_.ch+1));if(g&&!b.empty())y="surround";else if(!h&&g||w!=o)if(h&&_.ch>1&&f.indexOf(o)>=0&&t.getRange(n(_.line,_.ch-2),_)==o+o){if(_.ch>2&&/\bstring/.test(t.getTokenTypeAt(n(_.line,_.ch-2))))return e.Pass;y="addFour"}else if(h){var k=0==_.ch?" ":t.getRange(n(_.line,_.ch-1),_);if(e.isWordChar(w)||k==o||e.isWordChar(k))return e.Pass;y="both"}else{if(!g||!(0===w.length||/\s/.test(w)||d.indexOf(w)>-1))return e.Pass;y="both"}else y=h&&p(t,_)?"both":f.indexOf(o)>=0&&t.getRange(_,n(_.line,_.ch+3))==o+o+o?"skipThree":"skip";if(s){if(s!=y)return e.Pass}else s=y}var O=u%2?i.charAt(u-1):o,C=u%2?o:i.charAt(u+1);t.operation((function(){if("skip"==s)t.execCommand("goCharRight");else if("skipThree"==s)for(var e=0;e<3;e++)t.execCommand("goCharRight");else if("surround"==s){var n=t.getSelections();for(e=0;e<n.length;e++)n[e]=O+n[e]+C;for(t.replaceSelections(n,"around"),n=t.listSelections().slice(),e=0;e<n.length;e++)n[e]=c(n[e]);t.setSelections(n)}else"both"==s?(t.replaceSelection(O+C,null),t.triggerElectric(O+C),t.execCommand("goCharLeft")):"addFour"==s&&(t.replaceSelection(O+O+O+O,"before"),t.execCommand("goCharRight"))}))}function f(e,t){var r=e.getRange(n(t.line,t.ch-1),n(t.line,t.ch+1));return 2==r.length?r:null}function p(e,t){var r=e.getTokenAt(n(t.line,t.ch+1));return/\bstring/.test(r.type)&&r.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}a(t.pairs+"`")}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){e.defineOption("autoCloseTags",!1,(function(t,n,o){if(o!=e.Init&&o&&t.removeKeyMap("autoCloseTags"),n){var i={name:"autoCloseTags"};"object"==typeof n&&!1===n.whenClosing||(i["'/'"]=function(e){return a(e)}),"object"==typeof n&&!1===n.whenOpening||(i["'>'"]=function(e){return r(e)}),t.addKeyMap(i)}}));var t=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],n=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function r(r){if(r.getOption("disableInput"))return e.Pass;for(var o=r.listSelections(),a=[],u=r.getOption("autoCloseTags"),s=0;s<o.length;s++){if(!o[s].empty())return e.Pass;var c=o[s].head,d=r.getTokenAt(c),f=e.innerMode(r.getMode(),d.state),p=f.state,h=f.mode.xmlCurrentTag&&f.mode.xmlCurrentTag(p),m=h&&h.name;if(!m)return e.Pass;var g="html"==f.mode.configuration,v="object"==typeof u&&u.dontCloseTags||g&&t,y="object"==typeof u&&u.indentTags||g&&n;d.end>c.ch&&(m=m.slice(0,m.length-d.end+c.ch));var b=m.toLowerCase();if(!m||"string"==d.type&&(d.end!=c.ch||!/[\"\']/.test(d.string.charAt(d.string.length-1))||1==d.string.length)||"tag"==d.type&&h.close||d.string.indexOf("/")==c.ch-d.start-1||v&&i(v,b)>-1||l(r,f.mode.xmlCurrentContext&&f.mode.xmlCurrentContext(p)||[],m,c,!0))return e.Pass;var _="object"==typeof u&&u.emptyTags;if(_&&i(_,m)>-1)a[s]={text:"/>",newPos:e.Pos(c.line,c.ch+2)};else{var w=y&&i(y,b)>-1;a[s]={indent:w,text:">"+(w?"\n\n":"")+"</"+m+">",newPos:w?e.Pos(c.line+1,0):e.Pos(c.line,c.ch+1)}}}var k="object"==typeof u&&u.dontIndentOnAutoClose;for(s=o.length-1;s>=0;s--){var O=a[s];r.replaceRange(O.text,o[s].head,o[s].anchor,"+insert");var C=r.listSelections().slice(0);C[s]={head:O.newPos,anchor:O.newPos},r.setSelections(C),!k&&O.indent&&(r.indentLine(O.newPos.line,null,!0),r.indentLine(O.newPos.line+1,null,!0))}}function o(t,n){for(var r=t.listSelections(),o=[],a=n?"/":"</",i=t.getOption("autoCloseTags"),u="object"==typeof i&&i.dontIndentOnSlash,s=0;s<r.length;s++){if(!r[s].empty())return e.Pass;var c=r[s].head,d=t.getTokenAt(c),f=e.innerMode(t.getMode(),d.state),p=f.state;if(n&&("string"==d.type||"<"!=d.string.charAt(0)||d.start!=c.ch-1))return e.Pass;var h,m="xml"!=f.mode.name&&"htmlmixed"==t.getMode().name;if(m&&"javascript"==f.mode.name)h=a+"script";else if(m&&"css"==f.mode.name)h=a+"style";else{var g=f.mode.xmlCurrentContext&&f.mode.xmlCurrentContext(p);if(!g||g.length&&l(t,g,g[g.length-1],c))return e.Pass;h=a+g[g.length-1]}">"!=t.getLine(c.line).charAt(d.end)&&(h+=">"),o[s]=h}if(t.replaceSelections(o),r=t.listSelections(),!u)for(s=0;s<r.length;s++)(s==r.length-1||r[s].head.line<r[s+1].head.line)&&t.indentLine(r[s].head.line)}function a(t){return t.getOption("disableInput")?e.Pass:o(t,!0)}function i(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function l(t,n,r,o,a){if(!e.scanForClosingTag)return!1;var i=Math.min(t.lastLine()+1,o.line+500),l=e.scanForClosingTag(t,o,null,i);if(!l||l.tag!=r)return!1;for(var u=a?1:0,s=n.length-1;s>=0&&n[s]==r;s--)++u;for(o=l.to,s=1;s<u;s++){var c=e.scanForClosingTag(t,o,null,i);if(!c||c.tag!=r)return!1;o=c.to}return!0}e.commands.closeTag=function(e){return o(e)}}(n(1454),n(1498))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";function t(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function n(n){n.state.failedTagMatch=!1,n.operation((function(){if(t(n),!n.somethingSelected()){var r=n.getCursor(),o=n.getViewport();o.from=Math.min(o.from,r.line),o.to=Math.max(r.line+1,o.to);var a=e.findMatchingTag(n,r,o);if(a){if(n.state.matchBothTags){var i="open"==a.at?a.open:a.close;i&&(n.state.tagHit=n.markText(i.from,i.to,{className:"CodeMirror-matchingtag"}))}var l="close"==a.at?a.open:a.close;l?n.state.tagOther=n.markText(l.from,l.to,{className:"CodeMirror-matchingtag"}):n.state.failedTagMatch=!0}}}))}function r(e){e.state.failedTagMatch&&n(e)}e.defineOption("matchTags",!1,(function(o,a,i){i&&i!=e.Init&&(o.off("cursorActivity",n),o.off("viewportChange",r),t(o)),a&&(o.state.matchBothTags="object"==typeof a&&a.bothTags,o.on("cursorActivity",n),o.on("viewportChange",r),n(o))})),e.commands.toMatchingTag=function(t){var n=e.findMatchingTag(t,t.getCursor());if(n){var r="close"==n.at?n.open:n.close;r&&t.extendSelection(r.to,r.from)}}}(n(1454),n(1498))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";var t="CodeMirror-activeline",n="CodeMirror-activeline-background",r="CodeMirror-activeline-gutter";function o(e){for(var o=0;o<e.state.activeLines.length;o++)e.removeLineClass(e.state.activeLines[o],"wrap",t),e.removeLineClass(e.state.activeLines[o],"background",n),e.removeLineClass(e.state.activeLines[o],"gutter",r)}function a(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function i(e,i){for(var l=[],u=0;u<i.length;u++){var s=i[u],c=e.getOption("styleActiveLine");if("object"==typeof c&&c.nonEmpty?s.anchor.line==s.head.line:s.empty()){var d=e.getLineHandleVisualStart(s.head.line);l[l.length-1]!=d&&l.push(d)}}a(e.state.activeLines,l)||e.operation((function(){o(e);for(var a=0;a<l.length;a++)e.addLineClass(l[a],"wrap",t),e.addLineClass(l[a],"background",n),e.addLineClass(l[a],"gutter",r);e.state.activeLines=l}))}function l(e,t){i(e,t.ranges)}e.defineOption("styleActiveLine",!1,(function(t,n,r){var a=r!=e.Init&&r;n!=a&&(a&&(t.off("beforeSelectionChange",l),o(t),delete t.state.activeLines),n&&(t.state.activeLines=[],i(t,t.listSelections()),t.on("beforeSelectionChange",l)))}))}(n(1454))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){"use strict";function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length||1,"searching";n?t.pos=n.index:t.skipToEnd()}}}function n(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new n)}function o(e){return"string"==typeof e&&e==e.toLowerCase()}function a(e,t,n){return e.getSearchCursor(t,n,{caseFold:o(t),multiline:!0})}function i(e,t,n,r,o){e.openDialog(t,r,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){h(e)},onKeyDown:o})}function l(e,t,n,r,o){e.openDialog?e.openDialog(t,o,{value:r,selectValueOnOpen:!0}):o(prompt(n,r))}function u(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}function s(e){return e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"==t?"\\":e}))}function c(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=s(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function d(e,n,r){n.queryText=r,n.query=c(r),e.removeOverlay(n.overlay,o(n.query)),n.overlay=t(n.query,o(n.query)),e.addOverlay(n.overlay),e.showMatchesOnScrollbar&&(n.annotate&&(n.annotate.clear(),n.annotate=null),n.annotate=e.showMatchesOnScrollbar(n.query,o(n.query)))}function f(t,n,o,a){var u=r(t);if(u.query)return p(t,n);var s=t.getSelection()||u.lastQuery;if(s instanceof RegExp&&"x^"==s.source&&(s=null),o&&t.openDialog){var c=null,f=function(n,r){e.e_stop(r),n&&(n!=u.queryText&&(d(t,u,n),u.posFrom=u.posTo=t.getCursor()),c&&(c.style.opacity=1),p(t,r.shiftKey,(function(e,n){var r;n.line<3&&document.querySelector&&(r=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&r.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((c=r).style.opacity=.4)})))};i(t,m(t),s,f,(function(n,o){var a=e.keyName(n),i=t.getOption("extraKeys"),l=i&&i[a]||e.keyMap[t.getOption("keyMap")][a];"findNext"==l||"findPrev"==l||"findPersistentNext"==l||"findPersistentPrev"==l?(e.e_stop(n),d(t,r(t),o),t.execCommand(l)):"find"!=l&&"findPersistent"!=l||(e.e_stop(n),f(o,n))})),a&&s&&(d(t,u,s),p(t,n))}else l(t,m(t),"Search for:",s,(function(e){e&&!u.query&&t.operation((function(){d(t,u,e),u.posFrom=u.posTo=t.getCursor(),p(t,n)}))}))}function p(t,n,o){t.operation((function(){var i=r(t),l=a(t,i.query,n?i.posFrom:i.posTo);(l.find(n)||(l=a(t,i.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0))).find(n))&&(t.setSelection(l.from(),l.to()),t.scrollIntoView({from:l.from(),to:l.to()},20),i.posFrom=l.from(),i.posTo=l.to(),o&&o(l.from(),l.to()))}))}function h(e){e.operation((function(){var t=r(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))}))}function m(e){return'<span class="CodeMirror-search-label">'+e.phrase("Search:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function g(e){return' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function v(e){return'<span class="CodeMirror-search-label">'+e.phrase("With:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>'}function y(e){return'<span class="CodeMirror-search-label">'+e.phrase("Replace?")+"</span> <button>"+e.phrase("Yes")+"</button> <button>"+e.phrase("No")+"</button> <button>"+e.phrase("All")+"</button> <button>"+e.phrase("Stop")+"</button> "}function b(e,t,n){e.operation((function(){for(var r=a(e,t);r.findNext();)if("string"!=typeof t){var o=e.getRange(r.from(),r.to()).match(t);r.replace(n.replace(/\$(\d)/g,(function(e,t){return o[t]})))}else r.replace(n)}))}function _(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||r(e).lastQuery,o='<span class="CodeMirror-search-label">'+(t?e.phrase("Replace all:"):e.phrase("Replace:"))+"</span>";l(e,o+g(e),o,n,(function(n){n&&(n=c(n),l(e,v(e),e.phrase("Replace with:"),"",(function(r){if(r=s(r),t)b(e,n,r);else{h(e);var o=a(e,n,e.getCursor("from")),i=function(){var t,s=o.from();!(t=o.findNext())&&(o=a(e,n),!(t=o.findNext())||s&&o.from().line==s.line&&o.from().ch==s.ch)||(e.setSelection(o.from(),o.to()),e.scrollIntoView({from:o.from(),to:o.to()}),u(e,y(e),e.phrase("Replace?"),[function(){l(t)},i,function(){b(e,n,r)}]))},l=function(e){o.replace("string"==typeof n?r:r.replace(/\$(\d)/g,(function(t,n){return e[n]}))),i()};i()}})))}))}}e.commands.find=function(e){h(e),f(e)},e.commands.findPersistent=function(e){h(e),f(e,!1,!0)},e.commands.findPersistentNext=function(e){f(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){f(e,!0,!0,!0)},e.commands.findNext=f,e.commands.findPrev=function(e){f(e,!0)},e.commands.clearSearch=h,e.commands.replace=_,e.commands.replaceAll=function(e){_(e,!0)}}(n(1454),n(1475),n(1499))},function(e,t,n){
// Distributed under an MIT license: https://codemirror.net/LICENSE
!function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=e.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var r=e.getOption("placeholder");"string"==typeof r&&(r=document.createTextNode(r)),n.appendChild(r),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function r(e){setTimeout((function(){var r=!1,o=e.getInputField();"TEXTAREA"==o.nodeName?r=!o.value:1==e.lineCount()&&(r=!/[^\u200b]/.test(o.querySelector(".CodeMirror-line").textContent)),r?n(e):t(e)}),20)}function o(e){i(e)&&n(e)}function a(e){var r=e.getWrapperElement(),o=i(e);r.className=r.className.replace(" CodeMirror-empty","")+(o?" CodeMirror-empty":""),o?n(e):t(e)}function i(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",(function(n,i,l){var u=l&&l!=e.Init;if(i&&!u)n.on("blur",o),n.on("change",a),n.on("swapDoc",a),e.on(n.getInputField(),"compositionupdate",n.state.placeholderCompose=function(){r(n)}),a(n);else if(!i&&u){n.off("blur",o),n.off("change",a),n.off("swapDoc",a),e.off(n.getInputField(),"compositionupdate",n.state.placeholderCompose),t(n);var s=n.getWrapperElement();s.className=s.className.replace(" CodeMirror-empty","")}i&&!n.hasFocus()&&o(n)}))}(n(1454))},function(e,t,n){n(1454).defineExtension("colorpicker",(function(){var e,t,n,r,o,a,i,l,u,s,c,d,f,p,h,m,g,v,y,b,_,w,k,O,C,S,E,M,P,T,x,j,D,L=function(){return ET_Builder.Frames.top},R={trim:function(e){return e.replace(/^\s+|\s+$/g,"")},format:function(e,t){if("hex"==t){var n=e.r.toString(16);e.r<16&&(n="0"+n);var r=e.g.toString(16);e.g<16&&(r="0"+r);var o=e.b.toString(16);return e.b<16&&(o="0"+o),"#"+[n,r,o].join("")}return"rgb"==t?void 0===e.a?"rgb("+[e.r,e.g,e.b].join(",")+")":"rgba("+[e.r,e.g,e.b,e.a].join(",")+")":"hsl"==t?void 0===e.a?"hsl("+[e.h,e.s+"%",e.l+"%"].join(",")+")":"hsla("+[e.h,e.s+"%",e.l+"%",e.a].join(",")+")":e},parse:function(e){if("string"==typeof e){if(e.indexOf("rgb(")>-1){for(var t=0,n=(a=e.replace("rgb(","").replace(")","").split(",")).length;t<n;t++)a[t]=parseInt(R.trim(a[t]),10);return{type:"rgb",r:a[0],g:a[1],b:a[2],a:1}}if(e.indexOf("rgba(")>-1){for(t=0,n=(a=e.replace("rgba(","").replace(")","").split(",")).length;t<n;t++)a[t]=n-1==t?parseFloat(R.trim(a[t])):parseInt(R.trim(a[t]),10);return{type:"rgb",r:a[0],g:a[1],b:a[2],a:a[3]}}if(e.indexOf("hsl(")>-1){for(t=0,n=(a=e.replace("hsl(","").replace(")","").split(",")).length;t<n;t++)a[t]=parseInt(R.trim(a[t]),10);var r={type:"hsl",h:a[0],s:a[1],l:a[2],a:1},o=R.HSLtoRGB(r.h,r.s,r.l);return r.r=o.r,r.g=o.g,r.b=o.b,r}if(e.indexOf("hsla(")>-1){for(t=0,n=(a=e.replace("hsla(","").replace(")","").split(",")).length;t<n;t++)a[t]=n-1==t?parseFloat(R.trim(a[t])):parseInt(R.trim(a[t]),10);return r={type:"hsl",h:a[0],s:a[1],l:a[2],a:a[3]},o=R.HSLtoRGB(r.h,r.s,r.l),r.r=o.r,r.g=o.g,r.b=o.b,r}if(0==e.indexOf("#")){var a=[];if(3==(e=e.replace("#","")).length)for(t=0,n=e.length;t<n;t++){var i=e.substr(t,1);a.push(parseInt(i+i,16))}else for(t=0,n=e.length;t<n;t+=2)a.push(parseInt(e.substr(t,2),16));return{type:"hex",r:a[0],g:a[1],b:a[2],a:1}}}return e},HSVtoRGB:function(e,t,n){360==e&&(e=0);var r=t*n,o=r*(1-Math.abs(e/60%2-1)),a=n-r,i=[];return 0<=e&&e<60?i=[r,o,0]:60<=e&&e<120?i=[o,r,0]:120<=e&&e<180?i=[0,r,o]:180<=e&&e<240?i=[0,o,r]:240<=e&&e<300?i=[o,0,r]:300<=e&&e<360&&(i=[r,0,o]),{r:Math.ceil(255*(i[0]+a)),g:Math.ceil(255*(i[1]+a)),b:Math.ceil(255*(i[2]+a))}},RGBtoHSV:function(e,t,n){var r=e/255,o=t/255,a=n/255,i=Math.max(r,o,a),l=i-Math.min(r,o,a),u=0;return 0==l?u=0:i==r?u=(o-a)/l%6*60:i==o?u=60*((a-r)/l+2):i==a&&(u=60*((r-o)/l+4)),u<0&&(u=360+u),{h:u,s:0==i?0:l/i,v:i}},RGBtoHSL:function(e,t,n){e/=255,t/=255,n/=255;var r,o,a=Math.max(e,t,n),i=Math.min(e,t,n),l=(a+i)/2;if(a==i)r=o=0;else{var u=a-i;switch(o=l>.5?u/(2-a-i):u/(a+i),a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:Math.round(360*r),s:Math.round(100*o),l:Math.round(100*l)}},HUEtoRGB:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n){var r,o,a;if(e/=360,n/=100,0==(t/=100))r=o=a=n;else{var i=n<.5?n*(1+t):n+t-n*t,l=2*n-i;r=this.HUEtoRGB(l,i,e+1/3),o=this.HUEtoRGB(l,i,e),a=this.HUEtoRGB(l,i,e-1/3)}return{r:255*r,g:255*o,b:255*a}}},N=[{rgb:"#ff0000",start:0},{rgb:"#ffff00",start:.17},{rgb:"#00ff00",start:.33},{rgb:"#00ffff",start:.5},{rgb:"#0000ff",start:.67},{rgb:"#ff00ff",start:.83},{rgb:"#ff0000",start:1}],A=(oe(),function(){}),B=0,F={},I=!1,W=!1,V=2e3;function H(e,t,n){if("string"!=typeof e)this.el=e;else{var r=L().document.createElement(e);for(var o in this.uniqId=B++,r.className=t,n=n||{})r.setAttribute(o,n[o]);this.el=r}}function G(e,t,n){C.val(e),S.val(t),E.val(n),M.val(b)}function U(e,t,n){P.val(e),T.val(t+"%"),x.val(n+"%"),j.val(b)}function z(){return R.format({r:C.int(),g:S.int(),b:E.int()},"hex")}function q(){return R.HSVtoRGB(_,w,k)}function K(){return R.format(q(),"hex")}function $(){var e=R.HSVtoRGB(_,w,k);return R.RGBtoHSL(e.r,e.g,e.b)}function Y(e){if("rgb"==(e=e||"hex"))return(n=q()).a=1==b?void 0:b,R.format(n,"rgb");if("hsl"==e){var t=$();return t.a=1==b?void 0:b,R.format(t,"hsl")}var n=q();return R.format(n,"hex")}function X(e){c.css("background-color",e)}function J(){var e=v.data("format")||"hex",t=null;if("hex"==e)O.val(K());else if("rgb"==e)G((t=q()).r,t.g,t.b);else if("hsl"==e){var n=$();U(n.h,n.s,n.l)}X(Y("rgb")),t=q(),ae(R.format(t,"rgb")),"function"==typeof A&&(isNaN(b)||A(Y(e)))}function Q(e){e.preventDefault();var n=t.position(),o=r.width(),a=r.height(),l=e.clientX-n.left,u=e.clientY-n.top;l<0?l=0:l>o&&(l=o),u<0?u=0:u>a&&(u=a),i.css({left:l-5+"px",top:u-5+"px"}),i.data("pos",{x:l,y:u}),ue(),J()}function Z(e,t,n){var r={r:parseInt(e.r+(t.r-e.r)*n,10),g:parseInt(e.g+(t.g-e.g)*n,10),b:parseInt(e.b+(t.b-e.b)*n,10)};return R.format(r,"hex")}function ee(e){for(var t,n,r=0;r<N.length;r++)if(N[r].start>=e){t=N[r-1],n=N[r];break}return t&&n?Z(t,n,(e-t.start)/(n.start-t.start)):N[0].rgb}function te(e){r.css("background-color",e)}function ne(e){_=e}function re(e){var t,n=d.offset().left,r=n+d.width(),o=e?se(e).clientX:n+_/360*(r-n);t=o<n?0:o>r?100:(o-n)/(r-n)*100;var a=d.width()*(t/100);l.css({left:a-Math.ceil(l.width()/2)+"px"}),l.data("pos",{x:a}),te(ee(t/100)),ne(t/100*360),J()}function oe(){for(var e="",t=["","-o-","-ms-","-moz-","-webkit-"],n=L().document.createElement("div"),r=0;r<t.length;r++)n.style.background=t[r]+"linear-gradient(#000000, #ffffff)",n.style.background&&(e=t[r]);return n=null,delete n,e}function ae(e){var t=R.parse(e);t.a=0;var n=R.format(t,"rgb");t.a=1;var r=R.format(t,"rgb");h.css("background","linear-gradient(to right, "+n+", "+r+")")}function ie(e){var t,n=p.offset().left,r=n+p.width(),o=se(e).clientX;t=o<n?0:o>r?100:(o-n)/(r-n)*100;var a=p.width()*(t/100);g.css({left:a-Math.ceil(g.width()/2)+"px"}),g.data("pos",{x:a}),le(),Le(),J()}function le(){var e=g.data("pos")||{x:0},t=Math.round(e.x/p.width()*100)/100;b=isNaN(t)?1:t}function ue(){var e=i.data("pos")||{x:0,y:0},t=l.data("pos")||{x:0},n=r.width(),o=r.height(),a=t.x/d.width()*360,u=e.x/n,s=(o-e.y)/o;0==n&&(a=0,u=0,s=0),_=a,w=u,k=s}function se(e){return e.touches&&e.touches[0]?e.touches[0]:e}function ce(e){var t=e.which,n=!1;return 37!=t&&39!=t&&8!=t&&46!=t&&9!=t||(n=!0),!(!n&&(t<48||t>57))}function de(e){var t=C.val(),n=S.val(),r=E.val();""!=t&&""!=n&&""!=r&&(parseInt(t)>255?C.val(255):C.val(parseInt(t)),parseInt(n)>255?S.val(255):S.val(parseInt(n)),parseInt(r)>255?E.val(255):E.val(parseInt(r)),me(z()))}function fe(){var e=r.width()*w,t=r.height()*(1-k);i.css({left:e-5+"px",top:t-5+"px"}),i.data("pos",{x:e,y:t});var n=d.width()*(_/360);l.css({left:n-7.5+"px"}),l.data("pos",{x:n});var o=p.width()*(b||0);g.css({left:o-7.5+"px"}),g.data("pos",{x:o})}function pe(e,t,n,r){b=r,_=e,w=t,k=n}function he(e){v.data("format",e),Re()}function me(e){var t=e||"#FF0000",n=R.parse(t);he(n.type),te(t);var r=R.RGBtoHSV(n.r,n.g,n.b);pe(r.h,r.s,r.v,n.a),fe(),re(),J()}function ge(e,t,n){e.addEventListener(t,n)}function ve(e,t,n){e.removeEventListener(t,n)}function ye(e){r.data("isDown",!0),Q(e)}function be(e){r.data("isDown",!1)}function _e(e){e.preventDefault(),n.data("isDown",!0)}function we(e){e.preventDefault(),f.data("isDown",!0)}function ke(e){n.data("isDown",!0),re(e)}function Oe(e){f.data("isDown",!0),ie(e)}function Ce(e){if(e.which<65||e.which>70)return ce(e)}function Se(e){var t=O.val();"#"==t.charAt(0)&&7==t.length&&me(t)}function Ee(e){Ne()}function Me(){ge(r.el,"mousedown",ye),ge(r.el,"mouseup",be),ge(l.el,"mousedown",_e),ge(g.el,"mousedown",we),ge(d.el,"mousedown",ke),ge(p.el,"mousedown",Oe),ge(O.el,"keydown",Ce),ge(O.el,"keyup",Se),ge(C.el,"keydown",ce),ge(C.el,"keyup",de),ge(S.el,"keydown",ce),ge(S.el,"keyup",de),ge(E.el,"keydown",ce),ge(E.el,"keyup",de),ge(L().document,"mouseup",xe),ge(L().document,"mousemove",je),ge(m.el,"click",Ee)}function Pe(e){var t=new H(e).closest("codemirror-colorview"),n=new H(e).closest("codemirror-colorpicker"),r=new H(e).closest("CodeMirror");return e.nodeName,!!(n||t||r)}function Te(e){return"HTML"==e.nodeName}function xe(e){r.data("isDown",!1),n.data("isDown",!1),f.data("isDown",!1),Te(e.target)||0==Pe(e.target)&&Ue()}function je(e){r.data("isDown")&&Q(e),n.data("isDown")&&re(e),f.data("isDown")&&ie(e)}function De(){ve(r.el,"mousedown",ye),ve(r.el,"mouseup",be),ve(l.el,"mousedown",_e),ve(g.el,"mousedown",we),ve(d.el,"mousedown",ke),ve(p.el,"mousedown",Oe),ve(O.el,"keydown",Ce),ve(O.el,"keyup",Se),ve(C.el,"keydown",ce),ve(C.el,"keyup",de),ve(S.el,"keydown",ce),ve(S.el,"keyup",de),ve(E.el,"keydown",ce),ve(E.el,"keyup",de),ve(L().document,"mouseup",xe),ve(L().document,"mousemove",je),ve(m.el,"click",Ee),A=void 0}function Le(){var e=v.data("format")||"hex";if(b<1&&"hex"==e){var t="rgb";v.removeClass(e),v.addClass(t),v.data("format",t),J()}}function Re(){var e=v.data("format")||"hex";v.removeClass("hex"),v.removeClass("rgb"),v.removeClass("hsl"),v.addClass(e)}function Ne(){var e=v.data("format")||"hex",t="hex";"hex"==e?t="rgb":"rgb"==e?t="hsl":"hsl"==e&&(t=1==b?"hex":"rgb"),v.removeClass(e),v.addClass(t),v.data("format",t),J()}function Ae(e){var t=new H("div","information-item "+e);if("hex"==e){var n=new H("div","input-field hex");O=new H("input","input",{type:"text"}),n.append(O),n.append(new H("div","title").html("HEX")),t.append(n)}else"rgb"==e?(n=new H("div","input-field rgb-r"),C=new H("input","input",{type:"text"}),n.append(C),n.append(new H("div","title").html("R")),t.append(n),n=new H("div","input-field rgb-g"),S=new H("input","input",{type:"text"}),n.append(S),n.append(new H("div","title").html("G")),t.append(n),n=new H("div","input-field rgb-b"),E=new H("input","input",{type:"text"}),n.append(E),n.append(new H("div","title").html("B")),t.append(n),n=new H("div","input-field rgb-a"),M=new H("input","input",{type:"text"}),n.append(M),n.append(new H("div","title").html("A")),t.append(n)):"hsl"==e&&(n=new H("div","input-field hsl-h"),P=new H("input","input",{type:"text"}),n.append(P),n.append(new H("div","title").html("H")),t.append(n),n=new H("div","input-field hsl-s"),T=new H("input","input",{type:"text"}),n.append(T),n.append(new H("div","title").html("S")),t.append(n),n=new H("div","input-field hsl-l"),x=new H("input","input",{type:"text"}),n.append(x),n.append(new H("div","title").html("L")),t.append(n),n=new H("div","input-field hsl-a"),j=new H("input","input",{type:"text"}),n.append(j),n.append(new H("div","title").html("A")),t.append(n));return t}function Be(){e=new H(L().document.body),t=new H("div","codemirror-colorpicker"),r=new H("div","color"),i=new H("div","drag-pointer"),o=new H("div","value"),a=new H("div","saturation"),u=new H("div","control"),s=new H("div","empty"),c=new H("div","color"),n=new H("div","hue"),d=new H("div","hue-container"),l=new H("div","drag-bar"),f=new H("div","opacity"),p=new H("div","opacity-container"),h=new H("div","color-bar"),g=new H("div","drag-bar2"),v=new H("div","information hex"),y=new H("div","information-change"),m=new H("button","format-change-button",{type:"button"}).html("\u2194"),y.append(m),v.append(Ae("hex")),v.append(Ae("rgb")),v.append(Ae("hsl")),v.append(y),o.append(i),a.append(o),r.append(a),d.append(l),n.append(d),p.append(h),p.append(g),f.append(p),u.append(n),u.append(f),u.append(s),u.append(c),t.append(r),t.append(u),t.append(v),Fe(),me()}function Fe(){for(var e=0,t=N.length;e<t;e++){var n=N[e],r=R.parse(n.rgb);n.r=r.r,n.g=r.g,n.b=r.b}}function Ie(e){if("object"==typeof e){if(!e.r||!e.g||!e.b)return;me(R.format(e,"hex"))}else if("string"==typeof e){if("#"!=e.charAt(0))return;me(e)}}function We(e){ue();var t=q();return e?R.format(t,e):t}function Ve(n){var r=t.width(),o=t.height(),a=n.left-e.el.scrollLeft;r+a>window.innerWidth&&(a-=r+a-window.innerWidth),a<0&&(a=0);var i=n.top-e.el.scrollTop;o+i>window.innerHeight&&(i-=o+i-window.innerHeight),i<0&&(i=0),t.css({left:a+"px",top:i+"px"})}function He(e,n,r){De(),Me(),t.appendTo(L().document.body),t.css({position:"fixed",left:"-10000px",top:"-10000px"}),t.show(),Ve(e),I=!0,W=e.isShortCut||!1,me(n),A=function(e){r(e)},(V=e.hideDelay||2e3)>0&&Ge(V)}function Ge(e){e=e||0,ve(t.el,"mouseenter"),ve(t.el,"mouseleave"),ge(t.el,"mouseenter",(function(){clearTimeout(D)})),ge(t.el,"mouseleave",(function(){clearTimeout(D),D=setTimeout(Ue,e)})),clearTimeout(D),D=setTimeout(Ue,e)}function Ue(){I&&(De(),t.hide(),t.remove(),I=!1)}return H.prototype.closest=function(e){for(var t=this,n=!1;!(n=t.hasClass(e));){if(!t.el.parentNode)return null;t=new H(t.el.parentNode)}return n?t:null},H.prototype.removeClass=function(e){this.el.className=R.trim((" "+this.el.className+" ").replace(" "+e+" "," "))},H.prototype.hasClass=function(e){return!!this.el.className&&(" "+this.el.className+" ").indexOf(" "+e+" ")>-1},H.prototype.addClass=function(e){this.hasClass(e)||(this.el.className=this.el.className+" "+e)},H.prototype.html=function(e){return this.el.innerHTML=e,this},H.prototype.empty=function(){return this.html("")},H.prototype.append=function(e){return"string"==typeof e?this.el.appendChild(L().document.createTextNode(e)):this.el.appendChild(e.el||e),this},H.prototype.appendTo=function(e){return(e.el?e.el:e).appendChild(this.el),this},H.prototype.remove=function(){return this.el.parentNode&&this.el.parentNode.removeChild(this.el),this},H.prototype.text=function(){return this.el.textContent},H.prototype.css=function(e,t){if(2==arguments.length)this.el.style[e]=t;else if(1==arguments.length){if("string"==typeof e)return getComputedStyle(this.el)[e];var n=e||{};for(var r in n)this.el.style[r]=n[r]}return this},H.prototype.offset=function(){var e=this.el.getBoundingClientRect();return{top:e.top+L().document.body.scrollTop,left:e.left+L().document.body.scrollLeft}},H.prototype.position=function(){return{top:parseFloat(this.el.style.top),left:parseFloat(this.el.style.left)}},H.prototype.width=function(){return this.el.offsetWidth},H.prototype.height=function(){return this.el.offsetHeight},H.prototype.dataKey=function(e){return this.uniqId+"."+e},H.prototype.data=function(e,t){if(2!=arguments.length){if(1==arguments.length)return F[this.dataKey(e)];var n=Object.keys(F),r=this.uniqId+".";return n.filter((function(e){return 0==e.indexOf(r)})).map((function(e){return F[e]}))}return F[this.dataKey(e)]=t,this},H.prototype.val=function(e){return 0==arguments.length?this.el.value:(1==arguments.length&&(this.el.value=e),this)},H.prototype.int=function(){return parseInt(this.val(),10)},H.prototype.show=function(){return this.css("display","block")},H.prototype.hide=function(){return this.css("display","none")},Be(),{isShortCut:function(){return W},$root:t,show:He,hide:Ue,setColor:Ie,getColor:We}}))},function(e,t,n){!function(e){"use strict";var t=function(){return ET_Builder.Frames.top},n={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",aqua:"rgb(0, 255, 255)",aquamarine:"rgb(127, 255, 212)",azure:"rgb(240, 255, 255)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",burlywood:"rgb(222, 184, 135)",cadetblue:"rgb(95, 158, 160)",chartreuse:"rgb(127, 255, 0)",chocolate:"rgb(210, 105, 30)",coral:"rgb(255, 127, 80)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",crimson:"rgb(237, 20, 61)",cyan:"rgb(0, 255, 255)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgray:"rgb(169, 169, 169)",darkgrey:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkorange:"rgb(255, 140, 0)",darkorchid:"rgb(153, 50, 204)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",deeppink:"rgb(255, 20, 147)",deepskyblue:"rgb(0, 191, 255)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",firebrick:"rgb(178, 34, 34)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",fuchsia:"rgb(255, 0, 255)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",goldenrod:"rgb(218, 165, 32)",gray:"rgb(128, 128, 128)",grey:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",greenyellow:"rgb(173, 255, 47)",honeydew:"rgb(240, 255, 240)",hotpink:"rgb(255, 105, 180)",indianred:"rgb(205, 92, 92)",indigo:"rgb(75, 0, 130)",ivory:"rgb(255, 255, 240)",khaki:"rgb(240, 230, 140)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lightblue:"rgb(173, 216, 230)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgreen:"rgb(144, 238, 144)",lightgray:"rgb(211, 211, 211)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightsalmon:"rgb(255, 160, 122)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightyellow:"rgb(255, 255, 224)",lime:"rgb(0, 255, 0)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",maroon:"rgb(128, 0, 0)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumpurple:"rgb(147, 112, 219)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navy:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olive:"rgb(128, 128, 0)",olivedrab:"rgb(107, 142, 35)",orange:"rgb(255, 165, 0)",orangered:"rgb(255, 69, 0)",orchid:"rgb(218, 112, 214)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",paleturquoise:"rgb(175, 238, 238)",palevioletred:"rgb(219, 112, 147)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",plum:"rgb(221, 160, 221)",powderblue:"rgb(176, 224, 230)",purple:"rgb(128, 0, 128)",rebeccapurple:"rgb(102, 51, 153)",red:"rgb(255, 0, 0)",rosybrown:"rgb(188, 143, 143)",royalblue:"rgb(65, 105, 225)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",sienna:"rgb(160, 82, 45)",silver:"rgb(192, 192, 192)",skyblue:"rgb(135, 206, 235)",slateblue:"rgb(106, 90, 205)",slategray:"rgb(112, 128, 144)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",springgreen:"rgb(0, 255, 127)",steelblue:"rgb(70, 130, 180)",tan:"rgb(210, 180, 140)",teal:"rgb(0, 128, 128)",thistle:"rgb(216, 191, 216)",tomato:"rgb(255, 99, 71)",turquoise:"rgb(64, 224, 208)",violet:"rgb(238, 130, 238)",wheat:"rgb(245, 222, 179)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellowgreen:"rgb(154, 205, 50)",transparent:"rgba(0, 0, 0, 0)"},r="codemirror-colorview",o="codemirror-colorview-background",a=["comment"];function i(e,t){"setValue"==t.origin?(e.state.colorpicker.close_color_picker(),e.state.colorpicker.init_color_update(),e.state.colorpicker.style_color_update()):e.state.colorpicker.style_color_update(e.getCursor().line)}function l(e,t){e.state.colorpicker.isUpdate||(e.state.colorpicker.isUpdate=!0,e.state.colorpicker.close_color_picker(),e.state.colorpicker.init_color_update(),e.state.colorpicker.style_color_update())}function u(e,t){i(e,{origin:"setValue"})}function s(e,t){e.state.colorpicker.keyup(t)}function c(e,t){e.state.colorpicker.is_edit_mode()&&e.state.colorpicker.check_mousedown(t)}function d(e,t){i(e,{origin:"setValue"})}function f(e){e.state.colorpicker.close_color_picker()}function p(e,t){var n=void 0;return function(r,o){n&&clearTimeout(n),n=setTimeout((function(){e(r,o)}),t||300)}}function h(e,t){return!(!e||!e.className)&&(" "+e.className+" ").indexOf(" "+t+" ")>-1}function m(e,t){t="boolean"==typeof t?{mode:"view"}:Object.assign({mode:"view"},t||{}),this.opt=t,this.cm=e,this.markers={},a=this.opt.excluded_token||a,this.cm.colorpicker?this.colorpicker=this.cm.colorpicker():this.opt.colorpicker&&(this.colorpicker=this.opt.colorpicker),this.init_event()}e.defineOption("colorpicker",!1,(function(t,n,r){r&&r!=e.Init&&t.state.colorpicker&&(t.state.colorpicker.destroy(),t.state.colorpicker=null),n&&(t.state.colorpicker=new m(t,n))})),m.prototype.init_event=function(){var e,t;this.cm.on("mousedown",c),this.cm.on("keyup",s),this.cm.on("change",i),this.cm.on("update",l),this.cm.on("refresh",u),this.onPasteCallback=(e=this.cm,t=d,function(n){t.call(this,e,n)}),this.cm.getWrapperElement().addEventListener("paste",this.onPasteCallback),this.is_edit_mode()&&this.cm.on("scroll",p(f,50))},m.prototype.is_edit_mode=function(){return"edit"==this.opt.mode},m.prototype.is_view_mode=function(){return"view"==this.opt.mode},m.prototype.destroy=function(){this.cm.off("mousedown",c),this.cm.off("keyup",s),this.cm.off("change",i),this.cm.getWrapperElement().removeEventListener("paste",this.onPasteCallback),this.is_edit_mode()&&this.cm.off("scroll")},m.prototype.hasClass=function(e,t){return!!e.className&&(" "+e.className+" ").indexOf(" "+t+" ")>-1},m.prototype.check_mousedown=function(e){this.hasClass(e.target,o)?this.open_color_picker(e.target.parentNode):this.close_color_picker()},m.prototype.popup_color_picker=function(e){var t=this.cm.getCursor(),n=this,r={lineNo:t.line,ch:t.ch,color:e||"#FFFFFF",isShortCut:!0};Object.keys(this.markers).forEach((function(e){if(("#"+e).indexOf("#"+r.lineNo+":")>-1){var t=n.markers[e];t.ch<=r.ch&&r.ch<=t.ch+t.color.length&&(r.ch=t.ch,r.color=t.color,r.nameColor=t.nameColor)}})),this.open_color_picker(r)},m.prototype.open_color_picker=function(e){var t=e.lineNo,n=e.ch,r=e.nameColor,o=e.color;if(this.colorpicker){var a=this,i=o,l=this.cm.charCoords({line:t,ch:n});this.colorpicker.show({left:l.left,top:l.bottom,isShortCut:e.isShortCut||!1,hideDelay:a.opt.hideDelay||2e3},r||o,(function(e){a.cm.replaceRange(e,{line:t,ch:n},{line:t,ch:n+i.length},"*colorpicker"),i=e}))}},m.prototype.close_color_picker=function(e){this.colorpicker&&this.colorpicker.hide()},m.prototype.key=function(e,t){return[e,t].join(":")},m.prototype.keyup=function(e){this.colorpicker&&("Escape"==e.key||0==this.colorpicker.isShortCut())&&this.colorpicker.hide()},m.prototype.init_color_update=function(){this.markers={}},m.prototype.style_color_update=function(e){if(e)this.match(e);else for(var t=this.cm.lineCount(),n=0;n<t;n++)this.match(n)},m.prototype.empty_marker=function(e,t){for(var n=t.markedSpans||[],o=0,a=n.length;o<a;o++){var i=this.key(e,n[o].from);i&&h(n[o].marker.replacedWith,r)&&(delete this.markers[i],n[o].marker.clear())}},m.prototype.color_regexp=/(#(?:[\da-f]{3}){1,2}|rgb\((?:\s*\d{1,3},\s*){2}\d{1,3}\s*\)|rgba\((?:\s*\d{1,3},\s*){3}\d*\.?\d+\s*\)|hsl\(\s*\d{1,3}(?:,\s*\d{1,3}%){2}\s*\)|hsla\(\s*\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\s*\)|([\w_\-]+))/gi,m.prototype.match_result=function(e){return e.text.match(this.color_regexp)},m.prototype.submatch=function(e,t){this.empty_marker(e,t);var r=this.match_result(t);if(r&&r.length)for(var o={next:0},a=0,i=r.length;a<i;a++)if(r[a].indexOf("#")>-1||r[a].indexOf("rgb")>-1||r[a].indexOf("hsl")>-1)this.render(o,e,t,r[a]);else{var l=n[r[a]];l&&this.render(o,e,t,r[a],l)}},m.prototype.match=function(e){var t=this.cm.getLineHandle(e),n=this;this.cm.operation((function(){n.submatch(e,t)}))},m.prototype.make_element=function(){var e=t().document.createElement("div");return e.className=r,this.is_edit_mode()?e.title="open color picker":e.title="",e.back_element=this.make_background_element(),e.appendChild(e.back_element),e},m.prototype.make_background_element=function(){var e=t().document.createElement("div");return e.className=o,e},m.prototype.set_state=function(e,t,n,r){var o=this.create_marker(e,t);return o.lineNo=e,o.ch=t,o.color=n,o.nameColor=r,o},m.prototype.create_marker=function(e,t){var n=this.key(e,t);return this.markers[n]||(this.markers[n]=this.make_element()),this.markers[n]},m.prototype.has_marker=function(e,t){var n=this.key(e,t);return!!this.markers[n]},m.prototype.update_element=function(e,t){e.back_element.style.backgroundColor=t},m.prototype.set_mark=function(e,t,n){this.cm.setBookmark({line:e,ch:t},{widget:n,handleMouseEvents:!0})},m.prototype.is_excluded_token=function(e,t){for(var n=this.cm.getTokenTypeAt({line:e,ch:t}),r=0,o=0,i=a.length;o<i;o++)if(n===a[o]){r++;break}return r>0},m.prototype.render=function(e,t,n,r,o){var a=n.text.indexOf(r,e.next);if(!0!==this.is_excluded_token(t,a)){if(e.next=a+r.length,this.has_marker(t,a))return this.update_element(this.create_marker(t,a),o||r),void this.set_state(t,a,r,o);var i=this.create_marker(t,a);this.update_element(i,o||r),this.set_state(t,a,r,o||r),this.set_mark(t,a,i)}}}(n(1454))},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(14)),o=s(n(4)),a=s(n(10)),i=s(n(536)),l=s(n(41)),u=n(986);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d={"known-properties":1,"duplicate-properties":1},f={coverGutter:!1,noHScroll:!0},p=function(e){var t=e.message,n=e.line,r=e.type;return{description:t.replace(/ \w+ \w+ \d+, \w+ \d+\.$/,"."),line:n,type:r}},h=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mode=t,this.editor=n,this.delay=r,this.timer=0,this.lineWidgets=[],this.doLint=this.doLint.bind(this),this.removeLineWidget=this.removeLineWidget.bind(this),this.showErrors=this.showErrors.bind(this),this.showError=this.showError.bind(this)}var t,n,s;return t=e,(n=[{key:"lint",value:function(e){clearTimeout(this.timer);var t=(0,r.default)(e)?this.delay:e;0===t?this.doLint():this.timer=setTimeout(this.doLint,t)}},{key:"doLint",value:function(){this.editor&&this.editor.operation(this.showErrors)}},{key:"getErrors",value:function(){var e,t=this.editor.getValue();switch(this.mode.name){case"css":var n=this.mode.inline?"p {".concat(t,"}"):t,r=u.CSSLint.verify(n,d).messages;e=(0,i.default)(r,l.default).map(p);break;default:e=[]}return e}},{key:"removeLineWidget",value:function(e){this.editor.removeLineWidget(e)}},{key:"showError",value:function(e){var t=this.editor,n=e.description,r=e.line,o=e.type,a=document.createElement("div");return a.appendChild(document.createTextNode("".concat(n))),a.className="codemirror-lint-".concat(o),t.addLineWidget(r-1,a,f)}},{key:"showErrors",value:function(){(0,o.default)(this.lineWidgets)||(0,a.default)(this.lineWidgets,this.removeLineWidget);var e=this.getErrors();(0,o.default)(e)?this.lineWidgets=[]:this.lineWidgets=e.map(this.showError)}},{key:"destroy",value:function(){clearTimeout(this.timer),this.editor=!1}}])&&c(t.prototype,n),s&&c(t,s),e}();t.default=h},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(0)),a=(m(n(6)),m(n(18))),i=m(n(1)),l=m(n(35)),u=m(n(148)),s=m(n(41)),c=m(n(9)),d=m(n(534)),f=(m(n(121)),m(n(14))),p=m(n(118)),h=m(n(58));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1615);var k=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(w,t);var n,r,m,b=y(w);function w(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(e=b.call(this)).state={activeOption:[]},e._onChange=e._onChange.bind(_(e)),e.switchButton=e.switchButton.bind(_(e)),e.getProcessedValue=e.getProcessedValue.bind(_(e)),e}return n=w,(r=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,s.default)(e,this.props)||!(0,s.default)(t,this.state)}},{key:"componentDidMount",value:function(){this.setState({activeOption:this.getProcessedValue()})}},{key:"componentDidUpdate",value:function(){this.setState({activeOption:this.getProcessedValue()})}},{key:"getProcessedValue",value:function(){var e=this.props.value||this.props.default;return(0,f.default)(e)||""===e||this.props.emptyMobileNone&&"none"===e?[]:e.split("|")}},{key:"switchButton",value:function(t){t.preventDefault();var n=e(t.target).closest(".et-fb-multiple-buttons-toggle").data("option_value"),r=this.state.activeOption;this.props.toggleable&&(0,c.default)(this.state.activeOption,n)?r=this.props.multi_selection?(0,d.default)(r,n).join("|"):this.props.default:(this.props.multi_selection&&r.push(n),r=this.props.multi_selection?r.join("|"):n),this.props.emptyMobileNone&&""===r&&(r="none"),this._onChange(r)}},{key:"_onChange",value:function(e){var t=this.props,n=t.name,r=t._onChange,o=e;this.props.emptyMobileNone&&"none"===e&&(o=""),this.setState({activeOption:o.split("|")}),r(n,e)}},{key:"render",value:function(){var e=this,t=e.props.options,n=(0,u.default)(this.props.options),r=100/n,s="".concat(r-r*(3*(n-1)/100),"%"),d=(0,l.default)(t,(function(t,n){var r=(0,i.default)(t,"icon",!1),l=(0,c.default)(e.state.activeOption,n),u=l?p.default.activeTabIcon:p.default.optionTabIcon,d=(0,a.default)({"et-fb-multiple-buttons-toggle-internal":!0,"et-fb-multiple-buttons-toggle-internal__active":l}),f=r?o.default.createElement(h.default,{icon:t.icon,color:u}):t.title;return o.default.createElement("li",{className:"et-fb-multiple-buttons-toggle",style:{width:s},"data-option_value":n,onClick:e.switchButton,key:n},o.default.createElement("span",{className:d},f))}));return o.default.createElement("div",{className:"et-fb-multiple-buttons-outer"},o.default.createElement("ul",{className:"et-fb-multiple-buttons-container"},d))}}])&&g(n.prototype,r),m&&g(n,m),w}(o.default.Component);t.default=k}).call(this,n(5))},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=i(n(1500)),a=i(n(29));function i(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e){return r.default.createElement(o.default,l({current_post_type:ETBuilderBackend.themeBuilder.isLayout?"product":a.default.postType,include_latest_post:"1",include_current_post:"product"===a.default.postType||ETBuilderBackend.themeBuilder.isLayout?"1":"0",defaultOption:"latest"},e))};t.default=u},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=P(n(6)),i=P(n(167)),l=P(n(52)),u=P(n(1)),s=P(n(12)),c=P(n(447)),d=P(n(147)),f=P(n(10)),p=P(n(79)),h=P(n(4)),m=P(n(14)),g=P(n(513)),v=P(n(141)),y=P(n(45)),b=P(n(140)),_=P(n(94)),w=P(n(5)),k=P(n(450)),O=P(n(844)),C=P(n(728)),S=P(n(58)),E=P(n(8)),M=P(n(118));function P(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1618);var F=(0,k.default)((function(e,t){return w.default.ajax({type:"GET",dataType:"json",url:e,data:t}).promise()})),I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(y,e);var t,n,r,a=L(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),B(N(t=a.call(this,e)),"getSelectOptions",(function(){return(0,v.default)((0,g.default)(t.state.options,(function(e){var n=e.value;return t.valuePrefix+n.toString()})),"label")})),B(N(t),"filterOptionLabel",(function(e,n){return(0,m.default)(t.props.labelFilter)?e:t.props.labelFilter(e,n.substr(t.valuePrefix.length),t.state.options)})),B(N(t),"handleOpenDropdown",(function(){t.setState({open:!0}),t.inputRef.focus(),(0,h.default)(t.state.options)&&t.requestOptions(t.props.value,t.state.search,t.state.meta.pagination.pages.current)})),B(N(t),"handleCloseDropdown",(function(){t.setState({open:!1})})),B(N(t),"handleOnChange",(function(e){var n=e.substr(t.valuePrefix.length),r=(0,u.default)(t.state,"meta.pages.current",1);t.setState({selected:!1,options:{}},(function(){t.getOptions(n,t.state.search,r)})),t.props._onChange(t.props.name,n)})),B(N(t),"handleOnPagination",(function(e){var n=Math.max(Math.min(e,t.state.meta.pagination.pages.total),1);t.state.meta.pagination.pages.current!==n&&t.setState({meta:(0,_.default)((0,i.default)(t.state.meta),"pagination.pages.current",n)},(function(){t.requestOptions(t.props.value,t.state.search,t.state.meta.pagination.pages.current)}))})),B(N(t),"handleSearch",(function(e,n){n!==t.state.search&&t.setState({search:n},(function(){return t.requestOptions(t.props.value,t.state.search,1)}))})),B(N(t),"_requestOptions",(0,l.default)((function(e,n,r){var o=t.props.arguments(e,n,r),a=t.props.defaultOption,l=F(t.props.src,o);t.setState({request:l},(function(){l.then((function(u){if(l===t.state.request){var f=u.data,m=f.results,g=f.meta;if(""===n){var v=(0,i.default)(m),y=v[1],b=(0,p.default)(v,(function(t){return(0,s.default)(t.value)===(0,s.default)(e)}));y&&(0,s.default)(y.value)===e&&(t.setState({selected:y}),(0,c.default)(v,1)),!b&&a&&t.setState({selected:{value:a}}),(0,h.default)(v)||E.default.updateAjaxifiedCache(o,r,(0,d.default)(v),g)}t.updateCurrentOptions(m,g)}})).always((function(){t.setState({loading:!1})}))}))}),250)),B(N(t),"requestOptions",(function(e,n,r){n.length>0&&n.length<3||(t.state.loading||t.setState({loading:!0}),t.getOptions(e,n,r))})),B(N(t),"getOptions",(function(e,n,r){var o=t.props.arguments(e,n,r),a=(0,i.default)(E.default.getAjaxifiedCache(o.action,o.post_type));if(""===n&&!(0,h.default)((0,u.default)(a,["results",r],[]))){var l=(0,h.default)(t.state.selected)||""===e?t.getSelectedOption(e,a):t.state.selected,c=(0,u.default)(a,"meta",{}),d=(0,u.default)(a,["results",r]);return(0,_.default)(c,"pagination.pages.current",r),l&&(0,s.default)((0,u.default)(d,"[1].value"))!==e&&d.splice(1,0,l),void t.updateCurrentOptions(d,c)}t._requestOptions(e,n,r)})),B(N(t),"getSelectedOption",(function(e,n){var r;if(!(0,h.default)(n)){if((0,f.default)(n.results,(function(t){r||(r=(0,p.default)(t,(function(t){return(0,s.default)(t.value)===(0,s.default)(e)})))})),!(0,h.default)(r))return(0,_.default)(r,"meta.post_type",""),t.setState({selected:r}),r;t._requestOptions(e,"",1)}})),B(N(t),"updateCurrentOptions",(function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n||t.state.meta;t.setState({options:e,meta:o,loading:r},(function(){(0,h.default)(t.props.value)&&t.handleOnChange(t.valuePrefix+(0,u.default)(e,"0.value","").toString())}))})),B(N(t),"renderLoading",(function(){return o.default.createElement("div",{className:"et-fb-select-ajaxified__spinner"})})),B(N(t),"renderNoResults",(function(){return o.default.createElement("li",{className:"et-fb-select-options-filter select-option-item et-fb-select-ajaxified__element"},ETBuilderBackend.i18n.selectControl.noResults)})),B(N(t),"renderBeforeList",(function(){return o.default.createElement("li",{className:"et-fb-select-options-filter select-option-item et-fb-select-ajaxified__element et-fb-select-ajaxified__search"},o.default.createElement(C.default,{ref:function(e){return t.inputRef=e},type:"text",name:"search",value:t.state.search,_onChange:t.handleSearch,additional_attrs:{placeholder:ETBuilderBackend.i18n.selectControl.typeToSearch}}),t.state.loading&&t.renderLoading())})),B(N(t),"renderAfterList",(function(e){return(0,h.default)(t.state.options)&&!t.state.loading?o.default.createElement(o.Fragment,null,t.renderNoResults(),e):o.default.createElement(o.Fragment,null,e,t.renderPagination())})),t.state={search:"",options:{},meta:{pagination:{results:{per_page:20,total:0},pages:{current:1,total:0}}},request:null,loading:!1,open:!1,selected:!1},t.valuePrefix="_",t.onClickPaginationPrev=t.onClickPaginationPrev.bind(N(t)),t.onClickPaginationNext=t.onClickPaginationNext.bind(N(t)),t}return t=y,(n=[{key:"onClickPaginationPrev",value:function(){this.handleOnPagination(this.state.meta.pagination.pages.current-1)}},{key:"onClickPaginationNext",value:function(){this.handleOnPagination(this.state.meta.pagination.pages.current+1)}},{key:"renderPagination",value:function(){var e=this.state.meta.pagination;if(e.pages.current>e.pages.total||e.pages.total<2)return null;var t=ETBuilderBackend.i18n.selectControl.pagination.replace("%1$s",e.pages.current).replace("%2$s",e.pages.total);return o.default.createElement("li",{className:"et-fb-select-options-filter select-option-item et-fb-select-ajaxified__element et-fb-select-ajaxified__pagination"},o.default.createElement("div",{className:"et-fb-select-ajaxified__pagination-container"},o.default.createElement("button",{type:"button",className:"et-fb-select-ajaxified__pagination-button et-fb-select-ajaxified__pagination-button--previous",onClick:this.onClickPaginationPrev},o.default.createElement(S.default,{icon:"previous",color:M.default.white})),o.default.createElement("span",{className:"et-fb-select-ajaxified__pagination-label"},t),o.default.createElement("button",{type:"button",className:"et-fb-select-ajaxified__pagination-button et-fb-select-ajaxified__pagination-button--next",onClick:this.onClickPaginationNext},o.default.createElement(S.default,{icon:"next",color:M.default.white}))))}},{key:"componentDidMount",value:function(){this.requestOptions(this.props.value,this.state.search,this.state.meta.pagination.pages.current)}},{key:"render",value:function(){var e=x({},this.props),t=(0,u.default)(this,"state.selected.value",this.props.value);return e=(0,b.default)(e,"searchable"),o.default.createElement("div",{className:"et-fb-select-ajaxified"},o.default.createElement(O.default,x({},e,{options:this.getSelectOptions(),value:this.valuePrefix+t,selectFirst:!1,emptyLabel:ETBuilderBackend.i18n.selectControl.noTitle,labelFilter:this.filterOptionLabel,preserveHeight:this.state.meta.pagination.pages.total>1?"on":"auto",beforeList:this.renderBeforeList,afterList:this.renderAfterList,__onChange:this.handleOnChange,onOpen:this.handleOpenDropdown,onClose:this.handleCloseDropdown})),this.state.loading&&!this.state.open&&this.renderLoading())}}])&&j(t.prototype,n),r&&j(t,r),y}(o.PureComponent);I.propTypes={name:a.default.string,value:a.default.any.isRequired,src:a.default.string,arguments:a.default.func.isRequired,labelFilter:a.default.func,_onChange:a.default.func,defaultOption:a.default.any},I.defaultProps={name:"",src:ETBuilderBackend.ajaxUrl,labelFilter:void 0,_onChange:y.default,defaultOption:!1};var W=I;t.default=W},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=i(n(844)),a=i(n(370));function i(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e){return r.default.createElement(a.default,{componentName:e.name},r.default.createElement(o.default,l({className:"et-fb-settings-option-select--dividers"},e)))};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(0)),o=c(n(1)),a=c(n(447)),i=c(n(121)),l=c(n(844)),u=c(n(370)),s=c(n(8));function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){if(""!==(0,o.default)(e,"module.props.module.props.attrs.global_module","")||s.default.isEditingLibraryItem("row"))return!1;var t=(0,i.default)(e.options);return"et_pb_column_inner"===(0,o.default)(e,"content.[0].type","")&&"2_3"!==(0,o.default)(e,"content.[0].attrs.saved_specialty_column_type","")&&(0,a.default)(t,"1_4,1_4,1_4,1_4"),r.default.createElement(u.default,{componentName:e.name},r.default.createElement(l.default,d({},e,{options:t})))};t.default=f},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=c(n(6)),i=(c(n(18)),c(n(23))),l=c(n(10)),u=c(n(844)),s=c(n(29));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,r,a=h(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e))._onChange=t._onChange.bind(g(t)),t.shouldComponentUpdate=i.default.shouldComponentUpdate.bind(g(t)),t}return t=c,(n=[{key:"render",value:function(){var e=s.default.getWidgetAreas(),t={},n="";return(0,l.default)(e,(function(e,r){n||(n=r),t[r]=e.name})),o.default.createElement(u.default,{value:this.props.value,default:n,name:this.props.name,__onChange:this._onChange,options:t})}},{key:"_onChange",value:function(e){this.props._onChange(this.props.name,e)}}])&&f(t.prototype,n),r&&f(t,r),c}(o.Component);y.propTypes={_onChange:a.default.func,className:a.default.object,computed_affects:a.default.array,name:a.default.string,description:a.default.string,value:a.default.string};var b=y;t.default=b},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(0)),o=c(n(339)),a=c(n(18)),i=c(n(23)),l=c(n(4)),u=c(n(1)),s=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n(1623);var f=(0,o.default)({displayName:"ETBuilderControlSelectFontIcon",mixins:[i.default],render:function(){var e=this,t=this.props.additional_attrs?this.props.additional_attrs:{},n="icon_down"===(0,u.default)(this.props,"renderer_options.icons_list","")?ETBuilderBackend.fontIconsDown:ETBuilderBackend.fontIcons,o=this.props.value,i=!1,c=0;(0,l.default)(o)||(i=-1!==o.search(/^%%/),c=parseInt(o.replace(/%/g,"")));var f=n.map((function(t,n){var l,u=s.default.processFontIcon(t);if(i){if(e.props.readonly&&n!==c)return!1;l=n===c?{active:!0}:{}}else l='"'===o?0===n?{active:!0}:{}:u===o?{active:!0}:{};return r.default.createElement("li",{className:(0,a.default)(l),key:"".concat(e.props._key,"-font-icon-").concat(n),"data-icon":u,onClick:e._onChange})}));return r.default.createElement("ul",d({id:"et-fb-".concat(this.props.name),className:"et-fb-font-icon-list et-fb-allow-mouse-wheel"},t),f)},_onChange:function(t){if(!this.props.readonly){var n=e(t.target).index(),r="%%".concat(n,"%%");this.props._onChange(this.props.name,r)}}});t.default=f}).call(this,n(5))},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=D(n(0)),a=D(n(6)),i=n(136),l=D(n(18)),u=D(n(23)),s=D(n(14)),c=D(n(13)),d=D(n(15)),f=D(n(2)),p=D(n(4)),h=D(n(40)),m=D(n(12)),g=D(n(1)),v=D(n(9)),y=D(n(10)),b=D(n(166)),_=D(n(158)),w=D(n(17)),k=D(n(35)),O=D(n(118)),C=D(n(963)),S=D(n(27)),E=D(n(8)),M=D(n(21)),P=D(n(3)),T=D(n(844)),x=D(n(966)),j=D(n(58));function D(e){return e&&e.__esModule?e:{default:e}}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1625);var G=ETBuilderBackend.i18n.fonts,U=new i.AllHtmlEntities,z={name:a.default.string,value:a.default.string,default:a.default.string,_onChange:a.default.func,_resetOption:a.default.func},q=function(e){return(0,g.default)(ETBuilderBackend,"removedFonts.".concat(e,".parent_font"),e)},K=[{slug:"italic",icon:"text-italic"},{slug:"uppercase",icon:"text-uppercase"},{slug:"capitalize",icon:"text-smallcaps"},{slug:"underline",icon:"text-underline"},{slug:"line_through",icon:"text-strikethrough"}],$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(i,e);var t,n,r,a=F(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),H(W(t=a.call(this,e)),"getDefaultValue",(function(e){return(0,g.default)(t.getDefaultValues(),e,"")})),H(W(t),"getValue",(function(e){return(0,g.default)(t.getValues(),e,"")})),H(W(t),"isDefault",(function(e){switch(e){case"style":return(0,k.default)(K,"slug").reduce((function(e,n){return e&&t.isDefault(n)}),!0);default:return t.getValue(e)===t.getDefaultValue(e)}})),H(W(t),"updateFontWeight",(function(e){return t.updateOptionValue("weight",e)})),H(W(t),"updateLineColor",(function(e,n){return t.updateOptionValue("line_color",n)})),H(W(t),"updateLineStyle",(function(e){return t.updateOptionValue("line_style",e)})),H(W(t),"resetOption",(function(e){switch(e){case"style":var n=(0,k.default)(K,"slug").reduce((function(e,n){return N(N({},e),{},H({},n,t.getDefaultValue(n)))}),{});t.updateFontStyle(n);break;default:t.updateOptionValue(e,t.getDefaultValue(e))}})),H(W(t),"toggleButton",(function(e){return t.updateOptionValue(e,!t.getValue(e))})),H(W(t),"getLabel",(function(e,n){return o.default.createElement(C.default,{isResetActive:!t.isDefault(e),onClickReset:function(n){return t.resetOption(e)},for:"".concat(t.props.name,"_").concat(e),name:t.props.name,hoveredGroup:t.state.hoveredElement===e},U.decode(n))})),t.state={uploadedFonts:t.getUploadedFonts(),hoveredElement:null},t.shouldComponentUpdate=u.default.shouldComponentUpdate.bind(W(t)),t.getDefaultValues=t.getDefaultValues.bind(W(t)),t.getValues=t.getValues.bind(W(t)),t.updateFontStyle=t.updateFontStyle.bind(W(t)),t.updateFontFamily=t.updateFontFamily.bind(W(t)),t.fontStyleButtonClassNames=t.fontStyleButtonClassNames.bind(W(t)),t.getFontWeightOptions=t.getFontWeightOptions.bind(W(t)),t.getFontWeight=t.getFontWeight.bind(W(t)),t.updateOptionValue=t.updateOptionValue.bind(W(t)),t._onFontUploaderUpdate=t._onFontUploaderUpdate.bind(W(t)),t.maybeResetFont=t.maybeResetFont.bind(W(t)),t._applyFontPreview=t._applyFontPreview.bind(W(t)),t._applyFontPreviewOnLoad=t._applyFontPreviewOnLoad.bind(W(t)),t._previewFontOnHover=t._previewFontOnHover.bind(W(t)),t.updateLineStyle=t.updateLineStyle.bind(W(t)),t._onMouseEnter=t._onMouseEnter.bind(W(t)),t._onMouseLeave=t._onMouseLeave.bind(W(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.isItemSelected||setTimeout(this.maybeResetFont,0),E.default.addFontUploaderUpdateListener(this._onFontUploaderUpdate),this._applyFontPreviewOnLoad();var e=(0,g.default)(this.props,"additionalAttrs.oldOptionValue",""),t=(0,g.default)(this.props,"attributes.data-old-option-ref",!1);if(""!==e&&t){var n={};"on"===e&&(n.uppercase="on",this.updateFontStyle(n)),this.props._resetOption(t)}}},{key:"componentWillUnmount",value:function(){E.default.removeFontUploaderUpdateListener(this._onFontUploaderUpdate)}},{key:"maybeResetFont",value:function(){var e=this.getValues();if(!(0,p.default)(e.font)){var t=ETBuilderBackend.removedFonts,n=e.font;if(!(0,s.default)(t[n]))return this.updateOptionValue("font",t[n].parent_font),void this.updateOptionValue("weight",t[n].styles);(0,s.default)(ETBuilderBackend.googleFonts[n])&&(0,s.default)(ETBuilderBackend.customFonts[n])&&this.updateOptionValue("font","Default")}}},{key:"getDefaultValues",value:function(){var e=((0,h.default)(this.props.default)?this.props.default:"||||||||").split("|");return{font:q(e[0]||""),weight:this.processFontWeightValue(e[1])||"",italic:P.default.isOn(e[2]),uppercase:P.default.isOn(e[3]),underline:P.default.isOn(e[4]),capitalize:P.default.isOn(e[5]),line_through:P.default.isOn(e[6]),line_color:e[7]||"",line_style:e[8]||""}}},{key:"getDefaultEmptyFontValue",value:function(){return M.default.isMobile(this.props)?"Default":""}},{key:"getValues",value:function(){var e=!(0,s.default)(this.props.default)&&(0,h.default)(this.props.default)?this.props.default:"||||||||",t=(0,s.default)(this.props.value)||""===this.props.value?e:this.props.value,n=(0,c.default)(t)?t:t.split("|");return{font:q(n[0]||""),weight:this.processFontWeightValue((0,m.default)(n[1]))||"",italic:P.default.isOn(n[2]),uppercase:P.default.isOn(n[3]),underline:P.default.isOn(n[4]),capitalize:P.default.isOn(n[5]),line_through:P.default.isOn(n[6]),line_color:n[7]||"",line_style:n[8]||""}}},{key:"_onFontUploaderUpdate",value:function(){var e=this;setTimeout((function(){e.maybeResetFont()}),100),this.setState({uploadedFonts:this.getUploadedFonts()})}},{key:"processFontWeightValue",value:function(e){return"on"===e?"700":e}},{key:"updateFontStyle",value:function(e){var t=this.getValues(),n=(0,d.default)(t,e),r="Default"===n.font?this.getDefaultEmptyFontValue():n.font,o="400"===n.weight?"":n.weight,a=n.italic?"on":"",i=n.uppercase?"on":"",l=n.underline?"on":"",u=n.capitalize?"on":"",s=n.line_through?"on":"",c=n.line_color,f=n.line_style,p="".concat(r,"|").concat(o,"|").concat(a,"|").concat(i,"|").concat(l,"|").concat(u,"|").concat(s,"|").concat(c,"|").concat(f);this.props._onChange(this.props.name,p),this._applyFontPreview(r,"font-family"),this._applyFontPreview(r,"font-weight")}},{key:"updateFontFamily",value:function(e){this.updateFontStyle({font:e}),this._applyFontPreview(e,"font-family"),this._applyFontPreview(e,"font-weight")}},{key:"_previewFontOnHover",value:function(e){this._applyFontPreview(e,"font-family")}},{key:"_applyFontPreviewOnLoad",value:function(){var e=this.getValue("font");this._applyFontPreview(e,"font-weight"),this._applyFontPreview(e,"font-family")}},{key:"_applyFontPreview",value:function(e,t){var n=P.default.$topWindow("head"),r="font-weight"===t?"et-fb-font-weight-".concat(this.props.name):e.replace(/ /g,"_");if("Default"!==e&&""!==e){P.default.maybeLoadFont(e);var o="";if("font-weight"===t)n.find("style#".concat(r)).length>0&&n.find("style#".concat(r)).remove(),o='<style id="'.concat(r,'" type="text/css">.et-fb-settings-option-inner--').concat(this.props.name,' .et-fb-font-weight-option { font-family:"').concat(e,'"; }</style>');else{if(n.find("style#et-fb-font-".concat(r)).length>0)return;o='<style id="et-fb-font-'.concat(r,'" type="text/css">.et-fb-option--font .select-option-item-').concat(r,' { font-family:"').concat(e,'"; }</style>')}n.append(o)}else"font-weight"===t&&n.find("style#".concat(r)).length>0&&n.find("style#".concat(r)).remove()}},{key:"getUploadedFonts",value:function(){var e=ETBuilderBackend.customFonts;return(0,p.default)(e)?[]:(0,w.default)(e)}},{key:"getFontWeightOptions",value:function(){var e=ETBuilderBackend.googleFonts,t=ETBuilderBackend.customFonts,n=this.getValue("font"),r=(0,g.default)(t,n,!1),o=(0,w.default)(ETBuilderBackend.allFontWeights),a={},i=[];if(""===n)i=["300","400","600","700","800"];else{if(r||(r=(0,g.default)(e,n,!1)),!r||(0,s.default)(r.styles))return ETBuilderBackend.allFontWeights;i=r.styles.split(",")}var l=(0,b.default)((0,_.default)(["400","700"],i),o);return(0,y.default)(l,(function(e){a[e]=ETBuilderBackend.allFontWeights[e]})),a}},{key:"getFontWeight",value:function(){var e=this.getValue("weight");return!0===e?"700":(0,v.default)((0,w.default)(this.getFontWeightOptions()),e)?e:"400"}},{key:"updateOptionValue",value:function(e,t){var n=this.getValues();n[e]=P.default.get(t,""),(0,y.default)([["uppercase","capitalize"],["underline","line_through"]],(function(t){(0,v.default)(t,e)&&(0,y.default)(t,(function(t){t!==e&&(n[t]=!1)}))})),this.updateFontStyle(n)}},{key:"fontStyleButtonClassNames",value:function(e){var t;return(0,l.default)((H(t={"et-fb-select-fontstyle-button":!0},"et-fb-select-fontstyle-button--".concat(e),!0),H(t,"et-fb-select-fontstyle-option--".concat(this.props.name),!0),t))}},{key:"fieldClassNames",value:function(e,t){var n;return(0,l.default)((0,d.default)({},(H(n={"et-fb-font-option-container":!0,"et-fb-font-option-container-with-label":!0},"et-fb-font-option-container--".concat(this.props.name),!0),H(n,"et-fb-font-option-container--sub",!0),H(n,"et-fb-font-option-container--sub-".concat(e),!0),n),t))}},{key:"_onMouseEnter",value:function(e){if(!this.props.rightClickOpened&&this.props.isSettingsModal){var t=e.currentTarget.getAttribute("data-subfield");this.setState({hoveredElement:t}),S.default.setHoveredSubElement(t)}}},{key:"_onMouseLeave",value:function(){!this.props.rightClickOpened&&this.props.isSettingsModal&&S.default.setHoveredSubElement(!1)}},{key:"_extraProps",value:function(){var e={readonly:this.props.readonly,disableReset:this.props.disableReset};return(0,d.default)({},e)}},{key:"_isFilterActive",value:function(){return(0,v.default)(["styles_modified","active_content"],this.props.filterSelected)}},{key:"_isRenderSubFieldLabel",value:function(e){return!!(0,s.default)(this.props.subFieldLabel)||((0,h.default)(this.props.subFieldLabel)?e===this.props.subFieldLabel:(0,f.default)(this.props.subFieldLabel)?(0,v.default)(this.props.subFieldLabel,e):this.props.subFieldLabel)}},{key:"_isRenderSubField",value:function(e){return!!(0,s.default)(this.props.subField)||((0,h.default)(this.props.subField)?e===this.props.subField:(0,f.default)(this.props.subField)?(0,v.default)(this.props.subField,e):this.props.subField)}},{key:"_renderSubFieldFontFamily",value:function(){if(!this._isRenderSubField("font"))return!1;var e=this.getValue("font");if(this._isFilterActive()&&(!e||"Default"===e))return!1;var t=this.fieldClassNames("font");return o.default.createElement("div",{className:t,"data-subfield":"font",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this._isRenderSubFieldLabel("font")&&this.props.formLabel,this._isRenderSubFieldLabel("font")&&this.props.formDescription,o.default.createElement(T.default,L({default:"Default",recentCategory:"font_family",value:e,name:this.props.name,options:ETBuilderBackend.googleFontsList,additionalOptions:{uploaded:this.state.uploadedFonts},searchPlaceholder:G.searchFonts,searchable:!0,displayRecent:!0,_hoverAction:this._previewFontOnHover,__onChange:this.updateFontFamily},this._extraProps())))}},{key:"_renderSubFieldFontWeight",value:function(){if(!this._isRenderSubField("weight"))return!1;var e=this.getFontWeight();if(this._isFilterActive()&&(!e||(0,v.default)(["400","normal"],e)))return!1;var t=(0,s.default)(this.props.group_label)?G.fontWeight:"".concat(this.props.group_label," ").concat(G.fontWeight),n=!!this._isRenderSubFieldLabel("weight")&&this.getLabel("weight",t),r=this.fieldClassNames("weight");return o.default.createElement("div",{className:r,"data-subfield":"weight",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},n,o.default.createElement(T.default,L({className:"et-fb-font-weight-option",name:"".concat(this.props.name,"_weight"),default:"normal",value:e,options:this.getFontWeightOptions(),__onChange:this.updateFontWeight},this._extraProps())))}},{key:"_renderSubFieldFontStyle",value:function(){var e=this;if(!this._isRenderSubField("style"))return!1;var t=K.filter((function(t){return!e._isFilterActive()||e._isFilterActive()&&e.getValue(t.slug)}));if((0,p.default)(t))return!1;var n=t.map((function(t){var n=e.getValue(t.slug)?O.default.activeTabIcon:O.default.optionTabIcon;return o.default.createElement("button",{key:t.slug,className:e.fontStyleButtonClassNames(t.slug),onClick:function(n){return e.toggleButton(t.slug)||n.preventDefault()},"data-button":t.slug,type:t},o.default.createElement(j.default,{icon:t.icon,color:n}))})),r=(0,s.default)(this.props.group_label)?G.fontStyle:"".concat(this.props.group_label," ").concat(G.fontStyle),a=!!this._isRenderSubFieldLabel("style")&&this.getLabel("style",r),i=this.fieldClassNames("style");return o.default.createElement("div",{className:i,"data-subfield":"style",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},a,n)}},{key:"_renderSubFieldFontLineColor",value:function(){if(!this._isRenderSubField("line_color"))return!1;var e=this.getValue("underline"),t=this.getValue("line_through");if(!e&&!t)return!1;var n=this.getValue("line_color");if(this._isFilterActive()&&!n)return!1;var r=e?G.underline:G.strikethrough,a=(0,s.default)(this.props.group_label)?"".concat(r," ").concat(G.color):"".concat(this.props.group_label," ").concat(r," ").concat(G.color),i=!!this._isRenderSubFieldLabel("line_color")&&this.getLabel("line_color",a),l=this.fieldClassNames("line_color",{"et-fb-option--color-alpha":!0});return o.default.createElement("div",{className:l,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,"data-subfield":"line_color"},i,o.default.createElement(x.default,L({name:"".concat(this.props.name,"_line_color"),type:"color-alpha",value:n,animate:!0,_onChange:this.updateLineColor},this._extraProps())))}},{key:"_renderSubFieldFontLineStyle",value:function(){if(!this._isRenderSubField("line_style"))return!1;var e=this.getValue("underline"),t=this.getValue("line_through");if(!e&&!t)return!1;var n=(0,p.default)(this.getValue("line_style"))?"solid":this.getValue("line_style");if(this._isFilterActive()&&"solid"===n)return!1;var r=e?G.underline:G.strikethrough,a=(0,s.default)(this.props.group_label)?"".concat(r," ").concat(G.style):"".concat(this.props.group_label," ").concat(r," ").concat(G.style),i=!!this._isRenderSubFieldLabel("line_style")&&this.getLabel("line_style",a),l=this.fieldClassNames("line_style");return o.default.createElement("div",{className:l,"data-subfield":"line_style",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i,o.default.createElement(T.default,L({name:"".concat(this.props.name,"_line_style"),className:"et-fb-font-line-style-option",default:"solid",value:n,options:["solid","double","dotted","dashed","wavy"],__onChange:this.updateLineStyle},this._extraProps())))}},{key:"render",value:function(){var e=(0,l.default)(H({"et-fb-settings-option-inner":!0,"et-fb-settings-option-inner--select-fontstyle":!0},"et-fb-settings-option-inner--".concat(this.props.name),!0));return o.default.createElement("div",{className:e},this._renderSubFieldFontFamily(),this._renderSubFieldFontWeight(),this._renderSubFieldFontStyle(),this._renderSubFieldFontLineColor(),this._renderSubFieldFontLineStyle())}}])&&A(t.prototype,n),r&&A(t,r),i}(o.default.Component);$.propTypes=z;var Y=$;t.default=Y},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(0)),a=p(n(18)),i=p(n(23)),l=p(n(35)),u=(p(n(148)),p(n(1))),s=p(n(9)),c=p(n(14)),d=p(n(58));p(n(3));n(1627);var f=p(n(22));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){switch(e){case"justified":return"text-justify";case"force_left":return"left";default:return e}},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(v,e);var t,n,r,p=g(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=p.call(this,e)).shouldComponentUpdate=i.default.shouldComponentUpdate.bind(y(t)),t._onClick=t._onClick.bind(y(t)),t}return t=v,(n=[{key:"_render_buttons",value:function(e){var t=this,n=(0,c.default)(this.props.default)?"":this.props.default,r=""!==this.props.value?this.props.value:n,i=this;return(0,l.default)(e,(function(e,n){var l=(0,u.default)(i,"props.baseName",i.props.name),c=(0,s.default)(["module_alignment","button_alignment"],f.default.getFieldBaseName(l))||"module_align"===(0,u.default)(t,"props.options_icon",""),p=c?"align":"text",h="justified"===n?_(n):"".concat(p,"-").concat(_(n)),m=n===r,g=m?"#4191DE":"#bec9d6",v=c?12:14,y={"et-fb-settings-option-select-align-button":!0,"et-fb-settings-option-select-align-button--active":m};return y["et-fb-settings-option-select-align-button--".concat(n)]=!0,o.default.createElement("button",{className:(0,a.default)(y),key:"".concat(i.props.name,"-select-align-option-").concat(n),onClick:i._onClick,"data-value":n},o.default.createElement(d.default,{icon:h,color:g,size:v}))}))}},{key:"render",value:function(){var e={"et-fb-settings-option-select-align":!0};return this.props.className?e[this.props.className]=!0:e["et-fb-main-setting"]=!0,o.default.createElement("div",{id:"et-fb-".concat(this.props.name),className:(0,a.default)(e)},this._render_buttons(this.props.options))}},{key:"_onClick",value:function(e){e.preventDefault();var t=this.props.name,n=e.target.getAttribute("data-value");n===(0,u.default)(this,"props.value")&&(n=""),this.props._onChange(t,n)}}])&&h(t.prototype,n),r&&h(t,r),v}(o.default.Component);t.default=w},function(e,t,n){},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=E(n(0)),o=(E(n(6)),E(n(5)),E(n(339))),a=E(n(37)),i=E(n(18)),l=E(n(998)),u=E(n(23)),s=E(n(91)),c=E(n(14)),d=E(n(10)),f=E(n(4)),p=E(n(30)),h=E(n(182)),m=E(n(340)),g=E(n(45)),v=E(n(1)),y=E(n(49)),b=E(n(9)),w=E(n(17)),k=E(n(74)),O=E(n(27)),C=E(n(3)),S=E(n(1629));function E(e){return e&&e.__esModule?e:{default:e}}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n(1630);var P=C.default.topWindow(),T=C.default.condition("is_bfb"),x=C.default.condition("is_rich_editor");l.default.getDefaultProps.isReactClassApproved={},C.default.topWindow().QTags=void 0,C.default.topWindow().send_to_editor=function(e){var t,n=void 0!==C.default.topWindow().tinymce,r=void 0!==C.default.topWindow().QTags;if(C.default.appWindow().wpActiveEditor)n&&(t=tinymce.get(C.default.appWindow().wpActiveEditor));else if(n&&C.default.topWindow().tinymce.activeEditor)t=C.default.topWindow().tinymce.activeEditor,C.default.appWindow().wpActiveEditor=t.id;else if(!r)return!1;if(t&&!t.isHidden()?t.execCommand("mceInsertContent",!1,e):r?QTags.insertContent(e):(C.default.topDocument().getElementById(C.default.appWindow().wpActiveEditor).value+=e,C.default.$topWindow("#".concat(C.default.appWindow().wpActiveEditor)).trigger("focus").trigger("blur")),C.default.topWindow().tb_remove)try{C.default.topWindow().tb_remove()}catch(e){}};var j=(0,o.default)({displayName:"ETBuilderControlTinyMCE",mixins:[u.default],getInitialState:function(){var e;e="no"===x?"html":C.default.hasValue(getUserSetting("editor"))?getUserSetting("editor"):"tinymce",this.editor=null;var t=(0,v.default)(this.props,"toggle_slug",""),n=(0,v.default)(this.props,"name","");return this.uuid="".concat(t,"_").concat(n,"_").concat("vb_tiny_mce"),this.processedContent=!1,this.isEditing=!1,this.isUnmounting=!1,this.updateProps=!0,this.isRemoveP=!0,{editorMode:e,content:this.getPropsContent()}},UNSAFE_componentWillReceiveProps:function(e){if(e.activeTabMode!==this.props.activeTabMode?this.isRemoveP=!1:this.isRemoveP=!0,this.isEditing)this.isEditing=!1;else{var t=this.getPropsContent(e);if((this.processedContent?this.processContent(t):t)!==this.state.content){var n="tinymce"===this.state.editorMode;if(n){var r=C.default.appWindow().tinymce.EditorManager.get(this.uuid);(0,s.default)(r)&&(r=C.default.topWindow().tinymce.EditorManager.get(this.uuid)),(0,p.default)((0,v.default)(r,"setContent"))&&(0,y.default)(r,"dom")&&(this.updateProps=!1,r.setContent(S.default.wpautop(this.processContent(t)),{format:"raw"}),this.updateProps=!0)}this.processedContent=!1,this.setState({content:n?t:this.processContent(t)})}}},switchEditorMode:function(e){var t=this;e!==this.state.editorMode&&(this.setState({editorMode:e},(function(){t.props.onModeSwitch(t.state.editorMode)})),setUserSetting("editor",e))},sendAttachment:function(e,t){var n,r,o=t.caption;return P.wp.media.view.settings.captions||delete t.caption,e=P.wp.media.string.props(e,t),n={id:t.id,post_content:t.description,post_excerpt:o},e.linkUrl&&(n.url=e.linkUrl),"image"===t.type?(e.url=e.src,r=P.wp.media.string.image(e),(0,d.default)({align:"align",size:"image-size",alt:"image_alt"},(function(t,r){e[r]&&(n[t]=e[r])}))):"video"===t.type?r=P.wp.media.string.video(e,t):"audio"===t.type?r=P.wp.media.string.audio(e,t):(r=P.wp.media.string.link(e),n.post_title=e.title),r},addMedia:function(t){t.preventDefault();var n,r=this;if((0,c.default)(n)){var o=P.wp.media.controller.Library.extend({defaults:_.defaults({id:"insert",displaySettings:!0,multiple:!0},P.wp.media.controller.Library.prototype.defaults)});(n=P.wp.media.frames.file_frame=P.wp.media({title:ETBuilderBackend.i18n.controls.insertMedia.modalTitleText,state:"insert",states:[new o],frame:"post"})).on("select",(function(t){var o=n.state();if(t=t||o.get("selection"),"embed"!==o.attributes.content)t&&e.when.apply(e,t.map((function(e){var t=o.display(e).toJSON();return r.sendAttachment(t,e.toJSON())}),this)).done((function(){var e=(0,m.default)(arguments).join("\n\n");r.insertMedia(e)}));else{var a=o.props.attributes,i=(0,c.default)(a.url)?"":a.url,l="";if(""===i)return;if("image"===o.attributes.type){var u=(0,c.default)(a.alt)?"":a.alt,s=(0,c.default)(a.width)?"":a.width,d=(0,c.default)(a.height)?"":a.height,f=(0,c.default)(a.align)?"alignnone":"align".concat(a.align),p=(0,c.default)(a.caption)?"":a.caption,h=(0,c.default)(a.link)?"":a.link,g=(0,c.default)(a.linkUrl)?"":a.linkUrl,v=""!==p?"size-medium":"size-medium ".concat(f);if(l="".concat('<img width="').concat(s,'" height="').concat(d,'" src="').concat(i,'" alt="').concat(u,'" class="').concat(v,'" />'),""!==h)l='<a href="'.concat("custom"===h?g:i,'">').concat(l,"</a>");""!==p&&(l='[caption align="'.concat(f,'" width="').concat(s,'" ]').concat(l," ").concat(p,"[/caption]"))}else l="[embed]".concat(i,"[/embed]");r.insertMedia(l)}})),n.on("update",(function(e){var t=(0,c.default)(e.gallery)?"playlist":"gallery",n="playlist"===t?P.wp.media.playlist.shortcode(e).attrs.named:P.wp.media.gallery.shortcode(e).attrs.named,o=(0,c.default)(n.ids)?"":n.ids.join(",");if(""!==o){var a="";(0,d.default)(n,(function(e,t){"ids"!==t&&(a+=" ".concat(t,'="').concat(e,'"'))}));var i="[".concat(t,' ids="').concat(o,'"').concat(a,"]");r.insertMedia(i)}})),n.open()}else n.open()},insertMedia:function(e){if(C.default.appWindow().wpActiveEditor=!1,"html"===getUserSetting("editor")){var t=C.default.$topWindow(".et-fb-tinymce-html-input:visible"),n=t.val()+e;t.val(n),this.setTextareaContent(n)}else P.wp.media.editor.insert(e)},switchToVisual:function(e){e.preventDefault(),this.switchEditorMode("tinymce")},switchToHtml:function(e){e.preventDefault(),this.switchEditorMode("html"),this.processedContent=!0,this.setState({content:this.processContent(this.state.content)})},setActiveModeClass:function(e){var t,n,r,o=(t={"et-fb-switch-editor-mode__tab":!0},n="et-fb-switch-editor-mode__tab--".concat(e),r=!0,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t);return e===this.state.editorMode&&(o["et-fb-switch-editor-mode__tab--active"]=!0),(0,i.default)(o)},processContent:function(e){return e=e.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),this.isRemoveP&&(e=S.default.removep(e)),e},_onDoubleClick:function(e){e.stopPropagation()},_tinyMCESetup:function(e){e.settings.convert_urls=0,e.settings.remove_script_host=0},getStateContent:function(){return"html"===this.state.editorMode?"<br />\n"===this.state.content?"":this.state.content:S.default.wpautop(this.processContent(this.state.content))},getPropsContent:function(e){var t=e||this.props;return"content"===t.name?(0,v.default)(t,"content",""):(0,v.default)(t,"value","")},render:function(){var e=this.props.additional_attrs?this.props.additional_attrs:{},t=ETBuilderBackend.i18n.controls.tinymce,n=(this.props.className&&this.props.className,this.getStateContent()),o=(0,v.default)(ETBuilderBackend,"tinymcePlugins",["autolink","link","image","lists","print","preview","autoresize","textcolor","table","paste","fullscreen","charmap","emoticons","wpview"]),a={entity_encoding:"raw",skin_url:ETBuilderBackend.tinymceSkinUrl,plugins:o.join(" "),menubar:!1,valid_elements:"*[*]",toolbar:"formatselect,bold,italic,bullist,numlist,link,blockquote,alignleft,aligncenter,alignright,alignjustify,table,strikethrough,underline,hr,forecolor,pastetext,removeformat,outdent,indent,fullscreen,charmap,emoticons,undo,redo",content_css:ETBuilderBackend.tinymceCSSFiles,autoresize_bottom_margin:0,setup:this._tinyMCESetup};if(C.default.condition("is_bfb")&&(a=(0,v.default)(C.default.topWindow(),"tinyMCEPreInit.mceInit.content",{}),(0,c.default)(a.toolbar1)||(a.toolbar1=a.toolbar1.replace("dfw","table,fullscreen"),a.toolbar1=a.toolbar1.replace("wp_more",""))),C.default.condition("is_layout_block")){var i=(0,w.default)((0,v.default)(C.default.topWindow(),"tinymce.AddOnManager.PluginManager.lookup",{})),u=(0,k.default)(o,(function(e){return!(0,b.default)(i,e)}));(0,p.default)((0,v.default)(C.default.topWindow(),"tinymce.AddOnManager.PluginManager.load"))&&(0,d.default)(u,(function(e){C.default.topWindow().tinymce.AddOnManager.PluginManager.load(e,"".concat((0,v.default)(C.default.appWindow(),"et_pb_custom.tinymce_uri"),"/plugins/").concat(e,"/plugin.min.js"))}))}var s=C.default.hasValue(ETBuilderBackend.mediaButtons)?{}:{display:"none"},f="html"===this.state.editorMode?r.default.createElement("textarea",{id:this.uuid,ref:"textarea",className:"et-fb-tinymce-html-input",value:n,onChange:g.default,onInput:this._onInputHTML,onScroll:this._onTextareaScroll,onFocus:this._onFocus,onBlur:this._onBlur}):r.default.createElement(l.default,M({id:this.uuid,ref:"tinymce",content:n,config:a,onInit:this._onInit,onChange:this._onChange,onDoubleClick:this._onDoubleClick,onKeyup:this._onChange,onKeydown:this._onKeyDown,onLoadContent:this._loadtinyMCEContent,onSetContent:this._onChange,onFocus:this._onFocus,onBlur:this._onBlur},e)),h="no"!==x&&r.default.createElement("a",{href:"#",onClick:this.switchToVisual,className:this.setActiveModeClass("tinymce")},t.visual);return r.default.createElement("div",{id:"et-fb-".concat(this.props.name),className:"et-fb-tinymce-buttons"},r.default.createElement("button",{className:"et-fb-settings-option-upload-button et-fb-tinymce-add-media-button et-fb-tinymce-add-media-button--absolute",onClick:this.addMedia},ETBuilderBackend.i18n.controls.insertMedia.buttonText),r.default.createElement("span",{className:"et-fb-tinymce-media-buttons",id:"et-fb-tinymce-".concat(this.props.name,"-media-buttons"),style:s,dangerouslySetInnerHTML:{__html:ETBuilderBackend.mediaButtons}}),r.default.createElement("div",{className:"et-fb-switch-editor-mode"},h,r.default.createElement("a",{href:"#",onClick:this.switchToHtml,className:this.setActiveModeClass("html")},t.text)),f)},_loadtinyMCEContent:function(e,t){(0,f.default)((0,h.default)(this.state.content))||t.setContent(S.default.wpautop(this.processContent(this.state.content)),{format:"raw"})},_onKeyDown:function(e){var t=e.keyCode,n=e.metaKey,r=e.ctrlKey,o=e.altKey;(0,p.default)(KeyboardEvent)&&(83!==t||!n&&!r||o||(C.default.appDocument().dispatchEvent(new KeyboardEvent("keydown",{keyCode:t,metaKey:n,ctrlKey:r,bubbles:!0,cancelable:!0})),e.preventDefault()))},_onChange:function(e,t){if(!this.isUnmounting){var n=(0,c.default)(e.type)?"":e.type;if(!this.props.isItemSelected||!(0,b.default)(["loadcontent","setcontent"],n)){var r=t.getContent({format:"html"}).replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),o=(0,f.default)(r)?r:S.default.wpautop(r);o="\n"===o.slice(-1)?o.slice(0,-1):o,this.setTextareaContent(o)}}},_onInit:function(e,t){this.editor=t,T&&(t.on("ExecCommand",(function(e){if("mceInsertLink"===e.command){var n=t.$('a[href="_wp_link_placeholder"]')[0];n&&n.scrollIntoView&&n.scrollIntoView({block:"nearest"})}})),t.on("wp-toolbar-toggle",(function(){C.default.$topWindow().trigger("wp-toolbar-toggle")})))},componentWillUnmount:function(){this.isUnmounting=!0,T&&C.default.$topWindow("html, body").removeClass("mce-fullscreen")},_onInputHTML:function(e){e.persist();var t=e.target.value;this.setTextareaContent(t)},_onTextareaScroll:function(t){var n=e(t.currentTarget).closest(".et-fb-tabs__panel");n.scrollTop()||n.scrollTop(1)},setTextareaContent:function(e){if(e!==this.getStateContent()&&e!==this.getPropsContent()){this.isEditing=!0;var t="content"===this.props.name;this.updateProps&&this.props._onChange(this.props.name,e,"",t),this.processedContent=!1,this.setState({content:e})}},getFrameTargetElement:function(e){if((0,s.default)(e))return!1;var t=e.contentWindow;return(0,c.default)(C.default.appWindow().pageYOffset)&&(t=t.document.documentElement?t.document.documentElement:t=document.body),t},_onFocus:function(e){(this.props.module||this.props.isPageSetting)&&O.default.quickAccessHide(!1,e)},_onBlur:function(e){if("html"===this.state.editorMode){if(e.target.value===this.getStateContent())return;this._onInputHTML(e)}},focus:function(){var e=this;if("html"===this.state.editorMode)C.default.$topWindow(this.refs.textarea).trigger("focus");else try{window.tinymce.EditorManager.get(this.uuid).focus()}catch(t){setTimeout((function(){return e.focus()}),100)}},activateEditor:function(){"tinymce"===this.state.editorMode&&C.default.appWindow().tinyMCE.setActive(this.editor),C.default.appWindow().wpActiveEditor=this.uuid,this.focus()},componentDidUpdate:function(){var e=this;setTimeout((function(){var t=C.default.$topWindow(a.default.findDOMNode(e.refs.tinymce)).parent().find("iframe");if(0!==t.length){var n=t.height(),r=t.contents().find("html");if(r.length>0){var o=r.innerHeight();n<o&&t.height(o)}}}),200)},componentDidMount:function(){var t=this;this.props.onModeSwitch(this.state.editorMode);var n=e(a.default.findDOMNode(this.refs.tinymce)).parent().find("iframe"),r=n.attr("id"),o=this.getFrameTargetElement(C.default.topWindow().document.getElementById(r));!1!==o?(C.default.condition("is_bfb")||n.contents().find("head").append("<style type='text/css'> .wpview iframe { max-width: 100% !important; } .wpview { width: auto !important; }</style>"),o.onwheel=function(e){var t,r=n.closest(".et-fb-tabs__panel--active"),o=!1,a=!1;if(t=r.find(".et-fb-form").outerHeight()||0,r.length>0&&(o=r.scrollTop()<1&&e.deltaY<1,a=r.scrollTop()>=t-r.height()&&e.deltaY>=0,o||a))return!1},C.default.$topWindow("#et-fb-".concat(this.props.name,", #et-fb-").concat(this.props.name," *, .et-fb-tinymce-media-buttons a")).on("click",(function(){t.activateEditor()}))):C.default.$topWindow(".et-fb-tinymce-media-buttons a").on("click",(function(){t.activateEditor()}))}});j.defaultProps={onModeSwitch:g.default,isReactClassApproved:{},name:""};var D=j;t.default=D}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={wpautop:function(e){var t="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary",n=!1,r=!1;return-1!==e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,(function(e){return e.replace(/[\r\n]+/g,"")}))),-1===(e=e.replace(/<[^<>]+>/g,(function(e){return e.replace(/[\r\n]+/g," ")}))).indexOf("<pre")&&-1===e.indexOf("<script")||(n=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,(function(e){return e.replace(/(\r\n|\n)/g,"<wp-line-break>")}))),-1!==e.indexOf("[caption")&&(r=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,(function(e){return(e=(e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>")).replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,(function(e){return e.replace(/[\r\n\t]+/," ")}))).replace(/\s*\n\s*/g,"<wp-temp-br />")}))),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e="".concat(e,"\n\n")).replace(/<br \/>\s*<br \/>/gi,"\n\n")).replace(new RegExp("(<(?:".concat(t,")(?: [^>]*)?>)"),"gi"),"\n$1")).replace(new RegExp("(</(?:".concat(t,")>)"),"gi"),"$1\n\n")).replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n")).replace(/\s*<option/gi,"<option")).replace(/<\/option>\s*/gi,"</option>")).replace(/\r\n|\r/g,"\n")).replace(/\n\s*\n+/g,"\n\n")).replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n")).replace(/<p>\s*?<\/p>/gi,"")).replace(new RegExp("<p>\\s*(</?(?:".concat(t,")(?: [^>]*)?>)\\s*</p>"),"gi"),"$1")).replace(/<p>(<li.+?)<\/p>/gi,"$1")).replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?(?:".concat(t,")(?: [^>]*)?>)"),"gi"),"$1")).replace(new RegExp("(</?(?:".concat(t,")(?: [^>]*)?>)\\s*</p>"),"gi"),"$1")).replace(/\s*\n/gi,"<br />\n")).replace(new RegExp("(</?(?:".concat(t,")[^>]*>)\\s*<br />"),"gi"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1")).replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]")).replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,(function(e,t,n){return n.match(/<p( [^>]*)?>/)?e:"".concat(t,"<p>").concat(n,"</p>")})),n&&(e=e.replace(/<wp-line-break>/g,"\n")),r&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e},removep:function(e){var t="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset",n="".concat(t,"|div|p"),r="".concat(t,"|pre"),o=!1,a=!1;return e?(-1===e.indexOf("<pre")&&-1===e.indexOf("<script")||(o=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,(function(e){return(e=(e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")}))),-1!==e.indexOf("[caption")&&(a=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,(function(e){return e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")}))),-1!==(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(new RegExp("\\s*</(".concat(n,")>\\s*"),"g"),"</$1>\n")).replace(new RegExp("\\s*<((?:".concat(n,")(?: [^>]*)?)>"),"g"),"\n<$1>")).replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/\s*<br ?\/?>\s*/gi,"\n")).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:".concat(r,")(?: [^>]*)?)\\s*>"),"g"),"\n<$1>")).replace(new RegExp("\\s*</(".concat(r,")>\\s*"),"g"),"</$1>\n")).replace(/<li([^>]*)>/g,"\t<li$1>")).indexOf("<option")&&(e=(e=e.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>")),-1!==e.indexOf("<hr")&&(e=e.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!==e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,(function(e){return e.replace(/[\r\n]+/g,"")}))),e=(e=(e=(e=e.replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),o&&(e=e.replace(/<wp-line-break>/g,"\n")),a&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e):""}};t.default=r},function(e,t,n){},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(n(0)),o=p(n(339)),a=(p(n(18)),p(n(23))),i=p(n(1)),l=p(n(45)),u=p(n(9)),s=p(n(14)),c=(p(n(167)),n(89)),d=p(n(58)),f=p(n(77));p(n(27));function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n(1632);var m=(0,o.default)({displayName:"ETBuilderConditionalLogic",mixins:[a.default],getInitialState:function(){return{options:this.props.value,fieldValues:{},selectedValues:{},moduleType:(0,i.default)(this,"props.module.props.module.props.type","")}},componentDidMount:function(){var e=this,t=this.props.module.props.module,n=t.parentModule.props.content,r={};n.map((function(n,o){if(n.address!==t.props.address){var a=(0,i.default)(n,"attrs.field_id","");if(""!==a.trim()){a="et_pb_signup_custom_field"===e.state.moduleType?a:a.toLowerCase();var l=[];if((0,u.default)(["checkbox","radio","select"],n.attrs.field_type)){var c;switch(n.attrs.field_type){case"checkbox":c=n.attrs.checkbox_options;break;case"radio":c=n.attrs.radio_options;break;case"select":c=n.attrs.select_options}0!==(c=""===c||(0,s.default)(c)?[]:c).length&&(l=(c=JSON.parse(c)).map((function(e){return e.value})))}r[a]=l}}})),this.setState({fieldValues:r}),setTimeout((function(){if(!e.state.options){var t=[],n="";for(var r in e.state.fieldValues)if(e.state.fieldValues.hasOwnProperty(r)){n=r;break}var o=(0,i.default)(e,["state","fieldValues",n,0]);t.push({field:n,condition:"is",value:o}),e.setState({options:JSON.stringify(t)}),e.updateOptions(0,n),e._updateFrontEnd()}for(var a={},l=JSON.parse(e.state.options),u=0;u<l.length;u++)a[u]=l[u].value;e.setState({selectedValues:a})}),0)},updateOptions:function(t,n,r,o,a){var i=this.state.options||"",l=""===i?[]:JSON.parse(i),c=("field".concat(t),"condition".concat(t)),d="value".concat(t),f="",p="";(0,s.default)(this[c])||(f=this[c].value),(0,s.default)(this[d])||(p=this[d].value),!0===r&&(p=(0,s.default)(this.state.selectedValues[t])?"":this.state.selectedValues[t],(0,u.default)(["checkbox","radio","select"],o)&&(p=this.state.fieldValues[n][0]));var h={field:n,condition:f,value:p};l[t]=h;var m=e.intentionallyCloneDeep(this.state.selectedValues);!0===a&&(m[t]=p),this.setState({options:JSON.stringify(l),selectedValues:m}),this._updateFrontEnd()},updateSelected:function(e,t){var n=this,r=this.state.options||"",o=""===r?[]:JSON.parse(r),a=t.target.value,l=this.props.module.props.module.parentModule.props.content,u="input";l.map((function(e,t){var r=(0,i.default)(e,"attrs.field_id","");("et_pb_signup_custom_field"===n.state.moduleType?r:r.toLowerCase())===a&&(u=e.attrs.field_type)})),o[e].field=a,this.setState({options:JSON.stringify(o)}),setTimeout((function(){n.updateOptions(e,a,!0,u)}),0)},addRow:function(e,t){t&&t.preventDefault();var n=this,r=this.state.options||"",o=""===r?[]:JSON.parse(r),a="";for(var l in this.state.fieldValues)if(this.state.fieldValues.hasOwnProperty(l)){a=l;break}var u=(0,i.default)(this,["state","fieldValues",a,0]);!1!==e?o.splice(e+1,0,{field:a,condition:"is",value:u}):o.push({field:a,condition:"is",value:u}),this.setState({options:JSON.stringify(o)}),setTimeout((function(){if(!1!==e)n.updateOptions(e+1,a);else{var t=o.length>0?o.length-1:0;n.updateOptions(t,a)}n._updateFrontEnd()}),0)},removeRow:function(e,t){t.preventDefault();var n=this,r=this.state.options||"",o=""===r?[]:JSON.parse(r);if(o.splice(e,1),0===o.length){var a="";for(var l in this.state.fieldValues)if(this.state.fieldValues.hasOwnProperty(l)){a=l;break}o=[{field:a,condition:"is",value:(0,i.default)(this,["state","fieldValues",a,0])}]}this.setState({options:JSON.stringify(o)}),setTimeout((function(){n._updateFrontEnd()}),0)},_fieldSelect:function(e,t){var n=this,o=this,a=this.props.module.props.module,l=a.parentModule.props.content,u="field".concat(e),s="condition".concat(e),c="value".concat(e),d=t.field,f=this.updateOptions.bind(this,e,d);return r.default.createElement("div",{className:"et-fb-settings-conditional-logic",key:e},r.default.createElement("select",{className:"et-fb-settings-option-select et-fb-main-setting",onChange:this.updateSelected.bind(this,e),ref:function(e){return n[u]=e},value:t.field,disabled:this.props.readonly||!1},l.map((function(e,t){if(e.address!==a.props.address){var n=(0,i.default)(e,"attrs.field_id","");if(""!==n.trim()){n="et_pb_signup_custom_field"===o.state.moduleType?n:n.toLowerCase();var l=(0,i.default)(ETBuilderBackend,"componentDefinitions.fieldsDefaults.et_pb_contact_field.field_title[0]",""),u=(0,i.default)(e,"attrs.field_title",""),s=""!==l&&u===l?n:u;if(""!==s.trim())return r.default.createElement("option",{value:n,key:t},s)}}}))),r.default.createElement("select",{className:"et-fb-settings-option-select et-fb-main-setting",onChange:f,ref:function(e){return n[s]=e},value:t.condition,disabled:this.props.readonly||!1},r.default.createElement("option",{value:"is"},ETBuilderBackend.i18n.controls.conditionalLogic.is),r.default.createElement("option",{value:"is not"},ETBuilderBackend.i18n.controls.conditionalLogic.isNot),r.default.createElement("option",{value:"is greater"},ETBuilderBackend.i18n.controls.conditionalLogic.isGreater),r.default.createElement("option",{value:"is less"},ETBuilderBackend.i18n.controls.conditionalLogic.isLess),r.default.createElement("option",{value:"contains"},ETBuilderBackend.i18n.controls.conditionalLogic.contains),r.default.createElement("option",{value:"does not contain"},ETBuilderBackend.i18n.controls.conditionalLogic.doesNotContain),r.default.createElement("option",{value:"is empty"},ETBuilderBackend.i18n.controls.conditionalLogic.isEmpty),r.default.createElement("option",{value:"is not empty"},ETBuilderBackend.i18n.controls.conditionalLogic.isNotEmpty)),this._fieldSelectValues(e,d,t.value,c,t.condition))},_fieldSelectValues:function(e,t,n,o,a){var i=this,l=(this.props.module.props.module.parentModule.props.content,this.state.fieldValues[t]);(0,s.default)(l)&&(l=[],(0,s.default)(this.state.fieldValues[0])||(l=this.state.fieldValues[0])),(0,s.default)(n)&&(n="");var c=!!(0,u.default)(["is empty","is not empty"],a);return 0===l.length?r.default.createElement("input",{className:"et-fb-settings-option-input et-fb-main-setting",type:"text",onChange:this.updateOptions.bind(this,e,t,!1,!1,!0),ref:function(e){return i[o]=e},disabled:c,value:n,readOnly:this.props.readonly||!1}):r.default.createElement("select",{className:"et-fb-settings-option-select et-fb-main-setting",onChange:this.updateOptions.bind(this,e,t),ref:function(e){return i[o]=e},disabled:c,value:n},l.map((function(e,t){return r.default.createElement("option",{value:e,key:t},e)})))},_optionsControls:function(){var e=this,t=this.state.options||"";return(""===t?[]:JSON.parse(t)).map((function(t,n){var o=!e.props.readonly&&!e.props.hideDeleteButton&&r.default.createElement("a",{href:"#",className:"et_options_list_remove",onClick:e.removeRow.bind(e,n)},r.default.createElement(d.default,{icon:"delete",color:"rgb(163, 176, 194)"}));return r.default.createElement("div",{className:"et_options_list_row et_condition_row",key:n},e._fieldSelect(n,t),o)}))},render:function(){var e=this.props.additional_attrs?this.props.additional_attrs:{},t=this.addRow.bind(this,!1,!1),n=!this.props.readonly&&!this.props.hideAddButton&&r.default.createElement("span",{className:"et-fb-item-button-wrap--add"},r.default.createElement(c.Motion,{defaultStyle:{size:.5,opacity:0},style:{size:(0,c.spring)(1,{stiffness:300,damping:20}),opacity:(0,c.spring)(1,{stiffness:300,damping:20})}},(function(e){return r.default.createElement(f.default,{round:!0,style:{opacity:e.opacity,transform:"scale( ".concat(e.size," )")},tooltip:ETBuilderBackend.i18n.controls.moduleItem.addNew,_onClick:t},r.default.createElement(d.default,{size:"14",icon:"add",color:"#FFFFFF"}))})));return r.default.createElement("div",{className:"et_options_list"},this._optionsControls(),r.default.createElement("textarea",h({value:this.state.options,name:this.props.name,id:"et-fb-".concat(this.props.name),onChange:l.default},e)),n)},_updateFrontEnd:function(){var e=this;setTimeout((function(){e.props._onChange(e.props.name,e.state.options,e.props.type)}),0)}});t.default=m}).call(this,n(3))},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=u(n(339)),a=u(n(23)),i=u(n(1)),l=u(n(58));function u(e){return e&&e.__esModule?e:{default:e}}n(1634);var s=(0,o.default)({displayName:"ETBuilderSelectAnimation",mixins:[a.default],render:function(){var e={none:ETBuilderBackend.i18n.controls.selectAnimation.none,fade:ETBuilderBackend.i18n.controls.selectAnimation.fade,slide:ETBuilderBackend.i18n.controls.selectAnimation.slide,bounce:ETBuilderBackend.i18n.controls.selectAnimation.bounce,zoom:ETBuilderBackend.i18n.controls.selectAnimation.zoom,flip:ETBuilderBackend.i18n.controls.selectAnimation.flip,fold:ETBuilderBackend.i18n.controls.selectAnimation.fold,roll:ETBuilderBackend.i18n.controls.selectAnimation.roll},t=Object.keys(e),n=this;return r.default.createElement("div",{className:"et_select_animation"},t.map((function(t,o){var a="";t===n.props.value&&(a="et_active_animation");var u="animation-".concat(t),s=(0,i.default)(e,t,e.none);return r.default.createElement("div",{className:"et_animation_button",key:o},r.default.createElement("a",{href:"#",className:a,onClick:n._onClick.bind(n,t)},r.default.createElement("span",{className:"et_animation_button_title","data-value":t,key:o},s),r.default.createElement("span",{className:"et_animation_button_icon"},r.default.createElement(l.default,{icon:u}))))})))},_onClick:function(e,t){t.preventDefault(),this.props._onChange(this.props.name,e)}});t.default=s},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(1473));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1636);t.default=function(e){return r.default.createElement(o.default,l(l({},e),{},{className:"et_box_shadow ".concat(e.className)}))}},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(0)),a=u(n(1)),i=u(n(49)),l=u(n(1473));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1638);var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,l=f(u);function u(){return s(this,u),l.apply(this,arguments)}return t=u,(n=[{key:"renderContent",value:function(e){return(0,i.default)(e,"content")?o.default.createElement("span",{className:this.classes.content},o.default.createElement("span",{className:(0,a.default)(e,"class")},e.content)):null}}])&&c(t.prototype,n),r&&c(t,r),u}(l.default);t.default=m},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(0)),o=d(n(6)),a=d(n(1640)),i=d(n(1641)),l=d(n(1642)),u=d(n(1465)),s=d(n(1643)),c=["src"];function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h=function(e){var t,n=e.src,o=p(e,c),d=function(e){return null!==e.match(/[^\/]+(\/[^\/]+)+\.[a-z|0-9]{2,5}(\?.+)?$/i)}(t=n)?a.default:function(e){return null!==e.match(/(https?:\/\/)?(www\.)?youtube\.com/i)}(t)?i.default:function(e){return null!==e.match(/(https?:\/\/)?(www\.)?vimeo\.com/i)}(t)?l.default:function(e){return null!==e.match(/(https?:\/\/)?(www\.)?dailymotion\.com/i)}(t)?s.default:u.default;return r.default.createElement(d,f({},o,{src:n}))};h.propTypes={src:o.default.string.isRequired};var m=h;t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r},a=["src"];function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.default=function(e){var t=e.src,n=l(e,a);return o.default.createElement("video",i({},n,{src:t}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(0)),o=c(n(969)),a=c(n(189)),i=c(n(446)),l=c(n(1465)),u=n(959),s=["src"];function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=(0,a.default)(i.default,(0,u.getArg)("v"));t.default=function(e){var t,n,a=e.src,i=f(e,s);return r.default.createElement(l.default,d({},i,{src:(t=a,(0,u.setArgs)((0,o.default)("v",(0,u.getArgs)(t)),(n=p(t),"https://www.youtube.com/embed/".concat(n))))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(0)),o=c(n(189)),a=c(n(967)),i=c(n(445)),l=c(n(1465)),u=n(959),s=["src"];function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=(0,o.default)(a.default,(0,i.default)("/"),u.clearArgs);t.default=function(e){var t,n,o=e.src,a=f(e,s);return r.default.createElement(l.default,d({},a,{src:(t=o,(0,u.setArgs)((0,u.getArgs)(t),(n=p(t),"https://player.vimeo.com/video/".concat(n)))),frameBorder:"0"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(0)),o=c(n(189)),a=c(n(967)),i=c(n(445)),l=c(n(1465)),u=n(959),s=["src"];function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=(0,o.default)(a.default,(0,i.default)("/"),u.clearArgs);t.default=function(e){var t,n,o=e.src,a=f(e,s);return r.default.createElement(l.default,d({},a,{src:(t=o,(0,u.setArgs)((0,u.getArgs)(t),(n=p(t),"https://www.dailymotion.com/embed/video/".concat(n)))),frameBorder:"0"}))}},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=k(n(6));n(1646);var i=k(n(12)),l=k(n(189)),u=k(n(970)),s=k(n(757)),c=k(n(60)),d=k(n(169)),f=k(n(445)),p=k(n(961)),h=k(n(971)),m=k(n(982)),g=k(n(968)),v=k(n(1647)),y=k(n(1651)),b=n(1502),_=k(n(1654)),w=k(n(1655));function k(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function C(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=(0,l.default)((0,u.default)((0,h.default)(isNaN)),(0,p.default)(parseInt),(0,f.default)(","),i.default),L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t,n,r,a=P(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).getValue=e.getValue.bind(x(e)),e.updateValue=e.updateValue.bind(x(e)),e.onRemove=(0,l.default)(e.onRemove.bind(x(e)),parseInt),e.onClick=e.onClick.bind(x(e)),e.find=e.find.bind(x(e)),e.move=e.move.bind(x(e)),e}return t=i,(n=[{key:"UNSAFE_componentWillMount",value:function(){(0,b.preLoad)(this.getValue())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;(0,b.preLoad)(D(t))}},{key:"updateValue",value:function(e){this.props._onChange(this.props.name,(0,g.default)(",",e),this.props.type)}},{key:"onClick",value:function(){var e=this;(0,y.default)({multiple:!0,selected:this.getValue()}).then((0,p.default)((0,s.default)("id"))).then((function(t){return(0,c.default)(e.getValue(),t)})).then(this.updateValue)}},{key:"onRemove",value:function(e){this.updateValue((0,u.default)((0,h.default)((0,m.default)(e)),this.getValue()))}},{key:"getValue",value:function(){return D(this.props.value)}},{key:"move",value:function(e,t){var n=this.find(e).attachment,r=this.getValue().filter((0,h.default)((0,m.default)(e)));this.updateValue([].concat(C(r.slice(0,t)),[n],C(r.slice(t))))}},{key:"find",value:function(e){return{attachment:this.getValue().find((0,m.default)(e)),index:(0,d.default)(this.getValue(),(0,m.default)(e))}}},{key:"renderItems",value:function(){var e=this;return[].concat(C(this.getValue().map((function(t){return o.default.createElement(_.default,{key:t,id:t,onRemove:e.onRemove,readOnly:e.props.readonly})}))),[o.default.createElement(w.default,{key:-1,draggable:!1,onClick:this.onClick,title:ETBuilderBackend.i18n.controls.uploadGallery.addImages,readOnly:this.props.readonly})])}},{key:"render",value:function(){return o.default.createElement(v.default,{className:"et-fb-control-images-upload",type:"image-upload",move:this.move,find:this.find},this.renderItems())}}])&&E(t.prototype,n),r&&E(t,r),i}(o.Component);L.propTypes={value:a.default.string};var R=L;t.default=R},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=n(1469),i=d(n(1467)),l=d(n(6)),u=d(n(1648)),s=d(n(1649));n(1650);var c=["children","type","find","move"];function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(d,e);var t,n,r,l=g(d);function d(e){var t,n=e.type;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=l.call(this)).defineContainer(n),t.defineItem(n),t.renderItem=t.renderItem.bind(y(t)),t}return t=d,(n=[{key:"getType",value:function(){return this.props.type}},{key:"getContainer",value:function(){return this.Container}},{key:"getItem",value:function(){return this.Item}},{key:"defineItem",value:function(e){var t=(0,a.DragSource)(e,{beginDrag:function(e){return{id:e.id,originalIndex:e.find(e.id).index}},endDrag:function(e,t){var n=t.getItem(),r=n.id,o=n.originalIndex;t.didDrop()||e.move(r,o)}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})),n=(0,a.DropTarget)(e,{canDrop:function(){return!1},hover:function(e,t){var n=t.getItem().id,r=e.id;if(n!==r){var o=e.find(r).index;e.move(n,o)}}},(function(e){return{connectDropTarget:e.dropTarget()}}));this.Item=n(t(s.default))}},{key:"defineContainer",value:function(e){var t=(0,a.DropTarget)(e,{drop:function(){}},(function(e){return{connectDropTarget:e.dropTarget()}}));this.Container=t(u.default)}},{key:"renderItem",value:function(e){var t=this.getItem(),n=this.props,r=n.find,a=n.move;return!1===e.props.draggable?e:o.default.createElement(t,{id:e.props.id,key:e.props.id,find:r,move:a},e)}},{key:"render",value:function(){var e=this.getContainer(),t=this.props,n=t.children,r=(t.type,t.find,t.move,p(t,c));return o.default.createElement(i.default,null,o.default.createElement(e,r,n.map(this.renderItem)))}}])&&h(t.prototype,n),r&&h(t,r),d}(o.Component);_.propTypes={tagName:l.default.string,move:l.default.func.isRequired,find:l.default.func.isRequired,type:l.default.string.isRequired,children:l.default.node},_.defaultProps={tagName:"div",children:o.default.ReactNode};var w=_;t.default=w},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),i=(o=n(6))&&o.__esModule?o:{default:o},l=["connectDropTarget","tagName","children"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,e);var t,n,r,o=p(i);function i(){return c(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,n=e.tagName,r=e.children,o=s(e,l);return t((0,a.createElement)(n,o,r))}}])&&d(t.prototype,n),r&&d(t,r),i}(a.Component);g.propTypes={tagName:i.default.string,connectDropTarget:i.default.func.isRequired,children:i.default.node},g.defaultProps={tagName:"div",children:a.default.ReactNode};var v=g;t.default=v},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),i=n(37),l=(o=n(6))&&o.__esModule?o:{default:o};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,t);var n,r,o,l=f(u);function u(){return s(this,u),l.apply(this,arguments)}return n=u,(r=[{key:"render",value:function(){var t=this.props,n=t.children,r=t.connectDragSource,o=t.connectDropTarget,l=t.isDragging,u=a.default.Children.only(n);return a.default.cloneElement(u,{ref:function(t){var n=(0,i.findDOMNode)(t),a=e(n);o(n),r(n),a.addClass("et-fb-draggable-item"),l?a.addClass("et-fb-draggable-item--dragging"):a.removeClass("et-fb-draggable-item--dragging")}})}}])&&c(n.prototype,r),o&&c(n,o),u}(a.Component);m.propTypes={connectDragSource:l.default.func.isRequired,connectDropTarget:l.default.func.isRequired,children:l.default.node,isDragging:l.default.bool.isRequired},m.defaultProps={children:a.default.ReactNode};var g=m;t.default=g}).call(this,n(5))},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(757)),o=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var i={multiple:!1,mediaTypes:"image",selected:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=o.default.topWindow().wp.media({library:{type:e.mediaTypes},multiple:!!e.multiple&&"add"}),n=function(e){return e(t.state().get("selection").map((0,r.default)("attributes")))};return t.on("open",(function(){var n=t.state().get("selection");e.selected.map((function(e){return n.add(o.default.topWindow().wp.media.attachment(e))}))})),t.open(),new Promise((function(e){return t.on("select",(function(t){return n(e)}))}))}},function(e,t,n){var r=n(56)("find",n(79));r.placeholder=n(47),e.exports=r},function(e,t,n){var r=n(56)("noop",n(45),n(127));r.placeholder=n(47),e.exports=r},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=p(n(6)),i=n(89),l=p(n(4)),u=p(n(49)),s=p(n(1)),c=p(n(58)),d=p(n(1502)),f=p(n(394));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"thumbnail";return(0,d.default)(e).then((function(e){var n=(0,s.default)(e,"guid","");return t&&(0,u.default)(e,"metadata.".concat(t,".0"))?(0,s.default)(e,"metadata.".concat(t,".0"),n):n}))},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,r,a=v(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=a.call(this)).state={url:null,active:!1},e.setUrl=e.setUrl.bind(b(e)),e.onMouseOver=e.onMouseOver.bind(b(e)),e.onMouseLeave=e.onMouseLeave.bind(b(e)),e.onRemove=e.onRemove.bind(b(e)),e}return t=u,(n=[{key:"onMouseOver",value:function(){this.setState({active:!0})}},{key:"onMouseLeave",value:function(){this.setState({active:!1})}},{key:"onRemove",value:function(e){e.preventDefault(),this.props.onRemove&&this.props.onRemove(this.props.id)}},{key:"componentDidMount",value:function(){w(this.props.id).then(this.setUrl)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.id;this.props.id!==t&&w(t).then(this.setUrl)}},{key:"setUrl",value:function(e){this.setState({url:e})}},{key:"renderDelete",value:function(){var e=this,t={opacity:this.state.active?(0,i.spring)(1,{stiffness:300,damping:20}):(0,i.spring)(0,{stiffness:300,damping:20}),scale:this.state.active?(0,i.spring)(1,{stiffness:300,damping:20}):(0,i.spring)(0,{stiffness:300,damping:20}),top:this.state.active?(0,i.spring)(5,{stiffness:300,damping:20}):(0,i.spring)(-10,{stiffness:300,damping:20}),right:this.state.active?(0,i.spring)(5,{stiffness:300,damping:20}):(0,i.spring)(-10,{stiffness:300,damping:20})};return o.default.createElement(i.Motion,{style:t},(function(t){return o.default.createElement("button",{className:"et-fb-control-images-upload--item-delete",onClick:e.onRemove,style:{opacity:t.opacity,transform:"scale( ".concat(t.scale," )"),top:t.top}},o.default.createElement(c.default,{icon:"delete",color:"#fff"}))}))}},{key:"renderLoading",value:function(){return o.default.createElement("div",{className:"et-fb-control-images-upload--item-wrapper loading"},o.default.createElement("div",{className:"et-fb-control-images-upload--item",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseLeave},o.default.createElement(f.default,{isLoading:!0})),!this.props.readonly&&this.renderDelete())}},{key:"renderAttachment",value:function(){return o.default.createElement("div",{className:"et-fb-control-images-upload--item-wrapper"},o.default.createElement("div",{className:"et-fb-control-images-upload--item",style:{backgroundImage:"url(".concat(this.state.url,")")},onMouseOver:this.onMouseOver,onMouseOut:this.onMouseLeave},!this.props.readonly&&this.renderDelete()))}},{key:"render",value:function(){return(0,l.default)(this.state.url)?this.renderLoading():this.renderAttachment()}}])&&m(t.prototype,n),r&&m(t,r),u}(o.Component);k.propTypes={id:a.default.number,onRemove:a.default.func};var O=k;t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(58));function a(e){return e&&e.__esModule?e:{default:e}}n(1656);t.default=function(e){var t=e.onClick,n=e.title;return!e.readonly&&r.default.createElement("div",{className:"et-fb-add-media",onClick:t},r.default.createElement("div",{className:"et-fb-add-media--container"},r.default.createElement("div",{className:"et-fb-add-media--button"},r.default.createElement(o.default,{icon:"add",color:"#fff"})),r.default.createElement("label",{className:"et-fb-add-media--title et-fb-form__label"},n)))}},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(0)),a=_(n(18)),i=_(n(14)),l=_(n(4)),u=_(n(30)),s=_(n(13)),c=_(n(2)),d=_(n(182)),f=(_(n(49)),_(n(1))),p=_(n(35)),h=_(n(45)),m=_(n(52)),g=_(n(77)),v=_(n(27)),y=_(n(8)),b=n(3);function _(e){return e&&e.__esModule?e:{default:e}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1658);var M=(0,f.default)((0,b.topWindow)(),"google.maps",(0,f.default)((0,b.appWindow)(),"google.maps",!1)),P=M&&new M.Geocoder,T=(0,a.default)({"et-fb-settings-option-inner":!0,"et-fb-settings-option-inner-center-map":!0}),x=(0,a.default)({"et-fb-settings-button--center-map-update":!0,"et-fb-settings-button--additional-button":!0}),j=M?{url:"".concat(ETBuilderBackend.images_uri,"/marker.png"),size:new M.Size(46,43),anchor:new M.Point(16,43)}:{},D={coord:[1,1,46,43],type:"rect"},L=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},R=function(e,t){return new M.LatLng(L(e)?parseFloat(e):0,L(t)?parseFloat(t):0)},N=function(e){(0,f.default)(window,"alert",h.default)(e)},A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(h,e);var t,n,r,a=O(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=a.call(this,e)).state={updateMapSize:!1,contentUpdate:!1},t.isUpdating=!1,t.forceCenter=!0,t.markers=[],t.onClick=t.onClick.bind(S(t)),t.updateMap=t.updateMap.bind(S(t)),t.geoCodeCallback=t.geoCodeCallback.bind(S(t)),t.geoCodePinCallback=t.geoCodePinCallback.bind(S(t)),t.zoomChanged=t.zoomChanged.bind(S(t)),t.centerChanged=t.centerChanged.bind(S(t)),t.dragEnd=t.dragEnd.bind(S(t)),t.handleContentChange=t.handleContentChange.bind(S(t)),t.handleMapWidthChange=t.handleMapWidthChange.bind(S(t)),t.debouncedCenterChanged=(0,m.default)(t.centerChanged,500),t.debouncedUpdateMap=(0,m.default)(t.updateMap,200),t.debouncedWidthChange=(0,m.default)(t.handleMapWidthChange,500),t}return t=h,(n=[{key:"componentDidMount",value:function(){M&&(y.default.addSettingsModalResizeListener(this.debouncedWidthChange),y.default.addChangeListener(this.debouncedWidthChange),y.default.addModuleItemsActionsListener(this.handleContentChange),this.wasModuleItemSettings=this.isModuleItemSettings(),this.createMap(),this.debouncedUpdateMap())}},{key:"componentDidUpdate",value:function(){if(M){var e=this.isModuleItemSettings();e&&!this.wasModuleItemSettings&&(this.forceCenter=!0),e!==this.wasModuleItemSettings&&this.removeMarkers(),this.wasModuleItemSettings=e,this.debouncedUpdateMap()}}},{key:"componentWillUnmount",value:function(){M&&M.event.clearInstanceListeners(this.map),this.debouncedUpdateMap.flush(),this.debouncedCenterChanged.cancel(),this.debouncedWidthChange.cancel(),y.default.removeSettingsModalResizeListener(this.debouncedWidthChange),y.default.removeChangeListener(this.debouncedWidthChange),y.default.removeModuleItemsActionsListener(this.handleContentChange)}},{key:"onClick",value:function(){this.geoCodeAddress()}},{key:"getModuleAttributeName",value:function(e){return this.isModuleItemSettings()&&"zoom_level"!==e?"pin_".concat(e):e}},{key:"getModuleAttributeValue",value:function(e){var t=this.getModuleAttributeName(e),n=(0,f.default)(this.props.moduleAttrs,t);return(0,f.default)(this.props,t,n)}},{key:"getAddress",value:function(){return(0,d.default)(this.getModuleAttributeValue("address"))}},{key:"getModule",value:function(){return(0,f.default)(this,"props.module.props.module")}},{key:"moduleSettingsChange",value:function(e,t){var n=(0,f.default)(this.props,"disableAction",!1),r=(0,f.default)(this.props,"_onChange");n&&(0,u.default)(r)?r(e,t):this.props.isItemSelected?v.default.multiSelectSettingsChange(this.getModule(),e,t):v.default.moduleSettingsChange(this.getModule(),e,t)}},{key:"geoCodeAddress",value:function(){var e=this.getAddress();e.length<=0||!1===P||P.geocode({address:e},this.geoCodeCallback)}},{key:"geoCodePinCallback",value:function(e,t){t===M.GeocoderStatus.OK?e[0]?(this.forceCenter=!0,this.moduleSettingsChange(this.getModuleAttributeName("address"),e[0].formatted_address)):N(ETBuilderBackend.i18n.controls.centerMap.noResults):N("".concat(ETBuilderBackend.i18n.controls.centerMap.geoCodeError_2,": ").concat(t))}},{key:"geoCodeCallback",value:function(e,t){if(t===M.GeocoderStatus.OK){var n=this.getAddress(),r=e[0],o=r.geometry.location,a=function(e){var t=e.split(","),n=!!(0,i.default)(t[0])&&parseFloat(t[0]),r=!!(0,i.default)(t[1])&&parseFloat(t[1]);return!(!n||isNaN(n)||!r||isNaN(r))&&R(n,r)}(n);a&&(o=a),isNaN(o.lat())||isNaN(o.lng())?N(ETBuilderBackend.i18n.controls.centerMap.mapPinAddressInvalid):(this.moduleSettingsChange(this.getModuleAttributeName("address"),r.formatted_address),this.moduleSettingsChange(this.getModuleAttributeName("address_lat"),o.lat()),this.moduleSettingsChange(this.getModuleAttributeName("address_lng"),o.lng()),this.removeMarkers(),this.forceCenter=!0)}else N("".concat(ETBuilderBackend.i18n.controls.centerMap.geoCodeError,": ").concat(t))}},{key:"isModuleItemSettings",value:function(){return!(0,i.default)((0,f.default)(this,"props.module.props.module.isModuleItem"))}},{key:"handleContentChange",value:function(){this.removeMarkers()}},{key:"handleMapWidthChange",value:function(){this.map&&(M.event.trigger(this.map,"resize"),this.updateMap())}},{key:"allowEvent",value:function(){return!this.isUpdating&&!this.props.readonly}},{key:"zoomChanged",value:function(){this.allowEvent()&&this.moduleSettingsChange("zoom_level",this.map.getZoom())}},{key:"centerChanged",value:function(){if(this.allowEvent()&&!this.isModuleItemSettings()){var e=this.map.getCenter(),t=e.lat(),n=e.lng(),r=this.getModuleAttributeValue("address_lat"),o=this.getModuleAttributeValue("address_lng");t!==r&&this.moduleSettingsChange("address_lat",t),n!==o&&this.moduleSettingsChange("address_lng",n)}}},{key:"dragEnd",value:function(){if(this.allowEvent()){var e=this.markers[0].getPosition();this.moduleSettingsChange(this.getModuleAttributeName("address_lat"),e.lat()),this.moduleSettingsChange(this.getModuleAttributeName("address_lng"),e.lng());var t=R(e.lat(),e.lng());P.geocode({latLng:t},this.geoCodePinCallback)}}},{key:"createMap",value:function(){M&&(this.map=new M.Map(this.mapContainer,{gestureHandling:"cooperative",mapTypeId:M.MapTypeId.ROADMAP,zoomControl:!this.props.readonly,mapTypeControl:!this.props.readonly,scaleControl:!this.props.readonly,streetViewControl:!this.props.readonly,fullscreenControl:!this.props.readonly,scrollwheel:!this.props.readonly,draggable:!this.props.readonly,disableDoubleClickZoom:this.props.readonly}),this.props.readonly||(this.map.addListener("zoom_changed",this.zoomChanged),this.map.addListener("dragend",this.debouncedCenterChanged)))}},{key:"removeMarkers",value:function(){(0,p.default)(this.markers,(function(e){(0,s.default)(e)&&e.setMap(null)})),this.markers=[]}},{key:"addMarkers",value:function(){var e=this,t=this.getModule(),n=(0,f.default)(t,"props.content"),r=this.getModuleAttributeValue("address_lat"),o=this.getModuleAttributeValue("address_lng");if((0,l.default)(n)||!(0,c.default)(n)){if(this.isModuleItemSettings()){var a=new M.Marker({map:this.map,position:R(r,o),draggable:!this.props.readonly,icon:j,shape:D});a.addListener("dragend",this.dragEnd),this.markers=[a]}}else(0,c.default)(n)&&(this.markers=(0,p.default)(n,(function(t){return!(0,i.default)(t)&&new M.Marker({map:e.map,position:R(t.attrs.pin_address_lat,t.attrs.pin_address_lng),icon:j,shape:D})})))}},{key:"updateMap",value:function(){var e=this.getModuleAttributeValue("address_lat"),t=this.getModuleAttributeValue("address_lng"),n=function(e){return L(e)?parseInt(e,10):10}(this.getModuleAttributeValue("zoom_level"));this.isUpdating=!0,n&&this.map.setZoom(n),this.isModuleItemSettings()&&!this.forceCenter||(this.map.setCenter(R(e,t)),this.forceCenter=!1),(0,l.default)(this.markers)&&this.addMarkers(),this.isUpdating=!1}},{key:"render",value:function(){var e=this,t=!this.props.readonly&&!this.props.hideUpdateButton&&o.default.createElement(g.default,{className:x,_onClick:this.onClick,inverse:!0},ETBuilderBackend.i18n.controls.centerMap.updateMapButtonText);return o.default.createElement("div",{className:T},t,o.default.createElement("div",{className:"et-fb-settings-option-center-map",ref:function(t){return e.mapContainer=t}}))}}])&&w(t.prototype,n),r&&w(t,r),h}(o.default.Component);t.default=A},function(e,t,n){},function(e,t,n){"use strict";(function(e,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(n(0)),i=c(n(6)),l=c(n(18)),u=n(136),s=c(n(14));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1660);var y=new u.AllHtmlEntities,b=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,t);var n,o,i,u=m(c);function c(){return f(this,c),u.apply(this,arguments)}return n=c,(o=[{key:"_openLinkInNewTab",value:function(t){var n=t.target.href;(0,s.default)(n)||(t.preventDefault(),e.topWindow().open(n,"_blank").focus())}},{key:"componentDidMount",value:function(){this.$warningTag=r(this.warningTag),this.$warningTag.on("click","a",this._openLinkInNewTab)}},{key:"componentWillUnmount",value:function(){this.$warningTag.off("click","a",this._openLinkInNewTab)}},{key:"render",value:function(){var e=this,t={"et-fb-main-settings-option":!0};return this.props.className&&(t[this.props.className]=!0),this.props.value!==this.props.display_if?null:a.default.createElement("div",{className:(0,l.default)(t),dangerouslySetInnerHTML:{__html:y.decode(this.props.message)},ref:function(t){return e.warningTag=t}})}}])&&p(n.prototype,o),i&&p(n,i),c}(a.Component);b.propTypes={display_if:i.default.bool,message:i.default.string,module:i.default.object,name:i.default.string,type:i.default.string,value:i.default.bool};var _=b;t.default=_}).call(this,n(3),n(5))},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=U(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=G(n(6)),i=G(n(18)),l=G(n(255)),u=G(n(79)),s=G(n(10)),c=G(n(1)),d=G(n(49)),f=G(n(9)),p=G(n(4)),h=G(n(41)),m=G(n(30)),g=G(n(190)),v=G(n(13)),y=G(n(14)),b=G(n(17)),_=G(n(35)),w=G(n(342)),k=G(n(126)),O=G(n(95)),C=G(n(12)),S=(G(n(2)),G(n(160))),E=G(n(8)),M=G(n(29)),P=G(n(3)),T=G(n(118)),x=G(n(965)),j=G(n(58)),D=G(n(1493)),L=G(n(966)),R=G(n(1495)),N=G(n(728)),A=G(n(1458)),B=G(n(1501)),F=G(n(844)),I=G(n(1466)),W=n(75),V=n(756),H=G(n(22));function G(e){return e&&e.__esModule?e:{default:e}}function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(U=function(e){return e?n:t})(e)}function z(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1504);var ne={gradient:D.default,color:L.default,"color-alpha":L.default,number:N.default,range:R.default,select:F.default,text:N.default,upload:B.default,yes_no_button:A.default},re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(D,e);var t,n,r,a=Q(D);function D(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,D),(t=a.call(this,e)).defaultTab="color",t.state={activeTab:e.activeTab||t.defaultTab},t._onClickTabNav=t._onClickTabNav.bind(ee(t)),t._onMouseEnterTabNav=t._onMouseEnterTabNav.bind(ee(t)),t._onMouseLeaveTabNav=t._onMouseLeaveTabNav.bind(ee(t)),t._onChange=t._onChange.bind(ee(t)),t._onMouseEnterFormGroup=t._onMouseEnterFormGroup.bind(ee(t)),t._onMouseLeaveFormGroup=t._onMouseLeaveFormGroup.bind(ee(t)),t._onChangeGradient=t._onChangeGradient.bind(ee(t)),t._onMouseEnterFormGroupGradient=t._onMouseEnterFormGroupGradient.bind(ee(t)),t._onMouseLeaveFormGroupGradient=t._onMouseLeaveFormGroupGradient.bind(ee(t)),t._onResetDynamic=t._onResetDynamic.bind(ee(t)),t._onInheritDynamic=t._onInheritDynamic.bind(ee(t)),t}return t=D,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.backgroundFields,r=t.background_fields;(0,h.default)(e.backgroundFields,n)&&(0,h.default)(e.background_fields,r)||(this._backgroundFields=!1,this._tabs=!1)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,h.default)(e,this.props)||!(0,h.default)(t,this.state)}},{key:"_onClickTabNav",value:function(e){e.preventDefault();var t=e.target.getAttribute("data-tab");this._isTabDisabled(t)||this.setState({activeTab:t})}},{key:"_onMouseEnterTabNav",value:function(e){var t=this.props,n=t.toggle_slug,r=t.tab_slug,o=t.context_menu,a=t.onMouseEnterGroup;if((0,m.default)(a)){var i=e.target.getAttribute("data-tab"),l=M.default.getI18n("controls.background.".concat(i));a({fieldName:this._getBackgroundBase(),fieldLabel:l,fieldType:"background-".concat(i),toggleId:n,toggleGroupId:r,fieldContextMenu:o})}}},{key:"_onMouseLeaveTabNav",value:function(){var e=this.props.onMouseLeaveGroup;(0,m.default)(e)&&e({fieldName:!1,fieldLabel:""})}},{key:"_onMouseEnterFormGroup",value:function(e){var t=this._getField(e);if(t&&"use_color_gradient"!==t.field_template){var n=this.props,r=n.onMouseEnterGroup,o=n.toggle_slug,a=n.tab_slug;if((0,m.default)(r)){var i=(0,c.default)(t,"data_type",!1),l=i?"".concat(t.type,"_").concat(i):t.type,u=(0,c.default)(t,"context_menu",!0);r({fieldName:t.name,fieldLabel:t.label,fieldType:l,toggleId:o,toggleGroupId:a,fieldContextMenu:u})}}}},{key:"_onMouseLeaveFormGroup",value:function(e){var t=this._getField(e);if(t&&"use_color_gradient"!==t.field_template){var n=this.props,r=n.onMouseLeaveGroup,o=n.toggle_slug,a=n.tab_slug;if((0,m.default)(r)){var i=(0,c.default)(t,"data_type",!1),l=i?"".concat(t.type,"_").concat(i):t.type,u=(0,c.default)(t,"context_menu",!0);r({fieldName:t.name,fieldLabel:t.label,fieldType:l,toggleId:o,toggleGroupId:a,fieldContextMenu:u})}}}},{key:"_onMouseEnterFormGroupGradient",value:function(e,t){var n=this._getField(e);if(n&&"use_color_gradient"===n.field_template){var r=this._getFieldByTemplate(P.default.gradientFieldsMapping(t));if(r)this._onMouseEnterFormGroup(r.name);else{var o=this.props,a=o.onMouseEnterGroup,i=o.toggle_slug,l=o.tab_slug;if((0,m.default)(a)){var u="preview"===t?"background-gradient":n.type,s=(0,c.default)(n,"data_type",!1);s&&(u="".concat(u,"_").concat(s)),a({fieldName:this._getBackgroundBase(),fieldLabel:M.default.getI18n("controls.background.gradientColors"),fieldType:u,toggleId:i,toggleGroupId:l,fieldContextMenu:(0,c.default)(n,"context_menu")})}}}}},{key:"_onMouseLeaveFormGroupGradient",value:function(e,t){var n=this._getField(e);if(n&&"use_color_gradient"===n.field_template){var r=this._getFieldByTemplate(P.default.gradientFieldsMapping(t));if(r)this._onMouseLeaveFormGroup(r.name);else{var o=this.props,a=o.onMouseLeaveGroup,i=o.toggle_slug,l=o.tab_slug;if((0,m.default)(a)){var u=(0,c.default)(n,"data_type",!1),s=u?"".concat(n.type,"_").concat(u):n.type,d=(0,c.default)(n,"context_menu",!0);a({fieldName:this._getBackgroundBase(),fieldLabel:M.default.getI18n("controls.background.gradientColors"),fieldType:s,toggleId:i,toggleGroupId:l,fieldContextMenu:d})}}}}},{key:"_onResetDynamic",value:function(e){this._onChange(e,"")}},{key:"_onInheritDynamic",value:function(e){this._onChange(e)}},{key:"_onChange",value:function(e,t,n,r,o){this._emitChange(e,t,n,r,o);var a,i=this._getFieldEnablePair(e);i&&(a=(0,y.default)(t)||o?"":P.default.hasValue(t)?"on":"off",this._getAttrs(i.name)!==a&&this._emitChange(i.name,a),E.default.isGlobalPresetsMode()&&x.default.isDesktopMode()&&!P.default.hasValue(a)&&(this._emitChange(i.name,this._getDefault(i.name)),this._emitChange(e,this._getDefault(e))))}},{key:"_onChangeGradient",value:function(e,t,n,r,o){var a=this;(0,v.default)(t)?((0,s.default)(t,(function(e,t){var n=P.default.gradientFieldsMapping(t);if(n){var r=a._getFieldByTemplate(n);r&&(0,C.default)(e).toLowerCase()!==(0,C.default)(a._getAttrs(r.name)).toLowerCase()&&a._emitChange(r.name,e)}})),P.default.isOn(this._getAttrsByTemplate("use_color_gradient"))||this._emitChange(this._getFieldByTemplate("use_color_gradient").name,"on")):(0,y.default)(t)||o?(0,s.default)(["color_gradient_start","color_gradient_end","use_color_gradient"],(function(e){var t=a._getFieldByTemplate(e);t&&a._emitChange(t.name,"",n,r,!0)})):P.default.isOn(t)?((0,s.default)(["color_gradient_end","use_color_gradient"],(function(e){var t=a._getFieldByTemplate(e);t&&a._emitChange(t.name,a._getAttrs(t.name,!0))})),this._emitChange(e,t)):this._emitChange(e,t)}},{key:"_emitChange",value:function(e,t,n,r,o){this.props.readonly||((0,f.default)(["_dynamic_attributes"],e)?this.props._onChange(e,t,n,r,o):this.props._onChange(this._getFieldNameByMode(e),t,n,r,o))}},{key:"_getModuleAttrs",value:function(){return this.props.moduleAttrs||{}}},{key:"_getAttrsByTemplate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._getFieldByTemplate(e);return n?this._getAttrs(n.name,t):null}},{key:"_getAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._getModuleAttrs(),r=this._getFieldEnablePair(e);if(r){var o=this._getAttrs(r.name,t);if("off"===o)return""}return t?(0,c.default)(n,this._getFieldNameByMode(e),this._getDefault(e)):(0,c.default)(n,this._getFieldNameByMode(e))}},{key:"_getDefault",value:function(e){var t=x.default.getBaseName(e),n=this._getField(t),r=(0,c.default)(n,"default"),o=this._getModuleAttrs(),a=x.default.getDesktopValue(t,o);if(n.mobile_options&&x.default.isResponsiveMode()&&x.default.isResponsiveEnabled(this._getBackgroundBase(),o)){var i=x.default.getTabletValue(t,o,a);return x.default.isPhoneMode()?P.default.get(i,r):P.default.get(a,r)}return"tabs"===n.hover&&x.default.isHoverMode()&&x.default.isHoverEnabled(this._getBackgroundBase(),o)||n.sticky&&x.default.isStickyMode()&&x.default.isStickyEnabled(this._getBackgroundBase(),o)?P.default.get(a,r):r}},{key:"_getBackgroundBase",value:function(){return x.default.getBaseName(this.props.name)||"background"}},{key:"_getFieldNameByMode",value:function(e){var t=this._getModuleAttrs(),n=x.default.getBaseName(e),r=this._getField(n);return r?r.mobile_options&&x.default.isResponsiveMode()&&x.default.isResponsiveEnabled(this._getBackgroundBase(),t)?x.default.isPhoneMode()?x.default.getPhoneName(n):x.default.getTabletName(n):"tabs"===r.hover&&x.default.isHoverMode()&&x.default.isHoverEnabled(this._getBackgroundBase(),t)?x.default.getHoverName(n):r.sticky&&x.default.isStickyMode()&&x.default.isStickyEnabled(this._getBackgroundBase(),t)?x.default.getStickyName(n):n:e}},{key:"_getFieldEnablePair",value:function(e){var t=this._getFieldTemplate(e);return!!(0,f.default)(["color","image","video_mp4","video_webm"],t)&&this._getFieldByTemplate("enable_".concat(t))}},{key:"_getFieldByTemplate",value:function(e){return e&&(0,u.default)(this._getFields(),(function(t){return t.field_template===e}))}},{key:"_getFieldTemplate",value:function(e){return(0,c.default)(this._getField(x.default.getBaseName(e)),"field_template","")}},{key:"_getField",value:function(e){return(0,c.default)(this._getFields(),x.default.getBaseName(e))}},{key:"_getFields",value:function(){var e=this;if(!(0,p.default)(this._backgroundFields))return this._backgroundFields;var t=[],n=this.props.backgroundFields||this.props.background_fields||{};if((0,s.default)(n,(function(e,r){var o=$({name:r},e),a=(0,k.default)(n,(function(t){var n=t.affects_template;return(0,f.default)(n,e.field_template)}));if(!(0,p.default)(a)){var i=(0,b.default)(a);(0,d.default)(o,"depends_on")?o.depends_on=(0,S.default)([].concat(z(o.depends_on),z(i))):o.depends_on=i}t.push(o)})),this._backgroundFields={},!(0,p.default)(t)){var r=(0,w.default)(t,["priority"]);(0,s.default)(r,(function(t){e._backgroundFields[t.name]=t}))}return this._backgroundFields}},{key:"_getActiveTab",value:function(){var e=this,t=(0,u.default)((0,b.default)(this._getTabsNotEmpty()),(function(t){return!e._isTabDisabled(t)&&t===e.state.activeTab}));return t||this.defaultTab}},{key:"_getTabs",value:function(){var e=this;return(0,p.default)(this._tabs)?(this._tabs={},(0,s.default)(ETBuilderBackend.backgroundTabs,(function(t){e._tabs[t]=(0,k.default)(e._getFields(),(function(e){return e.background_tab===t}))})),this._tabs):this._tabs}},{key:"_getTabsNotEmpty",value:function(){return(0,k.default)(this._getTabs(),(function(e){return!(0,p.default)(e)}))}},{key:"_getGradientPreviewStyle",value:function(e){var t=this,n={};return(0,s.default)(P.default.gradientFieldsMapping(),(function(r,o){var a=t._getAttrsByTemplate(r,e);(0,g.default)(a)||(n[o]=a)})),n}},{key:"_getImagePreviewStyle",value:function(e){var t=this,n={};(0,s.default)(["color","size","position","repeat","blend","parallax"],(function(r){var o=t._getAttrsByTemplate(r,e);if(!(0,g.default)(o))switch(r){case"parallax":n[r]=P.default.isOn(o);break;default:n[r]=o}}));var r=this._getAttrsByTemplate("use_color_gradient",e),o=this._getAttrsByTemplate("color_gradient_overlays_image",e);if(P.default.isOn(r)){var a=this._getGradientPreviewStyle(e);a&&(n.gradient=P.default.getGradient(a),n.gradientOverlaysImage=o)}return n}},{key:"_isTabDisabled",value:function(e){return!!(this.props.isColumnBackground&&"color"!==e&&x.default.isHoverMode()&&x.default.isHoverEnabled(this._getBackgroundBase(),this._getModuleAttrs()))}},{key:"_isTabFilled",value:function(e){var t=this;if(this._isTabDisabled(e))return!1;var n=(0,k.default)(this._getFields(),(function(t){return t.background_tab===e&&t.tab_filler}));return!(0,p.default)(n)&&(0,O.default)(n,(function(e){return"use_color_gradient"===e.field_template?P.default.isOn(t._getAttrs(e.name,!0)):P.default.hasValue(t._getAttrs(e.name,!0))}))}},{key:"_isFieldHidden",value:function(e){var t=this;return!!(0,f.default)(["color_gradient_start","color_gradient_end"],(0,c.default)(e,"field_template"))||!!(0,d.default)(e,"depends_on")&&(0,O.default)(e.depends_on,(function(n){var r=t._getField(n);if(!r)return!1;if((0,d.default)(r,"depends_on")&&t._isFieldHidden(r))return!0;var o=t._getAttrs(r.name,!0);return!(!(0,d.default)(e,"depends_show_if")||e.depends_show_if===o)||!(!(0,d.default)(e,"depends_show_if_not")||e.depends_show_if_not!==o)}))}},{key:"_normalizeField",value:function(e){var t=this,n=this.props,r=n.animate,o=n.module,a=n.moduleAttrs,i=$($({},e),{},{controlType:e.type,value:this._getAttrs(e.name,!0),default:this._getDefault(e.name),animate:r,module:o,moduleAttrs:a,_onChange:this._onChange});if("color"===i.field_template&&(i.disableCurrent=!1,i.hasPreview=!0,i.hasColorManager=!0,i.showPickerPalettes=!1,i.hidePickerOnPaletteSelect=!0,i.hidePaletteOnPickerActive=!1,i.addTitle=M.default.getI18n("controls.background.addColor"),H.default.isHoverMode()&&(i.name="".concat(i.name,"__hover"))),"use_color_gradient"===i.field_template){i.controlType="gradient",i.hasPreview=!0,i.addTitle=M.default.getI18n("controls.background.addGradient"),i._onChange=this._onChangeGradient,i._onMouseEnter=this._onMouseEnterFormGroupGradient,i._onMouseLeave=this._onMouseLeaveFormGroupGradient;var u=this._getAttrsByTemplate("use_color_gradient",!0);if(P.default.isOn(u)){var s=this._getGradientPreviewStyle(!0),c=(0,l.default)(["colorStart","colorEnd"],(function(e){var n=t._getFieldByTemplate(P.default.gradientFieldsMapping(e));return!n||t._getDefault(n.name)===s[e]}));i.value=s,i.hideResetButton=c}else i.value=""}return"image"===i.field_template&&(i.addTitle=M.default.getI18n("controls.background.addImage"),i.isBackgroundType=!0,i.imagePreviewAttrs=this._getImagePreviewStyle(!0)),(0,f.default)(["video_mp4","video_webm"],i.field_template)&&(i.addTitle=M.default.getI18n("controls.background.addVideo")),i}},{key:"_renderTabNavs",value:function(e){var t=this,n=this._getActiveTab(),r=(0,i.default)(["et-fb-settings-background-tab-navs","et-fb-settings-background-tab-navs-items--".concat((0,b.default)(e).length)]),a="et-fb-settings-background-tab-nav";return o.default.createElement("ul",{className:r},(0,b.default)(e).map((function(e){var r=["".concat(a,"--").concat(e),a];t._isTabDisabled(e)&&r.push("".concat(a,"--disabled"));var l=n===e,u=t._isTabFilled(e);l&&r.push("".concat(a,"--active"));var s=l||u?T.default.info:T.default.inactiveGrey;return o.default.createElement("li",{key:e},o.default.createElement("button",{className:(0,i.default)(r),name:e,"data-tab":e,onClick:t._onClickTabNav,onMouseEnter:t._onMouseEnterTabNav,onMouseLeave:t._onMouseLeaveTabNav},o.default.createElement(j.default,{icon:"background-".concat(e),color:s})))})))}},{key:"_renderTabs",value:function(e){var t=this,n=this._getActiveTab(),r="et-fb-settings-background-tab";return(0,_.default)(e,(function(e,a){if(n!==a)return!1;var l=[r,"".concat(r,"--").concat(a),"".concat(r,"--active")];return o.default.createElement("div",{key:a,className:(0,i.default)(l)},t._renderFields(e,a))}))}},{key:"_renderFields",value:function(e){var t=this;return(0,_.default)(e,(function(e){var n=e.name||"";if(!n)return!1;var r=t._normalizeField(e);if(!r)return!1;var a=r.controlType||"";if(!a||!(0,d.default)(ne,a))return!1;if(t._isFieldHidden(r))return!1;var l=["et-fb-settings-options","et-fb-option--".concat(r.type.replace("_","-"))];return(0,y.default)(r.depends_default)&&(0,y.default)(r.depends_show_if)&&(0,y.default)(r.depends_show_if_not)||l.push("et-fb-option--depends-on"),o.default.createElement(V.ETBuilderFormGroup,{key:"general-form-group-".concat(n),className:(0,i.default)(Y({},"et-fb-form__group--".concat(n),!0)),name:n,onMouseEnterGroup:t._onMouseEnterFormGroup,onMouseLeaveGroup:t._onMouseLeaveFormGroup,isGlobalOptionSynced:r.isGlobalOptionSynced,isSelectiveSyncAvailable:r.isSelectiveSyncAvailable,_unsyncGlobalSetting:r._unsyncGlobalSetting},t._renderFieldLabel(r,n),t._renderFieldDescription(r,n),o.default.createElement("div",{key:"et-fb-option-advanced_".concat(n),className:(0,i.default)(l)},o.default.createElement("div",{key:"et-fb-option-container-".concat(n),className:"et-fb-option-container"},t._renderControl(r,n))))}))}},{key:"_renderFieldLabel",value:function(e,t){if(!e.label||(0,f.default)(["color","use_color_gradient","image"],e.field_template))return!1;var n=P.default.hasValue(e.description),r=this.props.isResetActive(e),a=this.props.isHoveredGroup(e.name),i=n&&this.props.isDescriptionVisible(e.name),l=!!n&&this.props.onClickHelp;return o.default.createElement(V.ETBuilderFormLabel,{key:"general-form-label-".concat(t),name:e.name,hoveredGroup:a,isResetActive:r,activeHelp:i,onClickHelp:l,onClickReset:this.props.onClickReset,onToggleRightMenu:this.props.onToggleRightMenu},e.label)}},{key:"_renderFieldDescription",value:function(e,t){return!(!e.description||(0,f.default)(["color","use_color_gradient","image"],e.field_template))&&o.default.createElement(V.ETBuilderFormDescription,{key:"general-form-description-".concat(t),active:this.props.isDescriptionVisible(e.name)},e.description)}},{key:"_renderControl",value:function(e,t){var n=e.controlType||"";return!(!n||!(0,d.default)(ne,n))&&("image"===e.field_template?this._renderControlDynamic(e,t):o.default.createElement(ne[n],$({key:t},e)))}},{key:"_renderControlDynamic",value:function(e,t){var n=e.controlType||"";if(!n||!(0,d.default)(ne,n))return!1;var r=e.value||"",a=this._getFieldNameByMode(e.name),i=(0,W.getEnabledDynamicAttributes)(this._getModuleAttrs()),l=!x.default.isDesktopMode()&&!(0,h.default)(e.value,e.default);return(0,W.isDynamicContent)(r)&&!(0,f.default)(i,a)&&i.push(a),o.default.createElement(I.default,{key:t,type:"image",previewMode:"background",fieldName:a,fieldType:e.type,value:r,previewAttributes:e.imagePreviewAttrs,dynamicAttributes:i,showInheritButton:l,onChange:this._onChange,onReset:this._onResetDynamic,onInherit:this._onInheritDynamic},o.default.createElement(ne[n],$({key:t},e)))}},{key:"render",value:function(){var e=this._getTabsNotEmpty();return!(0,p.default)(e)&&o.default.createElement("div",null,this._renderTabNavs(e),o.default.createElement("div",{className:"et-fb-settings-background-tabs"},this._renderTabs(e)))}}])&&X(t.prototype,n),r&&X(t,r),D}(o.Component);re.propTypes={name:a.default.string,activeTab:a.default.string,toggle_slug:a.default.string,tab_slug:a.default.string,isColumnBackground:a.default.bool,readonly:a.default.bool,animate:a.default.bool,moduleAttrs:a.default.object,backgroundFields:a.default.object,background_fields:a.default.object,_onChange:a.default.func,onMouseEnterGroup:a.default.func,onMouseLeaveGroup:a.default.func,isResetActive:a.default.func,isHoveredGroup:a.default.func,isDescriptionVisible:a.default.func,onClickReset:a.default.func,onClickHelp:a.default.func,onToggleRightMenu:a.default.func};var oe=re;t.default=oe},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=k(n(37)),i=k(n(6)),l=k(n(157)),u=k(n(15)),s=k(n(1)),c=k(n(41)),d=k(n(91)),f=k(n(14)),p=k(n(35)),h=(k(n(140)),k(n(45))),m=k(n(976)),g=n(1472),v=k(n(58)),y=k(n(845)),b=k(n(1663)),_=n(962),w=k(n(3));function k(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1664);var j=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(k,t);var n,r,i,h=E(k);function k(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),x(P(n=h.call(this,t)),"setValue",(function(e,t){var r=(0,u.default)({},n.props.values,x({},e,t));n.props.onChange(r)})),x(P(n),"handleSave",(function(){n.props.onClose()})),x(P(n),"handleCancel",(function(){n.props.onChange(n.state.initialValues),n.props.onClose()})),x(P(n),"maybeClose",(function(t){var r=e(a.default.findDOMNode(P(n)));e(t.target).closest(r).length<1&&n.handleSave()})),n.state={initialValues:(0,u.default)({},n.props.values),positioning:null},n}return n=k,(r=[{key:"updatePositioning",value:function(){var t=e(a.default.findDOMNode(this)),n=t.find(".et-fb-field-settings-modal").first(),r=t.find(".et-fb-field-settings-modal__content").first(),o=parseInt(w.default.$topWindow("#wpadminbar").height())+30,i=w.default.condition("is_bfb")?30:100,l=(0,_.getViewportAdaptablePositioning)(w.default.$topWindow(),t,n,r.height()+40,o,i);(0,c.default)(this.state.positioning,l)||this.setState({positioning:l})}},{key:"componentDidMount",value:function(){w.default.topWindow().addEventListener("mousedown",this.maybeClose),w.default.appWindow().addEventListener("mousedown",this.maybeClose),e("body").first().addClass("et-fb-dynamic-content-settings-opened"),this.updatePositioning(),l.default.rebuild()}},{key:"componentWillUnmount",value:function(){w.default.topWindow().removeEventListener("mousedown",this.maybeClose),w.default.appWindow().removeEventListener("mousedown",this.maybeClose),e("body").first().removeClass("et-fb-dynamic-content-settings-opened")}},{key:"componentDidUpdate",value:function(){this.updatePositioning()}},{key:"render",value:function(){var e=this,t=new y.default(this.props.values);return o.default.createElement("div",{className:"et-fb-field-settings-modal-root"},o.default.createElement(m.default,{enabled:this.props.animation},(function(n){var r=e.state.positioning,a=n;return(0,d.default)(r)||(a.top=r.position.top,a.maxWidth=r.size.width,a.maxHeight=r.size.height),o.default.createElement("div",{className:"et-fb-field-settings-modal",style:a},o.default.createElement("div",{className:"et-fb-field-settings-modal__container"},o.default.createElement("div",{className:"et-fb-field-settings-modal__scroll et-fb-allow-mouse-wheel"},o.default.createElement("div",{className:"et-fb-field-settings-modal__content"},e.props.title&&o.default.createElement("h4",{className:"et-fb-field-settings-modal__title"},e.props.title),(0,p.default)(e.props.fields,(function(n,r){var a=(0,s.default)(n,"default","");return(0,f.default)(e.props.values[r])||(a=e.props.values[r]),o.default.createElement(b.default,{key:r,field:n,fieldName:r,value:a,propertyResolver:t,onChange:e.setValue,animation:e.props.animation})})))),o.default.createElement(g.ETCoreButtonGroup,{block:!0},o.default.createElement(g.ETCoreButton,{block:!0,danger:!0,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel,_onClick:e.handleCancel},o.default.createElement(v.default,{icon:"exit",color:"#FFFFFF"})),o.default.createElement(g.ETCoreButton,{block:!0,success:!0,tooltip:ETBuilderBackend.i18n.tooltip.modal.save,_onClick:e.handleSave},o.default.createElement(v.default,{icon:"check",color:"#FFFFFF"})))))})))}}])&&C(n.prototype,r),i&&C(n,i),k}(o.Component);j.propTypes={title:i.default.string,fields:i.default.object.isRequired,values:i.default.object.isRequired,onChange:i.default.func,onClose:i.default.func},j.defaultProps={animation:!0,onChange:h.default,onClose:h.default};var D=j;t.default=D}).call(this,n(5))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=c(n(6)),i=c(n(45)),l=n(846),u=c(n(845)),s=c(n(1456));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,r,a=g(i);function i(){return p(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=s.default.getControl(this.props.field.type);return(0,l.canShowField)(this.props.field,this.props.propertyResolver)?o.default.createElement("div",{className:"et-fb-field-settings-modal__field"},this.props.field.label&&o.default.createElement("p",{className:"et-fb-form__label"},this.props.field.label),o.default.createElement(e,f({name:this.props.fieldName,value:this.props.value,_onChange:this.props.onChange,processedKey:this.props.fieldName,content:this.props.value,animate:this.props.animation},this.props.field))):null}}])&&h(t.prototype,n),r&&h(t,r),i}(o.PureComponent);b.propTypes={field:a.default.object.isRequired,fieldName:a.default.string.isRequired,propertyResolver:a.default.instanceOf(u.default).isRequired,animation:a.default.bool,onChange:a.default.func},b.defaultProps={animation:!0,onChange:i.default};var _=b;t.default=_},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(0)),a=d(n(6)),i=d(n(9)),l=d(n(4)),u=d(n(45)),s=d(n(1666)),c=d(n(1503));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,r,a=m(u);function u(){return f(this,u),a.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=(0,i.default)(["upload","background"],this.props.fieldType),t=(0,l.default)(this.props.settingsFields)?null:o.default.createElement(c.default,{type:this.props.fieldType,icon:"setting",tooltip:ETBuilderBackend.i18n.dynamicContent.tooltips.settings,onClick:this.props.onSettings}),n=this.props.showDisableButton?o.default.createElement(c.default,{type:this.props.fieldType,parentClassName:this.props.showInheritButton?"et-fb-control-image-preview__button-remove":"",icon:"delete",tooltip:ETBuilderBackend.i18n.dynamicContent.tooltips.disable,onClick:this.props.onDisable}):null,r=this.props.showInheritButton?o.default.createElement(c.default,{type:this.props.fieldType,parentClassName:"et-fb-control-image-preview__button-reset",icon:"reset",tooltip:ETBuilderBackend.i18n.dynamicContent.tooltips.reset,onClick:this.props.onInherit}):null;return o.default.createElement("div",{className:"et-fb-settings-option-dynamic__preview"},e?o.default.createElement(s.default,{value:this.props.value,label:this.props.label,mode:this.props.mode,attributes:this.props.attributes,dynamicEnabled:this.props.dynamicEnabled},t,n,r):o.default.createElement("div",{className:"et-fb-settings-option-dynamic__preview--text"},t,o.default.createElement("div",{className:"et-fb-settings-option-dynamic__label"},this.props.label),n))}}])&&p(t.prototype,n),r&&p(t,r),u}(o.default.PureComponent);y.propTypes={fieldType:a.default.string.isRequired,value:a.default.string.isRequired,label:a.default.string.isRequired,mode:a.default.oneOf(["image","background"]),attributes:a.default.object,settingsFields:a.default.object.isRequired,dynamicEnabled:a.default.bool.isRequired,onSettings:a.default.func,onDisable:a.default.func,onInherit:a.default.func},y.defaultProps={mode:"image",attributes:{},onSettings:u.default,onDisable:u.default,onInherit:u.default};var b=y;t.default=b},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(0)),a=f(n(6)),i=f(n(18)),l=f(n(35)),u=f(n(1));n(1667);var s=f(n(1668)),c=f(n(1669)),d=f(n(1671));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(f,e);var t,n,r,a=m(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),b(v(t=a.call(this,e)),"handleMouseEnter",(function(){t.setState({isHovered:!0})})),b(v(t),"handleMouseMove",(function(){t.state.isHovered||t.setState({isHovered:!0})})),b(v(t),"handleMouseLeave",(function(){t.setState({isHovered:!1})})),t.state={isHovered:!1},t}return t=f,(n=[{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:(0,i.default)({"et-fb-control-image-preview":!0,"et-fb-control-image-preview--hovered":this.state.isHovered}),onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},"image"===this.props.mode?o.default.createElement(c.default,{value:this.props.value,dynamicEnabled:this.props.dynamicEnabled}):o.default.createElement(d.default,{value:this.props.value,attributes:this.props.attributes,dynamicEnabled:this.props.dynamicEnabled}),o.default.createElement("div",{className:"et-fb-control-image-preview__buttons"},(0,l.default)(this.props.children,(function(t,n){return o.default.createElement(s.default,{key:n,forward:e.state.isHovered},(function(e){return o.default.createElement("div",{className:"et-fb-control-image-preview__button ".concat((0,u.default)(t,"props.parentClassName","")),style:e},t)}))}))),this.props.label&&o.default.createElement("div",{className:"et-fb-control-image-preview__label"},this.props.label))}}])&&p(t.prototype,n),r&&p(t,r),f}(o.default.PureComponent);_.propTypes={value:a.default.string.isRequired,label:a.default.string,mode:a.default.oneOf(["image","background"]),attributes:a.default.object,dynamicEnabled:a.default.bool.isRequired},_.defaultProps={label:"",mode:"image",attributes:{}};var w=_;t.default=w},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),i=(o=n(6))&&o.__esModule?o:{default:o},l=n(89);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(){var e;s(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(h(e=o.call.apply(o,[this].concat(n))),"getStyle",(function(){return{opacity:e.props.forward?(0,l.spring)(1,{stiffness:300,damping:20}):(0,l.spring)(0,{stiffness:300,damping:20}),scale:e.props.forward?(0,l.spring)(1,{stiffness:300,damping:20}):(0,l.spring)(0,{stiffness:300,damping:20}),top:e.props.forward?(0,l.spring)(14,{stiffness:300,damping:20}):(0,l.spring)(-10,{stiffness:300,damping:20})}})),e}return t=i,(n=[{key:"render",value:function(){var e=this;return a.default.createElement(l.Motion,{style:this.getStyle()},(function(t){return e.props.children({opacity:t.opacity,transform:"scale(".concat(t.scale,")"),top:t.top})}))}}])&&c(t.prototype,n),r&&c(t,r),i}(a.Component);v.propTypes={children:i.default.func.isRequired,forward:i.default.bool},v.defaultProps={forward:!0};var y=v;t.default=y},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(0)),a=c(n(6)),i=c(n(4)),l=c(n(58)),u=n(66),s=n(75);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1670);var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,r,a=h(u);function u(){return d(this,u),a.apply(this,arguments)}return t=u,(n=[{key:"_renderPreview",value:function(){var e=this.props.dynamic.image;return e.loading?(0,s.renderLoading)("image"):(0,i.default)(e.value)?o.default.createElement(l.default,{icon:"none",color:"#6e7b8a"}):o.default.createElement("img",{src:e.value,alt:""})}},{key:"render",value:function(){return o.default.createElement("div",{className:"et-fb-control-image-preview__preview et-fb-control-image-preview__preview--image"},this._renderPreview())}}])&&f(t.prototype,n),r&&f(t,r),u}(o.default.PureComponent);v.propTypes={value:a.default.string.isRequired,dynamicEnabled:a.default.bool.isRequired};var y=(0,u.withDynamicContent)((function(e){return{image:{attribute:"image",type:"image",value:e.value}}}),(function(e){return{_dynamic_attributes:e.dynamicEnabled?"image":""}}))(v);t.default=y},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(0)),a=p(n(6)),i=p(n(15)),l=p(n(4)),u=p(n(14)),s=p(n(58)),c=p(n(3)),d=n(66),f=n(75);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(d,e);var t,n,r,a=v(d);function d(){var e;h(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(b(e=a.call.apply(a,[this].concat(n))),"getStyle",(function(e,t){var n={backgroundImage:"url(".concat(encodeURI(e),")")};return t.parallax?(0,i.default)(n,{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}):((0,u.default)(t.position)||(n.backgroundPosition=t.position.replace("_"," ")),(0,u.default)(t.color)||(n.backgroundColor=t.color),(0,u.default)(t.blend)||(n.backgroundBlendMode=t.blend),(0,u.default)(t.repeat)||(n.backgroundRepeat=t.repeat),(0,u.default)(t.size)||(n.backgroundSize=t.size),t.gradient&&(e&&(n.backgroundColor="initial"),c.default.isOn(t.gradientOverlaysImage)?n.backgroundImage="".concat(t.gradient,", ").concat(n.backgroundImage):n.backgroundImage="".concat(n.backgroundImage,", ").concat(t.gradient)),n)})),e}return t=d,(n=[{key:"render",value:function(){var e=this.props.dynamic.image;return e.loading?o.default.createElement("div",{className:"et-fb-control-image-preview__preview et-fb-control-image-preview__preview--background"},(0,f.renderLoading)("image")):(0,l.default)(e.value)?o.default.createElement("div",{className:"et-fb-control-image-preview__preview et-fb-control-image-preview__preview--background"},o.default.createElement(s.default,{icon:"none",color:"#FF0000"})):o.default.createElement("div",{className:"et-fb-control-image-preview__preview et-fb-control-image-preview__preview--background",style:this.getStyle(e.value,this.props.attributes)})}}])&&m(t.prototype,n),r&&m(t,r),d}(o.default.PureComponent);k.propTypes={value:a.default.string.isRequired,attributes:a.default.object,dynamicEnabled:a.default.bool.isRequired},k.defaultProps={attributes:{}};var O=(0,d.withDynamicContent)((function(e){return{image:{attribute:"image",type:"image",value:e.value}}}),(function(e){return{_dynamic_attributes:e.dynamicEnabled?"image":""}}))(k);t.default=O},function(e,t,n){},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=k(n(0)),a=k(n(37)),i=k(n(1674)),l=k(n(18)),u=k(n(14)),s=k(n(13)),c=(k(n(167)),k(n(41))),d=k(n(375)),f=k(n(448)),p=k(n(261)),h=k(n(12)),m=k(n(374));n(1677);var g=k(n(1)),v=k(n(58)),y=k(n(77)),b=k(n(3)),_=k(n(1474)),w=k(n(110));function k(e){return e&&e.__esModule?e:{default:e}}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){return function(e){if(Array.isArray(e))return D(e)}(e)||L(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return e}(e)||L(e)||j(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var R=function(e,t){return 0===(0,h.default)(e).length?t:e},N=function(e,t){if(""===e&&!t)return"";var n=x((0,p.default)(e,"|")),r=n[0],o=n.slice(1);return[r||"on"].concat(T(o))},A=function(e,t){return(0,d.default)((0,f.default)(N(e),N(t,!0),R),"|")},B=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(p,t);var n,r,d,f=S(p);function p(e){var t,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),t=f.call(this,e),n=M(t),r="_onCornerChange",o=(0,m.default)((function(e,n){var r=b.default.intentionallyCloneDeep(t._getValues());t._lastValue=n,r[e]=n,t.setState({inputValues:r}),t._onChange(e)})),r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o;var a=A(t.props.value,t._getDefaultValue());return t.state={inputValues:t._splitValue(a)},t._values=t._splitValue(a),t._lastValue="",t._onChange=t._onChange.bind(M(t)),t._onClickLink=t._onClickLink.bind(M(t)),t._onResize=t._onResize.bind(M(t)),t._onTopLeftChange=t._onCornerChange("top-left").bind(M(t)),t._onTopRightChange=t._onCornerChange("top-right").bind(M(t)),t._onBottomLeftChange=t._onCornerChange("bottom-left").bind(M(t)),t._onBottomRightChange=t._onCornerChange("bottom-right").bind(M(t)),t}return n=p,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=""!==e.value||!e.isResponsive&&!e.activeHover||(0,u.default)(e.default)?e.value:e.default,n=A(t,this._getDefaultValue());this._values=this._splitValue(n),this.setState({inputValues:this._splitValue(n)})}},{key:"shouldComponentUpdate",value:function(e,t){return A(e.value,this._getDefaultValue())!==this.props.value||!(0,c.default)(this.state.inputValues,t.inputValues)||!(!this.props.isResponsive||this.props.activeTabMode===e.activeTabMode)}},{key:"componentDidMount",value:function(){this._onResize(),this._onChange=this._onChange.bind(this)}},{key:"_onResize",value:function(){var t=e(a.default.findDOMNode(this.refs.radiusPreview)),n=t.innerHeight(),r=t.innerWidth(),o='"data:image/svg+xml,%3Csvg%20width%3D%27'.concat(r,"%27%20height%3D%27").concat(n,"%27%20viewBox%3D%270%200%20").concat(r,"%20").concat(n,"%27%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%3E%3Cline%20x1%3D%270%27%20y1%3D%270%27%20x2%3D%27").concat(r,"%27%20y2%3D%27").concat(n,"%27%20style%3D%27stroke%3A%23f1f5f9%3Bstroke-width%3A2%27%20/%3E%3Cline%20x1%3D%270%27%20y1%3D%27").concat(n,"%27%20x2%3D%27").concat(r,'%27%20y2%3D%270%27%20style%3D%27stroke%3A%23f1f5f9%3Bstroke-width%3A2%27%20/%3E%3C/svg%3E"');t.css("background","#FFFFFF url(".concat(o,")"))}},{key:"_isLinkedMode",value:function(){return this._getSettingValue("border-link")}},{key:"_onChange",value:function(e){var t,n=w.default.sanitizeInputUnit(this._lastValue),r=this._getDefaultSettingValue(e);(n===r||""===r&&"0px"===n)&&(n=""),this._isLinkedMode()?t=this._spreadValue(n):(t=this._getValues())[e]=n,this.props._onChange(this.props.name,this._combineValues(t)),this.setState({inputValues:t})}},{key:"_spreadValue",value:function(e){return{"border-link":!0,"top-left":e,"top-right":e,"bottom-right":e,"bottom-left":e}}},{key:"_onClickLink",value:function(){if(!this.props.readonly)if(this._getSettingValue("border-link")){var e=this._getValues();e["border-link"]=!1,this.props._onChange(this.props.name,this._combineValues(e))}else{""===this._lastValue&&(this._lastValue=this._getSettingValue("top-left"));var t=this._spreadValue(this._lastValue);this.props._onChange(this.props.name,this._combineValues(t)),this.setState({inputValues:t})}}},{key:"_combineValues",value:function(e){return"".concat(e["border-link"]?"on":"off","|").concat(e["top-left"],"|").concat(e["top-right"],"|").concat(e["bottom-right"],"|").concat(e["bottom-left"])}},{key:"_splitValue",value:function(e){var t=(0,s.default)(e)?e:e.split("|");return{"border-link":!!(0,u.default)(t[0])||b.default.isOn(t[0]),"top-left":(0,u.default)(t[1])||""===t[1]?"":t[1],"top-right":(0,u.default)(t[2])||""===t[2]?"":t[2],"bottom-right":(0,u.default)(t[3])||""===t[3]?"":t[3],"bottom-left":(0,u.default)(t[4])||""===t[4]?"":t[4]}}},{key:"_getDefaultValue",value:function(){return(0,u.default)(this.props.default)||""===this.props.default?"on||||":this.props.default}},{key:"_getDefaultSettingValue",value:function(e){return this._splitValue(this._getDefaultValue())[e]}},{key:"_getSettingPlaceholder",value:function(e){var t=this._getDefaultSettingValue(e);return""===t?"0px":t}},{key:"_getValues",value:function(){return this._values}},{key:"_getSettingValue",value:function(e){return this._getValues()[e]}},{key:"getInput",value:function(e){var t=(0,g.default)({"top-left":this._onTopLeftChange,"top-right":this._onTopRightChange,"bottom-right":this._onBottomRightChange,"bottom-left":this._onBottomLeftChange},e),n=this._getDefaultSettingValue(e)===this.state.inputValues[e]?"":this.state.inputValues[e];return o.default.createElement("div",{className:"et-fb-settings-border-radius-".concat(e)},o.default.createElement(_.default,{lassName:"et-fb-settings-option-input",value:n,onChange:t,defaultValue:this._getSettingPlaceholder(e),speed:.5,min:0,defaultUnit:"px",allowedUnits:this.props.allowed_units,readonly:this.props.readonly}))}},{key:"render",value:function(){var e={borderTopLeftRadius:this._getSettingValue("top-left"),borderTopRightRadius:this._getSettingValue("top-right"),borderBottomRightRadius:this._getSettingValue("bottom-right"),borderBottomLeftRadius:this._getSettingValue("bottom-left")},t=this._getSettingValue("border-link")?"#2b87da":"#bec9d6";return o.default.createElement("div",{className:"et-fb-settings-border-radius-wrap"},o.default.createElement("div",{className:"et-fb-settings-border-radius-wrap-column"},this.getInput("top-left"),this.getInput("bottom-left")),o.default.createElement("div",{className:"et-fb-settings-border-radius-wrap-column"},o.default.createElement("div",{className:"et-fb-settings-border-radius-preview",style:e,ref:"radiusPreview"},o.default.createElement(i.default,{handleWidth:!0,handleHeight:!0,onResize:this._onResize}),o.default.createElement("div",{className:"et-fb-settings-border-radius-wrap-link-button"},o.default.createElement(y.default,{buttonName:"ROUNDED_CORNERS_SYNC_VALUES",className:(0,l.default)({"et-fb-settings-border-radius-wrap-link-button-active":this._getSettingValue("border-link")}),tooltip:this.props.tooltip,stopPropagation:!0,ink:!1,_onClick:this._onClickLink},o.default.createElement(v.default,{icon:"border-link",color:t}))))),o.default.createElement("div",{className:"et-fb-settings-border-radius-wrap-column"},this.getInput("top-right"),this.getInput("bottom-right")))}}])&&O(n.prototype,r),d&&O(n,d),p}(o.default.Component);t.default=B}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1675),a=(r=o)&&r.__esModule?r:{default:r};t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=c(i),u=c(n(6)),s=n(1676);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={expandChildHeight:0,expandChildWidth:0,expandScrollLeft:0,expandScrollTop:0,shrinkScrollTop:0,shrinkScrollLeft:0,lastWidth:0,lastHeight:0},e.reset=e.reset.bind(e),e.handleScroll=e.handleScroll.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.containerSize(),t=o(e,2),n=t[0],r=t[1];this.reset(n,r),this.props.onResize(n,r)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(){this.expand.scrollLeft=this.expand.scrollWidth,this.expand.scrollTop=this.expand.scrollHeight,this.shrink.scrollLeft=this.shrink.scrollWidth,this.shrink.scrollTop=this.shrink.scrollHeight}},{key:"containerSize",value:function(){return[this.props.handleWidth&&this.container.parentElement.offsetWidth,this.props.handleHeight&&this.container.parentElement.offsetHeight]}},{key:"reset",value:function(e,t){if("undefined"!=typeof window){var n=this.container.parentElement,r="static";n.currentStyle?r=n.currentStyle.position:window.getComputedStyle&&(r=window.getComputedStyle(n).position),"static"===r&&(n.style.position="relative"),this.setState({expandChildHeight:this.expand.offsetHeight+10,expandChildWidth:this.expand.offsetWidth+10,lastWidth:e,lastHeight:t})}}},{key:"handleScroll",value:function(e){if("undefined"!=typeof window){e.preventDefault(),e.stopPropagation();var t=this.state,n=this.containerSize(),r=o(n,2),a=r[0],i=r[1];a===t.lastWidth&&i===t.lastHeight||this.props.onResize(a,i),this.reset(a,i)}}},{key:"render",value:function(){var e=this,t=this.state,n=r({},s.expandChildStyle,{width:t.expandChildWidth,height:t.expandChildHeight});return l.default.createElement("div",{style:s.parentStyle,ref:function(t){e.container=t}},l.default.createElement("div",{style:s.parentStyle,onScroll:this.handleScroll,ref:function(t){e.expand=t}},l.default.createElement("div",{style:n})),l.default.createElement("div",{style:s.parentStyle,onScroll:this.handleScroll,ref:function(t){e.shrink=t}},l.default.createElement("div",{style:s.shrinkChildStyle})))}}]),t}(i.Component);t.default=d,d.propTypes={handleWidth:u.default.bool,handleHeight:u.default.bool,onResize:u.default.func},d.defaultProps={handleWidth:!1,handleHeight:!1,onResize:function(e){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parentStyle={position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"hidden",zIndex:-1,visibility:"hidden"},t.shrinkChildStyle={position:"absolute",left:0,top:0,width:"200%",height:"200%"},t.expandChildStyle={position:"absolute",left:0,top:0,width:"100%",height:"100%"}},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(0)),a=p(n(6)),i=p(n(1)),l=p(n(94)),u=p(n(10)),s=p(n(257));n(1679);var c=p(n(1477)),d=p(n(3)),f=(p(n(22)),p(n(21)));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b={attr_suffix:a.default.string},_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,r,a=g(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).suffix=(0,i.default)(e,"attr_suffix",""),t}return t=c,(n=[{key:"_processProperty",value:function(e,t){return"width"===e?this._processWidth(t):t}},{key:"_processWidth",value:function(e){var t=parseInt(e);return t>50&&(t=50),d.default.processRangeValue(t)}},{key:"_renderTabPreviewArea",value:function(e){var t=this,n=["width","style","color"],r={};return(0,u.default)(["top","right","bottom","left"],(function(e){var o="";(0,u.default)(n,(function(n){var r="border_".concat(n,"_").concat(e).concat(t.suffix),a="border_".concat(n,"_all").concat(t.suffix),i=t.getDefault(a),l=d.default.get(t.getDefault(r),i),u=t._processProperty(n,t.getValue(a)),s=t._processProperty(n,d.default.get(t.getValue(r),d.default.get(u,l)));if(f.default.isMobile(t.props,!1)){var c=d.default.get(t.getValue(r),t.getDefault(r)),p=d.default.get(t.getValue(a),d.default.get(t.getDefault(a),t.getFieldDefault(a)));s=t._processProperty(n,d.default.get(c,p))}o+="".concat(s," ")})),(0,l.default)(r,"border".concat((0,s.default)(e)),o)})),o.default.createElement("div",{className:"et-fb-settings-border-styles-wrap"},o.default.createElement("div",{className:"et-fb-settings-border-styles-wrap-column"},o.default.createElement("div",{className:"et-fb-settings-border-styles-preview",style:r})))}}])&&h(t.prototype,n),r&&h(t,r),c}(c.default);_.propTypes=b;var w=_;t.default=w},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(0)),a=p(n(6)),i=p(n(23)),l=p(n(157)),u=p(n(18)),s=p(n(35)),c=p(n(4)),d=p(n(190));n(1506);var f=p(n(58));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _,w=(_=1,function(){return _++}),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(p,e);var t,n,r,a=g(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=a.call(this,e)).state={activeTab:e.activeTab},t.shouldComponentUpdate=i.default.shouldComponentUpdate.bind(y(t)),t._onClickTab=t._onClickTab.bind(y(t)),t._onMouseOverTab=t._onMouseOverTab.bind(y(t)),t._onMouseLeaveTab=t._onMouseLeaveTab.bind(y(t)),t}return t=p,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({activeTab:e.activeTab})}},{key:"_onClickTab",value:function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-index");if(!(0,d.default)(t)){var n=parseInt(t);this.setState({activeTab:n}),this.props._onTabChange&&this.props._onTabChange(n)}}},{key:"_onMouseOverTab",value:function(e){var t=e.currentTarget.getAttribute("data-index");if(!(0,d.default)(t)){var n=parseInt(t),r=this.props.children[n];if(!(0,d.default)(r)){var o=r.props;(0,o.handleTabHover)("enter",o.tabName,o.tooltip,o.label)}}}},{key:"_onMouseLeaveTab",value:function(e){var t=e.currentTarget.getAttribute("data-index");if(!(0,d.default)(t)){var n=parseInt(t),r=this.props.children[n];if(!(0,d.default)(r)){var o=r.props;(0,o.handleTabHover)("leave",o.tabName,o.tooltip,o.label)}}}},{key:"_renderTitles",value:function(){var e=this,t=w();return o.default.createElement("ul",{className:"et-fb-settings-tab-titles"},(0,s.default)(this.props.children,(function(n,r){return o.default.createElement("li",{key:r},o.default.createElement("button",{className:(0,u.default)({"et-fb-settings-tab-title":!0,"et-fb-settings-tab-title-active":e.state.activeTab===r,"et-fb-settings-tab-title-modified":n.props.isModified}),onClick:e._onClickTab,"data-tip":n.props.tooltip,"data-index":r,"data-for":"tab-tooltip-".concat(t,"-").concat(r),onMouseOver:e._onMouseOverTab,onMouseLeave:e._onMouseLeaveTab},n.props.label,o.default.createElement(f.default,{icon:n.props.icon,color:e.props["iconColor".concat((0,u.default)({Active:e.state.activeTab===r||n.props.isModified}))]}),(0,c.default)(n.props.tooltip)?null:o.default.createElement(l.default,{id:"tab-tooltip-".concat(t,"-").concat(r)})))})))}},{key:"_renderContent",value:function(){return o.default.createElement("div",{className:"et-fb-settings-tab-content"},this.props.children[this.state.activeTab])}},{key:"render",value:function(){return o.default.createElement("div",null,this._renderTitles(),this._renderContent())}}])&&h(t.prototype,n),r&&h(t,r),p}(o.default.Component);k.defaultProps={activeTab:0,iconColor:"#bec9d6",iconColorActive:"#2b87da",_onTabChange:!1},k.propTypes={activeTab:a.default.number,iconColor:a.default.string,iconColorActive:a.default.string,_onTabChange:a.default.oneOfType([a.default.bool,a.default.func]),children:a.default.oneOfType([a.default.array,a.default.element]).isRequired};var O=k;t.default=O},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(0)),a=l(n(6)),i=l(n(23));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,r,a=c(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).shouldComponentUpdate=i.default.shouldComponentUpdate.bind(f(t)),t}return t=l,(n=[{key:"render",value:function(){return o.default.createElement("div",null,this.props.children)}}])&&u(t.prototype,n),r&&u(t,r),l}(o.default.Component);h.defaultProps={icon:"",isModified:!1,tabName:""},h.propTypes={icon:a.default.string,tabName:a.default.string,isModified:a.default.bool,handleTabHover:a.default.func};var m=h;t.default=m},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=P(n(0)),a=P(n(18)),i=P(n(157)),l=P(n(1)),u=P(n(35)),s=P(n(9)),c=P(n(14)),d=P(n(17));n(1507),n(1506);var f=P(n(1508)),p=P(n(1477)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(22)),m=P(n(58)),g=P(n(973)),v=P(n(963)),y=P(n(370)),b=P(n(8)),_=(P(n(256)),P(n(27))),w=P(n(964)),k=P(n(3)),O=P(n(21)),C=P(n(48)),S=P(n(118)),E=P(n(974));function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function P(e){return e&&e.__esModule?e:{default:e}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){var t="";switch(e){case"hover":case"sticky":t="__".concat(e);break;case"phone":case"tablet":t="_".concat(e)}return t},A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(M,e);var t,n,r,p=j(M);function M(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M),t=p.call(this,e),n=L(t),r="state",o={transformTab:"scale",scaleLinked:t.getLinked("scale"),translateLinked:t.getLinked("translate"),skewLinked:t.getLinked("skew"),transformTabContextMenu:t.getContextMenu()},r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.isResetActive=t.isResetActive.bind(L(t)),t.onClickReset=t.onClickReset.bind(L(t)),t.isResponsiveEnabled=t.isResponsiveEnabled.bind(L(t)),t.onClickResponsive=t.onClickResponsive.bind(L(t)),t.onClickHover=t.onClickHover.bind(L(t)),t.onClickSticky=t.onClickSticky.bind(L(t)),t.onClickTransformTab=t.onClickTransformTab.bind(L(t)),t.onClickResponsiveTab=t.onClickResponsiveTab.bind(L(t)),t.setLinked=t.setLinked.bind(L(t)),t.onEnterGroup=t.onEnterGroup.bind(L(t)),t.onLeaveGroup=t.onLeaveGroup.bind(L(t)),t.onMouseOverTransformTab=t.onMouseOverTransformTab.bind(L(t)),t.onMouseLeaveTransformTab=t.onMouseLeaveTransformTab.bind(L(t)),t}return t=M,(n=[{key:"shouldComponentUpdate",value:function(e,t){return k.default.shouldComponentUpdate(this,e,t)}},{key:"setLinked",value:function(e,t){if((0,s.default)(["scale","translate","skew"],e)){var n={},r=(0,c.default)(t)?!(0,l.default)(this.state,"".concat(e,"Linked")):k.default.isOn(t),o=r?"on":"off",a=this.getSettingDefault("transform_".concat(e,"_linked"))===o;n["".concat(e,"Linked")]=r,this.setState(n),this.props._onChange("transform_".concat(e,"_linked").concat(this.getViewTabSuffix()),o,"skip",null,a)}}},{key:"getLinked",value:function(e){var t=(0,l.default)(this.getAttrs(),"transform_".concat(e,"_linked").concat(this.getViewTabSuffix()),"");return k.default.hasValue(t)||(t=this.getSettingDefault("transform_".concat(e,"_linked"))),k.default.isOn(t)}},{key:"getSettingDefault",value:function(e,t){var n,r=t||this.getActiveTabMode(),o=this.getSetting(e);switch(r){case"tablet":n="_tablet";break;case"phone":n="_phone";break;case"hover":n="__hover";break;case"sticky":n="__sticky";break;default:n=""}var a=(0,l.default)(o,"default".concat(n));if(!(0,c.default)(a))return a;var i=(0,l.default)(o,"default"),u=i,d=!1,f=!1,p=r;return this.getActiveTabMode()===r?(d=this.props.activeHover&&(0,h.isHoverMode)(),f=this.props.activeSticky&&C.default.isStickyMode(),(0,s.default)(["tablet","phone"],r)&&!this.isResponsiveEnabled()&&(p="desktop")):"hover"===r?d=!0:"sticky"===r&&(f=!0),(d||f||"tablet"===p||"phone"===p&&!1===(u=(0,l.default)(this.getAttrs(),"".concat(e,"_tablet"),!1)))&&(u=(0,l.default)(this.getAttrs(),e,u)),k.default.hasValue(u)||(u=i),u}},{key:"getViewTabSuffix",value:function(){return N(this.getActiveTabMode())}},{key:"getActiveTabMode",value:function(){return this.props.activeHover&&(0,h.isHoverMode)()?"hover":this.props.activeSticky&&C.default.isStickyMode()?"sticky":(0,s.default)(["tablet","phone"],this.props.activeTabMode)&&this.props.isResponsiveEnabled?this.props.activeTabMode:"desktop"}},{key:"getContextMenu",value:function(){var e=this.getSetting("transform_".concat(this.state.transformTab));return(0,l.default)(e,"context_menu",!0)}},{key:"isActiveViewTab",value:function(e){return this.getActiveTabMode()===e?"desktop"===e&&((0,h.isHoverMode)()||C.default.isStickyMode())?"":"active":this.isResponsiveTabModified(e)?"modified":""}},{key:"isResponsiveTabModified",value:function(e){var t=N(e),n=(0,l.default)(this.getAttrs(),"transform_".concat(this.state.transformTab).concat(t),"");return!!k.default.hasValue(n)&&this.getSettingDefault("transform_".concat(this.state.transformTab),e)!==n}},{key:"responsiveTabs",value:function(){var e=ETBuilderBackend.i18n.controls,t=["et-fb-settings-option-responsive-tab-nav","et-fb-settings-transform-responsive-tab-nav"];return this.props.activeHover&&t.push("et-fb-settings-option-responsive-tab-nav-hover-active"),o.default.createElement(y.default,null,o.default.createElement("ul",{className:t.join(" ")},o.default.createElement("li",{className:this.isActiveViewTab("desktop"),"data-tab":"desktop",onClick:this.onClickResponsiveTab},e.responsiveTabs.desktop),this.props.activeHover?o.default.createElement("li",{"data-tab":"hover",className:this.isActiveViewTab("hover"),onClick:this.onClickResponsiveTab},e.tabs.hover):null,o.default.createElement("li",{"data-tab":"tablet",className:this.isActiveViewTab("tablet"),onClick:this.onClickResponsiveTab},e.responsiveTabs.tablet),o.default.createElement("li",{"data-tab":"phone",className:this.isActiveViewTab("phone"),onClick:this.onClickResponsiveTab},e.responsiveTabs.phone)))}},{key:"onMouseOverTransformTab",value:function(e){var t=e.target.dataset,n=t.tab,r=t.transform_type,o=t.tip;if(n!==this.state.transformTab){var a={fieldName:"transform_".concat(n),fieldLabel:o,fieldType:r,toggleId:this.props.toggle_slug,toggleGroupId:this.props.tab_slug,fieldContextMenu:this.state.transformTabContextMenu};this.props.onMouseEnterGroup(a)}}},{key:"onMouseLeaveTransformTab",value:function(e){var t=this.getSetting("transform_".concat(this.state.transformTab));if(e.target.dataset.tab!==this.state.transformTab){var n={fieldName:"transform_".concat(this.state.transformTab),fieldLabel:(0,l.default)(t,"label"),fieldType:(0,l.default)(t,"type"),toggleId:this.props.toggle_slug,toggleGroupId:this.props.tab_slug,fieldContextMenu:this.state.transformTabContextMenu};this.props.onMouseEnterGroup(n)}}},{key:"transformTabs",value:function(){var e=this;return o.default.createElement("ul",{className:"et-fb-settings-tab-titles"},(0,u.default)(this.getTabs(),(function(t,n){var r=(0,l.default)(t.controls,"transform_".concat(n));return o.default.createElement("li",{key:"".concat(n,"-tab")},o.default.createElement("button",{className:(0,a.default)({"et-fb-settings-tab-title":!0,"et-fb-settings-tab-title-active":e.state.transformTab===n,"et-fb-settings-tab-title-modified":e.isResetActive(n)}),"data-tab":n,"data-transform_type":(0,l.default)(r,"type"),onClick:e.onClickTransformTab,onMouseOver:e.onMouseOverTransformTab,onMouseLeave:e.onMouseLeaveTransformTab,"data-tip":(0,l.default)(r,"label"),"data-index":t,"data-for":"transform-tab-tooltip-".concat(t)},o.default.createElement(m.default,{icon:t.icon,color:e.state.transformTab===n||e.isResetActive(n)?S.default.info:S.default.inactiveGrey}),o.default.createElement(i.default,{id:"transform-tab-tooltip-".concat(t)})))})))}},{key:"renderTransformField",value:function(){var e="transform_".concat(this.state.transformTab),t=this.getSettingDefault(e),n="".concat(e).concat(this.getViewTabSuffix()),r=(0,l.default)(this.getAttrs(),n,t),a=this.getSetting(e);return o.default.createElement(f.default,{key:"".concat(this.props.uniqueKey,"-").concat(n),name:n,transform_type:this.state.transformTab,default:t,default_unit:(0,l.default)(a,"default_unit"),range_settings:(0,l.default)(a,"range_settings"),value:r,uniqueKey:this.props.uniqueKey,_onChange:this.props._onChange,onClickLink:this.setLinked,scaleLinked:this.getLinked("scale"),skewLinked:this.getLinked("skew"),translateLinked:this.getLinked("translate"),readonly:k.default.hasValue(this.props.readonly),module:this.props.module.props.module})}},{key:"onClickTransformTab",value:function(e){e.preventDefault();var t=e.target.dataset.tab;this.setState({transformTab:t,transformTabContextMenu:this.getContextMenu()})}},{key:"onClickResponsiveTab",value:function(e){var t=e.target.dataset.tab,n=b.default.getActiveModule(),r="hover"===t,o="sticky"===t,a=r||o?"desktop":t,i=function(e){return"".concat(e?"on":"off","|").concat(e?t:"desktop")};_.default.toggleModuleHover(r),_.default.moduleSettingsChange(n,"hover_enabled",r?1:0),_.default.moduleSettingsChange(n,"sticky_enabled",o?1:0),"wireframe"!==b.default.getPreviewMode()&&_.default.switchResponsivePreviewMode(a,!1,!0),r||(this.props._onChange("".concat(this.props.name,"_last_edited"),i(this.isResponsiveEnabled())),this.props._onChange("transform_".concat(this.state.transformTab,"_last_edited"),i(this.isResponsiveEnabled())))}},{key:"isResponsiveEnabled",value:function(){return O.default.isResponsiveEnabled(this.getAttrs(),this.props.name)}},{key:"isHoverEnabled",value:function(){return h.default.isEnabled(this.props.name,this.getAttrs())}},{key:"isStickyEnabled",value:function(){return C.default.isEnabled(this.props.name,this.getAttrs())}},{key:"onClickResponsive",value:function(){this.props.onClickResponsive(this.props.name,(0,d.default)(this.getTabs()).map((function(e){return"transform_".concat(e)})))}},{key:"isResetActive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.transformTab,t="transform_".concat(e),n="".concat(t).concat(this.getViewTabSuffix()),r=this.getSettingDefault(t),o=(0,l.default)(this.getAttrs(),n,r),a="",i="";return(0,s.default)(["scale","translate","skew"],e)&&(a=this.getSettingDefault("".concat(t,"_linked")),i=(0,l.default)(this.getAttrs(),"".concat(t,"_linked").concat(this.getViewTabSuffix()),a)),k.default.hasValue(i)&&i!==a||o!==r&&k.default.hasValue(o)}},{key:"onClickReset",value:function(){var e="transform_".concat(this.state.transformTab);this.props._onChange("".concat(e).concat(this.getViewTabSuffix()),"","range",null,!0),(0,s.default)(["scale","translate","skew"],this.state.transformTab)&&this.setLinked(this.state.transformTab,this.getSettingDefault("".concat(e,"_linked")))}},{key:"onClickHover",value:function(){this.props.onClickHover(this.props.name,(0,d.default)(this.getTabs()).map((function(e){return"transform_".concat(e)})))}},{key:"onClickSticky",value:function(){this.props.onClickSticky(this.props.name,(0,d.default)(this.getTabs()).map((function(e){return"transform_".concat(e)})))}},{key:"buttonsVisible",value:function(){var e=this,t=!1;return(0,d.default)(this.getTabs()).forEach((function(n){t||(t=e.props.isHoveredGroup("transform_".concat(n)))})),t}},{key:"onEnterGroup",value:function(e){var t=this.getSetting(e),n={fieldName:e,fieldLabel:(0,l.default)(t,"label"),fieldType:(0,l.default)(t,"type"),toggleId:this.props.toggle_slug,toggleGroupId:this.props.tab_slug,fieldContextMenu:this.state.transformTabContextMenu};this.props.onMouseEnterGroup(n)}},{key:"onLeaveGroup",value:function(){var e={fieldName:this.props.name,fieldLabel:this.props.label,fieldType:this.props.type,toggleId:this.props.toggle_slug,toggleGroupId:this.props.tab_slug,fieldContextMenu:this.state.transformTabContextMenu};this.props.onMouseEnterGroup(e)}},{key:"render",value:function(){if(!this.props._isOptionMatchesFilter(this.props.label,"".concat(this.props.description," scale rotate translate skew origin"),this.props.label))return!1;var e=this.props,t=e.name,n=e.label,r=e.description,a=e.hasHoverOptions,i=e.hasStickyOptions,l=e.mobile_options,u=!(0,c.default)(r)&&""!==r,s=o.default.createElement(v.default,{name:t,key:"general-form-label-".concat(this.props.uniqueKey),onClickHelp:this.props.onClickHelp,activeHelp:this.props.isDescriptionVisible(t),hasHoverOptions:k.default.hasValue(a),activeHover:this.props.activeHover,onClickHover:this.onClickHover,hasStickyOptions:k.default.hasValue(i),activeSticky:this.props.activeSticky,onClickSticky:this.onClickSticky,hasResponsiveOptions:k.default.hasValue(l),isResponsiveEnabled:this.isResponsiveEnabled(),onClickResponsive:this.onClickResponsive,onClickReset:this.onClickReset,isResetActive:this.isResetActive(),hoveredGroup:this.buttonsVisible(),onToggleRightMenu:!!this.state.transformTabContextMenu&&this.props.onToggleRightMenu},n),d=u?o.default.createElement(w.default,{active:this.props.isDescriptionVisible(t),key:"general-form-description-".concat(this.props.uniqueKey)},r):"",f="transform_".concat(this.state.transformTab),p=this.isResponsiveEnabled()||this.isHoverEnabled()||this.isStickyEnabled()?o.default.createElement(y.default,null,o.default.createElement(E.default,{module:this.getModule(),moduleAttrs:this.getAttrs(),fieldName:t,subFields:[f],activeTabMode:this.props.activeTabMode,isGlobalPresetsMode:this.props.isGlobalPresetsMode,isResponsiveEnabled:this.isResponsiveEnabled(),isHoverEnabled:this.isHoverEnabled(),isStickyEnabled:this.isStickyEnabled(),isItemSelected:this.props.isItemSelected})):"";return o.default.createElement(g.default,{name:f,key:"advanced-form-group-".concat(this.props.uniqueKey),onMouseEnterGroup:this.onEnterGroup,onMouseLeaveGroup:this.onLeaveGroup,className:this.props.productTourClass,isSelectiveSyncAvailable:this.props.isSelectiveSyncAvailable(),isGlobalOptionSynced:this.props.isGlobalOptionSynced(f),_unsyncGlobalSetting:this.props._unsyncGlobalSetting},s,d,p,this.transformTabs(),this.renderTransformField())}}])&&T(t.prototype,n),r&&T(t,r),M}(p.default);t.default=A},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=D(n(0)),a=D(n(37)),i=D(n(23)),l=D(n(18)),u=D(n(1)),s=D(n(4)),c=D(n(95)),d=D(n(9)),f=D(n(15)),p=D(n(10)),h=D(n(126)),m=D(n(80)),g=D(n(181)),v=D(n(455)),y=D(n(17)),b=D(n(113)),_=D(n(53)),w=D(n(398)),k=D(n(449)),O=D(n(344)),C=D(n(141)),S=D(n(1460)),E=D(n(3)),M=D(n(77)),P=D(n(394)),T=D(n(29)),x=D(n(8)),j=D(n(27));function D(e){return e&&e.__esModule?e:{default:e}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1684);var W=function(e){return E.default.hasValue(e)&&!(0,d.default)(["none","0|none"],e)},V=function(e){return"add_new_account"===e},H=function(e){return"fetch_lists"===e},G=E.default.$topWindow("body"),U=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(F,t);var n,r,D,A=N(F);function F(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,F),I(B(t=A.call(this,e)),"force_clear_fields",!1),I(B(t),"getProviderName",(function(){return t.props.name.replace("_list","")})),I(B(t),"addNewAccountInProgress",(function(){return V(t.props.value)})),I(B(t),"removeAccountInProgress",(function(){return"remove_account"===t.props.value})),I(B(t),"fetchListsInProgress",(function(){return H(t.props.value)})),I(B(t),"canAddNewAccount",(function(){var e=(0,y.default)(t.props.options).length-2;return!t.props.max_accounts||e<t.props.max_accounts})),t.state={ajax_in_progress:!1,remove_account_ajax:!1},t.previous_selection="none",t.selected_account="",t.shouldComponentUpdate=i.default.shouldComponentUpdate.bind(B(t)),t._addNewAccount=t._addNewAccount.bind(B(t)),t._removeAccount=t._removeAccount.bind(B(t)),t._ajaxSendRequest=t._ajaxSendRequest.bind(B(t)),t._ajaxComplete=t._ajaxComplete.bind(B(t)),t._fetchLists=t._fetchLists.bind(B(t)),t.actionInProgress=t.actionInProgress.bind(B(t)),t.cancelAllActions=t.cancelAllActions.bind(B(t)),t.getProviderName=t.getProviderName.bind(B(t)),t.getSelectedAccount=t.getSelectedAccount.bind(B(t)),t._onChange=t._onChange.bind(B(t)),t._onClickAddNewAccountButton=t._onClickAddNewAccountButton.bind(B(t)),t._onClickFetchListsButton=t._onClickFetchListsButton.bind(B(t)),t._onClickRemoveAccountButton=t._onClickRemoveAccountButton.bind(B(t)),t._renderAddNewAccountButton=t._renderAddNewAccountButton.bind(B(t)),t._renderRemoveAccountButton=t._renderRemoveAccountButton.bind(B(t)),t._renderFetchListsButton=t._renderFetchListsButton.bind(B(t)),t}return n=F,(r=[{key:"UNSAFE_componentWillMount",value:function(){x.default.addModuleSettingsAddAccountCancelEventListener(this.cancelAllActions),x.default.addModuleSettingsAddAccountSubmitEventListener(this._addNewAccount)}},{key:"componentWillUnmount",value:function(){x.default.removeModuleSettingsAddAccountCancelEventListener(this.cancelAllActions),x.default.removeModuleSettingsAddAccountSubmitEventListener(this._addNewAccount),G.removeClass("et-fb--email-action-in-progress et-fb--email-ajax-in-progress")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){W(this.props.value)&&!W(e.value)&&this.setState({ajax_in_progress:!1,remove_account_ajax:!1})}},{key:"_openPopupAuth",value:function(e){var t=this,n=e.redirect_url,r=null!=window.screenLeft?window.screenLeft:window.screenX,o=null!=window.screenTop?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l={width:900,height:500};l.left=a/2-l.width/2+r,l.top=i/2-l.height/2+o;var u="toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0, width=".concat(l.width,",height=").concat(l.height,", left=").concat(l.left,",top=").concat(l.top),s=window.open(n,"ETAuthPopup",u),c=window.addEventListener?"addEventListener":"attachEvent",d=window[c],f="attachEvent"===c?"onmessage":"message",p=setInterval((function(){s.closed&&(clearInterval(p),t._ajaxComplete(e))}),1e3);window.focus&&s.focus(),d(f,(function(n){clearInterval(p),n.data.authenticated?t._addNewAccount():t._ajaxComplete(e),s.close()}),!1)}},{key:"_addNewAccount",value:function(){var e=this,t=(0,u.default)(this.props,"module.state.generalFields"),n=this.getProviderName(),r=(0,h.default)(t,(function(e,t){return(0,m.default)(t,n)}));if(!(0,c.default)(r,(function(e){return(0,s.default)(e)}))){var o=(0,v.default)(r,(function(t,n,r){(0,g.default)(r,"_list")||(t["et_".concat(r)]=(0,u.default)(e.props.moduleAttrs,r,""))}));o.action="et_builder_email_add_account",o.et_provider=n,o.et_builder_email_add_account_nonce=ETBuilderBackend.nonces.moduleEmailOptinAddAccount,"spam"===(0,u.default)(this,"props.toggle_slug")&&(o.is_spam_account=1),this._ajaxSendRequest(o)}}},{key:"_removeAccount",value:function(){var e=this.getProviderName(),t=this.selected_account,n={action:"et_builder_email_remove_account",et_builder_email_remove_account_nonce:ETBuilderBackend.nonces.moduleEmailOptinRemoveAccount,et_provider:e,et_account:t};"spam"===(0,u.default)(this,"props.toggle_slug")&&(n.is_spam_account=1),this._ajaxSendRequest(n,"remove_account_ajax")}},{key:"_ajaxSendRequest",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ajax_in_progress",o="et_builder_email_add_account"===t.action;this.setState(I({},r,!0)),e.ajax({type:"POST",url:ETBuilderBackend.ajaxUrl,dataType:"json",data:t}).done((function(e,t,r){o&&E.default.hasValue(e.redirect_url)?n._openPopupAuth(e):n._ajaxComplete(e)})).fail((function(){return n._ajaxComplete()}))}},{key:"_ajaxComplete",value:function(e){var t=this;if(e){var n=["et_pb_signup"];"spam"===(0,u.default)(this,"props.toggle_slug")&&n.push("et_pb_contact_form"),(0,p.default)(n,(function(n){var r=T.default.getComponentFieldsByType(n)[t.props.name];r.options=(0,f.default)({},e.accounts_list),j.default.updateComponentFieldDefinition(n,t.props.name,r),"et_pb_signup"!==n||(0,s.default)(e.predefined_custom_fields)||(ETBuilderBackend.emailPredefinedCustomFields=e.predefined_custom_fields),"et_pb_signup"!==n||(0,s.default)(e.custom_fields)||j.default.updateComponentFieldDefinitions("et_pb_signup_custom_field",e.custom_fields)}))}if(this.addNewAccountInProgress()&&this.state.ajax_in_progress){x.default.emitModuleSettingsAddAccountAjaxCompleteEvent();var r=(0,_.default)((0,w.default)((0,k.default)(e.accounts_list)));"spam"===(0,u.default)(this,"props.toggle_slug")?(r=(0,b.default)(r),r+="-0"):r=(0,b.default)((0,_.default)((0,k.default)((0,_.default)(r)))),this.previous_selection=r}else this.removeAccountInProgress()&&(this.previous_selection="");this.force_clear_fields=this.removeAccountInProgress(),this.cancelAllActions()}},{key:"_fetchLists",value:function(){var e=this.getProviderName(),t=this.getSelectedAccount(),n={action:"et_builder_email_get_lists",et_builder_email_fetch_lists_nonce:ETBuilderBackend.nonces.moduleEmailOptinFetchLists,et_provider:e,et_account:t};this._ajaxSendRequest(n)}},{key:"actionInProgress",value:function(){return this.addNewAccountInProgress()||this.fetchListsInProgress()||this.removeAccountInProgress()}},{key:"cancelAllActions",value:function(){(""===this.previous_selection||(0,d.default)(["add_new_account","fetch_lists","remove_account"],this.previous_selection))&&(this.previous_selection="none"),this.setState({ajax_in_progress:!1,remove_account_ajax:!1}),this.props._onChange(this.props.name,this.previous_selection)}},{key:"getSelectedAccount",value:function(){return e(a.default.findDOMNode(this)).find(":selected").parent().attr("label")}},{key:"setPreviousSelection",value:function(){this.previous_selection="".concat(this.getSelectedAccount(),"|").concat(this.props.value)}},{key:"_onChange",value:function(e,t,n){var r=(0,d.default)(["add_new_account","fetch_lists","remove_account"],t),o=this.actionInProgress()&&!r;this.props._onChange(e,t),o&&this.cancelAllActions(),!this.actionInProgress()&&r&&("add_new_account"===t?"aweber"===this.getProviderName()&&setTimeout((function(){E.default.topWindow().open("https://auth.aweber.com/1.0/oauth/authorize_app/b17f3351")}),500):"fetch_lists"===t&&this._fetchLists())}},{key:"_onClickAddNewAccountButton",value:function(){this.addNewAccountInProgress()||(this.setPreviousSelection(),this._onChange(this.props.name,"add_new_account"))}},{key:"_onClickFetchListsButton",value:function(){this.removeAccountInProgress()?this.cancelAllActions():this.actionInProgress()||(this.setPreviousSelection(),this._onChange(this.props.name,"fetch_lists"))}},{key:"_onClickRemoveAccountButton",value:function(){this.removeAccountInProgress()&&!this.state.remove_account_ajax?this._removeAccount():this.removeAccountInProgress()||(this.selected_account=this.getSelectedAccount(),this.setPreviousSelection(),this._onChange(this.props.name,"remove_account"))}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){var n=t.ajax_in_progress;V(e.value)||H(e.value)?G.addClass("et-fb--email-action-in-progress"):G.removeClass("et-fb--email-action-in-progress"),n?G.addClass("et-fb--email-ajax-in-progress"):G.removeClass("et-fb--email-ajax-in-progress")}},{key:"_renderAddNewAccountButton",value:function(e){var t=(0,u.default)(this.props,"after[0].text","");return this.addNewAccountInProgress()||this.removeAccountInProgress()||!this.canAddNewAccount()?"":o.default.createElement(P.default,{useWrapper:!1,isLoading:this.state.ajax_in_progress},o.default.createElement(M.default,{className:e,_onClick:this._onClickAddNewAccountButton,inverse:!0},t))}},{key:"_renderRemoveAccountButton",value:function(e){var t=this.removeAccountInProgress(),n=(0,u.default)(this.props,"after[1].attributes.data-confirm_text",""),r=(0,u.default)(this.props,"after[1].text","");return this.addNewAccountInProgress()||this.fetchListsInProgress()||!W(this.props.value)||"0"===this.props.value?"":o.default.createElement(P.default,{useWrapper:!1,isLoading:this.state.remove_account_ajax},o.default.createElement(M.default,{className:e,_onClick:this._onClickRemoveAccountButton,inverse:!0},t?n:r))}},{key:"_renderFetchListsButton",value:function(e){var t=(0,u.default)(this.props,"after[2].attributes['data-cancel_text']","");t||(t=(0,u.default)(this.props,"after[1].attributes['data-cancel_text']",""));var n=this.addNewAccountInProgress(),r=(0,u.default)(this.props,"after[2].text","");return n||!r&&!this.removeAccountInProgress()||this.state.ajax_in_progress||this.state.remove_account_ajax||!W(this.props.value)?"":o.default.createElement(P.default,{useWrapper:!1,isLoading:this.fetchListsInProgress()},o.default.createElement(M.default,{className:e,_onClick:this._onClickFetchListsButton,inverse:!0},this.removeAccountInProgress()?t:r))}},{key:"render",value:function(){var e,t=this.props.type.replace(/_/g,"-"),n=(0,l.default)({"et-fb-settings-button--additional-button":!0}),r=this.addNewAccountInProgress()&&this.state.ajax_in_progress,a=this.addNewAccountInProgress()||this.removeAccountInProgress(),i="spam"===(0,u.default)(this,"props.toggle_slug"),s="";a&&this.addNewAccountInProgress()?s=this.props.attributes["data-adding_new_account_text"]:a&&this.removeAccountInProgress()&&(s="".concat(this.props.attributes["data-confirm_remove_text"]," ").concat(this.selected_account));var c=(0,l.default)((I(e={},"et-fb-option--".concat(t),!0),I(e,"et-fb--email-add-new-in-progress-ajax",r),I(e,"et-fb--email-add-new-in-progress",this.addNewAccountInProgress()),I(e,"et-fb--email-fetch-lists-in-progress",this.fetchListsInProgress()),I(e,"et-fb--email-remove-in-progress",this.removeAccountInProgress()),I(e,"et-fb--spam",i),e)),d=this.props.value||this.props.default,f=!this.props.readonly,p=W(d),h=f&&!this.props.hideAddButton,m=p&&f&&!this.props.hideRemoveButton,g=p&&f&&!this.props.hideFetchButton,v=(0,C.default)(this.props.options,(function(e,t){return(0,O.default)(e,(function(e,n){return"manage"===t?n:"".concat(t,"|").concat(n)}))}));return o.default.createElement("div",{className:c},a?o.default.createElement("span",{className:"et-fb-form__description"},s):o.default.createElement(S.default,{name:this.props.name,value:this.props.value||this.props.default,className:(0,l.default)("et-fb-settings-option--with-after-element"),groups:!0,parseGroupValue:!1,options:v,module:this.props.module,readonly:this.props.readonly||!1,_onChange:this._onChange}),h&&this._renderAddNewAccountButton(n),m&&this._renderRemoveAccountButton(n),g&&this._renderFetchListsButton(n))}}])&&L(n.prototype,r),D&&L(n,D),F}(o.default.Component);t.default=U}).call(this,n(5))},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(0)),a=_(n(23)),i=_(n(18)),l=_(n(1)),u=_(n(14)),s=_(n(80)),c=_(n(181)),d=_(n(74)),f=_(n(17)),p=_(n(10)),h=(_(n(255)),_(n(5))),m=_(n(728)),g=_(n(77)),v=_(n(394)),y=_(n(8)),b=n(1509);function _(e){return e&&e.__esModule?e:{default:e}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1686);var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(C,e);var t,n,r,_=O(C);function C(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C),M(S(t=_.call(this,e)),"_apiFields",(function(){var e=t.props.name.split("_").shift(),n=(0,f.default)((0,b.getModule)(S(t)).props.attrs);return(0,d.default)(n,(function(t){return(0,s.default)(t,"".concat(e,"_"))&&!(0,c.default)(t,"_list")}))})),M(S(t),"onAddAccountAjaxComplete",(function(){t.setState({ajax_in_progress:!1}),t.props._onChange(t.props.name,"",void 0,void 0,!0),(0,p.default)(t._apiFields(),(function(e){t.props._onChange(e,"",void 0,void 0,!0)}))})),t.state={ajax_in_progress:!1},t.shouldComponentUpdate=a.default.shouldComponentUpdate.bind(S(t)),t._onClickCancelButton=t._onClickCancelButton.bind(S(t)),t._onClickSubmitButton=t._onClickSubmitButton.bind(S(t)),t}return t=C,(n=[{key:"UNSAFE_componentWillMount",value:function(){y.default.addModuleSettingsAddAccountAjaxCompleteEventListener(this.onAddAccountAjaxComplete)}},{key:"componentWillUnmount",value:function(){y.default.removeModuleSettingsAddAccountAjaxCompleteEventListener(this.onAddAccountAjaxComplete)}},{key:"_onClickCancelButton",value:function(){y.default.emitModuleSettingsAddAccountCancelEvent.call(y.default);var e=this.props.name.split("_").shift();(0,h.default)(this.node).closest(".et-fb-form__toggle-enabled").find('input[name^="'.concat(e,'"]')).css("border",""),this.state.ajax_in_progress&&this.setState({ajax_in_progress:!1})}},{key:"_onClickSubmitButton",value:function(){var e=this.props.name.split("_").shift(),t=(0,h.default)(this.node).closest(".et-fb-form__toggle-enabled").find('input[name^="'.concat(e,'"]')).filter((function(e,t){return""===(0,h.default)(t).val()&&""===(0,h.default)(t).attr("placeholder")&&!(0,h.default)(t).hasClass("et-fb-settings-option--not-required")}));if(t.length>0)return t.css("border","1px solid #EF5555"),void t.on("input",(function(){(0,h.default)(this).val()&&(0,h.default)(this).css("border","")||(0,h.default)(this).css("border","1px solid #EF5555")}));y.default.emitModuleSettingsAddAccountSubmitEvent.call(y.default),this.setState({ajax_in_progress:!0})}},{key:"render",value:function(){var e,t=this,n=this.props.type.replace(/_/g,"-"),r=(0,i.default)({"et-fb-settings-button--additional-button":!0}),a=(0,i.default)({"et-fb-settings-option--with-after-element":!0,"et-fb-settings-option--not-required":this.props.not_required}),s=(0,i.default)((M(e={},"et-fb-option--".concat(n),!0),M(e,"et-fb-option-group--last-field",!0),e));return o.default.createElement("div",{ref:function(e){return t.node=e},className:s},o.default.createElement(m.default,{name:this.props.name,value:(0,u.default)(this.props.value)?"":this.props.value,className:a,groups:!0,options:this.props.options,module:this.props.module,_onChange:this.props._onChange}),o.default.createElement(g.default,{className:(0,i.default)(r,"et-fb-button--cancel"),_onClick:this._onClickCancelButton,inverse:!0},(0,l.default)(this.props,"after[0].text","")),o.default.createElement(v.default,{useWrapper:!1,isLoading:this.state.ajax_in_progress},o.default.createElement(g.default,{className:r,_onClick:this._onClickSubmitButton,inverse:!0},(0,l.default)(this.props,"after[1].text",""))))}}])&&w(t.prototype,n),r&&w(t,r),C}(o.default.Component);t.default=P},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=u(n(371)),i=u(n(1));n(1688);var l=u(n(728));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(s,e);var t,n,r,u=m(s);function s(){return f(this,s),u.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=(0,o.createElement)(l.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props));return o.default.createElement(o.Fragment,null,e,o.default.createElement("div",{className:"et-fb-settings-unsupported-notice",dangerouslySetInnerHTML:{__html:(0,a.default)((0,i.default)(ETBuilderBackend,"i18n.vbSupport.unsupportedFieldType",""))}}))}}])&&p(t.prototype,n),r&&p(t,r),s}(o.PureComponent);t.default=y},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(0)),a=f(n(6)),i=f(n(9)),l=f(n(1)),u=f(n(45)),s=f(n(4));n(1690);var c=f(n(3)),d=f(n(118));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _="et-fb-settings-position",w=function(e){return(0,l.default)(e,"currentTarget.dataset.origin_type","top_left").split("_")},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,e);var t,n,r,a=m(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),b(v(t=a.call(this,e)),"state",{value:t.props.value||t.props.default}),b(v(t),"handleButtonOnClick",(function(e){if(!t.eventInitReadOnly(e)){var n=w(e),r=n.join("_");(0,s.default)(t.hRuler.current)||("center"===n[0]?t.hRuler.current.style.backgroundColor=d.default.selectPositionGray:t.hRuler.current.style.backgroundColor="transparent","center"===n[1]?t.vRuler.current.style.backgroundColor=d.default.selectPositionGray:t.vRuler.current.style.backgroundColor="transparent"),t.props._onChange(t.props.name,r),t.setState({value:r})}})),b(v(t),"handleButtonOnMouseEnter",(function(e){if(!t.eventInitReadOnly(e)){var n=w(e);"center"===n[0]&&(t.hRuler.current.style.backgroundColor=d.default.selectPositionGray),"center"===n[1]&&(t.vRuler.current.style.backgroundColor=d.default.selectPositionGray)}})),b(v(t),"handleButtonOnMouseLeave",(function(e){if(!t.eventInitReadOnly(e)){var n=w(e),r=t.state.value.split("_");"center"===n[0]&&"center"!==r[0]&&(t.hRuler.current.style.backgroundColor="transparent"),"center"===n[1]&&"center"!==r[1]&&(t.vRuler.current.style.backgroundColor="transparent")}})),t.position="absolute",(0,i.default)(e.name,"_f")?t.position="fixed":(0,i.default)(e.name,"_r")&&(t.position="relative"),t.hRuler=o.default.createRef(),t.vRuler=o.default.createRef(),t}return t=l,r=[{key:"getDerivedStateFromProps",value:function(e,t){return t.value!==e.value?{value:e.value||e.default}:null}}],(n=[{key:"shouldComponentUpdate",value:function(e,t){return c.default.shouldComponentUpdate(this,e,t)}},{key:"getButtonClass",value:function(e){return e===this.state.value?"".concat(_,"-button-active"):"".concat(_,"-button")}},{key:"eventInitReadOnly",value:function(e){return e.preventDefault(),e.stopPropagation(),this.props.readonly}},{key:"renderButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""!==e?o.default.createElement("div",{className:"".concat(this.getButtonClass(e)," ").concat(_,"-").concat(this.position),"data-origin_type":e,onMouseDown:this.handleButtonOnClick,onMouseEnter:this.handleButtonOnMouseEnter,onMouseLeave:this.handleButtonOnMouseLeave}):o.default.createElement("div",{className:"".concat(_,"-button-guide ").concat(_,"-").concat(this.position)})}},{key:"renderNineController",value:function(){var e=this.state.value.split("_"),t="transparent",n="transparent";return"center"===e[0]&&(t=d.default.selectPositionGray),"center"===e[1]&&(n=d.default.selectPositionGray),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"".concat(_,"-hr"),ref:this.hRuler,style:{backgroundColor:t}}),o.default.createElement("div",{className:"".concat(_,"-vr"),ref:this.vRuler,style:{backgroundColor:n}}),o.default.createElement("div",{className:"".concat(_,"-control-guide ").concat(_,"-").concat(this.position)},o.default.createElement("div",{className:"".concat(_,"-control-inner-top")},this.renderButton(),this.renderButton(),this.renderButton()),o.default.createElement("div",{className:"".concat(_,"-control-inner-mid")},this.renderButton(),this.renderButton(),this.renderButton()),o.default.createElement("div",{className:"".concat(_,"-control-inner-bottom")},this.renderButton(),this.renderButton(),this.renderButton())),o.default.createElement("div",{className:"".concat(_,"-control-frame ").concat(_,"-").concat(this.position)}),o.default.createElement("div",{className:"".concat(_,"-control-guide ").concat(_,"-").concat(this.position)},o.default.createElement("div",{className:"".concat(_,"-control-inner-top")},this.renderButton("top_left"),this.renderButton("top_center"),this.renderButton("top_right")),o.default.createElement("div",{className:"".concat(_,"-control-inner-mid")},this.renderButton("center_left"),this.renderButton("center_center"),this.renderButton("center_right")),o.default.createElement("div",{className:"".concat(_,"-control-inner-bottom")},this.renderButton("bottom_left"),this.renderButton("bottom_center"),this.renderButton("bottom_right"))))}},{key:"renderFourController",value:function(){return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"".concat(_,"-control-guide ").concat(_,"-").concat(this.position)},o.default.createElement("div",{className:"".concat(_,"-control-inner-top")},this.renderButton(),o.default.createElement("div",{className:"".concat(_,"-button-space")}),this.renderButton()),o.default.createElement("div",{className:"".concat(_,"-control-inner-bottom")},this.renderButton(),o.default.createElement("div",{className:"".concat(_,"-button-space")}),this.renderButton())),o.default.createElement("div",{className:"".concat(_,"-control-frame ").concat(_,"-").concat(this.position)}),o.default.createElement("div",{className:"".concat(_,"-control-guide ").concat(_,"-").concat(this.position)},o.default.createElement("div",{className:"".concat(_,"-control-inner-top")},this.renderButton("top_left"),o.default.createElement("div",{className:"".concat(_,"-button-space")}),this.renderButton("top_right")),o.default.createElement("div",{className:"".concat(_,"-control-inner-bottom")},this.renderButton("bottom_left"),o.default.createElement("div",{className:"".concat(_,"-button-space")}),this.renderButton("bottom_right"))))}},{key:"render",value:function(){return o.default.createElement("div",{id:"".concat(_,"-container"),className:"".concat(_,"-container")},"relative"===this.position?this.renderFourController():this.renderNineController())}}])&&p(t.prototype,n),r&&p(t,r),l}(o.default.Component);b(k,"propTypes",{default:a.default.string,name:a.default.string.isRequired,value:a.default.string,_onChange:u.default,readonly:a.default.bool}),b(k,"defaultProps",{default:"top_left",name:"position_origin_r",value:"top_left",_onChange:u.default,readonly:!1});var O=k;t.default=O},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ETBuilderControlAlign=void 0;var r=l(n(0)),o=l(n(168)),a=n(1510),i=n(1509);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){return(0,o.default)(e,(function(e,t,n){return s(s({},e),{},c({},n,(0,i.getAlignIconName)(n)))}),{})};t.ETBuilderControlAlign=function(e){var t=e.name,n=e.value,o=e.options,i=e._onChange;return r.default.createElement(a.ETBuilderControlIconPicker,{_onChange:i,options:d(o),name:t,value:n,size:12})}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=p(n(6)),i=p(n(1)),l=p(n(10));n(1464);var u=p(n(29)),s=p(n(1694)),c=p(n(8)),d=p(n(27)),f=["name"];function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(p,e);var t,n,r,a=b(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),O(w(t=a.call(this,e)),"setOptions",(function(e){d.default.setWoocommerceCheckboxOptions(e)})),O(w(t),"getArguments",(function(e,t){var n={};return n[e]=t,n.action="et_builder_get_woocommerce_tabs",n.nonce=ETBuilderBackend.nonces.getWoocommerceTabs,n})),O(w(t),"getProp",(function(e,t){return(0,i.default)(e,"moduleAttrs.".concat(t),null)}));var n=u.default.getCurrentPage("woocommerceTabs",{});return["current","latest"].includes(t.getProp(t.props,"product",null))||(n={}),t.state={options:n},t.currentProductOptions={},t.computedDependsOn=[],t.updateStateOptions=t.updateStateOptions.bind(w(t)),t.getArguments=t.getArguments.bind(w(t)),t}return t=p,(n=[{key:"componentDidMount",value:function(){var e=this.state.options;this.computedDependsOn=(0,i.default)(this.props,"computed_depends_on",[]),this.currentProductOptions=e,this.setOptions(this.currentProductOptions),c.default.addWoocommerceCheckboxOptionsUpdatedListener(this.updateStateOptions)}},{key:"componentDidUpdate",value:function(e){var t=this;(0,l.default)(this.computedDependsOn,(function(n){var r=t.getProp(t.props,n);r!==t.getProp(e,n)&&"current"===r&&(t.setOptions(t.currentProductOptions),c.default.addWoocommerceCheckboxOptionsUpdatedListener(t.updateStateOptions))}))}},{key:"componentWillUnMount",value:function(){c.default.removeWoocommerceCheckboxOptionsUpdatedListener(this.updateStateOptions)}},{key:"updateStateOptions",value:function(){var e=c.default.getWooCommerceCheckboxOptions();this.setState({options:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=g(t,f);return o.default.createElement(s.default,m({},r,{name:n,options:this.state.options,computedDependsOn:this.computedDependsOn,arguments:this.getArguments,setOptions:function(t){return e.setOptions(t)},skipRequest:"current"===this.getProp(this.props,"product",null)}))}}])&&v(t.prototype,n),r&&v(t,r),p}(o.Component);C.propTypes={moduleAttrs:a.default.object.isRequired},C.defaultProps={};var S=C;t.default=S},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=h(n(6)),i=h(n(1)),l=h(n(4)),u=h(n(10)),s=h(n(450)),c=h(n(126)),d=h(n(15));n(1464);var f=h(n(1494)),p=(h(n(29)),h(n(1481)),["name"]);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(m,t);var n,r,a,h=_(m);function m(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),C(k(n=h.call(this,t)),"getProp",(function(e,t){return(0,i.default)(e,"moduleAttrs.".concat(t),null)})),C(k(n),"memoizeSerializer",(function(e){var t={};return t=1===e.length?e[0]:e,t=(0,d.default)({},(0,c.default)(t,(function(e,t){return"nonce"!==t}))),JSON.stringify(t)})),C(k(n),"sendRequest",(function(e,t){n.setState({loading:!0});var r=n.props.arguments(e,t);(0,s.default)(n.request,{strategy:s.default.strategies.variadic,serializer:n.memoizeSerializer})(r).done((function(e){var t=e.data||{},r={};(0,u.default)(t,(function(e){r[e.name]={value:e.name,label:e.title}})),n.props.setOptions(r),n.setState({loading:!1})}))})),C(k(n),"request",(function(t){return e.ajax({dataType:"json",type:"POST",url:ETBuilderBackend.ajaxUrl,data:t}).promise()})),n.state={options:n.props.options,loading:!1},n}return n=m,(r=[{key:"componentDidMount",value:function(){var e=this.props.options;(0,l.default)(e)&&this.sendRequest("product",this.getProp(this.props,"product",null))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.skipRequest||(0,u.default)(this.props.computedDependsOn,(function(n){var r=t.getProp(t.props,n);r!==t.getProp(e,n)&&t.sendRequest(n,r)}))}},{key:"render",value:function(){var e=this.props,t=e.name,n=v(e,p);return o.default.createElement(f.default,g({},n,{name:t,options:this.props.options,loading:this.state.loading}))}}])&&y(n.prototype,r),a&&y(n,a),m}(o.Component);S.propTypes={moduleAttrs:a.default.object.isRequired,options:a.default.object.isRequired,computedDependsOn:a.default.array.isRequired,arguments:a.default.func.isRequired,setOptions:a.default.func.isRequired,skipRequest:a.default.bool},S.defaultProps={skipRequest:!1};var E=S;t.default=E}).call(this,n(5))},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(0)),a=y(n(6)),i=y(n(180)),l=_(n(238)),u=_(n(542)),s=n(90),c=y(n(1696)),d=y(n(1698)),f=y(n(1700)),p=y(n(1702)),h=y(n(1707)),m=_(n(1457)),g=_(n(1511)),v=n(1478);function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1709);var x=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(y,t);var n,r,a,l=S(y);function y(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),T(M(n=l.call(this,t)),"rangeWidth",0),T(M(n),"calculateValue",(function(e){return function(t){return function(r){return function(o){var a=(0,s.getPercent)(o,n.getRangeWidth()),i=e(r),l=(0,s.roundOff)(i,i+n.normalize(a));return t(l,r)}}}})),T(M(n),"onRangeChange",(function(e){return function(t){return function(r){var o=n.calculateValue(e)(t)(n.getRangeValue())(r);n.updateValue(o)}}})),T(M(n),"onSingleChange",(function(e){var t=n.getResolver(),r=e<0,o=r?t.getStartMiddle:t.getEndMiddle,a=r?t.setStartMiddle:t.setEndMiddle,i=r?t.setEndMiddle:t.setStartMiddle,l=n.calculateValue(o)(a)(n.getRangeValue())(e),u=i(o(l),l);n.updateValue(u)})),T(M(n),"updateValue",(function(e){n.setState({value:e}),n.props._onChange(n.props.name,e)})),T(M(n),"_onChange",(0,i.default)((function(){var e;return(e=n.props)._onChange.apply(e,arguments)}),100)),T(M(n),"getResolver",(function(){return u.get(n.props.resolver)})),T(M(n),"getValue",(function(){return n.getResolver().merge(n.props.value,n.props.default)})),T(M(n),"getRangeValue",(function(){return n.state.dragging?n.state.value:n.getValue()})),T(M(n),"getRangeWidth",(function(){return n.rangeWidth||(n.rangeWidth=parseInt(e(n.rangeRef.current).width())||0)})),T(M(n),"normalize",(function(e){return n.normalizer(e)})),T(M(n),"onDragStart",(function(){n.rangeWidth=0,n.setState({dragging:!0,value:n.getValue()})})),T(M(n),"onDragEnd",(function(){n.setState({dragging:!1})})),T(M(n),"onClick",(function(){var e=n.getResolver(),t=n.getValue(),r=e.getStartMiddle(t),o=e.getEndMiddle(t);if(r===o){var a=e.setStartMiddle(r-g.splitDistance,t),i=e.setEndMiddle(o+g.splitDistance,a);n.updateValue(i)}})),n.rangeRef=o.default.createRef(),n.normalizer=(new s.Normalizer)(1),n.state={dragging:!1,value:n.getValue()},n}return n=y,a=[{key:"getDerivedStateFromProps",value:function(e,t){if(t.dragging)return t;var n=u.get(e.resolver).merge(e.value,e.default);return n!==t.value?k(k({},t),{},{value:n}):null}}],(r=[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this.getResolver(),t=this.getRangeValue(),n=e.getStartLimit(t),r=e.getStartMiddle(t),a=e.getEndMiddle(t),i=e.getEndLimit(t),l=this.state.dragging?m.dragging:"",u=(0,v.isSingle)(t)?m.isSingleMiddle:"";return o.default.createElement("div",{className:"".concat(m.className," ").concat(l," ").concat(u)},o.default.createElement(c.default,{title:this.props.i10n.startTitle}),o.default.createElement("div",{className:m.rangeWrapper,ref:this.rangeRef},o.default.createElement(p.default,{value:t,width:this.getRangeWidth()}),o.default.createElement("div",{className:m.range},o.default.createElement(f.default,{className:m.trackLv1}),o.default.createElement(f.default,{className:m.trackLv2,offset:n,width:i-n}),o.default.createElement(f.default,{className:m.trackLv3,offset:r,width:a-r}),o.default.createElement(d.default,{className:m.startLimit,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onChange:this.onRangeChange(e.getStartLimit)(e.setStartLimit),style:{left:"".concat(n,"%")}}),o.default.createElement(d.default,{className:"".concat(m.startMiddle," ").concat((0,v.getMinBoundClass)(t)),onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onClick:this.onClick,onChange:this.onRangeChange(e.getStartMiddle)(e.setStartMiddle),style:{left:"".concat(r,"%")}}),o.default.createElement(d.default,{className:m.singleMiddle,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onChange:this.onSingleChange,style:{left:"".concat(r,"%")}}),o.default.createElement(d.default,{className:"".concat(m.endMiddle," ").concat((0,v.getMaxBoundClass)(t)),onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onClick:this.onClick,onChange:this.onRangeChange(e.getEndMiddle)(e.setEndMiddle),style:{left:"".concat(a,"%")}}),o.default.createElement(d.default,{className:m.endLimit,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onChange:this.onRangeChange(e.getEndLimit)(e.setEndLimit),style:{left:"".concat(i,"%")}})),o.default.createElement(h.default,{value:this.getValue(),defaultValue:this.props.default,onChange:this.updateValue,width:this.getRangeWidth(),resolver:this.getResolver(),i10n:this.props.i10n})),o.default.createElement(c.default,{title:this.props.i10n.endTitle}))}}])&&O(n.prototype,r),a&&O(n,a),y}(o.Component);x.propTypes={_onChange:a.default.func.isRequired,name:a.default.string.isRequired,value:a.default.string,default:a.default.string,resolver:a.default.string,i10n:a.default.shape({startTitle:a.default.string,endTitle:a.default.string,startValueTitle:a.default.string,middleValueTitle:a.default.string,endValueTitle:a.default.string})},x.defaultProps={value:"",default:l.getDefaultValue(),i10n:{startTitle:"",endTitle:"",startValueTitle:"",middleValueTitle:"",endValueTitle:""}};var j=x;t.default=j}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(0)),o=l(n(6)),a=l(n(18)),i=n(1457);function l(e){return e&&e.__esModule?e:{default:e}}n(1697);var u=function(e){var t=e.className,n=e.title;return n&&r.default.createElement("div",{className:(0,a.default)(t,i.rangeLabel)},n)};u.propTypes={className:o.default.string,title:o.default.string},u.defaultProps={className:"",title:""};var s=u;t.default=s},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(0)),o=s(n(6)),a=s(n(18)),i=s(n(850)),l=n(1457);n(1699);var u=["onChange","className"];function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var f=function(e){var t=e.onChange,n=e.className,o=d(e,u);return r.default.createElement(i.default,c({className:(0,a.default)(l.handler,n),onDragX:t},o))};f.propTypes={onChange:o.default.func.isRequired,className:o.default.string},f.defaultProps={className:""};var p=f;t.default=p},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(0)),o=l(n(6)),a=l(n(18)),i=n(1457);function l(e){return e&&e.__esModule?e:{default:e}}n(1701);var u=function(e){var t=e.offset,n=e.width,o=e.className;return r.default.createElement("div",{className:(0,a.default)(i.track,o),style:{left:"".concat(t,"%"),width:"".concat(n,"%")}})};u.propTypes={className:o.default.string,offset:o.default.number,width:o.default.number},u.defaultProps={className:"",offset:0,width:100};var s=u;t.default=s},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=u(n(6)),a=u(n(1703)),i=n(1457),l=n(1478);function u(e){return e&&e.__esModule?e:{default:e}}n(1706);var s=function(e){var t=e.value,n=e.width;return r.default.createElement("ul",{className:i.counters},(0,l.getCounters)(t,n).map((function(e,t){return r.default.createElement(a.default,{key:t,values:e})})))};s.propTypes={value:o.default.string.isRequired,width:o.default.number.isRequired};var c=s;t.default=c},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=f(n(6)),i=f(n(18)),l=f(n(113)),u=f(n(53)),s=n(120),c=n(90),d=n(1457);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}n(1704);var h=function(e){var t=e.values,n=t.filter(s.hasValue),r=n.map((function(e){return"".concat(e,"%")})).join(" "),a=n.length>1?d.counterMulti:"",f=Math.round((0,c.average)([(0,l.default)(t),(0,u.default)(t)]));return o.default.createElement("span",{className:(0,i.default)(d.counter,a),style:{left:"".concat(f,"%")}},r)};h.propTypes={values:a.default.arrayOf(a.default.number)},h.defaultProps={values:[]};var m=h;t.default=m},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=t.intersperse=void 0;var r=i(n(343)),o=i(n(53)),a=i(n(511));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.intersperse=function(e,t){if(!Array.isArray(t)||0===t.length||1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t[r]),n.push(e);return n.pop(),n};t.groupBy=function(e,t){return Array.isArray(t)&&0!==t.length?1===t.length?[t]:(0,r.default)(t).reduce((function(t,n){var r=(0,a.default)(t),i=(0,o.default)(t),u=(0,o.default)(i);return e(u,n)?[].concat(l(r),[[].concat(l(i),[n])]):[].concat(l(r),[i,[n]])}),[[t[0]]]):t}},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(0)),a=f(n(6)),i=f(n(18)),l=n(90),u=f(n(1474)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(1457)),c=n(1478);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1708);var h=function(e){var t=e.value,n=e.defaultValue,r=e.onChange,a=e.width,d=e.resolver,f=e.i10n,h=function(e){return function(n){return r(e(n,t))}},m=[o.default.createElement("div",{key:0,className:s.inputStart},o.default.createElement(u.default,{value:(0,c.emptyOnDefault)(d.getStartValue,n,t),defaultValue:d.getStartValue(n),onChange:h(d.setStartValue),label:f.startValueTitle,step:d.getInputStep(),speed:d.getInputSpeed()})),o.default.createElement("div",{key:1,className:s.inputMiddle},o.default.createElement(u.default,{value:(0,c.emptyOnDefault)(d.getMiddleValue,n,t),defaultValue:d.getMiddleValue(n),onChange:h(d.setMiddleValue),label:f.middleValueTitle,step:d.getInputStep(),speed:d.getInputSpeed()})),o.default.createElement("div",{key:2,className:s.inputEnd},o.default.createElement(u.default,{value:(0,c.emptyOnDefault)(d.getEndValue,n,t),defaultValue:d.getEndValue(n),onChange:h(d.setEndValue),label:f.endValueTitle,step:d.getInputStep(),speed:d.getInputSpeed()}))],g=0,v=(0,c.getInputs)(t,a).map((function(e,t){var n,r=(0,i.default)((p(n={},s.input,!0),p(n,s.inputs,e.length>1),n));return o.default.createElement("div",{key:t,className:r,style:{left:"".concat((0,l.average)(e),"%")}},e.map((function(){return m[g++]})))}));return o.default.createElement("div",{className:s.inputsList},v)};h.propTypes={onChange:a.default.func.isRequired,value:a.default.string,defaultValue:a.default.string,width:a.default.number.isRequired,resolver:a.default.shape({getStartValue:a.default.func.isRequired,setStartValue:a.default.func.isRequired,getMiddleValue:a.default.func.isRequired,setMiddleValue:a.default.func.isRequired,getEndValue:a.default.func.isRequired,setEndValue:a.default.func.isRequired}).isRequired,i10n:a.default.shape({startValueTitle:a.default.string,middleValueTitle:a.default.string,endValueTitle:a.default.string})},h.defaultProps={value:"",defaultValue:"",i10n:{startValueTitle:"",middleValueTitle:"",endValueTitle:""}};var m=h;t.default=m},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(n(0)),i=f(n(6)),l=f(n(4)),u=f(n(14)),s=f(n(1)),c=f(n(371));n(1711);var d=f(n(964));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,t);var n,o,i,d=g(f);function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),d.call(this,e)}return n=f,(o=[{key:"_openLinkInNewTab",value:function(t){var n=t.target.href;(0,u.default)(n)||(t.preventDefault(),e.topWindow().open(n,"_blank").focus())}},{key:"componentDidMount",value:function(){this.$creditsContainer=r(this.creditsContainer),this.$creditsContainer.on("click","a",this._openLinkInNewTab)}},{key:"componentWillUnmount",value:function(){this.$creditsContainer.off("click","a",this._openLinkInNewTab)}},{key:"render",value:function(){var e=this,t=this.props,n=t.moduleTitle,r=t.moduleType,o=(0,s.default)(ETBuilderBackend,"customModuleCredits.".concat(r),!1),i=(0,s.default)(ETBuilderBackend,"customModuleCredits.".concat(r,".author"),"");if(!o||(0,l.default)(i))return!1;var u=(0,l.default)(o.module_uri)?n:'<a href="'.concat(o.module_uri,'">').concat(n,"</a>"),d=(0,l.default)(o.author_uri)?i:'<a href="'.concat(o.author_uri,'">').concat(i,"</a>");return a.default.createElement("div",{className:"et-fb-settings-modal-module-credits",dangerouslySetInnerHTML:{__html:(0,c.default)("".concat(u," by ").concat(d))},ref:function(t){return e.creditsContainer=t}})}}])&&h(n.prototype,o),i&&h(n,i),f}(a.PureComponent),_={moduleTitle:i.default.string,moduleType:i.default.string};d.default.propTypes=_;var w=b;t.default=w}).call(this,n(3),n(5))},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=b(n(0)),a=b(n(157)),i=b(n(6)),l=b(n(45)),u=b(n(18));n(1713);var s=b(n(8)),c=b(n(29)),d=b(n(1714)),f=n(1512),p=b(n(27)),h=b(n(1732)),m=b(n(849)),g=b(n(1734)),v=b(n(58)),y=b(n(118));function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=ETBuilderBackend.i18n.modals.globalPresets.presets,P=ETBuilderBackend.i18n.tooltip.modal.globalPresets,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,n,r,i=k(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),E(C(t=i.call(this,e)),"onPresetSelect",(function(e){var t=e.key;a.default.hide(),p.default.modulePresetChange(t)})),E(C(t),"onPresetButtonClick",(function(){a.default.hide(),t.dropdownRef.current.close()})),E(C(t),"onPresetSettingsChange",(function(){t.forceUpdate()})),t.dropdownRef=o.default.createRef(),t.dropdownAnchorRef=o.default.createRef(),t}return t=l,(n=[{key:"module",get:function(){return this.props.module}},{key:"presetsList",get:function(){return c.default.getModulePresetsList(this.module)}},{key:"moduleTitle",get:function(){return(0,m.default)(this.module)}},{key:"currentPreset",get:function(){return this.presetsList.length<2?"default":s.default.getCurrentModulePresetId(this.module,!1)}},{key:"componentDidMount",value:function(){s.default.addGlobalPresetsSettingsChangeListener(this.onPresetSettingsChange)}},{key:"componentWillUnmount",value:function(){s.default.removeGlobalPresetsSettingsChangeListener(this.onPresetSettingsChange)}},{key:"renderDefaultPreset",value:function(){var e=this.presetsList.find((function(e){return e.isDefault}));return o.default.createElement(o.default.Fragment,null,o.default.createElement(f.ETCoreMenuItem,{key:"default",value:"default",className:"et-core-control-menu__item__preset--default-only"},o.default.createElement("div",{className:"et-fb-modal__module-settings__default-preset-wrapper"},o.default.createElement(h.default,{id:"default",title:"".concat(this.moduleTitle," ").concat(M.defaultPreset),onButtonClick:this.onPresetButtonClick}),o.default.createElement("div",{className:"et-fb-modal__module-settings__default-based-on-name"},o.default.createElement(v.default,{icon:"star",color:y.default.button,style:{marginRight:0}}),o.default.createElement("span",null,"".concat(M.basedOn,": ").concat(e.name))))),o.default.createElement(f.ETCoreMenuDivider,null))}},{key:"renderPresetsList",value:function(){var e=this;return this.presetsList.sort((function(e,t){return e.created-t.created})).map((function(t){var n=t.id,r=t.name,a=(0,u.default)("et-core-control-menu__item__preset",{"et-core-control-menu__item__preset--default":t.isDefault}),i=n===e.currentPreset?P.disablePreset:P.activatePreset;return o.default.createElement(f.ETCoreMenuItem,{key:n,value:n,className:a,tooltip:i},o.default.createElement(h.default,{id:n,title:r,isDefault:t.isDefault,isSelected:n===e.currentPreset,onButtonClick:e.onPresetButtonClick}))}))}},{key:"renderSinglePresetOnly",value:function(){var e=(0,u.default)("et-core-control-menu__item__preset","et-core-control-menu__item__preset--default-only");return o.default.createElement(f.ETCoreMenuItem,{key:"default",value:"default",className:e},o.default.createElement(h.default,{id:"default",title:"".concat(this.moduleTitle," ").concat(M.defaultPreset),onButtonClick:this.onPresetButtonClick}))}},{key:"renderMenu",value:function(){var e=this.presetsList;return o.default.createElement(f.ETCoreMenu,{selectedKey:this.currentPreset},1===e.length&&this.renderSinglePresetOnly(),e.length>1&&this.renderDefaultPreset(),e.length>1&&this.renderPresetsList())}},{key:"render",value:function(){var e=this.props,t=e.module,n=e.onMouseEnter,r=e.onMouseLeave,a=c.default.getModulePreset(this.module,this.currentPreset).name,i=s.default.getGlobalPresetsState().presetsDropdownVisible,l=1===c.default.getModulePresetsCount(this.module)?M.default:a||M.default,u="".concat(M.preset,": ").concat(l);return o.default.createElement(o.default.Fragment,null,o.default.createElement(d.default,{anchor:this.dropdownAnchorRef,menu:this.renderMenu(),module:t,open:i,onMouseEnter:n,onMouseLeave:r,onSelect:this.onPresetSelect,ref:this.dropdownRef},u),o.default.createElement(g.default,{anchor:this.dropdownAnchorRef,onMouseEnter:n,onMouseLeave:r}))}}])&&_(t.prototype,n),r&&_(t,r),l}(o.default.PureComponent);E(T,"propTypes",{module:i.default.shape({props:i.default.shape({type:i.default.string.isRequired}).isRequired}).isRequired,onMouseEnter:i.default.func,onMouseLeave:i.default.func}),E(T,"defaultProps",{onMouseEnter:l.default,onMouseLeave:l.default});var x=T;t.default=x},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(0)),a=m(n(6)),i=m(n(157)),l=m(n(45));n(1715);var u=m(n(27)),s=n(1512),c=n(962),d=m(n(1728)),f=m(n(1730)),p=n(509),h=m(n(760));function m(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=ETBuilderBackend.i18n.tooltip.modal.globalPresets,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,e);var t,n,r,a=b(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),O(w(t=a.call(this,e)),"handleVisibilityChange",(function(e){i.default.rebuild(),e?(u.default.openPresetsDropdown(),(0,c.disableGlobalPageScroll)("et-fb-modal__module-settings__header-dropdown--visible")):(u.default.closePresetsDropdown(),(0,c.enableGlobalPageScroll)("et-fb-modal__module-settings__header-dropdown--visible"))})),O(w(t),"onPresetButtonClick",(function(){t.dropdownRef.current.close()})),O(w(t),"renderCustomMenu",(function(){var e=t.props,n=e.menu,r=e.onMouseEnter,a=e.onMouseLeave;return o.default.cloneElement(n,{customRender:t.renderCustomMenuItems,onMouseEnter:r,onMouseLeave:a})})),O(w(t),"renderCustomMenuItems",(function(e){return o.default.createElement("div",null,e,o.default.createElement(d.default,null),o.default.createElement(f.default,{module:t.props.module,onButtonClick:t.onPresetButtonClick}))})),t.dropdownRef=o.default.createRef(),t.anchorRef=o.default.createRef(),t}return t=l,(n=[{key:"componentDidUpdate",value:function(e){e.open!==this.props.open&&(!0===this.props.open?(0,c.disableGlobalPageScroll)("et-fb-modal__module-settings__header-dropdown--visible"):(0,c.enableGlobalPageScroll)("et-fb-modal__module-settings__header-dropdown--visible"))}},{key:"componentWillUnmount",value:function(){(0,c.enableGlobalPageScroll)("et-fb-modal__module-settings__header-dropdown--visible")}},{key:"getRootDocument",value:function(){return(0,c.getBody)()[0]}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.forwardedRef,r=e.onSelect,a=e.anchor,i=e.open,l=this.renderCustomMenu(),u=(0,p.composeRef)(n,this.dropdownRef);return o.default.createElement("div",{className:"et-fb-modal__module-settings__header-dropdown"},o.default.createElement(s.ETCoreDropdown,{animation:"popup",closeOnClick:!0,getDocument:this.getRootDocument,menu:l,onVisibleChange:this.handleVisibilityChange,offsetV:h.default.modal.headerDropdownVOffset,onSelect:r,open:i,ref:u,trigger:"click"},o.default.createElement("div",{ref:a,"data-tip":C.selectPreset},o.default.createElement("div",{className:"et-fb-modal__module-settings__header-dropdown__overflow-container"},o.default.createElement("span",null,t),o.default.createElement("span",null)))))}}])&&v(t.prototype,n),r&&v(t,r),l}(o.default.PureComponent);O(S,"propTypes",{anchor:a.default.shape({current:p.validateRefType}),module:a.default.shape({props:a.default.shape({type:a.default.string.isRequired}).isRequired}).isRequired,menu:a.default.element.isRequired,open:a.default.bool,onSelect:a.default.func,onMouseEnter:a.default.func,onMouseLeave:a.default.func}),O(S,"defaultProps",{onSelect:l.default,onMouseEnter:l.default,onMouseLeave:l.default});var E=o.default.forwardRef((function(e,t){return o.default.createElement(S,g({},e,{forwardedRef:t}))}));t.default=E},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(0)),a=c(n(6)),i=c(n(45)),l=c(n(18)),u=n(1513),s=n(509);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1721);var _="click",w="hover",k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,n,r,a=m(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),b(v(t=a.call(this,e)),"handleTriggerClick",(function(e){var n=t.props,r=n.trigger,o=n.onClick,a=n.open,i=n.closeOnClick;if(_===r)if(i){var l=void 0!==a?a:t.state.isVisible;t.setVisible(!l)}else t.setVisible(!0);o(e)})),b(v(t),"handleMouseEnter",(function(e){var n=t.props,r=n.trigger,o=n.onMouseEnter;w===r&&t.setVisible(!0),o(e)})),b(v(t),"handleMouseLeave",(function(e){var n=t.props,r=n.trigger,o=n.onMouseLeave;w===r&&t.setVisible(!1),o(e)})),b(v(t),"onSelect",(function(e){var n=t.props.onSelect;t.setVisible(!1),n(e)})),b(v(t),"close",(function(){t.setVisible(!1)})),t.triggerRef=o.default.createRef(),t.state={isVisible:!1},t}return t=i,(n=[{key:"visible",get:function(){var e=this.props.open;return void 0!==e?e:this.state.isVisible}},{key:"setVisible",value:function(e){var t=this.props,n=t.open,r=t.onVisibleChange;void 0===n&&this.setState({isVisible:e}),r(e)}},{key:"renderMenu",value:function(){if(!this.visible)return null;var e=this.props,t=e.menu,n=e.animation,r=e.offsetV,a=e.getDocument,i=this.triggerRef.current?this.triggerRef.current.offsetWidth:0,l=o.default.Children.only(t),s=o.default.cloneElement(l,{style:f(f({},l.props.style),{},{width:l.props.style&&l.props.style.width?l.props.style.width:i}),onSelect:this.onSelect});return o.default.createElement(u.ETCorePopup,{anchor:this.triggerRef,animation:n,getDocument:a,visible:this.visible,offsetV:r,onClose:this.close},s)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.disabled,r=o.default.Children.only(t),a=o.default.cloneElement(r,{className:(0,l.default)(r.props.className,"et-core-control-dropdown"),onClick:this.handleTriggerClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:(0,s.composeRef)(r.ref,this.triggerRef),disabled:n}),i=this.renderMenu();return o.default.createElement(o.default.Fragment,null,a,i)}}])&&p(t.prototype,n),r&&p(t,r),i}(o.default.PureComponent);b(k,"propTypes",{animation:a.default.oneOf([u.ANIMATION_FOLD,u.ANIMATION_POPUP]),closeOnClick:a.default.bool,disabled:a.default.bool,getDocument:a.default.func,menu:a.default.element,offsetH:a.default.number,offsetV:a.default.number,onClick:a.default.func,onMouseEnter:a.default.func,onMouseLeave:a.default.func,onVisibleChange:a.default.func,onSelect:a.default.func,open:a.default.bool,trigger:a.default.oneOf([_,w])}),b(k,"defaultProps",{animation:u.ANIMATION_FOLD,closeOnClick:!1,disabled:!1,getDocument:function(){return window.document},menu:!1,offsetH:0,offsetV:0,onClick:i.default,onMouseEnter:i.default,onMouseLeave:i.default,onVisibleChange:i.default,trigger:_});var O=k;t.default=O},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l;n.r(t),n.d(t,"alignElement",(function(){return ne})),n.d(t,"alignPoint",(function(){return re}));var u={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function s(){if(void 0!==l)return l;l="";var e=document.createElement("p").style;for(var t in u)t+"Transform"in e&&(l=t);return l}function c(){return s()?"".concat(s(),"TransitionProperty"):"transitionProperty"}function d(){return s()?"".concat(s(),"Transform"):"transform"}function f(e,t){var n=c();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function p(e,t){var n=d();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var h,m=/matrix\((.*)\)/,g=/matrix3d\((.*)\)/;function v(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function y(e,t,n){var r=n;if("object"!==a(t))return void 0!==r?("number"==typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):h(e,t);for(var o in t)t.hasOwnProperty(o)&&y(e,o,t[o])}function b(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function _(e){return b(e)}function w(e){return b(e,!0)}function k(e){var t=function(e){var t,n,r,o=e.ownerDocument,a=o.body,i=o&&o.documentElement;return n=(t=e.getBoundingClientRect()).left,r=t.top,{left:n-=i.clientLeft||a.clientLeft||0,top:r-=i.clientTop||a.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=_(r),t.top+=w(r),t}function O(e){return null!=e&&e==e.window}function C(e){return O(e)?e.document:9===e.nodeType?e:e.ownerDocument}var S=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),E=/^(top|right|bottom|left)$/;function M(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function P(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function T(e,t,n){"static"===y(e,"position")&&(e.style.position="relative");var r=-999,o=-999,a=M("left",n),i=M("top",n),l=P(a),u=P(i);"left"!==a&&(r=999),"top"!==i&&(o=999);var s,d="",p=k(e);("left"in t||"top"in t)&&(d=(s=e).style.transitionProperty||s.style[c()]||"",f(e,"none")),"left"in t&&(e.style[l]="",e.style[a]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[i]="".concat(o,"px")),v(e);var h=k(e),m={};for(var g in t)if(t.hasOwnProperty(g)){var b=M(g,n),_="left"===g?r:o,w=p[g]-h[g];m[b]=b===g?_+w:_-w}y(e,m),v(e),("left"in t||"top"in t)&&f(e,d);var O={};for(var C in t)if(t.hasOwnProperty(C)){var S=M(C,n),E=t[C]-p[C];O[S]=C===S?m[S]+E:m[S]-E}y(e,O)}function x(e,t){var n=k(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(d());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(d());if(r&&"none"!==r){var o,a=r.match(m);a?((o=(a=a[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,o[5]=t.y,p(e,"matrix(".concat(o.join(","),")"))):((o=r.match(g)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,o[13]=t.y,p(e,"matrix3d(".concat(o.join(","),")")))}else p(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,o)}function j(e,t){for(var n=0;n<e.length;n++)t(e[n])}function D(e){return"border-box"===h(e,"boxSizing")}"undefined"!=typeof window&&(h=window.getComputedStyle?function(e,t,n){var r=n,o="",a=C(e);return(r=r||a.defaultView.getComputedStyle(e,null))&&(o=r.getPropertyValue(t)||r[t]),o}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(S.test(n)&&!E.test(t)){var r=e.style,o=r.left,a=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=o,e.runtimeStyle.left=a}return""===n?"auto":n});var L=["margin","border","padding"];function R(e,t,n){var r,o={},a=e.style;for(r in t)t.hasOwnProperty(r)&&(o[r]=a[r],a[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(a[r]=o[r])}function N(e,t,n){var r,o,a,i=0;for(o=0;o<t.length;o++)if(r=t[o])for(a=0;a<n.length;a++){var l=void 0;l="border"===r?"".concat(r).concat(n[a],"Width"):r+n[a],i+=parseFloat(h(e,l))||0}return i}var A={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function B(e,t,n){var r=n;if(O(e))return"width"===t?A.viewportWidth(e):A.viewportHeight(e);if(9===e.nodeType)return"width"===t?A.docWidth(e):A.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],a="width"===t?e.getBoundingClientRect().width:e.getBoundingClientRect().height,i=D(e),l=0;(null==a||a<=0)&&(a=void 0,(null==(l=h(e,t))||Number(l)<0)&&(l=e.style[t]||0),l=parseFloat(l)||0),void 0===r&&(r=i?1:-1);var u=void 0!==a||i,s=a||l;return-1===r?u?s-N(e,["border","padding"],o):l:u?1===r?s:s+(2===r?-N(e,["border"],o):N(e,["margin"],o)):l+N(e,L.slice(r),o)}j(["Width","Height"],(function(e){A["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],A["viewport".concat(e)](n))},A["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,o=r.body,a=r.documentElement[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}}));var F={position:"absolute",visibility:"hidden",display:"block"};function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t[0];return 0!==o.offsetWidth?r=B.apply(void 0,t):R(o,F,(function(){r=B.apply(void 0,t)})),r}function W(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}j(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);A["outer".concat(t)]=function(t,n){return t&&I(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];A[e]=function(t,r){var o=r;return void 0!==o?t?(D(t)&&(o+=N(t,["padding","border"],n)),y(t,e,o)):void 0:t&&I(t,e,-1)}}));var V={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:C,offset:function(e,t,n){if(void 0===t)return k(e);!function(e,t,n){if(n.ignoreShake){var r=k(e),o=r.left.toFixed(0),a=r.top.toFixed(0),i=t.left.toFixed(0),l=t.top.toFixed(0);if(o===i&&a===l)return}n.useCssRight||n.useCssBottom?T(e,t,n):n.useCssTransform&&d()in document.body.style?x(e,t):T(e,t,n)}(e,t,n||{})},isWindow:O,each:j,css:y,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:W,getWindowScrollLeft:function(e){return _(e)},getWindowScrollTop:function(e){return w(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)V.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};W(V,A);var H=V.getParent;function G(e){if(V.isWindow(e)||9===e.nodeType)return null;var t,n=V.getDocument(e).body,r=V.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:H(e);for(t=H(e);t&&t!==n&&9!==t.nodeType;t=H(t))if("static"!==(r=V.css(t,"position")))return t;return null}var U=V.getParent;function z(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=G(e),o=V.getDocument(e),a=o.defaultView||o.parentWindow,i=o.body,l=o.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===i||r===l||"visible"===V.css(r,"overflow")){if(r===i||r===l)break}else{var u=V.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=G(r)}var s=null;V.isWindow(e)||9===e.nodeType||(s=e.style.position,"absolute"===V.css(e,"position")&&(e.style.position="fixed"));var c=V.getWindowScrollLeft(a),d=V.getWindowScrollTop(a),f=V.viewportWidth(a),p=V.viewportHeight(a),h=l.scrollWidth,m=l.scrollHeight,g=window.getComputedStyle(i);if("hidden"===g.overflowX&&(h=a.innerWidth),"hidden"===g.overflowY&&(m=a.innerHeight),e.style&&(e.style.position=s),t||function(e){if(V.isWindow(e)||9===e.nodeType)return!1;var t=V.getDocument(e),n=t.body,r=null;for(r=U(e);r&&r!==n&&r!==t;r=U(r))if("fixed"===V.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,c),n.top=Math.max(n.top,d),n.right=Math.min(n.right,c+f),n.bottom=Math.min(n.bottom,d+p);else{var v=Math.max(h,c+f);n.right=Math.min(n.right,v);var y=Math.max(m,d+p);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function q(e){var t,n,r;if(V.isWindow(e)||9===e.nodeType){var o=V.getWindow(e);t={left:V.getWindowScrollLeft(o),top:V.getWindowScrollTop(o)},n=V.viewportWidth(o),r=V.viewportHeight(o)}else t=V.offset(e),n=V.outerWidth(e),r=V.outerHeight(e);return t.width=n,t.height=r,t}function K(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,a=e.height,i=e.left,l=e.top;return"c"===n?l+=a/2:"b"===n&&(l+=a),"c"===r?i+=o/2:"r"===r&&(i+=o),{left:i,top:l}}function $(e,t,n,r,o){var a=K(t,n[1]),i=K(e,n[0]),l=[i.left-a.left,i.top-a.top];return{left:Math.round(e.left-l[0]+r[0]-o[0]),top:Math.round(e.top-l[1]+r[1]-o[1])}}function Y(e,t,n){return e.left<n.left||e.left+t.width>n.right}function X(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function J(e,t,n){var r=[];return V.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function Q(e,t){return e[t]=-e[t],e}function Z(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function ee(e,t){e[0]=Z(e[0],t.width),e[1]=Z(e[1],t.height)}function te(e,t,n,r){var o=n.points,a=n.offset||[0,0],i=n.targetOffset||[0,0],l=n.overflow,u=n.source||e;a=[].concat(a),i=[].concat(i);var s={},c=0,d=z(u,!(!(l=l||{})||!l.alwaysByViewport)),f=q(u);ee(a,f),ee(i,t);var p=$(f,t,o,a,i),h=V.merge(f,p);if(d&&(l.adjustX||l.adjustY)&&r){if(l.adjustX&&Y(p,f,d)){var m=J(o,/[lr]/gi,{l:"r",r:"l"}),g=Q(a,0),v=Q(i,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})($(f,t,m,g,v),f,d)||(c=1,o=m,a=g,i=v)}if(l.adjustY&&X(p,f,d)){var y=J(o,/[tb]/gi,{t:"b",b:"t"}),b=Q(a,1),_=Q(i,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})($(f,t,y,b,_),f,d)||(c=1,o=y,a=b,i=_)}c&&(p=$(f,t,o,a,i),V.mix(h,p));var w=Y(p,f,d),k=X(p,f,d);if(w||k){var O=o;w&&(O=J(o,/[lr]/gi,{l:"r",r:"l"})),k&&(O=J(o,/[tb]/gi,{t:"b",b:"t"})),o=O,a=n.offset||[0,0],i=n.targetOffset||[0,0]}s.adjustX=l.adjustX&&w,s.adjustY=l.adjustY&&k,(s.adjustX||s.adjustY)&&(h=function(e,t,n,r){var o=V.clone(e),a={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+a.width>n.right&&(a.width-=o.left+a.width-n.right),r.adjustX&&o.left+a.width>n.right&&(o.left=Math.max(n.right-a.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+a.height>n.bottom&&(a.height-=o.top+a.height-n.bottom),r.adjustY&&o.top+a.height>n.bottom&&(o.top=Math.max(n.bottom-a.height,n.top)),V.mix(o,a)}(p,f,d,s))}return h.width!==f.width&&V.css(u,"width",V.width(u)+h.width-f.width),h.height!==f.height&&V.css(u,"height",V.height(u)+h.height-f.height),V.offset(u,{left:h.left,top:h.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:o,offset:a,targetOffset:i,overflow:s}}function ne(e,t,n){var r=n.target||t;return te(e,q(r),n,!function(e,t){var n=z(e,t),r=q(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport))}function re(e,t,n){var r,a,i=V.getDocument(e),l=i.defaultView||i.parentWindow,u=V.getWindowScrollLeft(l),s=V.getWindowScrollTop(l),c=V.viewportWidth(l),d=V.viewportHeight(l),f={left:r="pageX"in t?t.pageX:u+t.clientX,top:a="pageY"in t?t.pageY:s+t.clientY,width:0,height:0},p=r>=0&&r<=u+c&&a>=0&&a<=s+d,h=[n.points[0],"cc"];return te(e,f,o(o({},n),{},{points:h}),p)}ne.__getOffsetParent=G,ne.__getVisibleRectForElement=z,t.default=ne},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(0)),a=l(n(6)),i=n(89);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,n,r,a=p(l);function l(){return c(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.enabled,r=e.scale,a=o.default.Children.only(t);return o.default.createElement(i.Motion,{defaultStyle:{scale:r,opacity:0},style:{scale:n?(0,i.spring)(1,{stiffness:300,damping:20}):1,opacity:n?(0,i.spring)(1,{stiffness:300,damping:20}):1}},(function(e){return o.default.cloneElement(a,{style:s(s({},a.props.style),{},{opacity:e.opacity,transform:"scale( ".concat(e.scale," )")})})}))}}])&&d(t.prototype,n),r&&d(t,r),l}(o.default.PureComponent);g(v,"propTypes",{enabled:a.default.bool,scale:a.default.number,children:a.default.element.isRequired}),g(v,"defaultProps",{enabled:!0,scale:.5});var y=v;t.default=y},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(0)),a=l(n(6)),i=n(89);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,n,r,a=p(l);function l(){return c(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.enabled,r=e.scale,a=o.default.Children.only(t);return o.default.createElement(i.Motion,{defaultStyle:{scale:r,opacity:0},style:{scale:n?(0,i.spring)(1,{stiffness:300,damping:20}):1,opacity:n?(0,i.spring)(1,{stiffness:300,damping:20}):1}},(function(e){return o.default.cloneElement(a,{style:s(s({},a.props.style),{},{opacity:e.opacity,transform:"scaleY( ".concat(e.scale," )"),transformOrigin:"top"})})}))}}])&&d(t.prototype,n),r&&d(t,r),l}(o.default.PureComponent);g(v,"propTypes",{enabled:a.default.bool,scale:a.default.number,children:a.default.element.isRequired}),g(v,"defaultProps",{enabled:!0,scale:.6});var y=v;t.default=y},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(0)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(994)),i=s(n(6)),l=s(n(45));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1723);var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,n,r,i=p(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),v(m(t=i.call(this,e)),"handleMouseEnter",(function(){t.mouseEntered=!0,t.props.onMouseEnter()})),v(m(t),"handleMouseLeave",(function(){t.mouseEntered=!1,t.props.onMouseLeave()})),v(m(t),"renderMenuItem",(function(e){if(!e)return null;if(a.isFragment(e))return o.default.Children.map(e.props.children,t.renderMenuItem);var n=e.key,r=t.props,i=r.selectedKey,l=r.onSelect,u=n||t.currentIndex,s=u===i;return t.currentIndex++,o.default.cloneElement(e,{itemKey:u,isSelected:s,onSelect:l})})),t.mouseEntered=!1,t.currentIndex=0,t}return t=l,(n=[{key:"renderMenuItems",value:function(){var e=this.props,t=e.customRender,n=e.children;this.currentIndex=0;var r=o.default.createElement("ul",{className:"et-core-control-menu"},o.default.Children.map(n,this.renderMenuItem));return t?t(r):r}},{key:"render",value:function(){var e=this.props.forwardedRef;return o.default.createElement("div",{className:"et-core-control-menu__wrapper",style:this.props.style,ref:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.renderMenuItems())}}])&&d(t.prototype,n),r&&d(t,r),l}(o.default.PureComponent);v(y,"propTypes",{selectedKey:i.default.string,onMouseEnter:i.default.func,onMouseLeave:i.default.func,customRender:i.default.func}),v(y,"defaultProps",{onMouseEnter:l.default,onMouseLeave:l.default,customRender:l.default});var b=o.default.forwardRef((function(e,t){return o.default.createElement(y,c({},e,{forwardedRef:t}))}));t.default=b},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(0)),a=s(n(6)),i=s(n(18)),l=s(n(58)),u=s(n(1725));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,r,a=f(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),g(h(t=a.call(this,e)),"handleMouseEnter",(function(){t.setState({hovered:!0})})),g(h(t),"handleMouseLeave",(function(){t.setState({hovered:!1})})),g(h(t),"handleMouseDown",(function(e){if(1===e.nativeEvent.which){var n=t.props,r=n.onSelect,o=n.itemKey,a=n.value;r&&r({key:o,value:a})}})),t.state={hovered:!1},t}return t=s,(n=[{key:"render",value:function(){var e=this.state.hovered,t=this.props,n=t.isSelected,r=t.className,a=t.itemKey,s=t.tooltip,c=(0,i.default)({"et-core-control-menu__item":!0,"et-core-control-menu__item--hovered":e,"et-core-control-menu__item--selected":n},r),d=e?u.default.checkMarkColorHovered:u.default.checkMarkColor;return o.default.createElement("li",{key:a,className:c,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,"data-tip":s},o.default.createElement("div",{className:"et-core-control-menu__item__content"},this.props.children),n&&o.default.createElement("div",{className:"et-core-control-menu__item__check-mark"},o.default.createElement(l.default,{icon:"check",color:d})))}}])&&c(t.prototype,n),r&&c(t,r),s}(o.default.PureComponent);g(v,"propTypes",{className:a.default.string,itemKey:a.default.oneOfType([a.default.string,a.default.number]),value:a.default.oneOfType([a.default.string,a.default.number]),isSelected:a.default.bool,tooltip:a.default.string}),g(v,"defaultProps",{isSelected:!1});var y=v;t.default=y},function(e,t,n){e.exports={checkMarkColor:"#37C4AA",checkMarkColorHovered:"#FFFFFF"}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(0))&&o.__esModule?o:{default:o};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1727);var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var t,n,r,o=s(c);function c(){return i(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return a.default.createElement("li",{className:"et-core-control-menu__divider"})}}])&&l(t.prototype,n),r&&l(t,r),c}(a.default.PureComponent);t.default=f},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(0))&&o.__esModule?o:{default:o};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1729);var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var t,n,r,o=s(c);function c(){return i(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return a.default.createElement("div",{className:"et-core-divider"})}}])&&l(t.prototype,n),r&&l(t,r),c}(a.default.PureComponent);t.default=f},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(0)),a=f(n(6)),i=f(n(45));n(1731);var l=f(n(958)),u=f(n(77)),s=f(n(78)),c=f(n(27)),d=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=ETBuilderBackend.i18n.tooltips.globalPresets.presets,k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,r,a=g(i);function i(){var e;p(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(y(e=a.call.apply(a,[this].concat(n))),"onCreatePresetButtonClick",(function(){c.default.showNewPresetFromCurrentStylesDialog(),e.props.onButtonClick()})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props.onButtonClick,t=d.default.isViewGlobalPresetsAllowed();return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"et-fb-modal__preset-dropdown__buttons"},t?o.default.createElement(o.default.Fragment,null,o.default.createElement(u.default,{block:!0,inverse:!0,className:"et-fb-button--within-dropdown",_onClick:this.onCreatePresetButtonClick},w.createNewPreset),o.default.createElement(u.default,{buttonName:s.default.BUTTON_GLOBAL_PRESETS_ADD_NEW_PRESET,block:!0,inverse:!0,className:"et-fb-button--within-dropdown",__onClick:e},w.addNewPreset)):null),o.default.createElement(l.default,{videoListId:"et_pb_global_presets",onClick:e}))}}])&&h(t.prototype,n),r&&h(t,r),i}(o.default.PureComponent);_(k,"propTypes",{module:a.default.shape({props:a.default.shape({type:a.default.string.isRequired}).isRequired}).isRequired,onButtonClick:a.default.func}),_(k,"defaultProps",{onButtonClick:i.default});var O=k;t.default=O},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(0)),a=f(n(6)),i=f(n(45));n(1733);var l=f(n(77)),u=f(n(58)),s=f(n(27)),c=f(n(118)),d=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=ETBuilderBackend.i18n.tooltip.modal.globalPresets,k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,r,a=g(i);function i(){var e;p(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(y(e=a.call.apply(a,[this].concat(n))),"handleButtonClick",(function(t){t.stopPropagation(),e.props.onButtonClick()})),_(y(e),"onEditButtonClickHandler",(function(t){return e.allowLeftButtonClickOnly(t,e.onEditButtonClick)})),_(y(e),"onEditButtonClick",(function(t){e.handleButtonClick(t),s.default.editPresetStyles(e.props.id)})),_(y(e),"onSettingsButtonClickHandler",(function(t){return e.allowLeftButtonClickOnly(t,e.onSettingsButtonClick)})),_(y(e),"onSettingsButtonClick",(function(t){e.handleButtonClick(t),s.default.editPresetSettings(e.props.id)})),_(y(e),"onUpdateWithCurrentStylesButtonClickHandler",(function(t){return e.allowLeftButtonClickOnly(t,e.onUpdateWithCurrentStylesButtonClick)})),_(y(e),"onUpdateWithCurrentStylesButtonClick",(function(t){e.handleButtonClick(t);var n=e.props,r=n.title,o=n.id;s.default.updatePresetWithCurrentStyles(r,o)})),_(y(e),"onCopyButtonClickHandler",(function(t){return e.allowLeftButtonClickOnly(t,e.onCopyButtonClick)})),_(y(e),"onCopyButtonClick",(function(t){e.handleButtonClick(t),s.default.clonePreset(e.props.id)})),_(y(e),"onDeleteButtonClickHandler",(function(t){return e.allowLeftButtonClickOnly(t,e.onDeleteButtonClick)})),_(y(e),"onDeleteButtonClick",(function(t){e.handleButtonClick(t);var n=e.props,r=n.title,o=n.id;s.default.deletePreset(r,o)})),_(y(e),"onAssignAsDefaultButtonClickHandler",(function(t){return e.allowLeftButtonClickOnly(t,e.onAssignAsDefaultButtonClick)})),_(y(e),"onAssignAsDefaultButtonClick",(function(t){e.handleButtonClick(t);var n=e.props,r=n.title,o=n.id;s.default.assignPresetToDefault(r,o)})),_(y(e),"allowLeftButtonClickOnly",(function(e,t){1===e.nativeEvent.which?t(e):e.stopPropagation()})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.isDefault,r=e.isSelected,a=d.default.isViewGlobalPresetsAllowed();return o.default.createElement("div",{className:"et-core-control-menu__item__content--customized"},o.default.createElement("div",{className:"et-core-control-menu__item__text-wrapper"},t),o.default.createElement(o.default.Fragment,null),a?o.default.createElement(o.default.Fragment,null,o.default.createElement(l.default,{onMouseDown:this.onEditButtonClickHandler,tooltip:w.editPresetStyles},o.default.createElement(u.default,{icon:"pencil",color:"white"})),o.default.createElement(l.default,{onMouseDown:this.onSettingsButtonClickHandler,tooltip:w.presetSettings,className:"et-fb-button--preset-settings"},o.default.createElement(u.default,{icon:"setting",color:"white"})),o.default.createElement(l.default,{onMouseDown:this.onUpdateWithCurrentStylesButtonClickHandler,tooltip:w.updateWithCurrentStyles},o.default.createElement(u.default,{icon:"update-with-current-styles",color:"white"})),o.default.createElement(l.default,{onMouseDown:this.onCopyButtonClickHandler,tooltip:w.duplicatePreset},o.default.createElement(u.default,{icon:"copy",color:"white"})),o.default.createElement(l.default,{className:"et-fb-button--delete-preset",onMouseDown:this.onDeleteButtonClickHandler,tooltip:w.deletePreset},o.default.createElement(u.default,{icon:"delete",color:"white"})),o.default.createElement(l.default,{onMouseDown:this.onAssignAsDefaultButtonClickHandler,tooltip:w.assignAsDefault,className:"et-core-control-menu__item__button--star"},o.default.createElement(u.default,{icon:"star",color:"white"}))):o.default.createElement(u.default,{icon:"star",color:"white",className:"et-fb-icon--based-on-indicator"}),n&&r&&o.default.createElement("div",{className:"et-core-control-menu__item__icon-wrapper"},o.default.createElement(u.default,{icon:"check",color:c.default.checkMark})),n&&o.default.createElement(u.default,{icon:"star",color:c.default.button,className:"et-core-control-menu__item__icon--star"}))}}])&&h(t.prototype,n),r&&h(t,r),i}(o.default.PureComponent);_(k,"propTypes",{id:a.default.string.isRequired,isDefault:a.default.bool,onButtonClick:a.default.func,isSelected:a.default.bool,title:a.default.string.isRequired}),_(k,"defaultProps",{onButtonClick:i.default});var O=k;t.default=O},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=w(n(0)),a=w(n(6)),i=w(n(45));n(1735);var l=w(n(8)),u=w(n(1513)),s=n(756),c=w(n(728)),d=w(n(1458)),f=w(n(254)),p=w(n(77)),h=w(n(58)),m=n(962),g=n(509),v=w(n(981)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(120)),b=w(n(760));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function w(e){return e&&e.__esModule?e:{default:e}}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=ETBuilderBackend.i18n.modals.globalPresets.presets,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(i,e);var t,n,r,a=S(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),T(M(t=a.call(this,e)),"onSettingMouseOver",(function(){t.setState({presetNameHovered:!0})})),T(M(t),"onSettingMouseLeave",(function(){t.setState({presetNameHovered:!1})})),T(M(t),"onPresetSettingsChange",(function(){var e=l.default.getGlobalPresetsState().presetSettingsPopup;t.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))})),T(M(t),"onSettingsClose",(function(){v.default.closePresetSettingsModal()})),T(M(t),"onSettingsSave",(function(){var e=l.default.getModuleEdit(),n=t.state,r=n.presetId,o=n.presetName,a=n.presetDefaultName,i=n.isPresetDefault,u=n.isMakingClone,s=n.isAssignToDefaultHidden,c=o||a;y.isOn(i)&&!s?v.default.savePresetSettings():t.state.isMakingPresetFromCurrentStyles?v.default.confirmCreatePresetFromCurrentStyles(e,c,y.isOn(i)):v.default.confirmSavePresetSettings(e,r,c,y.isOn(i),u)})),T(M(t),"onPresetSettingChange",(function(e,t){v.default.presetSettingChange(e,t)})),T(M(t),"onPresetTitleReset",(function(){t.onPresetSettingChange("presetName",t.state.presetDefaultName)})),t.state={isVisible:!1,presetId:null,presetName:"",presetDefaultName:"",isPresetDefault:"off",presetNameHovered:!1,isAssignToDefaultHidden:!1,isMakingClone:!1,isMakingPresetFromCurrentStyles:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){l.default.addGlobalPresetsSettingsChangeListener(this.onPresetSettingsChange)}},{key:"componentWillUnmount",value:function(){l.default.removeGlobalPresetsSettingsChangeListener(this.onPresetSettingsChange)}},{key:"componentDidUpdate",value:function(e,t){t.isVisible!==this.state.isVisible&&this.handleSettingsVisibilityChange()}},{key:"handleSettingsVisibilityChange",value:function(){this.state.isVisible?(0,m.disableGlobalPageScroll)("et-core-popup__wrapper--visible"):(0,m.enableGlobalPageScroll)("et-core-popup__wrapper--visible")}},{key:"getRootDocument",value:function(){return(0,m.getBody)()[0]}},{key:"render",value:function(){var e=this.state,t=e.isVisible,n=e.presetName,r=e.presetDefaultName,a=e.isPresetDefault,i=e.presetNameHovered,l=e.isAssignToDefaultHidden,m=this.props,g=m.anchor,v=m.onMouseEnter,y=m.onMouseLeave;return o.default.createElement(u.default,{anchor:g,animation:"popup",getDocument:this.getRootDocument,ignoreDocumentClicks:!0,offsetV:b.default.modal.headerDropdownVOffset,visible:t,onClose:this.onSettingsClose},o.default.createElement("div",{className:"et-fb-preset-settings__wrapper"},o.default.createElement("div",{className:"et-fb-modal__title et-fb-preset-settings__title"},x.presetSettings),o.default.createElement(s.ETBuilderFormGroup,{onMouseEnterGroup:this.onSettingMouseOver,onMouseLeaveGroup:this.onSettingMouseLeave},o.default.createElement(s.ETBuilderFormLabel,{isResetActive:n!==r,hoveredGroup:i,onClickReset:this.onPresetTitleReset},x.presetName),o.default.createElement(c.default,{name:"presetName",default:r,value:n,defaultIfEmpty:!0,_onChange:this.onPresetSettingChange})),!l&&o.default.createElement(s.ETBuilderFormGroup,null,o.default.createElement(s.ETBuilderFormLabel,null,x.assignPresetToDefault.title),o.default.createElement(d.default,{name:"isPresetDefault",options:x.assignPresetToDefault.options,value:a,_onChange:this.onPresetSettingChange})),o.default.createElement(f.default,{block:!0},o.default.createElement(p.default,{block:!0,danger:!0,tooltip:ETBuilderBackend.i18n.tooltip.modal.cancel,_onClick:this.onSettingsClose},o.default.createElement(h.default,{icon:"exit",color:"#FFFFFF"})),o.default.createElement(p.default,{block:!0,success:!0,tooltip:ETBuilderBackend.i18n.tooltip.modal.save,_onClick:this.onSettingsSave,onMouseEnter:v,onMouseLeave:y},o.default.createElement(h.default,{icon:"check",color:"#FFFFFF"})))))}}])&&O(t.prototype,n),r&&O(t,r),i}(o.default.PureComponent);T(j,"propTypes",{anchor:a.default.shape({current:g.validateRefType}),onMouseEnter:a.default.func,onMouseLeave:a.default.func}),T(j,"defaultProps",{onMouseEnter:i.default,onMouseLeave:i.default});var D=j;t.default=D},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=g(n(52)),i=g(n(1)),l=g(n(41)),u=g(n(118)),s=g(n(77)),c=g(n(78)),d=g(n(847)),f=g(n(8)),p=g(n(761)),h=n(3),m=n(758);function g(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(v,e);var t,n,r,g=w(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),S(O(t=g.call(this,e)),"setHoveredState",(0,a.default)((function(){t.isComponentMounted&&t.setState({hovered:!0})}),50)),S(O(t),"unsetHoveredState",(0,a.default)((function(){t.isComponentMounted&&t.setState({hovered:!1})}),50)),S(O(t),"handleLayerMouseEnter",(function(){t.unsetHoveredState.cancel(),t.isHovered()||t.setHoveredState()})),S(O(t),"handleLayerMouseLeave",(function(){t.setHoveredState.cancel(),t.isHovered()&&t.unsetHoveredState()})),t.containerRef=o.default.createRef(),t.slug="layers-view-add-button",t.state={index:null},t.isComponentMounted=!1,t.handleAddButton=t.handleAddButton.bind(O(t)),t}return t=v,(n=[{key:"componentDidMount",value:function(){this.isComponentMounted=!0}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,l.default)(e,this.props)||!(0,l.default)(t,this.state)}},{key:"componentWillUnmount",value:function(){this.isComponentMounted=!1}},{key:"isHovered",value:function(){return this.state.hovered}},{key:"handleAddButton",value:function(e){(0,m.handleAddLayerButton)(e,this,this.handleAddButton,{isParent:!0})}},{key:"render",value:function(){if(d.default.isFilterActive())return null;var e,t=this.props,n=(0,h.getComponentType)(t),r="column"===n&&t.isColumnSpecialty;(0,h.is)("fullwidth",t)||"column"===n&&!r?e="et_pb_module":("section"===n||r)&&(e="et_pb_row"),this.module={props:(0,m.prepareProps)(this.props,{type:e})};var a=this.module.props,l=(0,i.default)(ETBuilderBackend,"i18n.tooltip.".concat((0,h.getComponentType)(a))),g={buttonName:c.default.TAB_BUTTON_MODULE_ADD,parentModule:{props:(0,m.prepareProps)(t,f.default.getComponentAtAddress(t.address))},tooltip:l.addButton,ink:!1,block:!0,stopPropagation:!0,_onClick:this.handleAddButton},v={color:(0,m.getColorCode)(a),backgroundColor:(0,p.default)(u.default.layerBackground,this.isHovered()?1:.6)};return o.default.createElement("div",{className:"et-fb-layers-view--layer lv-add-button"},o.default.createElement("div",{className:"et-fb-layers-view--header"},o.default.createElement("div",{className:"et-fb-button-group et-fb-layers-view--toggle"}),o.default.createElement("div",{className:"et-fb-layers-view--content",onMouseEnter:this.handleLayerMouseEnter,onMouseLeave:this.handleLayerMouseLeave,style:{backgroundColor:v.backgroundColor},role:"presentation"},o.default.createElement(s.default,y({style:{color:v.color}},g),l.addButton)),o.default.createElement("div",{className:"et-fb-layers-view--add"})))}}])&&b(t.prototype,n),r&&b(t,r),v}(o.Component);S(E,"propTypes",{}),S(E,"defaultProps",{});var M=E;t.default=M},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=R(n(0)),i=n(89),l=D(n(6)),u=D(n(18)),s=n(42),c=D(n(118)),d=D(n(27)),f=D(n(77)),p=D(n(254)),h=D(n(29)),m=D(n(78)),g=D(n(370)),v=D(n(58)),y=D(n(847)),b=D(n(451)),_=D(n(8)),w=D(n(137)),k=D(n(763)),O=D(n(761)),C=D(n(730)),S=D(n(1514)),E=R(n(3)),M=n(765),P=n(120),T=n(373),x=n(758),j=n(1740);function D(e){return e&&e.__esModule?e:{default:e}}function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function e(t,n){if((0,s.get)(t,"globalParent")!==(0,s.get)(n,"globalParent"))return!0;if((0,s.get)(t,"lockedParent")!==(0,s.get)(n,"lockedParent"))return!0;if((0,s.get)(t,"hash")!==(0,s.get)(n,"hash"))return!0;if((0,s.size)((0,s.get)(t,"children"))!==(0,s.size)((0,s.get)(n,"children")))return!0;for(var r=0;r<(0,s.size)((0,s.get)(t,"children"));r+=1)if(e((0,s.get)(t,"children.".concat(r,".props")),(0,s.get)(n,"children.".concat(r,".props"))))return!0;return!1},U=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(L,t);var n,r,l,D=F(L);function L(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,L),H(W(t=D.call(this,e)),"requestAnimationFrameID",null),H(W(t),"setHoveredState",(0,s.debounce)((function(){t.isComponentMounted&&(t.setState({hovered:!0}),(0,x.highlightLayerOnBuilder)(W(t),!0))}),50)),H(W(t),"unsetHoveredState",(0,s.debounce)((function(){t.isComponentMounted&&(t.setState({hovered:!1}),(0,x.highlightLayerOnBuilder)(W(t),!1))}),50)),H(W(t),"handleLayerMouseEnter",(function(){t.unsetHoveredState.cancel(),t.isHovered()||t.setHoveredState()})),H(W(t),"handleLayerMouseLeave",(function(){t.setHoveredState.cancel(),t.isHovered()&&t.unsetHoveredState()})),t.layerRef=a.default.createRef(),t.slug="layers-view-item",t.module={props:{}},t.dragId=0,t.dragOptions={update:j.layerDragUpdate,placeholderHeight:"4px",preSortableInit:j.layerPreSortableInit,wireframeMode:!1,layersView:!0},t.state={index:null,hovered:!1,isLabelEditable:!1,isRenderItem:!1},t.isComponentMounted=!1,t.scrollTimeout=100,t.sortableTimeout=100,t.callbackLabelEditing=t.callbackLabelEditing.bind(W(t)),t.handleAddButton=t.handleAddButton.bind(W(t)),t.handleLayerClick=t.handleLayerClick.bind(W(t)),t.handleLayerDoubleClick=t.handleLayerDoubleClick.bind(W(t)),t.handleLayerRightClick=t.handleLayerRightClick.bind(W(t)),t.handleLayerSettingsClick=t.handleLayerSettingsClick.bind(W(t)),t.handleLayerToggle=t.handleLayerToggle.bind(W(t)),t.handleLayerToggleAll=t.handleLayerToggleAll.bind(W(t)),t.isLayerExpanded=t.isLayerExpanded.bind(W(t)),t.isHovered=t.isHovered.bind(W(t)),t.isLayerSelected=t.isLayerSelected.bind(W(t)),t.renderActionButtons=t.renderActionButtons.bind(W(t)),t.renderAddButton=t.renderAddButton.bind(W(t)),t.renderLabel=t.renderLabel.bind(W(t)),t.renderToggle=t.renderToggle.bind(W(t)),t.startRender=t.startRender.bind(W(t)),t._ABTestingSet=M._ABTestingSet.bind(W(t)),t}return n=L,(r=[{key:"componentDidMount",value:function(){var t=this;this.isComponentMounted=!0,this.requestAnimationFrameID=E.default.topWindow().requestAnimationFrame(this.startRender);var n=this.props.isFilterActive,r=_.default.getActiveProductTourElement();if(!n){var o=e(this.layerRef.current);(0,E.is)("section",this)?(0,P.hasValue)(r)||setTimeout((function(){(0,C.default)(o,(0,s.assign)(t.dragOptions,{isSection:!0}))}),this.sortableTimeout):(0,E.is)("row",this)?setTimeout((function(){(0,C.default)(o,(0,s.assign)(t.dragOptions,{isRow:!0}))}),this.sortableTimeout):(0,E.is)("column",this)&&((0,P.hasValue)(r)||setTimeout((function(){(0,C.default)(o,(0,s.assign)(t.dragOptions,{isColumn:!0}))}),this.sortableTimeout)),this.applyDropEffect()}}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,s.isEqual)(t,this.state)||G(e,this.props)}},{key:"componentDidUpdate",value:function(){var t=this,n=this.props.isFilterActive,r=e(this.layerRef.current),o=_.default.getActiveProductTourElement();if((0,E.is)("section",this)){if(!(0,P.hasValue)(o)){var a=b.default.shouldMultiItemMixed(this.props.address,this.props.type),i=a.isItemsMixed,l=a.newConnectWith,u=a.newChildSlug;setTimeout((function(){(0,C.default)(r,(0,s.assign)(t.dragOptions,{isSection:!0,force:!0,disabled:n,isItemsMixed:i,newConnectWith:l,newChildSlug:u}))}),this.sortableTimeout)}}else if((0,E.is)("row",this)){var c=b.default.shouldMultiItemMixed(this.props.address,this.props.type),f=c.isItemsMixed,p=c.newConnectWith,h=c.newChildSlug;setTimeout((function(){(0,C.default)(r,(0,s.assign)(t.dragOptions,{isRow:!0,force:!0,disabled:n,isItemsMixed:f,newConnectWith:p,newChildSlug:h}))}),this.sortableTimeout)}else if((0,E.is)("column",this)&&("moveModule"===o||!(0,P.hasValue)(o))){var m=(0,P.hasValue)(o)?_.default.getProductTourModule():"not_set";if("not_set"===m||(0,s.startsWith)(m,(0,s.truncate)(this.props.address,{length:3,omission:""}))){var g=b.default.shouldMultiItemMixed(this.props.address,this.props.type,r),v=g.isItemsMixed,y=g.newConnectWith,w=g.newChildSlug;setTimeout((function(){(0,C.default)(r,(0,s.assign)(t.dragOptions,{isColumn:!0,force:!0,disabled:n,isItemsMixed:v,newConnectWith:y,newChildSlug:w}))}),this.sortableTimeout)}}this.applyDropEffect(),n||(0,E.is)("column",this)||_.default.isMultiItemUpdateNeeded(this.props.address)&&setTimeout((function(){return d.default.multiSelectShouldItemUpdateData(t.props.address,t)}),0)}},{key:"componentWillUnmount",value:function(){E.default.topWindow().cancelAnimationFrame(this.requestAnimationFrameID),this.isComponentMounted=!1}},{key:"applyDropEffect",value:function(){if(!this.props.isFilterActive){var t=_.default.getDragDestination(),n=_.default.getDragId();if(t===this.props.address&&this.dragId<n){var r=e(this.layerRef.current),o=_.default.getAppPreference("builder_animation");r.hide().slideDown({duration:o?900:0,start:function(){r.css({opacity:0})},progress:function(e,t){r.css({opacity:t})},done:function(){r.css({opacity:"",display:"",height:""})}}),this.dragId=n,setTimeout((function(){return d.default.setDragDestination(null)}),0)}}}},{key:"callbackLabelEditing",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n!==this.state.isLabelEditable&&(this.setState({isLabelEditable:n}),e(t.target).closest(".et-fb-layers-view--label").toggleClass("et-fb-editable-label",n))}},{key:"isAllowedAction",value:function(e){var t=(0,s.get)(this,"props"),n=(0,s.get)(t,"attrs.global_module"),r=(0,s.get)(t,"globalParent",!1),o=(0,P.isOn)((0,s.get)(t,"attrs.locked")),a=(0,s.get)(t,"lockedParent",!1),i=(0,s.get)(t,"type"),l=(0,E.getComponentType)(t),u=function(){return!(!_.default.isAllowedAction("add_module")||!(0,T.isInteractable)(o,a,r)||!(0,T.canAddSiblings)(a,r,l))},c=_.default.isEditingLibraryItem("row");switch(e){case"add_module":if(!u())return!1;break;case"edit_module":if(!_.default.isAllowedAction("edit_module")||!(0,T.isEditable)(o,a,n,r,i))return!1;break;case"new_column":if(!(0,E.is)("column",this)||!u()||c||(0,s.get)(this,"props.isColumnSingle",!1)||(0,s.get)(this,"props.columnCount",0)>=(0,s.get)(this,"props.columnLimit",3))return!1;break;case"delete_column":if(!(0,E.is)("column",this)||!u()||c||(0,s.get)(this,"props.columnCount",0)<2)return!1;break;default:return!1}return!0}},{key:"isLayerExpanded",value:function(){var e=this.props;return e.isLayerExpanded||(0,s.get)(e,"isColumnSpecialty")||(0,x.isLibraryParent)(e)}},{key:"isFilterResult",value:function(){var e=this.props,t=e.isFilterActive,n=e.isFilterResult;return t&&n}},{key:"isFilterResultParent",value:function(){var e=this.props,t=e.isFilterActive,n=e.isFilterResult;return t&&!n}},{key:"isHovered",value:function(){return this.state.hovered}},{key:"isLayerSelected",value:function(){return this.props.isLayerSelected&&!this.isFilterResultParent()}},{key:"getWooModuleInactiveNotice",value:function(){var e=this.module.props;return!!k.default.isInactiveWooModule(e)&&h.default.getCurrentPage(["woocommerce","inactive_module_notice"],"")}},{key:"handleAddButton",value:function(e){(0,x.handleAddLayerButton)(e,this,this.handleAddButton,{scrollTimeout:this.scrollTimeout})}},{key:"handleLayerClick",value:function(e){if("pointer"!==_.default.getQuickActionsContext()){if(_.default.abIsMode("selecting"))return e.stopPropagation(),!(0,E.is)("removed",this.module)&&void((0,E.is)("column",this)||this.isFilterResultParent()||(0,x.isLayerLocked)(this)||this._ABTestingSet(this.module));var t={props:(0,x.prepareProps)(this.module.props,{skipLayer:(0,E.is)("column",this)})};b.default.shouldItemSelected(e,this.props.address,t)?e.stopPropagation():(this.isFilterResultParent()||(0,x.isLayerLocked)(this)||d.default.setActiveLayer(this.module),(0,x.scrollToLayerOnBuilder)(this))}}},{key:"handleLayerDoubleClick",value:function(e){var t=this;"pointer"!==_.default.getQuickActionsContext()&&(this.isFilterResultParent()||(0,s.get)(this,"props.isColumnSingle")||_.default.abIsMode("selecting")||(e.preventDefault(),b.default.isItemSelection(e)||this.isAllowedAction("edit_module")&&!(0,E.is)("removed",this.module)&&(clearTimeout(o),o=setTimeout((function(){return d.default.openModuleSettings(t.module)}),850))))}},{key:"handleLayerRightClick",value:function(t){_.default.abIsMode("selecting")||this.isFilterResultParent()||(0,s.get)(this,"props.isColumnSingle")||((0,x.forceSettingsClose)(this),_.default.setIsContextMenuActive(!0),_.default.setContextMenuModule(this.module),d.default.setActiveLayer(this.module),d.default.setHoveredModuleElement(this.module),e(t.target).closest(".lv-context-button").length>0&&y.default.getContextMenuCallback()(t))}},{key:"handleLayerSettingsClick",value:function(e){var t=(0,s.get)(e,"props.editingModule"),n=(0,s.get)(e,"props.additionalAttrs");_.default.isSettingsModalOpen()?((0,x.scrollToLayerOnBuilder)(t),d.default.buttonClick(e,t,void 0,n)):(0,x.scrollToLayerOnBuilder)(t,(function(){d.default.buttonClick(e,t,void 0,n)})),d.default.setActiveLayer(t)}},{key:"handleLayerToggle",value:function(e){d.default.toggleLayers(this.props.address,!this.isLayerExpanded())}},{key:"handleLayerToggleAll",value:function(e){var t=y.default.getLayerChildren(this);d.default.toggleLayers(t,this.isLayerExpanded())}},{key:"renderActionButtons",value:function(){if(this.isFilterResultParent()||(0,s.get)(this,"props.isColumnSingle"))return!1;var e,t=this.module.props,n=E.default.condition("is_rtl")&&!E.default.condition("is_no_rtl"),r=(0,E.is)("column",t)?(0,s.get)(ETBuilderBackend,"i18n.modals.layersView.column"):(0,s.get)(ETBuilderBackend,"i18n.tooltip.".concat((0,E.getComponentType)(t),".tab")),o=!_.default.abIsMode("off"),l=o&&_.default.abIsSubject(t),h=o&&_.default.abIsGoal(t),g=_.default.isMultiItemSelected(t.address),y=_.default.isMultiSelectSingleItem(),b=!g||g&&y,w=[],O={buttonName:m.default.LAYERS_VIEW_CONTEXT_MENU_BUTTON,className:"lv-context-button et-fb-button--right-menu",needEvent:!0,icon:"overflow",iconStyles:{height:28,width:15,minWidth:15,margin:n?"0 0 0 6px":"0 6px 0 0"},viewBox:"0 0 15 28",__onClick:this.handleLayerRightClick};if((0,x.isLayerLocked)(t))(0,x.isLockedParent)(t)?(w.push({buttonName:m.default.TAB_BUTTON_MODULE_UNLOCK,editingModule:this.module,className:"lv-button-place-holder",needEvent:!1,icon:"lock",tagName:"div"}),(0,E.is)("removed",t)||w.push(O)):(w.push({buttonName:!1,className:"lv-button-place-holder",needEvent:!1,icon:"lock",tagName:"div"}),w.push((0,s.assign)({},O,{buttonName:!1,className:"lv-button-place-holder",icon:"blank",tagName:"div"})));else if(b){if(this.isAllowedAction("edit_module")&&!k.default.isInactiveWooModule(t)&&!(0,E.is)("removed",t)){var C=(0,E.is)("column",t)?m.default.MODULE_ITEM_EDIT:m.default.TAB_BUTTON_MODULE_EDIT;w.push({buttonName:C,editingModule:this.module,icon:"setting",tooltip:r.settings,additionalAttrs:{isColumnLayer:(0,E.is)("column",t)},_onClick:this.handleLayerSettingsClick})}!this.isAllowedAction("add_module")||k.default.isInactiveWooModule(t)||(0,E.is)("column",t)||(0,E.is)("removed",t)||h&&!l||w.push({buttonName:m.default.TAB_BUTTON_MODULE_COPY,className:"et_fb_duplicate_module_handler",editingModule:this.module,icon:"copy",tooltip:r.duplicate}),(l||h)&&w.push({buttonName:m.default.AB_VIEW_REPORT,iconUrl:"".concat(ETBuilderBackend.images_uri,"/stats.svg"),_onClick:d.default.abViewReport}),!this.isAllowedAction("add_module")||h||l&&!_.default.abHasAdditionalSubject()||(0,E.is)("column",t)||w.push({buttonName:m.default.TAB_BUTTON_MODULE_DELETE,editingModule:this.module,icon:"delete",tooltip:r.delete}),this.isAllowedAction("new_column")&&w.push({buttonName:m.default.MODULE_ITEM_COPY,className:"et_fb_duplicate_module_handler",editingModule:this.module,icon:"copy",tooltip:r.duplicate,additionalAttrs:{isColumnLayer:!0}}),this.isAllowedAction("delete_column")&&w.push({buttonName:m.default.MODULE_ITEM_DELETE,editingModule:this.module,icon:"delete",tooltip:r.delete,additionalAttrs:{isColumnLayer:!0}}),(0,E.is)("removed",t)||w.push(O)}else this.isAllowedAction("edit_module")&&w.push({buttonName:m.default.TAB_BUTTON_MODULE_EDIT,editingModule:this.module,icon:"setting",tooltip:r.settings}),this.isAllowedAction("add_module")&&!(h||l&&!_.default.abHasAdditionalSubject())&&w.push({buttonName:m.default.TAB_BUTTON_ITEMS_DELETE,editingModule:this.module,icon:"delete",tooltip:r.delete}),w.push(O);switch(!0){case(0,x.isLayerLocked)(t):case this.isLayerSelected():e={color:c.default.white,opacity:1};break;case this.isHovered()&&!this.isLayerSelected():e={color:c.default.shuttleGrey,opacity:1};break;default:e={color:c.default.shuttleGrey,opacity:.6}}var S=_.default.getAppPreference("builder_animation"),M=300,P=(0,u.default)({"et-fb-layers-view--actions":!0});return a.default.createElement("div",{className:"et-fb-layers-view--actions-group"},!!l&&a.default.createElement("div",{className:"et-fb-layers-view__subject-wrapper"},a.default.createElement("div",{className:"et-fb-layers-view__subject-id"},(0,s.get)(t,"attrs.ab_subject_id"))),a.default.createElement(i.Motion,{defaultStyle:{opacity:0,size:.8},style:{opacity:S?(0,i.spring)(e.opacity,{stiffness:M,damping:20}):e.opacity,size:S?(0,i.spring)(1,{stiffness:M,damping:20}):1}},(function(n){return a.default.createElement(p.default,{className:P,style:{opacity:n.opacity,transform:"scale( ".concat(n.size," )")}},a.default.createElement(i.StaggeredMotion,{defaultStyles:(0,s.map)(w,(function(){return{opacity:e.opacity}})),styles:function(t){return t.map((function(n,r){return 0===r?{opacity:S?(0,i.spring)(e.opacity,{stiffness:M,damping:20}):e.opacity}:{opacity:S?(0,i.spring)(t[r-1].opacity,{stiffness:M,damping:20}):e.opacity}}))}},(function(n){return a.default.createElement(p.default,null,w.map((function(r,o){var i={};(0,s.forEach)(["_onClick","__onClick","tagName","className","additionalAttrs"],(function(e){(0,s.isEmpty)(r[e])&&!(0,s.isFunction)(r[e])||(i[e]=r[e])}));var l=(0,s.isEmpty)(r.iconStyles)?{margin:0}:r.iconStyles;return a.default.createElement(f.default,N({key:"lv-action-button-".concat(t.address,"-").concat(o),buttonName:r.buttonName,editingModule:r.editingModule,needEvent:r.needEvent,tooltip:r.tooltip,ink:(0,s.has)(r,"iconUrl"),stopPropagation:!0},i),(0,s.has)(r,"iconUrl")?a.default.createElement("object",{type:"image/svg+xml",className:"fitvidsignore",data:"".concat(ETBuilderBackend.images_uri,"/stats.svg"),width:"28",height:"16"}):a.default.createElement(v.default,{color:e.color,icon:r.icon,size:"14",style:(0,s.assign)({opacity:(0,s.isUndefined)(n[o])?e.opacity:n[o].opacity,transform:"scale(".concat((0,s.isUndefined)(n[o])?e.top:n[o].top,")")},l),viewBox:r.viewBox}))})))})))})))}},{key:"renderAddButton",value:function(){var e=this,t=this.props.isFilterActive,n=(0,E.getComponentType)(this),r=(0,u.default)({"et-fb-layers-view--add":!0});if(t||!this.isAllowedAction("add_module")||"column"===n&&!this.isAllowedAction("new_column")||_.default.abIsMode("selecting"))return a.default.createElement("div",{className:r});var o="column"===n?"row":n,l=(0,s.get)(ETBuilderBackend,"i18n.tooltip.".concat(o)),c=_.default.getAppPreference("builder_animation"),d=this.isHovered()?1:0,p=this.isHovered()?1:.5,h={buttonName:m.default.TAB_BUTTON_MODULE_ADD,editingModule:this.module,tooltip:l.addButton,ink:!1,block:!0,stopPropagation:!0,_onClick:this.handleAddButton};return"column"===n&&(h=(0,s.assign)(h,{buttonName:m.default.MODULE_ITEM_ADD_COLUMN,tooltip:l.addColumnButton,additionalAttrs:{isColumnLayer:!0,columnIndex:this.props.index+1}})),a.default.createElement("div",{className:r,onMouseEnter:this.handleLayerMouseEnter,onMouseLeave:this.handleLayerMouseLeave},a.default.createElement(i.Motion,{defaultStyle:{opacity:0,size:.5},style:{opacity:c?(0,i.spring)(d,{stiffness:300,damping:20}):d,size:c?(0,i.spring)(p,{stiffness:300,damping:20}):p}},(function(t){return a.default.createElement(f.default,N({},h,{style:{opacity:t.opacity,transform:"scale( ".concat(t.size," )")}}),a.default.createElement(v.default,{color:(0,x.getColorCode)(e),icon:"add",size:"14",style:{margin:0}}))})))}},{key:"renderToggle",value:function(){var e=this.props.isFilterActive,t=(0,u.default)({"et-fb-button-group":!0,"et-fb-layers-view--toggle":!0,"et-fb-layers-view--toggle-expanded":this.isLayerExpanded()});if((0,E.is)("module",this.props)||e)return a.default.createElement("div",{className:t});var n=E.default.condition("is_rtl")&&!E.default.condition("is_no_rtl")?"caret-left":"caret-right",r={margin:0,opacity:.5};return a.default.createElement("div",{className:t},a.default.createElement(S.default,{singleClick:this.handleLayerToggle,doubleClick:this.handleLayerToggleAll},a.default.createElement("button",{className:"et-fb-button et-fb-button--block"},a.default.createElement(v.default,{color:c.default.inactiveGrey,icon:"caret-down",size:"14",style:r}),a.default.createElement(v.default,{color:c.default.inactiveGrey,icon:n,size:"14",style:r}))))}},{key:"startRender",value:function(){this.props.isDelayRender&&this.setState({isRenderItem:!0})}},{key:"renderLabel",value:function(){var e=this.module.props,t=e.attrs,n=(0,s.get)(e,"label")?(0,s.get)(e,"label"):(0,x.getLayerName)(e),r=(0,s.get)(t,"admin_label")?(0,s.get)(t,"admin_label"):n,o=!_.default.abIsMode("off")&&_.default.abIsSubject(e),i=!1,l=this.getWooModuleInactiveNotice();if(o){var u=_.default.abGetSubjectRank(e,"percentage");i=!!(0,P.hasValue)(u)&&" (".concat(_.default.abGetSubjectRank(e,"percentage"),")")}return!this.isAllowedAction("edit_module")||this.isFilterResultParent()||(0,x.isLayerLocked)(e)||(0,E.is)("removed",e)?a.default.createElement(S.default,{singleClick:this.handleLayerClick,doubleClick:this.handleLayerDoubleClick},a.default.createElement("div",{className:"et-fb-layers-view--label"},a.default.createElement("span",{className:"lv-placeholder"},r),!!i&&a.default.createElement("span",{className:"et-fb-layers-view--percentage"},i))):a.default.createElement(S.default,{singleClick:this.handleLayerClick,doubleClick:this.handleLayerDoubleClick},a.default.createElement("div",{className:"et-fb-layers-view--label"},a.default.createElement(w.default,{defaultText:n,text:r,tagName:"span",module:this.module,allModuleProps:e,name:"admin_label",callbackEditingStatusChange:this.callbackLabelEditing}),!!l&&a.default.createElement("span",{className:"et-fb-layers-view--inactive-notice"},l),!!i&&a.default.createElement("span",{className:"et-fb-layers-view--percentage"},i)))}},{key:"render",value:function(){var e;if((0,s.get)(this.props.attrs,"_deleted")||!this.props.isLayerVisible)return null;if(this.props.isDelayRender&&!this.state.isRenderItem)return null;this.module={props:(0,x.prepareProps)(this.props,_.default.getComponentAtAddress(this.props.address))};var t=this.module.props,n=t.attrs;if(_.default.getAppPreference("hide_disabled_modules")&&(0,E.is)("disabled",t))return null;var r,o=_.default.getActiveProductTourElement(),i=!_.default.abIsMode("off"),l=i&&_.default.abIsSubject(t),d=i&&_.default.abIsGoal(t),f=_.default.isAllowedAction("move_module")&&!((0,x.isLayerLocked)(t)||t.isColumnSingle),p=b.default.shouldMultiItemMixed(t.address,t.type).isItemsMixed;switch(!0){case this.isLayerSelected()||(0,x.isLayerLocked)(t):r={color:c.default.white,backgroundColor:(0,x.getColorCode)(t)};break;case!this.isLayerSelected()&&this.isHovered():r={color:(0,x.getColorCode)(t),backgroundColor:c.default.layerBackground};break;default:r={color:(0,x.getColorCode)(t),backgroundColor:(0,O.default)(c.default.layerBackground,.6)}}var h=(H(e={"et-fb-layers-view--layer":!0,"et-fb-layers-view--has-no-child":!this.props.hasChildren,"et-fb-layers-view--expanded":this.isLayerExpanded(),"et-fb-layers-view--hidden":!t.isLayerVisible,"et-fb-layers-view--disabled":(0,E.is)("disabled",t),"et-fb-layers-view--filter-parent":this.isFilterResultParent(),"et-fb-layers-view--filter-result":this.isFilterResult(),"et-fb-layers-view--library-parent":(0,x.isLibraryParent)(t),"et-fb-layers-view--library-item":(0,x.isLibraryItem)(t),"et-fb-layers-view--ab":l,"et-fb-layers-view--ab-goal":d,"et-fb-locked":(0,x.isLayerLocked)(t),et_pb_section:(0,E.is)("section",t),et_pb_fullwidth_section:(0,E.is)("fullwidth",t),et_section_regular:(0,E.is)("regular",t),et_section_specialty:(0,E.is)("specialty",t),et_pb_row:(0,E.is)("row",t),et_pb_row_inner:(0,E.is)("row-inner",t),et_pb_column:(0,E.is)("column",t),et_pb_column_inner:(0,E.is)("column-inner",t)},"et_pb_column_".concat(n.type),(0,s.get)(t,"isColumnSpecialty",!1)),H(e,"et_pb_specialty_column",(0,s.get)(t,"isColumnSpecialty",!1)),H(e,"et_pb_column_single",(0,s.get)(t,"isColumnSingle",!1)),H(e,"et_pb_module",(0,E.is)("module",t)),H(e,"et_pb_parent_locked",(0,x.isLayerLocked)(t)&&!(0,x.isLockedParent)(t)),H(e,"et_fb_global_module",(0,x.isLayerGlobal)(t)),H(e,"et_fb_locked_module",(0,x.isLayerLocked)(t)),H(e,"et_fb_item_selected",(0,s.get)(t,"isItemMulti",!1)),H(e,"et_fb_uneditable_module",!this.isAllowedAction("edit_module")),H(e,"et_fb_container_mixed",!(0,P.hasValue)(o)&&p),H(e,"et_fb_nonexistent_module",(0,E.is)("removed",t)),e);_.default.abIsMode("off")||(_.default.abIsSubject(t)&&(h=(0,s.assign)(h,H({et_pb_ab_subject:!0},"et_pb_ab_subject_id-".concat((0,s.get)(ETBuilderBackend,"currentPage.id",""),"_").concat((0,s.get)(n,"ab_subject_id","")),!0))),_.default.abIsGoal(t)&&(h=(0,s.assign)(h,H({et_pb_ab_goal:!0},"et_pb_ab_goal-".concat((0,s.get)(ETBuilderBackend,"currentPage.id","")),!0)))),l&&(h=(0,s.assign)(h,H({},"et-fb-layers-view--ab-rank-".concat(_.default.abGetSubjectRank(t,"rank")),!0)));var m={className:(0,u.default)(h),"data-address":t.address,ref:this.layerRef};(0,s.get)(n,"global_module")&&(m["data-global-module"]=n.global_module),(0,E.is)("row",t)&&(m["data-column-count"]=(0,s.get)(t,"columnCount"),m["data-column-limit"]=(0,s.get)(t,"columnLimit"));var v={className:(0,u.default)({"et-fb-layers-view--content":!0,"et-fb-layers-view--column-content-locked":(0,s.get)(t,"isColumnSingle",!1),"et-fb-layers-view--filter-parent-content":this.isFilterResultParent(),"et-fb-layers-view--hover":this.isHovered(),"et-fb-layers-view--selected":this.isLayerSelected()}),onContextMenu:this.handleLayerRightClick,onMouseEnter:this.handleLayerMouseEnter,onMouseLeave:this.handleLayerMouseLeave,style:r};return _.default.abIsMode("selecting")&&(v.onClick=this.handleLayerClick),a.default.createElement(g.default,{componentName:t.type},a.default.createElement("div",m,!(0,P.hasValue)(n.specialty_columns)&&!(0,x.isLibraryParent)(t)&&a.default.createElement("div",{className:(0,u.default)({"et-fb-layers-view--header":!0,et_fb_move_module_handler:f,"ui-sortable-handle":f})},this.renderToggle(),a.default.createElement("div",N({role:"presentation"},v),this.renderLabel(),this.renderActionButtons()),this.renderAddButton()),this.props.children))}}])&&A(n.prototype,r),l&&A(n,l),L}(a.Component);H(U,"propTypes",{hasChildren:l.default.bool,isFilterActive:l.default.bool,isFilterResult:l.default.bool,isFilteredLayer:l.default.bool,isLayerExpanded:l.default.bool,isLayerSelected:l.default.bool,isLayerVisible:l.default.bool,isDelayRender:l.default.bool}),H(U,"defaultProps",{hasChildren:!1,isFilterActive:!1,isFilterResult:!1,isFilteredLayer:!1,isLayerExpanded:!1,isLayerSelected:!1,isLayerVisible:!1,isDelayRender:!1});var z=U;t.default=z}).call(this,n(5))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.layerPreSortableInit=t.layerDragUpdate=void 0;var r=s(n(1)),o=s(n(4)),a=s(n(14)),i=s(n(27)),l=s(n(8)),u=n(120);function s(e){return e&&e.__esModule?e:{default:e}}t.layerDragUpdate=function(t,n){var a=e(this),s=e(n.item),c=ETBuilderBackend.i18n.sortable,d=function(){a.sortable("cancel"),n.sender&&e(n.sender).sortable("cancel");var t=a.data("dragOptions");(0,r.default)(t,"isColumn")?i.default.cancelDraggingModule(!1,!0):i.default.cancelDraggingModule()};if(!l.default.abIsMode("off")){if(!l.default.isAllowedAction("ab_testing"))return i.default.setAlertModal(!0,"has_no_ab_permission"),void d();var f=(0,o.default)(e(n.sender))?e(t.target):e(n.sender),p=(0,o.default)(e(n.sender))?e(t.toElement):e(t.target),h=s.hasClass("et_pb_ab_subject"),m=s.hasClass("et_pb_ab_goal"),g=s.find(".et_pb_ab_subject").length,v=s.find(".et_pb_ab_goal").length,y=f.closest(".et_pb_ab_subject").length,b=p.closest(".et_pb_ab_subject").length,_=p.closest(".et_pb_ab_goal").length;if(m&&!h&&b)return i.default.setAlertModal(!0,"cannot_move_goal_into_subject"),void d();if(v&&b)return i.default.setAlertModal(!0,"cannot_move_goal_into_subject"),void d();if(h&&!m&&_)return i.default.setAlertModal(!0,"cannot_move_subject_into_goal"),void d();if(g&&_)return i.default.setAlertModal(!0,"cannot_move_subject_into_goal"),void d();if(m&&y)return i.default.setAlertModal(!0,"cannot_move_row_goal_out_from_subject"),void d()}if(!(0,o.default)(e(n.sender))&&a.hasClass("et_pb_row")){var w=e(t.target);if(w.attr("data-column-count")>=w.attr("data-column-limit"))return alert(c.stop_dropping_3_col_row),void d()}if((0,o.default)(e(n.sender))&&a.hasClass("et_pb_row")&&!a.find(".et_pb_column, .et_pb_column_inner").length&&s.hasClass("et_pb_column"))return alert(c.onlyColumnDraggedAway),void d();if(a.hasClass("et_pb_specialty_column")){var k=s.find(".et_pb_column").length,O=s.closest(".et_pb_specialty_column").hasClass("et_pb_column_2_3");if(!O&&k>=4||O&&k>4)return alert(c.stop_dropping_3_col_row),void d()}if(s.closest(".et_pb_row.et_fb_global_module").length&&s.hasClass("et_fb_global_module"))return alert(c.global_module_alert),void d();if((s.closest(".et_pb_section.et_fb_global_module").length||s.closest(".et_pb_row.et_fb_global_module").length)&&s.hasClass("et_fb_global_module"))return alert(c.global_module_alert),void d();var C=e(n.item[0]),S=e(t.target),E=C.is(".et_fb_global_module")||C.closest(".et_fb_global_module").length>0,M=S.is(".et_fb_global_module")||S.closest(".et_fb_global_module").length>0,P=C.is(".et_fb_global_module")?C:C.closest(".et_fb_global_module"),T=S.is(".et_fb_global_module")?S:S.closest(".et_fb_global_module"),x=P.attr("data-address"),j=T.attr("data-address"),D=P.attr("data-global-module"),L=T.attr("data-global-module"),R=x!==j,N=(0,u.hasValue)(L)&&D===L;E&&M&&R&&N&&d()};t.layerPreSortableInit=function(e,t,n){if(t.isRow?(t.address=n.attr("data-address"),t.connectWith=".et-fb-layers-view--expanded.et_pb_row:not(.et_pb_parent_locked)",t.child=".et_pb_column",t.childSlug="column",t.handle="> .et_fb_move_module_handler"):t.isColumn?e.hasClass("et_pb_specialty_column")?(t.connectWith=".et-fb-layers-view--expanded.et_pb_specialty_column:not(.et_pb_parent_locked), .et-fb-layers-view--expanded.et_section_regular",t.child=".et_pb_row_inner, > .et_pb_row",t.childSlug="row-inner",t.handle="> .et_fb_move_module_handler"):(t.connectWith=".et-fb-layers-view--expanded.et_pb_column:not(.et_pb_specialty_column, .et_pb_parent_locked)",t.child=".et_pb_module",t.childSlug="module",t.handle="> .et_fb_move_module_handler"):(t.address=n.attr("data-address"),e.hasClass("et_pb_fullwidth_section")?(t.connectWith=".et-fb-layers-view--expanded.et_pb_fullwidth_section",t.child=".et_pb_module",t.childSlug="fullwidth-module",t.handle="> .et_fb_move_module_handler"):(t.connectWith=".et-fb-layers-view--expanded.et_pb_specialty_column:not(.et_pb_parent_locked), .et-fb-layers-view--expanded.et_section_regular",t.child=".et_pb_row, > .et_pb_row_inner",t.childSlug="row-inner",t.handle="> .et_fb_move_module_handler")),(0,a.default)(e.data("uiSortable"))||(e.sortable("destroy"),e.removeClass("et_fb_container_mixed")),t.isItemsMixed&&(e.addClass("et_fb_container_mixed"),t.connectWith=(0,o.default)(t.newConnectWith)?t.connectWith:t.newConnectWith,t.childSlug=(0,o.default)(t.newChildSlug)?t.childSlug:t.newChildSlug,t.isColumn?e.hasClass("et_pb_specialty_column")?(t.child=".et_pb_row_inner.et_fb_item_selected",t.handle="> .et_fb_move_module_handler"):t.child=".et_pb_module.et_fb_item_selected":e.hasClass("et_pb_fullwidth_section")?t.child=".et_pb_module.et_fb_item_selected":(t.child=".et_pb_row.et_fb_item_selected",t.handle="> .et_fb_move_module_handler")),e.is(".et_fb_global_module"))if(t.isColumn){var r=n.closest(".et_fb_global_module"),i=r.attr("data-global-module"),l=r.attr("data-address"),u=r.is(".et_pb_section")?".et_pb_section":".et_pb_row",s=t.connectWith;t.connectWith=["".concat(u,":not(.et_fb_global_module) ").concat(s),"".concat(u,'.et_fb_global_module[data-address="').concat(l,'"] ').concat(s),"".concat(u,".et_fb_global_module:not(").concat(u,'[data-global-module="').concat(i,'"][data-address!="').concat(l,'"]) ').concat(s)].join(", ")}else{var c=e.attr("data-global-module"),d=e.attr("data-address"),f=t.connectWith;t.connectWith=["".concat(f,":not(.et_fb_global_module)"),"".concat(f,'.et_fb_global_module[data-address="').concat(d,'"]'),"".concat(f,".et_fb_global_module:not(").concat(f,'[data-global-module="').concat(c,'"][data-address!="').concat(d,'"])')].join(", ")}return t}}).call(this,n(5))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=n(89),i=h(n(18)),l=h(n(6)),u=h(n(4));n(1746);var s=h(n(27)),c=(h(n(8)),h(n(77))),d=h(n(58)),f=h(n(990)),p=h(n(370));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=ETBuilderBackend.i18n,O={className:l.default.string,currentVideo:l.default.number,currentVideoList:l.default.string,modalPosition:l.default.object,modalWidth:l.default.number,modalMoving:l.default.bool},C=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(m,t);var n,r,l,h=y(m);function m(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(e=h.call(this)).state={videoHover:!1},e._handleVideoMouseEnter=e._handleVideoMouseEnter.bind(_(e)),e._handleVideoMouseLeave=e._handleVideoMouseLeave.bind(_(e)),e._renderUndockButton=e._renderUndockButton.bind(_(e)),e._handleAnimation=e._handleAnimation.bind(_(e)),e._handleClickItem=e._handleClickItem.bind(_(e)),e}return n=m,(r=[{key:"_handleVideoMouseEnter",value:function(){this.props.modalMoving||this.setState({videoHover:!0})}},{key:"_handleVideoMouseLeave",value:function(){this.setState({videoHover:!1})}},{key:"_handleAnimation",value:function(e,t){return this.props.animate?e:t}},{key:"_handleClickItem",value:function(t){t.preventDefault(),e(t.currentTarget).closest(".et-fb-tabs__panel--active").animate({scrollTop:0},300);var n=parseInt(t.currentTarget.getAttribute("data-index"),10);s.default.setVideo(n)}},{key:"_renderUndockButton",value:function(){var e=this.props,t=e.helpModalState,n=e.modalPosition,r=e.modalWidth,i=e.videoOverlayStatus,l=this.state.videoHover,f=(0,u.default)(t)?{width:r,position:{x:n.x,y:n.y}}:t;return o.default.createElement(a.Motion,{defaultStyle:{s:.5,o:0,x:15,y:15},style:{s:this._handleAnimation((0,a.spring)(l?1:.5,{stiffness:300,damping:20}),l?1:.5),o:this._handleAnimation((0,a.spring)(l?1:0,{stiffness:300,damping:20}),l?1:0),x:this._handleAnimation((0,a.spring)(l?15:0,{stiffness:300,damping:20}),l?15:0),y:this._handleAnimation((0,a.spring)(l?0:15,{stiffness:300,damping:20}),l?0:15)}},(function(e){return o.default.createElement(c.default,{round:!0,elevate:!0,primary:!0,small:!0,__onClick:function(){s.default.setVideoOverlay(f.width,f.position.x,f.position.y,!i)},style:{opacity:e.o,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px) scale(").concat(e.s,")")}},o.default.createElement(d.default,{icon:"window-undock",color:"#FFFFFF"}))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.currentVideo,a=t.currentVideoList,l=t.modalWidth,u=t.videoOverlayStatus,s=(0,i.default)("et-fb-video-list",n);return o.default.createElement("div",{className:s},o.default.createElement("div",{className:"et-fb-video-list__container"},o.default.createElement("div",{className:"et-fb-video-list__header",onMouseEnter:this._handleVideoMouseEnter,onMouseLeave:this._handleVideoMouseLeave,style:{height:.5625*(l-60)}},o.default.createElement(p.default,null,this._renderUndockButton(),u?o.default.createElement("span",null,k.video.active):function(e,t){return navigator.onLine?o.default.createElement(f.default,{dividers:!0,style:{width:"100%",height:"100%"},videoId:k.videos[e][t].id}):o.default.createElement("span",null,k.video.offline)}(a,r))),o.default.createElement("ul",{className:"et-fb-video-list__menu"},o.default.createElement(p.default,null,Object.keys(k.videos[a]).map((function(t){return o.default.createElement("li",{className:(0,i.default)({"et-fb-video-list__item":!0,"et-fb-video-list__item--active":r===parseInt(t,10)}),key:"video-".concat(t),"data-index":t,onClick:e._handleClickItem},o.default.createElement("div",{className:"et-fb-video-list__icon"}),o.default.createElement("span",null,k.videos[a][t].name))}))))))}}])&&g(n.prototype,r),l&&g(n,l),m}(o.Component);C.propTypes=O,C.defaultProps={currentVideo:1,currentVideoList:"et_pb_default"};var S=C;t.default=S}).call(this,n(5))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=M(n(0)),a=M(n(732)),i=M(n(5)),l=M(n(18)),u=M(n(1)),s=M(n(10)),c=M(n(41)),d=M(n(4)),f=M(n(94)),p=M(n(40)),h=M(n(13)),m=M(n(14)),g=M(n(2)),v=M(n(977)),y=n(1515),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(3)),_=M(n(394)),w=M(n(1752)),k=M(n(27)),O=M(n(1754)),C=M(n(8)),S=M(n(29));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function M(e){return e&&e.__esModule?e:{default:e}}function P(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1755);var B=(0,y.withOneRender)("div"),F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(E,e);var t,n,r,y=D(E);function E(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),A(R(t=y.call(this,e)),"state",{local_layouts:{},custom_layouts:{},account_status_error:"",account_auth_failed:!1,et_username:"",et_api_key:"",username_field_help_active:!1,api_key_field_help_active:!1,hovered_field_group:null,ajax_in_progress:!1}),A(R(t),"tabs",[{name:["library","Premade Layouts"],className:"modules_all"},{name:["library","Your Saved Layouts"],className:"modules_library"}]),A(R(t),"_hasActiveAccount",(function(){return"active"===t.account.status})),A(R(t),"onAccountStatusError",(function(e){t.setState({account_status_error:e}),t.props.pageChanged(!0)})),A(R(t),"onAuthenticationComplete",(function(e){if(t.state.account_status_error){if(t.setState({ajax_in_progress:!1}),e.authenticated)return t.account={et_username:t.state.et_username,et_api_key:t.state.et_api_key,status:e.status},t.setState({account_status_error:""}),t.library.call("retryUseLayout"),void k.default.updateETAccount(t.account);t.setState({account_auth_failed:!0})}})),A(R(t),"onChangeAccountFields",(function(e,n){n!==t.state[e]&&t.setState(A({},e,n))})),A(R(t),"onClickAccountSubmit",(function(){var e={et_username:t.state.et_username,et_api_key:t.state.et_api_key};t.setState({ajax_in_progress:!0}),t.library.call("authenticate",e)})),A(R(t),"onClickHelpButton",(function(){k.default.setVideoList("et_pb_default_layouts",1,"library")})),A(R(t),"onDismissedAccountStatusError",(function(){return t.setState({account_status_error:""})})),A(R(t),"onDownloadProgress",(function(e){(e=Math.floor(e/2))<1&&(e=1),t.props._onChange("importProgress",e)})),A(R(t),"onLayoutsDataFetched",(function(e,n){var r=(0,d.default)(t.state.local_layouts);t.setState({local_layouts:e,custom_layouts:n},(function(){r&&t.props.doneLoading()}))})),A(R(t),"onPageChanged",(function(e){var n=t.current_page.previous_url;t.current_page=e,t.current_page.previous_url||(t.current_page.previous_url=n),t.props.pageChanged(e.is_layout)})),A(R(t),"onUseLayout",(function(e){if(C.default.isProductTourActive()&&(0,i.default)("body").trigger("et_fb_product_tour_element_clicked"),(0,h.default)(e))var n=e.layout,r=e.replace_content;else n=e;(0,p.default)(n)?(n=new v.default([n],"layout.json",{type:"application/json"}),t.props._onChange({importFile:n,importOptions:{replaceLayout:r}}),setTimeout(t.props.importLayout,150)):(r="on"===r,O.default.getLayout(n).then((function(e){k.default.insertSavedModule(e,!0,r)})))})),t.account=C.default.getETAccount(),t.site_url=ETBuilderBackend.site_url,t.library=null,t.$library=(0,i.default)(),t.library_url=t._getLibraryURL(),t.inside_iframe=!1,t.current_page={},O.default.addLayoutsDataFetchedListener(t.onLayoutsDataFetched),b.default.appWindow().onAccountStatusError=t.onAccountStatusError;var n=S.default.getLayoutsTabs();return(0,h.default)(n)&&!(0,d.default)(n)&&(0,s.default)(n,(function(e,n){return t.tabs.push({name:e,className:n})})),t}return t=E,(n=[{key:"_getLibraryURL",value:function(){var e=[],t={animation:C.default.getAppPreference("builder_animation"),iframe:1};return this.props.isProductTour&&(t.product_tour=1),(0,s.default)(t,(function(t,n){return e.push("et_".concat(n,"=").concat(t))})),e=e.join("&"),"".concat(ETBuilderBackend.diviLibraryUrl,"?").concat(e)}},{key:"_loadLibrary",value:function(){return a.default.debug=!1,new a.default({container:this.node,url:this._getLibraryURL()})}},{key:"_setLayoutsData",value:function(){if((0,d.default)(O.default.layouts_data.local_layouts))k.default.fetchLayoutsData();else{var e=O.default.layouts_data.local_layouts,t=O.default.layouts_data.custom_layouts;this.setState({local_layouts:e,custom_layouts:t})}}},{key:"UNSAFE_componentWillMount",value:function(){this._setLayoutsData()}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.default.enableScrollLock(),b.default.$appWindow().on("et-fb-product-tour-skip",(function(t,n){e.library.call("productTourSkipStep",n)})),this._loadLibrary().then((function(t){if(e.mounted&&(e.library=t,e.$library=(0,i.default)(t.frame),e.$library.height(e.props.height-96).width(e.props.width),(0,b.isIEOrEdge)()&&(e.$library.onload=function(){e.$library.contentWindow.location.reload(),e.$library.onload=null}),e.library.on("current_page_changed",e.onPageChanged),e.library.on("use_layout",e.onUseLayout),e.library.on("download_progress",e.onDownloadProgress),e.library.on("account_status_error",e.onAccountStatusError),e.library.on("authentication_complete",e.onAuthenticationComplete),e.library.on("help_button_clicked",e.onClickHelpButton),e.library.call("setAccount",{username:(0,b.sanitized_previously)(e.account.et_username),api_key:(0,b.sanitized_previously)(e.account.et_api_key)}),e.library.call("setShowLoadOptions",!e.isCurrentLayoutEmpty()),(0,d.default)(e.state.local_layouts)?k.default.fetchLayoutsData():(e.props.doneLoading(),e._setLayoutsData()),!(0,m.default)(e.props.layoutFilters))){var n=(0,g.default)(e.props.layoutFilters)?e.props.layoutFilters:[e.props.layoutFilters];e.library.call("emitSignal",{signal:"categoriesFilterChanged",data:{value:n}})}}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.backToLayouts&&this.state.account_status_error&&(e.active_tab!==this.props.active_tab&&this.$library.hide(0),this.setState({account_status_error:""}),this.props.pageChanged(!0))}},{key:"componentDidUpdate",value:function(e){this.props.width!==e.width&&this.$library.width(this.props.width),this.props.height!==e.height&&this.$library.height(this.props.height-96)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.library&&this.library.destroy(),O.default.removeLayoutsDataFetchedListener(this.onLayoutsDataFetched),b.default.disableScrollLock()}},{key:"isCurrentLayoutEmpty",value:function(){return 0===(0,i.default)("#et_pb_root").find(".et_pb_module, .et-fb-skeleton--collapsed").length||C.default.isProductTourActive()}},{key:"shouldComponentUpdate",value:function(e,t){var n=e.active_tab!==this.props.active_tab,r=e.active_tab===this.props.active_tab&&"modules_all"===e.active_tab;if(this.library&&e.backToLayouts&&!this.state.account_status_error&&!n)this.library.call("goTo",this.current_page.previous_url);else if(this.library&&(n||!r)){var o;switch(e.active_tab){case"modules_all":o={};break;case"modules_library":o=this.state.local_layouts||{};break;default:o=(0,u.default)(this.state.custom_layouts,e.active_tab,{})}"modules_all"!==e.active_tab&&(0,d.default)(o)||((0,f.default)(o,"filters.type",this.props.type),(0,f.default)(o,"load_options.show",!this.isCurrentLayoutEmpty()),this.library.call("toggleLocalLayouts",o)),n&&this.state.account_status_error&&this.$library.fadeIn()}return!(0,c.default)(this.props,e)||!(0,c.default)(this.state,t)}},{key:"_renderAccountStatusError",value:function(){return o.default.createElement(w.default,{status:this.state.account_status_error,authFailed:this.state.account_auth_failed,onClickSubmitButton:this.onClickAccountSubmit,onChangeAccountFields:this.onChangeAccountFields,ajaxInProgress:this.state.ajax_in_progress})}},{key:"render",value:function(){var e,t=this,n=(0,l.default)({"et-fb-library-container":!0,"et-fb-portability__content--hidden":this.props.isLoadingLayout||this.state.account_status_error}),r=(0,l.default)({"et-fb-main-settings":!0,"et-fb-main-settings--load_layout":!0,"et-fb-main-settings--error":this.state.account_status_error,"et-fb-main-settings--moving":this.props.modalMoving});return o.default.createElement("div",{className:r},(e=this.props)._renderTabs.apply(e,P(this.tabs)),this.props.isLoadingLayout&&this.props._renderProgressBar(),this.state.account_status_error&&this._renderAccountStatusError(),o.default.createElement(_.default,{isLoading:this.props.isLoading}),o.default.createElement("div",{className:n},o.default.createElement(B,{_ref:function(e){return t.node=e}})))}}])&&x(t.prototype,n),r&&x(t,r),E}(o.default.Component);A(F,"displayName","ETBuilderLibraryModal");var I=(0,y.withPortability)(F,"download");t.default=I},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(0)),a=f(n(15)),i=f(n(1)),l=f(n(41)),u=f(n(13)),s=f(n(27)),c=f(n(8)),d=f(n(1516));f(n(3));function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1751);var E=ETBuilderBackend.i18n.tooltips;var M=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"upload";return n=t=function(t){b(f,t);var n=w(f);function f(){var e;g(this,f);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return S(O(e=n.call.apply(n,[this].concat(a))),"state",{exportFileName:ETBuilderBackend.postTitle||"Divi Builder Layout",importOptions:m({replaceLayout:"on",importBackUp:"off",addToLibrary:"off"},c.default.isSaveGlobalPresetsAllowed()&&{includeGlobalPresets:"off"}),exportOptions:{applyGlobalPresets:"off"},importFile:void 0,importLayoutName:"",importError:"",importProgress:0,importEstimation:1,importCategories:"",importNewCategory:""}),S(O(e),"_onChange",(function(t,n){if((0,u.default)(t))e.setState(t);else{var r={};r[t]=n,e.setState(r)}})),S(O(e),"exportLayout",(function(){e._onChange("exportError",""),s.default.exportLayout(e.state),s.default.togglePortabilityProgressBar("export",!0)})),S(O(e),"importFileName",(function(){return(0,i.default)(e.state,"importFile.name",E.noFile)})),S(O(e),"importLayout",(function(){e._onChange("importError",""),s.default.importLayout(e.state),s.default.togglePortabilityProgressBar("import",!0)})),S(O(e),"onExportError",(function(t){return e._onChange({exportError:t})})),S(O(e),"onImportError",(function(t){return e._onChange({importError:t})})),S(O(e),"onExportProgress",(function(t,n){e._onChange({exportProgress:t,exportEstimation:n})})),S(O(e),"onImportProgress",(function(t,n){"download"===r&&(t=t/2+50),e._onChange({importProgress:t,importEstimation:n})})),S(O(e),"_renderProgressBar",(function(){return o.default.createElement(d.default,{progress:e.state.importProgress,time_remaining:e.state.importEstimation})})),e}return y(f,[{key:"componentDidMount",value:function(){c.default.addImportProgressListener(this.onImportProgress),c.default.addImportErrorListener(this.onImportError),c.default.addExportProgressListener(this.onExportProgress),c.default.addExportErrorListener(this.onExportError);var e=c.default.getDroploaderPayloadPortability();e&&this.setState({active_tab:"modules_library",importOptions:(0,a.default)(this.state.importOptions,e.details.importOptions),importFile:e.details.importFile})}},{key:"componentWillUnmount",value:function(){c.default.removeImportProgressListener(this.onImportProgress),c.default.removeImportErrorListener(this.onImportError),c.default.removeExportProgressListener(this.onExportProgress),c.default.removeExportErrorListener(this.onExportError)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,l.default)(this.props,e)||!(0,l.default)(this.state,t)}},{key:"render",value:function(){var t=this.state.importProgress>0;return o.default.createElement("div",{className:"et-fb-with-portability"},o.default.createElement(e,p({isLoadingLayout:t,_renderProgressBar:this._renderProgressBar,_onChange:this._onChange,exportLayout:this.exportLayout,importFileName:this.importFileName,importLayout:this.importLayout},this.state,this.props)))}}]),f}(o.default.Component),S(t,"displayName","withPortability(".concat(e.displayName,")")),n};t.default=M},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(0)),a=c(n(18)),i=c(n(58)),l=c(n(77)),u=c(n(728)),s=n(756);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1753);var b=ETBuilderBackend.i18n,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(m,e);var t,n,r,c=h(m);function m(){var e;d(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(g(e=c.call.apply(c,[this].concat(n))),"state",{username_field_help_active:!1,api_key_field_help_active:!1,hovered_field_group:null}),y(g(e),"onClickAccountFieldHelp",(function(t){var n="".concat(t,"_field_help_active");e.setState(y({},n,!e.state[n]))})),y(g(e),"onMouseEnterFieldGroup",(function(t){e.setState({hovered_field_group:t})})),y(g(e),"onMouseLeaveFieldGroup",(function(t){e.state.hovered_field_group===t&&e.setState({hovered_field_group:null})})),e}return t=m,(n=[{key:"_renderSubmitButton",value:function(){var e=o.default.createElement(i.default,{icon:"loading",color:"#FFFFFF"});return o.default.createElement(l.default,{_onClick:this.props.onClickSubmitButton,inverse:!0},this.state.ajax_in_progress||b.library.Submit,this.state.ajax_in_progress&&e)}},{key:"_renderAPIKeyFormGroup",value:function(){return o.default.createElement(s.ETBuilderFormGroup,{name:"api_key",onMouseEnterGroup:this.onMouseEnterFieldGroup,onMouseLeaveGroup:this.onMouseLeaveFieldGroup},o.default.createElement(s.ETBuilderFormLabel,{name:"api_key",activeHelp:this.state.api_key_field_help_active,hoveredGroup:"api_key"===this.state.hovered_field_group,onClickHelp:this.onClickAccountFieldHelp},b.library["API Key"]),o.default.createElement(s.ETBuilderFormDescription,{active:this.state.api_key_field_help_active},b.library.$apiKeyHelp),o.default.createElement(u.default,{type:"text",value:this.props.et_api_key,name:"et_api_key",_onChange:this.props.onChangeAccountFields}))}},{key:"_renderUsernameFormGroup",value:function(){return o.default.createElement(s.ETBuilderFormGroup,{name:"username",onMouseEnterGroup:this.onMouseEnterFieldGroup,onMouseLeaveGroup:this.onMouseLeaveFieldGroup},o.default.createElement(s.ETBuilderFormLabel,{name:"username",activeHelp:this.state.username_field_help_active,hoveredGroup:"username"===this.state.hovered_field_group,onClickHelp:this.onClickAccountFieldHelp},b.library.Username),o.default.createElement(s.ETBuilderFormDescription,{active:this.state.username_field_help_active},b.library.$usernameHelp),o.default.createElement(u.default,{type:"text",value:this.props.et_username,name:"et_username",_onChange:this.props.onChangeAccountFields}))}},{key:"_renderExpiredAccountError",value:function(){return o.default.createElement("div",{className:"et-fb-account-status-error__content"},o.default.createElement("p",{dangerouslySetInnerHTML:{__html:b.library.$expiredAccount}}))}},{key:"_renderNoAccountError",value:function(){return o.default.createElement("div",{className:"et-fb-account-status-error__content"},o.default.createElement("p",null,b.library.$noAccount),this._renderUsernameFormGroup(),this._renderAPIKeyFormGroup(),o.default.createElement("div",null,this._renderSubmitButton()))}},{key:"render",value:function(){var e="expired"===this.props.status,t=e?b.library["Uh Oh!"]:b.library["Authentication Required"],n={"et-fb-account-status-error":!0,"et-fb-account-status-error--auth-failed":this.props.authFailed};return o.default.createElement("div",{className:(0,a.default)(n)},o.default.createElement("h2",null,t),e&&this._renderExpiredAccountError(),e||this._renderNoAccountError())}}])&&f(t.prototype,n),r&&f(t,r),m}(o.default.Component);t.default=_},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(211),o=f(n(5)),a=f(n(759)),i=f(n(1)),l=f(n(167)),u=f(n(213)),s=f(n(3)),c=f(n(78)),d=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)({LAYOUTS_DATA_FETCHED:null,LAYOUT_USED:null}),h={is_loading:!1,layouts_data:{local_layouts:{},custom_layouts:{}},library:null},m={emitLayoutsDataFetched:function(){s.default.log("emitted LAYOUTS_DATA_FETCHED","store_emit","info"),g.emit(p.LAYOUTS_DATA_FETCHED,h.layouts_data.local_layouts,h.layouts_data.custom_layouts)},fetchLayoutsData:function(){var e=this;h.is_loading=!0;var t={type:"POST",url:ETBuilderBackend.ajaxUrl,dataType:"json",data:{action:"et_builder_library_get_layouts_data",postId:ETBuilderBackend.postId,nonce:ETBuilderBackend.nonces.libraryLayoutsData}};o.default.ajax(t).done((function(t){h.layouts_data.local_layouts=(0,i.default)(t,"data.layouts_data",h.layouts_data.local_layouts),h.layouts_data.custom_layouts=(0,i.default)(t,"data.custom_layouts_data",h.layouts_data.custom_layouts),h.is_loading=!1,e.emitLayoutsDataFetched()}))},onLibraryItemSaved:function(){m.fetchLayoutsData()}},g={__proto__:r.EventEmitter.prototype,get is_loading(){return h.is_loading},get layouts_data(){return(0,l.default)(h.layouts_data)},emitLayoutUsed:function(e){s.default.log("emitted LAYOUT_USED","store_emit","info"),g.emit(p.LAYOUT_USED,e)},addLayoutsDataFetchedListener:function(e){this.on(p.LAYOUTS_DATA_FETCHED,e)},addLayoutUsedListener:function(e){this.on(p.LAYOUT_USED,e)},getLayout:function(e){var t=new XMLHttpRequest;t.addEventListener("progress",(function(e){if(e.lengthComputable){var t=Math.floor(Number(e.loaded/e.total*100));100===t&&(t=99),d.default.emitImportProgress(t,1)}}));var n={xhr:function(){return t},type:"POST",url:ETBuilderBackend.ajaxUrl,dataType:"json",data:{action:"et_builder_library_get_layout",nonce:ETBuilderBackend.nonces.libraryGetLayout,id:e}};return new Promise((function(e){o.default.ajax(n).done((function(t){setTimeout((function(){d.default.emitImportProgress(100,1),e(t.data||{})}),350)}))}))},removeLayoutsDataFetchedListener:function(e){this.removeListener(p.LAYOUTS_DATA_FETCHED,e)},removeLayoutUsedListener:function(e){this.removeListener(p.LAYOUT_USED,e)},reduce:function(e){switch(e.actionType){case c.default.LIBRARY_FETCH_LAYOUTS_DATA:h.is_loading||m.fetchLayoutsData()}}};g._dispatchToken=u.default.register(g.reduce),(0,o.default)(window).on("et_fb_shortcode_object_loaded",(function(e){d.default.removeLibraryItemSavedListener(m.onLibraryItemSaved),d.default.addLibraryItemSavedListener(m.onLibraryItemSaved)}));var v=g;t.default=v},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n(0)),a=k(n(18)),i=k(n(1)),l=k(n(4)),u=(k(n(122)),k(n(14))),s=k(n(35)),c=k(n(126)),d=k(n(71)),f=n(136),p=k(n(27)),h=k(n(394)),m=k(n(1516)),g=k(n(728)),v=k(n(958)),y=k(n(1459)),b=k(n(3)),_=n(1515),w=["addToLibrary"];function k(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function C(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=ETBuilderBackend.i18n.tooltips,B=ETBuilderBackend.saveModuleLibraryCategories,F=new f.AllHtmlEntities,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(_,e);var t,n,r,f=j(_);function _(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),N(L(t=f.call(this,e)),"_getFilePlaceholderClassName",(function(){return(0,a.default)({"et-core-portability-import-placeholder":!0,"et-fb-portability-import-placeholder--active":!(0,l.default)((0,i.default)(t.props,"importFile.name",""))})})),N(L(t),"_onChange",(function(e,n){var r;switch(e){case"importOptions":var o=E(n.split("|"),3);r={importOptions:{addToLibrary:"off",replaceLayout:o[0],importBackUp:o[1],includeGlobalPresets:o[2]}};break;case"exportOptions":r={exportOptions:{applyGlobalPresets:E(n.split("|"),1)[0]}}}t.props._onChange(r)})),N(L(t),"onImportLayout",(function(e){e.preventDefault(),t.props.importLayout()})),N(L(t),"onExportLayout",(function(e){e.preventDefault(),t.props.exportLayout()})),N(L(t),"onFileUpload",(function(e){var n=(0,i.default)(e,"target.files[0]",""),r=n?n.name.replace(".json",""):"";t.props._onChange({importFile:n,importLayoutName:r})})),N(L(t),"getTabName",(function(){return"modules_all"===t.props.active_tab?"export":"import"})),N(L(t),"componentDidUpdate",(function(e){100===t.props.importProgress&&e.hasProgressBar&&!t.props.hasProgressBar&&t.setState({hasImportCompletedCheckmark:!0}),!e.importError&&t.props.importError&&p.default.togglePortabilityProgressBar("import",!1)})),N(L(t),"_renderCategories",(function(){return!(!B||0===B.length)&&o.default.createElement(o.Fragment,null,o.default.createElement("div",{className:"et-fb-import-categories-field"},o.default.createElement("h3",null,ETBuilderBackend.i18n.saveModuleLibraryAttrs.addToCatText,":"),o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(y.default,{value:t.props.importCategories,name:"importCategories",options:(0,s.default)(B,(function(e){return e.name})),shortcut_index:"import-categories",_onChange:t.props._onChange}))),o.default.createElement("div",{className:"et-fb-export-file-name-field"},o.default.createElement("h3",null,ETBuilderBackend.i18n.saveModuleLibraryAttrs.createCatText),o.default.createElement(g.default,{type:"text",value:t.props.importNewCategory,name:"importNewCategory",_onChange:t.props._onChange})))})),N(L(t),"_renderExportTab",(function(){var e=(0,i.default)(window,"et_gd_extras.apply_on_export",!1),n=(0,c.default)(t.props.exportOptions,(function(t,n){return"applyGlobalPresets"!==n||e})),r=(0,s.default)(n,(function(e,t){return{value:A.portabilityTabs.export[t],label:A.portabilityTabs.export[t],className:t}})),a=(0,d.default)(n).join("|");return o.default.createElement("div",{className:t.props.tabClassName("modules_all")},o.default.createElement("div",{className:"et-fb-export-file-name-field"},o.default.createElement("h3",null,A.exportName),o.default.createElement(g.default,{type:"text",value:t.props.exportFileName,name:"exportFileName",_onChange:t.props._onChange})),o.default.createElement("div",{className:"et-fb-export-error-container"},t.props.exportError),r.length?o.default.createElement("div",{className:"et-fb-portability-options-field"},o.default.createElement("h3",null,A.portabilityOptions),o.default.createElement(y.default,{value:a,name:"exportOptions",options:r,_onChange:t._onChange})):null,o.default.createElement(v.default,{videoListId:"et_pb_portability",trigger:"tooltip"}),o.default.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:t.onExportLayout},A.exportButton))})),N(L(t),"_renderImportTab",(function(){var e=t.props.importOptions,n=e.addToLibrary,r=S(e,w),a=(0,s.default)(r,(function(e,t){return{value:A.portabilityTabs.import[t],label:F.decode(A.portabilityTabs.import[t]),className:t}})),i=(0,d.default)(r).join("|");return o.default.createElement("div",{className:t.props.tabClassName("modules_library")},o.default.createElement("div",{className:"et-fb-upload-file-container"},o.default.createElement("h3",null,A.chooseFile),o.default.createElement("span",{className:t._getFilePlaceholderClassName()},t.props.importFileName()),o.default.createElement("input",{type:"file",className:"et-fb-import-file",onChange:t.onFileUpload})),o.default.createElement("div",{className:"et-fb-import-error-container"},t.props.importError),o.default.createElement("div",{className:"et-fb-portability-options-field"},o.default.createElement("h3",null,A.portabilityOptions),o.default.createElement(y.default,{value:i,name:"importOptions",options:a,_onChange:t._onChange})),b.default.isOn(n)&&t._renderImportNameField(),b.default.isOn(n)&&t._renderCategories(),o.default.createElement(v.default,{videoListId:"et_pb_portability",trigger:"tooltip"}),o.default.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:t.onImportLayout},A.importButton))})),N(L(t),"_renderImportNameField",(function(){return o.default.createElement("div",{className:"et-fb-export-file-name-field"},o.default.createElement("h3",null,A.layoutName),o.default.createElement(g.default,{type:"text",value:t.props.importLayoutName,default:t.props.importLayoutName,name:"importLayoutName",_onChange:t.props._onChange}))})),N(L(t),"_renderProgress",(function(){var e=t.getTabName();return o.default.createElement(m.default,{name:e,progress:(0,i.default)(t.props,"".concat(e,"Progress"),0),time_remaining:(0,i.default)(t.props,"".concat(e,"Estimation"),1),renderStart:0})})),N(L(t),"_renderModalContent",(function(){return t.props.hasProgressBar||t.props.preloadingItems||t.state.hasImportCompletedCheckmark?t._renderProgress():o.default.createElement(h.default,{isLoading:t.props.preloadingItems},t._renderExportTab(),t._renderImportTab())})),t.state={hasImportCompletedCheckmark:!1},t.tabs=[{name:"tooltips.export",className:"modules_all"},{name:"tooltips.import",className:"modules_library"}],t}return t=_,(n=[{key:"render",value:function(){var e,t=!(0,u.default)(this.props.maxHeight)&&this.props.maxHeight>0?{maxHeight:this.props.maxHeight}:"",n=this.props.hasProgressBar||this.state.hasImportCompletedCheckmark?{height:(0,i.default)(t,"maxHeight",200),position:"relative"}:{};return o.default.createElement("div",{className:"et-fb-main-settings et-fb-main-settings--portability"},(e=this.props)._renderTabs.apply(e,C(this.tabs)),o.default.createElement("div",{className:"et-fb-settings-options-wrap et_fb_save_module_modal",style:t},o.default.createElement("div",{className:"et-fb-settings-options",style:n},this._renderModalContent())))}}])&&T(t.prototype,n),r&&T(t,r),_}(o.default.Component);N(I,"displayName","ETBuilderPortabilityModal"),N(I,"defaultProps",{hasProgressBar:!1,importProgress:0,importEstimation:1,exportProgress:0,exportEstimation:1});var W=(0,_.withPortability)(I);t.default=W},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=g(n(0)),o=g(n(339)),a=g(n(18)),i=g(n(4)),l=g(n(14)),u=g(n(15)),s=g(n(10)),c=g(n(1)),d=n(136),f=g(n(3)),p=g(n(58)),h=g(n(8)),m=g(n(27));g(n(78));function g(e){return e&&e.__esModule?e:{default:e}}var v=new d.AllHtmlEntities,y=(0,o.default)({displayName:"ETBuilderModuleItem",render:function(){if(!h.default.isAllowedAction(this.props.label))return!1;var e,t,n,o=(e={},t="".concat(this.props.label.replace("et_pb_","et_fb_")),n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),l=this.props.specialtyLayout,s="",d="",m="",g="",y="";(0,i.default)(l)||(s=l.layoutFormat,d=l.layoutType.split(","),m=l.specialtyColumns,y=this.props.label,o.et_fb_specialty_layout_item=!0,g=l.columns.map((function(e,t){var n="et_pb_layout_column",o=t+e;n+=" et_pb_column_layout_".concat(e);var a="",i="",l="";return"1"===d[t]?(n+=" et_pb_variations et_pb_".concat(m,"_variations"),a=r.default.createElement("div",{className:"et_pb_variation et_pb_variation_full"}),i=r.default.createElement("div",{className:"et_pb_variation_row"},r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_2"}),r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_2"})),3===m&&(l="2_3,1_3"===y||"1_3,2_3"===y?r.default.createElement("div",{className:"et_pb_variation_row"},r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"})):r.default.createElement("div",{className:"et_pb_variation_row"},r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"}),r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"}),r.default.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"})))):n+=" et_pb_specialty_column",r.default.createElement("div",{className:n,key:o},a,i,l)})));var b=f.default.hasValue(this.props.iconSvg)?r.default.createElement(p.default,{iconSvg:this.props.iconSvg}):"",_=r.default.createElement("span",{className:"et_module_title"}," ",v.decode((0,c.default)(this,"props.title",""))," ");return""!==g&&(_=g),this.props.itemIndex===this.props.selectedItemIndex&&(o["et-fb-selected-item"]=!0),f.default.hasValue(this.props.icon)&&(o["et-fb-has-icon"]=!0),f.default.hasValue(this.props.iconSvg)&&(o["et-fb-has-svg-icon"]=!0),o=(0,u.default)(o,this.props.classnames),r.default.createElement("li",{className:(0,a.default)(o),onClick:this._onClick,"data-layout":s,"data-specialty":d,"data-specialty_columns":m,onMouseEnter:this._onMouseEnter,"data-icon":this.props.icon},b,_)},_onClick:function(){(h.default.abIsMode("off")||"layout"!==(0,c.default)(this,"props.label"))&&("function"==typeof this.props.onClickAction?this.props.onClickAction(this.props):this.performModuleAdding())},_onMouseEnter:function(){(0,l.default)(this.props.onMouseEnter)||this.props.onMouseEnter(this.props.itemIndex)},performModuleAdding:function(){var e=this.props.specialtyLayout,t=(0,i.default)(e)?this.props.label:"et_pb_specialty_layout_".concat(e.layoutFormat),n=(0,i.default)(e)?"":e.layoutType;if(this.props.savedShortcode){var r={};return(0,u.default)(r,this.props.savedShortcode[0]),""===this.props.globalID||this.props.isAddingIntoGlobal||(r=this.prepareGlobalModule(r)),"et_pb_row_inner"===this.props.label&&(r.type="et_pb_row_inner"),m.default.insertSavedModule(r),void m.default.cancelTooltip()}m.default.insertNewModule(t,"",n,this.props.fbSupport),"et_fb_specialty"!==this.props.label&&m.default.cancelTooltip()},prepareGlobalModule:function(e,t){var n=this,r=n.props.globalID;return t?e.attrs.global_parent=r:e.attrs.global_module=r,!(0,i.default)(e.content)&&Array.isArray(e.content)&&(0,s.default)(e.content,(function(e){n.prepareGlobalModule(e,!0)})),e}});t.default=y},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=g(n(0)),a=g(n(37)),i=g(n(18)),l=g(n(10)),u=g(n(4)),s=g(n(1)),c=g(n(14)),d=g(n(27)),f=g(n(8)),p=g(n(728)),h=g(n(1459)),m=g(n(958));function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=ETBuilderBackend.saveModuleLibraryCategories,E=ETBuilderBackend.i18n.saveModuleLibraryAttrs,M=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(O,t);var n,r,g,w=_(O);function O(){var t;v(this,O);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return C(k(t=w.call.apply(w,[this].concat(r))),"state",{template_name:"",selected_cats:"",make_global:"off",new_category_name:"",name_error:"",sync_error:""}),C(k(t),"setFieldClass",(function(){var e={},n=""!==t.state.name_error;return e["et-fb-settings-option-container"]=!0,!0===n&&(e["et-fb-settings-option-container-input-error"]=!0),(0,i.default)(e)})),C(k(t),"isGlobalOptionSupported",(function(){var e=f.default.getModuleLibrarySave();if("root"===e||f.default.isGlobalLibraryPage())return!1;var t=(0,s.default)(e,"props.attrs");return!!t&&(!t.global_module&&!t.global_parent)})),C(k(t),"getCategoriesNamesArray",(function(){var e=S,t=[];return(0,u.default)(e)||(0,l.default)(e,(function(e){t.push(e.name)})),t})),C(k(t),"_onInput",(function(e,n){var r=n;switch(e){case"template_name":t.setState({name_error:""===n?"on":""})}t.setState(C({},e,r))})),C(k(t),"_onSave",(function(n){var r=t.state;n.preventDefault(),""===r.template_name?(t.setState({name_error:"on"}),e(a.default.findDOMNode(k(t))).animate({scrollTop:0},1e3,"swing"),e(a.default.findDOMNode(k(t))).find("#et-fb-template_name").trigger("focus")):(d.default.performLibraryModuleSaving(r),d.default.cancelTooltip())})),t}return n=O,(r=[{key:"_renderCategories",value:function(){return 0!==this.getCategoriesNamesArray().length&&o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("label",null,E.addToCatText,":"),o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(h.default,{value:this.state.selected_cats,name:"selected_cats",options:this.getCategoriesNamesArray(),shortcut_index:"library-categories",_onChange:this._onInput})))}},{key:"render",value:function(){var e,t=f.default.getModuleLibrarySave(),n="root"!==t?t.props:t,r=!(0,c.default)(this.props.maxHeight)&&this.props.maxHeight>0?{maxHeight:this.props.maxHeight}:"",a="";return e="root"===n?E.descriptionTextLayout:E.descriptionText,this.isGlobalOptionSupported()&&(a=o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("label",null,E.globalTitle,":"),o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(h.default,{value:this.state.make_global,name:"make_global",options:[E.globalText],shortcut_index:"make-global",_onChange:this._onInput})))),o.default.createElement("div",{className:"et-fb-settings-options-wrap",style:r},o.default.createElement("div",{className:"et-fb-settings-options"},o.default.createElement("p",{className:"et-fb-description-text"},e),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("label",null,E.templateName,":"),o.default.createElement("div",{className:this.setFieldClass()},o.default.createElement(p.default,{type:"text",value:this.state.template_name,name:"template_name",_onChange:this._onInput}))),a,this._renderCategories(),o.default.createElement("div",{className:"et-fb-settings-option"},o.default.createElement("label",null,E.createCatText,":"),o.default.createElement("div",{className:"et-fb-settings-option-container"},o.default.createElement(p.default,{type:"text",value:this.state.new_category_name,name:"new_category_name",_onChange:this._onInput})),o.default.createElement(m.default,{videoListId:"et_pb_save_to_library",trigger:"tooltip"})),o.default.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:this._onSave},E.saveText)))}}])&&y(n.prototype,r),g&&y(n,g),O}(o.default.Component);t.default=M}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(0)),o=f(n(339)),a=(f(n(37)),f(n(18))),i=f(n(23));n(1760);f(n(91));var l=f(n(14)),u=f(n(35)),s=f(n(10)),c=f(n(259)),d=f(n(27));function f(e){return e&&e.__esModule?e:{default:e}}var p=(0,o.default)({displayName:"ETBuilderSettingsColumn",mixin:[i.default],render:function(){var e=this,t=this.props.row,n=t.props.section_parent,o=ETBuilderBackend.columnLayouts,i=(0,l.default)(o[n])?[]:o[n],d="specialty"===n?"":(0,u.default)(t.props.children,(function(e){return e.attrs.type})).join(",");if("specialty"===n){var f=[],p=i[t.props.specialty_layout].columns;(0,s.default)((0,c.default)(p),(function(e){var t=[];e+=1;(0,s.default)((0,c.default)(e),(function(n){var r=1===e?"4_4":"1_".concat(e);t.push(r)})),f.push(t.join(","))})),i=f}this.props.setMaxItemIndex(i.length,"modules_all");var h=i.map((function(t,o){var i=t,l=(0,u.default)(i.split(","),(function(e){return e.split("_")})),s={};i===d&&(s["et-fb-column-layout--selected"]=!0),e.props.selectedItemIndex===o+1&&(s["et-fb-selected-item"]=!0),s["et-fb-product-tour-element"]="selectRow"===e.props.currentTourElement&&"1_3,1_3,1_3"===i;var c=l.map((function(e,t){var a=parseInt(e[0])/parseInt(e[1])*100,l={width:"".concat(a,"%")};return r.default.createElement("span",{key:"blocks-".concat(o,"-").concat(t),"data-layout":i,className:"column-block-wrap",style:l},r.default.createElement("span",{className:"column-block","data-layout":i,"data-section":n},e[0],"/",e[1]))}));return r.default.createElement("li",{className:(0,a.default)(s),"data-layout":i,onClick:e._onClickAction,onMouseUp:e._onMouseUp,key:"column-".concat(o)},c)}));return r.default.createElement("ul",{className:"et-fb-columns-layout"},h)},_onMouseUp:function(e){this._onClickAction(e),d.default.cancelTooltip()},_onClickAction:function(e){var t=e.target.getAttribute("data-layout"),n="specialty"===this.props.row.props.section_parent?"et_pb_row_inner":"et_pb_row";(0,l.default)(this.props._onClick)?this._changeStructure(e,t):this.props._onClick(t,n)},_changeStructure:function(e,t){e.target.getAttribute("data-layout");d.default.rowColumnChange(this.props.row,t)}});t.default=p},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){}])]);
//# sourceMappingURL=bundle.modals.7e5c9fac.js.map